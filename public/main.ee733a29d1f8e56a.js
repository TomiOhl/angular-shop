"use strict";(self.webpackChunkkotprog=self.webpackChunkkotprog||[]).push([[179],{2011:(it,Ce,k)=>{k.d(Ce,{Dh:()=>ce,GT:()=>fe,cc:()=>Te,hO:()=>$e,on:()=>B,pX:()=>J,xv:()=>ue});var f=k(5e3),Z=k(127),P=k(5813);it=k.hmd(it);const oe=["ngOnDestroy"],J=(ve,Ye,ze,be={})=>new Proxy(ve,{get:(me,_e)=>ze.runOutsideAngular(()=>{var je;if(ve[_e])return(null===(je=null==be?void 0:be.spy)||void 0===je?void 0:je.get)&&be.spy.get(_e,ve[_e]),ve[_e];if(oe.indexOf(_e)>-1)return()=>{};const Be=Ye.toPromise().then(ne=>{const qe=ne&&ne[_e];return"function"==typeof qe?qe.bind(ne):qe&&qe.then?qe.then(Q=>ze.run(()=>Q)):ze.run(()=>qe)});return new Proxy(()=>{},{get:(ne,qe)=>Be[qe],apply:(ne,qe,Q)=>Be.then(se=>{var ee;const Ee=se&&se(...Q);return(null===(ee=null==be?void 0:be.spy)||void 0===ee?void 0:ee.apply)&&be.spy.apply(_e,Q,Ee),Ee})})})}),fe=(ve,Ye)=>{Ye.forEach(ze=>{Object.getOwnPropertyNames(ze.prototype||ze).forEach(be=>{Object.defineProperty(ve.prototype,be,Object.getOwnPropertyDescriptor(ze.prototype||ze,be))})})};class re{constructor(Ye){return Ye}}const ce=new f.OlP("angularfire2.app.options"),ue=new f.OlP("angularfire2.app.name");function B(ve,Ye,ze){const me="object"==typeof ze&&ze||{};me.name=me.name||"string"==typeof ze&&ze||"[DEFAULT]";const je=Z.Z.apps.filter(Be=>Be&&Be.name===me.name)[0]||Ye.runOutsideAngular(()=>Z.Z.initializeApp(ve,me));try{JSON.stringify(ve)!==JSON.stringify(je.options)&&j("error",`${je.name} Firebase App already initialized with different options${it.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch(Be){}return new re(je)}const j=(ve,...Ye)=>{(0,f.X6Q)()&&"undefined"!=typeof console&&console[ve](...Ye)},Y={provide:re,useFactory:B,deps:[ce,f.R0b,[new f.FiY,ue]]};let $e=(()=>{class ve{constructor(ze){Z.Z.registerVersion("angularfire",P.q4.full,"core"),Z.Z.registerVersion("angularfire",P.q4.full,"app-compat"),Z.Z.registerVersion("angular",f.q4F.full,ze.toString())}static initializeApp(ze,be){return{ngModule:ve,providers:[{provide:ce,useValue:ze},{provide:ue,useValue:be}]}}}return ve.\u0275fac=function(ze){return new(ze||ve)(f.LFG(f.Lbi))},ve.\u0275mod=f.oAB({type:ve}),ve.\u0275inj=f.cJS({providers:[Y]}),ve})();function Te(ve,Ye,ze,be,me){const[,_e,je]=globalThis.\u0275AngularfireInstanceCache.find(Be=>Be[0]===ve)||[];if(_e)return function xe(ve,Ye){try{return ve.toString()===Ye.toString()}catch(ze){return ve===Ye}}(me,je)||(de("error",`${Ye} was already initialized on the ${ze} Firebase App with different settings.${ke?" You may need to reload as Firebase is not HMR aware.":""}`),de("warn",{is:me,was:je})),_e;{const Be=be();return globalThis.\u0275AngularfireInstanceCache.push([ve,Be,me]),Be}}const ke=!!it.hot,de=(ve,...Ye)=>{(0,f.X6Q)()&&"undefined"!=typeof console&&console[ve](...Ye)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},5813:(it,Ce,k)=>{k.d(Ce,{q4:()=>ca,iC:()=>cl,HU:()=>ll,vb:()=>fh,JM:()=>fa});var f=k(5e3),Z=k(5867),P=k(5861),oe=k(9681),J=k(2090),fe=k(4859),re=k(1877);const ce="@firebase/installations",j="w:0.5.8",Y="FIS_v2",ve=new J.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function Ye(b){return b instanceof J.ZR&&b.code.includes("request-failed")}function ze({projectId:b}){return`https://firebaseinstallations.googleapis.com/v1/projects/${b}/installations`}function be(b){return{token:b.token,requestStatus:2,expiresIn:Q(b.expiresIn),creationTime:Date.now()}}function me(b,D){return _e.apply(this,arguments)}function _e(){return(_e=(0,P.Z)(function*(b,D){const F=(yield D.json()).error;return ve.create("request-failed",{requestName:b,serverCode:F.code,serverMessage:F.message,serverStatus:F.status})})).apply(this,arguments)}function je({apiKey:b}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":b})}function Be(b,{refreshToken:D}){const M=je(b);return M.append("Authorization",function se(b){return`${Y} ${b}`}(D)),M}function ne(b){return qe.apply(this,arguments)}function qe(){return(qe=(0,P.Z)(function*(b){const D=yield b();return D.status>=500&&D.status<600?b():D})).apply(this,arguments)}function Q(b){return Number(b.replace("s","000"))}function ee(b,D){return Ee.apply(this,arguments)}function Ee(){return(Ee=(0,P.Z)(function*({appConfig:b,heartbeatServiceProvider:D},{fid:M}){const F=ze(b),z=je(b),te=D.getImmediate({optional:!0});if(te){const pt=yield te.getHeartbeatsHeader();pt&&z.append("x-firebase-client",pt)}const Ze={method:"POST",headers:z,body:JSON.stringify({fid:M,authVersion:Y,appId:b.appId,sdkVersion:j})},nt=yield ne(()=>fetch(F,Ze));if(nt.ok){const pt=yield nt.json();return{fid:pt.fid||M,registrationStatus:2,refreshToken:pt.refreshToken,authToken:be(pt.authToken)}}throw yield me("Create Installation",nt)})).apply(this,arguments)}function pe(b){return new Promise(D=>{setTimeout(D,b)})}const wt=/^[cdef][\w-]{21}$/;function tn(){try{const b=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(b),b[0]=112+b[0]%16;const M=function He(b){return function Pe(b){return btoa(String.fromCharCode(...b)).replace(/\+/g,"-").replace(/\//g,"_")}(b).substr(0,22)}(b);return wt.test(M)?M:""}catch(b){return""}}function Lt(b){return`${b.appName}!${b.appId}`}const Gn=new Map;function wn(b,D){const M=Lt(b);zt(M,D),function Vt(b,D){const M=function Qr(){return!Qn&&"BroadcastChannel"in self&&(Qn=new BroadcastChannel("[Firebase] FID Change"),Qn.onmessage=b=>{zt(b.data.key,b.data.fid)}),Qn}();M&&M.postMessage({key:b,fid:D}),function ls(){0===Gn.size&&Qn&&(Qn.close(),Qn=null)}()}(M,D)}function zt(b,D){const M=Gn.get(b);if(M)for(const F of M)F(D)}let Qn=null;const Ir="firebase-installations-store";let Ui=null;function Bi(){return Ui||(Ui=(0,J.X3)("firebase-installations-database",1,(b,D)=>{0===D&&b.createObjectStore(Ir)})),Ui}function ot(b,D){return Or.apply(this,arguments)}function Or(){return(Or=(0,P.Z)(function*(b,D){const M=Lt(b),z=(yield Bi()).transaction(Ir,"readwrite"),te=z.objectStore(Ir),Se=yield te.get(M);return yield te.put(D,M),yield z.complete,(!Se||Se.fid!==D.fid)&&wn(b,D.fid),D})).apply(this,arguments)}function qn(b){return Fn.apply(this,arguments)}function Fn(){return(Fn=(0,P.Z)(function*(b){const D=Lt(b),F=(yield Bi()).transaction(Ir,"readwrite");yield F.objectStore(Ir).delete(D),yield F.complete})).apply(this,arguments)}function Jr(b,D){return js.apply(this,arguments)}function js(){return(js=(0,P.Z)(function*(b,D){const M=Lt(b),z=(yield Bi()).transaction(Ir,"readwrite"),te=z.objectStore(Ir),Se=yield te.get(M),Ze=D(Se);return void 0===Ze?yield te.delete(M):yield te.put(Ze,M),yield z.complete,Ze&&(!Se||Se.fid!==Ze.fid)&&wn(b,Ze.fid),Ze})).apply(this,arguments)}function dn(b){return zn.apply(this,arguments)}function zn(){return(zn=(0,P.Z)(function*(b){let D;const M=yield Jr(b.appConfig,F=>{const z=cs(F),te=Yo(b,z);return D=te.registrationPromise,te.installationEntry});return""===M.fid?{installationEntry:yield D}:{installationEntry:M,registrationPromise:D}})).apply(this,arguments)}function cs(b){return Ft(b||{fid:tn(),registrationStatus:0})}function Yo(b,D){if(0===D.registrationStatus){if(!navigator.onLine)return{installationEntry:D,registrationPromise:Promise.reject(ve.create("app-offline"))};const M={fid:D.fid,registrationStatus:1,registrationTime:Date.now()},F=function Ut(b,D){return rt.apply(this,arguments)}(b,M);return{installationEntry:M,registrationPromise:F}}return 1===D.registrationStatus?{installationEntry:D,registrationPromise:mt(b)}:{installationEntry:D}}function rt(){return(rt=(0,P.Z)(function*(b,D){try{const M=yield ee(b,D);return ot(b.appConfig,M)}catch(M){throw Ye(M)&&409===M.customData.serverCode?yield qn(b.appConfig):yield ot(b.appConfig,{fid:D.fid,registrationStatus:0}),M}})).apply(this,arguments)}function mt(b){return Jn.apply(this,arguments)}function Jn(){return(Jn=(0,P.Z)(function*(b){let D=yield xi(b.appConfig);for(;1===D.registrationStatus;)yield pe(100),D=yield xi(b.appConfig);if(0===D.registrationStatus){const{installationEntry:M,registrationPromise:F}=yield dn(b);return F||M}return D})).apply(this,arguments)}function xi(b){return Jr(b,D=>{if(!D)throw ve.create("installation-not-found");return Ft(D)})}function Ft(b){return function Hs(b){return 1===b.registrationStatus&&b.registrationTime+1e4<Date.now()}(b)?{fid:b.fid,registrationStatus:0}:b}function lr(b,D){return Xn.apply(this,arguments)}function Xn(){return(Xn=(0,P.Z)(function*({appConfig:b,heartbeatServiceProvider:D},M){const F=at(b,M),z=Be(b,M),te=D.getImmediate({optional:!0});if(te){const pt=yield te.getHeartbeatsHeader();pt&&z.append("x-firebase-client",pt)}const Ze={method:"POST",headers:z,body:JSON.stringify({installation:{sdkVersion:j,appId:b.appId}})},nt=yield ne(()=>fetch(F,Ze));if(nt.ok)return be(yield nt.json());throw yield me("Generate Auth Token",nt)})).apply(this,arguments)}function at(b,{fid:D}){return`${ze(b)}/${D}/authTokens:generate`}function cr(b){return Ot.apply(this,arguments)}function Ot(){return(Ot=(0,P.Z)(function*(b,D=!1){let M;const F=yield Jr(b.appConfig,te=>{if(!Mt(te))throw ve.create("not-registered");const Se=te.authToken;if(!D&&U(Se))return te;if(1===Se.requestStatus)return M=We(b,D),te;{if(!navigator.onLine)throw ve.create("app-offline");const Ze=$(te);return M=ut(b,Ze),Ze}});return M?yield M:F.authToken})).apply(this,arguments)}function We(b,D){return De.apply(this,arguments)}function De(){return(De=(0,P.Z)(function*(b,D){let M=yield Ke(b.appConfig);for(;1===M.authToken.requestStatus;)yield pe(100),M=yield Ke(b.appConfig);const F=M.authToken;return 0===F.requestStatus?cr(b,D):F})).apply(this,arguments)}function Ke(b){return Jr(b,D=>{if(!Mt(D))throw ve.create("not-registered");return function le(b){return 1===b.requestStatus&&b.requestTime+1e4<Date.now()}(D.authToken)?Object.assign(Object.assign({},D),{authToken:{requestStatus:0}}):D})}function ut(b,D){return Nt.apply(this,arguments)}function Nt(){return(Nt=(0,P.Z)(function*(b,D){try{const M=yield lr(b,D),F=Object.assign(Object.assign({},D),{authToken:M});return yield ot(b.appConfig,F),M}catch(M){if(!Ye(M)||401!==M.customData.serverCode&&404!==M.customData.serverCode){const F=Object.assign(Object.assign({},D),{authToken:{requestStatus:0}});yield ot(b.appConfig,F)}else yield qn(b.appConfig);throw M}})).apply(this,arguments)}function Mt(b){return void 0!==b&&2===b.registrationStatus}function U(b){return 2===b.requestStatus&&!function L(b){const D=Date.now();return D<b.creationTime||b.creationTime+b.expiresIn<D+36e5}(b)}function $(b){const D={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},b),{authToken:D})}function Fe(){return(Fe=(0,P.Z)(function*(b){const D=b,{installationEntry:M,registrationPromise:F}=yield dn(D);return F?F.catch(console.error):cr(D).catch(console.error),M.fid})).apply(this,arguments)}function Wt(){return(Wt=(0,P.Z)(function*(b,D=!1){const M=b;return yield dr(M),(yield cr(M,D)).token})).apply(this,arguments)}function dr(b){return Bt.apply(this,arguments)}function Bt(){return(Bt=(0,P.Z)(function*(b){const{registrationPromise:D}=yield dn(b);D&&(yield D)})).apply(this,arguments)}function Ln(b){return ve.create("missing-app-config-values",{valueName:b})}const Jo="installations",Re=b=>{const D=b.getProvider("app").getImmediate(),M=function ji(b){if(!b||!b.options)throw Ln("App Configuration");if(!b.name)throw Ln("App Name");const D=["projectId","apiKey","appId"];for(const M of D)if(!b.options[M])throw Ln(M);return{appName:b.name,projectId:b.options.projectId,apiKey:b.options.apiKey,appId:b.options.appId}}(D);return{app:D,appConfig:M,heartbeatServiceProvider:(0,oe._getProvider)(D,"heartbeat"),_delete:()=>Promise.resolve()}},At=b=>{const D=b.getProvider("app").getImmediate(),M=(0,oe._getProvider)(D,Jo).getImmediate();return{getId:()=>function K(b){return Fe.apply(this,arguments)}(M),getToken:z=>function ft(b){return Wt.apply(this,arguments)}(M,z)}};(function un(){(0,oe._registerComponent)(new fe.wA(Jo,Re,"PUBLIC")),(0,oe._registerComponent)(new fe.wA("installations-internal",At,"PRIVATE"))})(),(0,oe.registerVersion)(ce,"0.5.8"),(0,oe.registerVersion)(ce,"0.5.8","esm2017");const er="@firebase/remote-config",Cn=new J.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class nh{constructor(D,M,F,z){this.client=D,this.storage=M,this.storageCache=F,this.logger=z}isCachedDataFresh(D,M){if(!M)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const F=Date.now()-M,z=F<=D;return this.logger.debug(`Config fetch cache check. Cache age millis: ${F}. Cache max age millis (minimumFetchIntervalMillis setting): ${D}. Is cache hit: ${z}.`),z}fetch(D){var M=this;return(0,P.Z)(function*(){const[F,z]=yield Promise.all([M.storage.getLastSuccessfulFetchTimestampMillis(),M.storage.getLastSuccessfulFetchResponse()]);if(z&&M.isCachedDataFresh(D.cacheMaxAgeMillis,F))return z;D.eTag=z&&z.eTag;const te=yield M.client.fetch(D),Se=[M.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===te.status&&Se.push(M.storage.setLastSuccessfulFetchResponse(te)),yield Promise.all(Se),te})()}}function cc(b=navigator){return b.languages&&b.languages[0]||b.language}class Ua{constructor(D,M,F,z,te,Se){this.firebaseInstallations=D,this.sdkVersion=M,this.namespace=F,this.projectId=z,this.apiKey=te,this.appId=Se}fetch(D){var M=this;return(0,P.Z)(function*(){const[F,z]=yield Promise.all([M.firebaseInstallations.getId(),M.firebaseInstallations.getToken()]),Se=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${M.projectId}/namespaces/${M.namespace}:fetch?key=${M.apiKey}`,Ze={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":D.eTag||"*"},nt={sdk_version:M.sdkVersion,app_instance_id:F,app_instance_id_token:z,app_id:M.appId,language_code:cc()},pt={method:"POST",headers:Ze,body:JSON.stringify(nt)},jt=fetch(Se,pt),Et=new Promise((Tr,Hr)=>{D.signal.addEventListener(()=>{const bi=new Error("The operation was aborted.");bi.name="AbortError",Hr(bi)})});let Sn;try{yield Promise.race([jt,Et]),Sn=yield jt}catch(Tr){let Hr="fetch-client-network";throw"AbortError"===Tr.name&&(Hr="fetch-timeout"),Cn.create(Hr,{originalErrorMessage:Tr.message})}let vn=Sn.status;const ma=Sn.headers.get("ETag")||void 0;let Ro,Cr;if(200===Sn.status){let Tr;try{Tr=yield Sn.json()}catch(Hr){throw Cn.create("fetch-client-parse",{originalErrorMessage:Hr.message})}Ro=Tr.entries,Cr=Tr.state}if("INSTANCE_STATE_UNSPECIFIED"===Cr?vn=500:"NO_CHANGE"===Cr?vn=304:("NO_TEMPLATE"===Cr||"EMPTY_CONFIG"===Cr)&&(Ro={}),304!==vn&&200!==vn)throw Cn.create("fetch-status",{httpStatus:vn});return{status:vn,eTag:ma,config:Ro}})()}}class Tp{constructor(D,M){this.client=D,this.storage=M}fetch(D){var M=this;return(0,P.Z)(function*(){const F=(yield M.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return M.attemptFetch(D,F)})()}attemptFetch(D,{throttleEndTimeMillis:M,backoffCount:F}){var z=this;return(0,P.Z)(function*(){yield function Rn(b,D){return new Promise((M,F)=>{const z=Math.max(D-Date.now(),0),te=setTimeout(M,z);b.addEventListener(()=>{clearTimeout(te),F(Cn.create("fetch-throttle",{throttleEndTimeMillis:D}))})})}(D.signal,M);try{const te=yield z.client.fetch(D);return yield z.storage.deleteThrottleMetadata(),te}catch(te){if(!function dc(b){if(!(b instanceof J.ZR&&b.customData))return!1;const D=Number(b.customData.httpStatus);return 429===D||500===D||503===D||504===D}(te))throw te;const Se={throttleEndTimeMillis:Date.now()+(0,J.$s)(F),backoffCount:F+1};return yield z.storage.setThrottleMetadata(Se),z.attemptFetch(D,Se)}})()}}class hc{constructor(D,M,F,z,te){this.app=D,this._client=M,this._storageCache=F,this._storage=z,this._logger=te,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function Lu(b,D){const M=b.target.error||void 0;return Cn.create(D,{originalErrorMessage:M&&M.message})}const gs="app_namespace_store";class xp{constructor(D,M,F,z=function Mp(){return new Promise((b,D)=>{try{const M=indexedDB.open("firebase_remote_config",1);M.onerror=F=>{D(Lu(F,"storage-open"))},M.onsuccess=F=>{b(F.target.result)},M.onupgradeneeded=F=>{0===F.oldVersion&&F.target.result.createObjectStore(gs,{keyPath:"compositeKey"})}}catch(M){D(Cn.create("storage-open",{originalErrorMessage:M}))}})}()){this.appId=D,this.appName=M,this.namespace=F,this.openDbPromise=z}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(D){return this.set("last_fetch_status",D)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(D){return this.set("last_successful_fetch_timestamp_millis",D)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(D){return this.set("last_successful_fetch_response",D)}getActiveConfig(){return this.get("active_config")}setActiveConfig(D){return this.set("active_config",D)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(D){return this.set("active_config_etag",D)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(D){return this.set("throttle_metadata",D)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(D){var M=this;return(0,P.Z)(function*(){const F=yield M.openDbPromise;return new Promise((z,te)=>{const Ze=F.transaction([gs],"readonly").objectStore(gs),nt=M.createCompositeKey(D);try{const pt=Ze.get(nt);pt.onerror=jt=>{te(Lu(jt,"storage-get"))},pt.onsuccess=jt=>{const Et=jt.target.result;z(Et?Et.value:void 0)}}catch(pt){te(Cn.create("storage-get",{originalErrorMessage:pt&&pt.message}))}})})()}set(D,M){var F=this;return(0,P.Z)(function*(){const z=yield F.openDbPromise;return new Promise((te,Se)=>{const nt=z.transaction([gs],"readwrite").objectStore(gs),pt=F.createCompositeKey(D);try{const jt=nt.put({compositeKey:pt,value:M});jt.onerror=Et=>{Se(Lu(Et,"storage-set"))},jt.onsuccess=()=>{te()}}catch(jt){Se(Cn.create("storage-set",{originalErrorMessage:jt&&jt.message}))}})})()}delete(D){var M=this;return(0,P.Z)(function*(){const F=yield M.openDbPromise;return new Promise((z,te)=>{const Ze=F.transaction([gs],"readwrite").objectStore(gs),nt=M.createCompositeKey(D);try{const pt=Ze.delete(nt);pt.onerror=jt=>{te(Lu(jt,"storage-delete"))},pt.onsuccess=()=>{z()}}catch(pt){te(Cn.create("storage-delete",{originalErrorMessage:pt&&pt.message}))}})})()}createCompositeKey(D){return[this.appId,this.appName,this.namespace,D].join()}}class pc{constructor(D){this.storage=D}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var D=this;return(0,P.Z)(function*(){const M=D.storage.getLastFetchStatus(),F=D.storage.getLastSuccessfulFetchTimestampMillis(),z=D.storage.getActiveConfig(),te=yield M;te&&(D.lastFetchStatus=te);const Se=yield F;Se&&(D.lastSuccessfulFetchTimestampMillis=Se);const Ze=yield z;Ze&&(D.activeConfig=Ze)})()}setLastFetchStatus(D){return this.lastFetchStatus=D,this.storage.setLastFetchStatus(D)}setLastSuccessfulFetchTimestampMillis(D){return this.lastSuccessfulFetchTimestampMillis=D,this.storage.setLastSuccessfulFetchTimestampMillis(D)}setActiveConfig(D){return this.activeConfig=D,this.storage.setActiveConfig(D)}}function zs(){return rh.apply(this,arguments)}function rh(){return(rh=(0,P.Z)(function*(){if(!(0,J.hl)())return!1;try{return yield(0,J.eu)()}catch(b){return!1}})).apply(this,arguments)}!function wo(){(0,oe._registerComponent)(new fe.wA("remote-config",function b(D,{instanceIdentifier:M}){const F=D.getProvider("app").getImmediate(),z=D.getProvider("installations-internal").getImmediate();if("undefined"==typeof window)throw Cn.create("registration-window");if(!(0,J.hl)())throw Cn.create("indexed-db-unavailable");const{projectId:te,apiKey:Se,appId:Ze}=F.options;if(!te)throw Cn.create("registration-project-id");if(!Se)throw Cn.create("registration-api-key");if(!Ze)throw Cn.create("registration-app-id");const nt=new xp(Ze,F.name,M=M||"firebase"),pt=new pc(nt),jt=new re.Yd(er);jt.logLevel=re.in.ERROR;const Et=new Ua(z,oe.SDK_VERSION,M,te,Se,Ze),Sn=new Tp(Et,nt),vn=new nh(Sn,nt,pt,jt),ma=new hc(F,vn,pt,nt,jt);return function yi(b){const D=(0,J.m9)(b);D._initializePromise||(D._initializePromise=D._storageCache.loadFromStorage().then(()=>{D._isInitializationComplete=!0}))}(ma),ma},"PUBLIC").setMultipleInstances(!0)),(0,oe.registerVersion)(er,"0.3.7"),(0,oe.registerVersion)(er,"0.3.7","esm2017")}();const Vu="/firebase-messaging-sw.js",ms="/firebase-cloud-messaging-push-scope",Pr="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",Ws="google.c.a.c_id",ea="google.c.a.c_l",gc="google.c.a.ts",Rp="google.c.a.e";var ys=(()=>{return(b=ys||(ys={})).PUSH_RECEIVED="push-received",b.NOTIFICATION_CLICKED="notification-clicked",ys;var b})();function ti(b){const D=new Uint8Array(b);return btoa(String.fromCharCode(...D)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function ja(b){const M=(b+"=".repeat((4-b.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),F=atob(M),z=new Uint8Array(F.length);for(let te=0;te<F.length;++te)z[te]=F.charCodeAt(te);return z}const Ha="fcm_token_details_db",tr="fcm_token_object_Store";function ih(b){return $a.apply(this,arguments)}function $a(){return $a=(0,P.Z)(function*(b){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(te=>te.name).includes(Ha))return null;let D=null;return(yield(0,J.X3)(Ha,5,function(){var F=(0,P.Z)(function*(z,te,Se,Ze){var nt;if(te<2||!z.objectStoreNames.contains(tr))return;const pt=Ze.objectStore(tr),jt=yield pt.index("fcmSenderId").get(b);if(yield pt.clear(),jt)if(2===te){const Et=jt;if(!Et.auth||!Et.p256dh||!Et.endpoint)return;D={token:Et.fcmToken,createTime:null!==(nt=Et.createTime)&&void 0!==nt?nt:Date.now(),subscriptionOptions:{auth:Et.auth,p256dh:Et.p256dh,endpoint:Et.endpoint,swScope:Et.swScope,vapidKey:"string"==typeof Et.vapidKey?Et.vapidKey:ti(Et.vapidKey)}}}else if(3===te){const Et=jt;D={token:Et.fcmToken,createTime:Et.createTime,subscriptionOptions:{auth:ti(Et.auth),p256dh:ti(Et.p256dh),endpoint:Et.endpoint,swScope:Et.swScope,vapidKey:ti(Et.vapidKey)}}}else if(4===te){const Et=jt;D={token:Et.fcmToken,createTime:Et.createTime,subscriptionOptions:{auth:ti(Et.auth),p256dh:ti(Et.p256dh),endpoint:Et.endpoint,swScope:Et.swScope,vapidKey:ti(Et.vapidKey)}}}});return function(z,te,Se,Ze){return F.apply(this,arguments)}}())).close(),yield(0,J.Lj)(Ha),yield(0,J.Lj)("fcm_vapid_details_db"),yield(0,J.Lj)("undefined"),mc(D)?D:null}),$a.apply(this,arguments)}function mc(b){if(!b||!b.subscriptionOptions)return!1;const{subscriptionOptions:D}=b;return"number"==typeof b.createTime&&b.createTime>0&&"string"==typeof b.token&&b.token.length>0&&"string"==typeof D.auth&&D.auth.length>0&&"string"==typeof D.p256dh&&D.p256dh.length>0&&"string"==typeof D.endpoint&&D.endpoint.length>0&&"string"==typeof D.swScope&&D.swScope.length>0&&"string"==typeof D.vapidKey&&D.vapidKey.length>0}const qi="firebase-messaging-store";let ta=null;function Uu(){return ta||(ta=(0,J.X3)("firebase-messaging-database",1,(b,D)=>{0===D&&b.createObjectStore(qi)})),ta}function ln(b){return Do.apply(this,arguments)}function Do(){return(Do=(0,P.Z)(function*(b){const D=Ks(b),F=yield(yield Uu()).transaction(qi).objectStore(qi).get(D);if(F)return F;{const z=yield ih(b.appConfig.senderId);if(z)return yield _s(b,z),z}})).apply(this,arguments)}function _s(b,D){return sn.apply(this,arguments)}function sn(){return(sn=(0,P.Z)(function*(b,D){const M=Ks(b),z=(yield Uu()).transaction(qi,"readwrite");return yield z.objectStore(qi).put(D,M),yield z.complete,D})).apply(this,arguments)}function yc(b){return Zs.apply(this,arguments)}function Zs(){return(Zs=(0,P.Z)(function*(b){const D=Ks(b),F=(yield Uu()).transaction(qi,"readwrite");yield F.objectStore(qi).delete(D),yield F.complete})).apply(this,arguments)}function Ks({appConfig:b}){return b.appId}const Tn=new J.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function na(b,D){return vi.apply(this,arguments)}function vi(){return(vi=(0,P.Z)(function*(b,D){const M=yield Es(b),F=lt(D),z={method:"POST",headers:M,body:JSON.stringify(F)};let te;try{te=yield(yield fetch(Fr(b.appConfig),z)).json()}catch(Se){throw Tn.create("token-subscribe-failed",{errorInfo:Se})}if(te.error)throw Tn.create("token-subscribe-failed",{errorInfo:te.error.message});if(!te.token)throw Tn.create("token-subscribe-no-token");return te.token})).apply(this,arguments)}function fr(b,D){return vs.apply(this,arguments)}function vs(){return(vs=(0,P.Z)(function*(b,D){const M=yield Es(b),F=lt(D.subscriptionOptions),z={method:"PATCH",headers:M,body:JSON.stringify(F)};let te;try{te=yield(yield fetch(`${Fr(b.appConfig)}/${D.token}`,z)).json()}catch(Se){throw Tn.create("token-update-failed",{errorInfo:Se})}if(te.error)throw Tn.create("token-update-failed",{errorInfo:te.error.message});if(!te.token)throw Tn.create("token-update-no-token");return te.token})).apply(this,arguments)}function zi(b,D){return za.apply(this,arguments)}function za(){return(za=(0,P.Z)(function*(b,D){const F={method:"DELETE",headers:yield Es(b)};try{const te=yield(yield fetch(`${Fr(b.appConfig)}/${D}`,F)).json();if(te.error)throw Tn.create("token-unsubscribe-failed",{errorInfo:te.error.message})}catch(z){throw Tn.create("token-unsubscribe-failed",{errorInfo:z})}})).apply(this,arguments)}function Fr({projectId:b}){return`https://fcmregistrations.googleapis.com/v1/projects/${b}/registrations`}function Es(b){return ws.apply(this,arguments)}function ws(){return(ws=(0,P.Z)(function*({appConfig:b,installations:D}){const M=yield D.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":b.apiKey,"x-goog-firebase-installations-auth":`FIS ${M}`})})).apply(this,arguments)}function lt({p256dh:b,auth:D,endpoint:M,vapidKey:F}){const z={web:{endpoint:M,auth:D,p256dh:b}};return F!==Pr&&(z.web.applicationPubKey=F),z}const Wa=6048e5;function ra(b){return Za.apply(this,arguments)}function Za(){return(Za=(0,P.Z)(function*(b){const D=yield Hu(b.swRegistration,b.vapidKey),M={vapidKey:b.vapidKey,swScope:b.swRegistration.scope,endpoint:D.endpoint,auth:ti(D.getKey("auth")),p256dh:ti(D.getKey("p256dh"))},F=yield ln(b.firebaseDependencies);if(F){if(Co(F.subscriptionOptions,M))return Date.now()>=F.createTime+Wa?Bu(b,{token:F.token,createTime:Date.now(),subscriptionOptions:M}):F.token;try{yield zi(b.firebaseDependencies,F.token)}catch(z){console.warn(z)}return we(b.firebaseDependencies,M)}return we(b.firebaseDependencies,M)})).apply(this,arguments)}function Ka(b){return Ya.apply(this,arguments)}function Ya(){return(Ya=(0,P.Z)(function*(b){const D=yield ln(b.firebaseDependencies);D&&(yield zi(b.firebaseDependencies,D.token),yield yc(b.firebaseDependencies));const M=yield b.swRegistration.pushManager.getSubscription();return!M||M.unsubscribe()})).apply(this,arguments)}function Bu(b,D){return ju.apply(this,arguments)}function ju(){return(ju=(0,P.Z)(function*(b,D){try{const M=yield fr(b.firebaseDependencies,D),F=Object.assign(Object.assign({},D),{token:M,createTime:Date.now()});return yield _s(b.firebaseDependencies,F),M}catch(M){throw yield Ka(b),M}})).apply(this,arguments)}function we(b,D){return xt.apply(this,arguments)}function xt(){return(xt=(0,P.Z)(function*(b,D){const F={token:yield na(b,D),createTime:Date.now(),subscriptionOptions:D};return yield _s(b,F),F.token})).apply(this,arguments)}function Hu(b,D){return gn.apply(this,arguments)}function gn(){return(gn=(0,P.Z)(function*(b,D){return(yield b.pushManager.getSubscription())||b.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:ja(D)})})).apply(this,arguments)}function Co(b,D){return D.vapidKey===b.vapidKey&&D.endpoint===b.endpoint&&D.auth===b.auth&&D.p256dh===b.p256dh}function To(b){const D={from:b.from,collapseKey:b.collapse_key,messageId:b.fcmMessageId};return function Lr(b,D){if(!D.notification)return;b.notification={};const M=D.notification.title;M&&(b.notification.title=M);const F=D.notification.body;F&&(b.notification.body=F);const z=D.notification.image;z&&(b.notification.image=z)}(D,b),function $u(b,D){!D.data||(b.data=D.data)}(D,b),function Gu(b,D){if(!D.fcmOptions)return;b.fcmOptions={};const M=D.fcmOptions.link;M&&(b.fcmOptions.link=M);const F=D.fcmOptions.analytics_label;F&&(b.fcmOptions.analyticsLabel=F)}(D,b),D}function _c(b){return"object"==typeof b&&!!b&&Ws in b}function qu(b,D){const M=[];for(let F=0;F<b.length;F++)M.push(b.charAt(F)),F<D.length&&M.push(D.charAt(F));return M.join("")}function Is(b){return Tn.create("missing-app-config-values",{valueName:b})}qu("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),qu("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class nr{constructor(D,M,F){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const z=function Qa(b){if(!b||!b.options)throw Is("App Configuration Object");if(!b.name)throw Is("App Name");const D=["projectId","apiKey","appId","messagingSenderId"],{options:M}=b;for(const F of D)if(!M[F])throw Is(F);return{appName:b.name,projectId:M.projectId,apiKey:M.apiKey,appId:M.appId,senderId:M.messagingSenderId}}(D);this.firebaseDependencies={app:D,appConfig:z,installations:M,analyticsProvider:F}}_delete(){return Promise.resolve()}}function ni(b){return Ja.apply(this,arguments)}function Ja(){return(Ja=(0,P.Z)(function*(b){try{b.swRegistration=yield navigator.serviceWorker.register(Vu,{scope:ms}),b.swRegistration.update().catch(()=>{})}catch(D){throw Tn.create("failed-service-worker-registration",{browserErrorMessage:D.message})}})).apply(this,arguments)}function bs(b,D){return Ei.apply(this,arguments)}function Ei(){return(Ei=(0,P.Z)(function*(b,D){if(!D&&!b.swRegistration&&(yield ni(b)),D||!b.swRegistration){if(!(D instanceof ServiceWorkerRegistration))throw Tn.create("invalid-sw-registration");b.swRegistration=D}})).apply(this,arguments)}function zu(b,D){return Xa.apply(this,arguments)}function Xa(){return(Xa=(0,P.Z)(function*(b,D){D?b.vapidKey=D:b.vapidKey||(b.vapidKey=Pr)})).apply(this,arguments)}function Wu(){return(Wu=(0,P.Z)(function*(b,D){if(!navigator)throw Tn.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw Tn.create("permission-blocked");return yield zu(b,null==D?void 0:D.vapidKey),yield bs(b,null==D?void 0:D.serviceWorkerRegistration),ra(b)})).apply(this,arguments)}function ia(b,D,M){return sa.apply(this,arguments)}function sa(){return(sa=(0,P.Z)(function*(b,D,M){const F=Zu(D);(yield b.firebaseDependencies.analyticsProvider.get()).logEvent(F,{message_id:M[Ws],message_name:M[ea],message_time:M[gc],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function Zu(b){switch(b){case ys.NOTIFICATION_CLICKED:return"notification_open";case ys.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function vc(){return(vc=(0,P.Z)(function*(b,D){const M=D.data;if(!M.isFirebaseMessaging)return;b.onMessageHandler&&M.messageType===ys.PUSH_RECEIVED&&("function"==typeof b.onMessageHandler?b.onMessageHandler(To(M)):b.onMessageHandler.next(To(M)));const F=M.data;_c(F)&&"1"===F[Rp]&&(yield ia(b,M.messageType,F))})).apply(this,arguments)}const Yu="@firebase/messaging",Ec=b=>{const D=new nr(b.getProvider("app").getImmediate(),b.getProvider("installations-internal").getImmediate(),b.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",M=>function Ku(b,D){return vc.apply(this,arguments)}(D,M)),D},Qs=b=>{const D=b.getProvider("messaging").getImmediate();return{getToken:F=>function eu(b,D){return Wu.apply(this,arguments)}(D,F)}};function Ic(){return Js.apply(this,arguments)}function Js(){return(Js=(0,P.Z)(function*(){try{yield(0,J.eu)()}catch(b){return!1}return"undefined"!=typeof window&&(0,J.hl)()&&(0,J.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}!function wc(){(0,oe._registerComponent)(new fe.wA("messaging",Ec,"PUBLIC")),(0,oe._registerComponent)(new fe.wA("messaging-internal",Qs,"PRIVATE")),(0,oe.registerVersion)(Yu,"0.9.12"),(0,oe.registerVersion)(Yu,"0.9.12","esm2017")}();const Ju="analytics",ry="firebase_id",oa="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",tu="https://www.googletagmanager.com/gtag/js",On=new re.Yd("@firebase/analytics");function bc(b){return Promise.all(b.map(D=>D.catch(M=>M)))}function Op(b,D){const M=document.createElement("script");M.src=`${tu}?l=${b}&id=${D}`,M.async=!0,document.head.appendChild(M)}function Ao(b,D,M,F,z,te){return Dc.apply(this,arguments)}function Dc(){return(Dc=(0,P.Z)(function*(b,D,M,F,z,te){const Se=F[z];try{if(Se)yield D[Se];else{const nt=(yield bc(M)).find(pt=>pt.measurementId===z);nt&&(yield D[nt.appId])}}catch(Ze){On.error(Ze)}b("config",z,te)})).apply(this,arguments)}function el(b,D,M,F,z){return Xs.apply(this,arguments)}function Xs(){return(Xs=(0,P.Z)(function*(b,D,M,F,z){try{let te=[];if(z&&z.send_to){let Se=z.send_to;Array.isArray(Se)||(Se=[Se]);const Ze=yield bc(M);for(const nt of Se){const pt=Ze.find(Et=>Et.measurementId===nt),jt=pt&&D[pt.appId];if(!jt){te=[];break}te.push(jt)}}0===te.length&&(te=Object.values(D)),yield Promise.all(te),b("event",F,z||{})}catch(te){On.error(te)}})).apply(this,arguments)}function Np(){const b=window.document.getElementsByTagName("script");for(const D of Object.values(b))if(D.src&&D.src.includes(tu))return D;return null}const hn=new J.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.'}),aa=new class nl{constructor(D={},M=1e3){this.throttleMetadata=D,this.intervalMillis=M}getThrottleMetadata(D){return this.throttleMetadata[D]}setThrottleMetadata(D,M){this.throttleMetadata[D]=M}deleteThrottleMetadata(D){delete this.throttleMetadata[D]}};function eo(b){return new Headers({Accept:"application/json","x-goog-api-key":b})}function Tc(b){return Qt.apply(this,arguments)}function Qt(){return(Qt=(0,P.Z)(function*(b){var D;const{appId:M,apiKey:F}=b,z={method:"GET",headers:eo(F)},te=oa.replace("{app-id}",M),Se=yield fetch(te,z);if(200!==Se.status&&304!==Se.status){let Ze="";try{const nt=yield Se.json();(null===(D=nt.error)||void 0===D?void 0:D.message)&&(Ze=nt.error.message)}catch(nt){}throw hn.create("config-fetch-failed",{httpStatus:Se.status,responseMessage:Ze})}return Se.json()})).apply(this,arguments)}function So(b){return mn.apply(this,arguments)}function mn(){return(mn=(0,P.Z)(function*(b,D=aa,M){const{appId:F,apiKey:z,measurementId:te}=b.options;if(!F)throw hn.create("no-app-id");if(!z){if(te)return{measurementId:te,appId:F};throw hn.create("no-api-key")}const Se=D.getThrottleMetadata(F)||{backoffCount:0,throttleEndTimeMillis:Date.now()},Ze=new nu;return setTimeout((0,P.Z)(function*(){Ze.abort()}),void 0!==M?M:6e4),vt({appId:F,apiKey:z,measurementId:te},Se,Ze,D)})).apply(this,arguments)}function vt(b,D,M){return Ts.apply(this,arguments)}function Ts(){return(Ts=(0,P.Z)(function*(b,{throttleEndTimeMillis:D,backoffCount:M},F,z=aa){const{appId:te,measurementId:Se}=b;try{yield Pp(F,D)}catch(Ze){if(Se)return On.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${Se} provided in the "measurementId" field in the local Firebase config. [${Ze.message}]`),{appId:te,measurementId:Se};throw Ze}try{const Ze=yield Tc(b);return z.deleteThrottleMetadata(te),Ze}catch(Ze){if(!rl(Ze)){if(z.deleteThrottleMetadata(te),Se)return On.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${Se} provided in the "measurementId" field in the local Firebase config. [${Ze.message}]`),{appId:te,measurementId:Se};throw Ze}const nt=503===Number(Ze.customData.httpStatus)?(0,J.$s)(M,z.intervalMillis,30):(0,J.$s)(M,z.intervalMillis),pt={throttleEndTimeMillis:Date.now()+nt,backoffCount:M+1};return z.setThrottleMetadata(te,pt),On.debug(`Calling attemptFetch again in ${nt} millis`),vt(b,pt,F,z)}})).apply(this,arguments)}function Pp(b,D){return new Promise((M,F)=>{const z=Math.max(D-Date.now(),0),te=setTimeout(M,z);b.addEventListener(()=>{clearTimeout(te),F(hn.create("fetch-throttle",{throttleEndTimeMillis:D}))})})}function rl(b){if(!(b instanceof J.ZR&&b.customData))return!1;const D=Number(b.customData.httpStatus);return 429===D||500===D||503===D||504===D}class nu{constructor(){this.listeners=[]}addEventListener(D){this.listeners.push(D)}abort(){this.listeners.forEach(D=>D())}}function ah(){return to.apply(this,arguments)}function to(){return(to=(0,P.Z)(function*(){if(!(0,J.hl)())return On.warn(hn.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,J.eu)()}catch(b){return On.warn(hn.create("indexeddb-unavailable",{errorInfo:b}).message),!1}return!0})).apply(this,arguments)}function Un(){return(Un=(0,P.Z)(function*(b,D,M,F,z,te,Se){var Ze;const nt=So(b);nt.then(vn=>{M[vn.measurementId]=vn.appId,b.options.measurementId&&vn.measurementId!==b.options.measurementId&&On.warn(`The measurement ID in the local Firebase config (${b.options.measurementId}) does not match the measurement ID fetched from the server (${vn.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(vn=>On.error(vn)),D.push(nt);const pt=ah().then(vn=>{if(vn)return F.getId()}),[jt,Et]=yield Promise.all([nt,pt]);Np()||Op(te,jt.measurementId),z("js",new Date);const Sn=null!==(Ze=null==Se?void 0:Se.config)&&void 0!==Ze?Ze:{};return Sn.origin="firebase",Sn.update=!0,null!=Et&&(Sn[ry]=Et),z("config",jt.measurementId,Sn),jt.measurementId})).apply(this,arguments)}class Mo{constructor(D){this.app=D}_delete(){return delete Vr[this.app.options.appId],Promise.resolve()}}let Vr={},no=[];const il={};let ii,Ss,ro="dataLayer",Bn=!1;function Yi(b,D,M){!function sl(){const b=[];if((0,J.ru)()&&b.push("This is a browser extension environment."),(0,J.zI)()||b.push("Cookies are not available."),b.length>0){const D=b.map((F,z)=>`(${z+1}) ${F}`).join(" "),M=hn.create("invalid-analytics-context",{errorInfo:D});On.warn(M.message)}}();const F=b.options.appId;if(!F)throw hn.create("no-app-id");if(!b.options.apiKey){if(!b.options.measurementId)throw hn.create("no-api-key");On.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${b.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=Vr[F])throw hn.create("already-exists",{id:F});if(!Bn){!function Zi(b){let D=[];Array.isArray(window[b])?D=window[b]:window[b]=D}(ro);const{wrappedGtag:te,gtagCore:Se}=function oh(b,D,M,F,z){let te=function(...Se){window[F].push(arguments)};return window[z]&&"function"==typeof window[z]&&(te=window[z]),window[z]=function Cc(b,D,M,F){function te(){return(te=(0,P.Z)(function*(Se,Ze,nt){try{"event"===Se?yield el(b,D,M,Ze,nt):"config"===Se?yield Ao(b,D,M,F,Ze,nt):b("set",Ze)}catch(pt){On.error(pt)}})).apply(this,arguments)}return function z(Se,Ze,nt){return te.apply(this,arguments)}}(te,b,D,M),{gtagCore:te,wrappedGtag:window[z]}}(Vr,no,il,ro,"gtag");Ss=te,ii=Se,Bn=!0}return Vr[F]=function ri(b,D,M,F,z,te,Se){return Un.apply(this,arguments)}(b,no,il,D,ii,ro,M),new Mo(b)}function ua(){return(ua=(0,P.Z)(function*(b,D,M,F,z){if(z&&z.global)b("event",M,F);else{const te=yield D;b("event",M,Object.assign(Object.assign({},F),{send_to:te}))}})).apply(this,arguments)}function oo(){return iu.apply(this,arguments)}function iu(){return(iu=(0,P.Z)(function*(){if((0,J.ru)()||!(0,J.zI)()||!(0,J.hl)())return!1;try{return yield(0,J.eu)()}catch(b){return!1}})).apply(this,arguments)}const ul="@firebase/analytics";!function lh(){(0,oe._registerComponent)(new fe.wA(Ju,(D,{options:M})=>Yi(D.getProvider("app").getImmediate(),D.getProvider("installations-internal").getImmediate(),M),"PUBLIC")),(0,oe._registerComponent)(new fe.wA("analytics-internal",function b(D){try{const M=D.getProvider(Ju).getImmediate();return{logEvent:(F,z,te)=>function xc(b,D,M,F){b=(0,J.m9)(b),function Ac(b,D,M,F,z){return ua.apply(this,arguments)}(Ss,Vr[b.app.options.appId],D,M,F).catch(z=>On.error(z))}(M,F,z,te)}}catch(M){throw hn.create("interop-component-reg-failed",{reason:M})}},"PRIVATE")),(0,oe.registerVersion)(ul,"0.7.8"),(0,oe.registerVersion)(ul,"0.7.8","esm2017")}();var Oc=k(4408),ch=k(7565);const su=new class _n extends ch.v{}(class Oi extends Oc.o{constructor(D,M){super(D,M),this.scheduler=D,this.work=M}schedule(D,M=0){return M>0?super.schedule(D,M):(this.delay=M,this.state=D,this.scheduler.flush(this),this)}execute(D,M){return M>0||this.closed?super.execute(D,M):this._execute(D,M)}requestAsyncId(D,M,F=0){return null!=F&&F>0||null==F&&this.delay>0?super.requestAsyncId(D,M,F):D.flush(this)}});var br=k(4986),ou=k(8505),Dr=k(9468),Ii=k(5363);const ca=new f.GfV("7.3.0"),Ms="__angularfire_symbol__analyticsIsSupportedValue",Br="__angularfire_symbol__analyticsIsSupported",jr="__angularfire_symbol__remoteConfigIsSupportedValue",da="__angularfire_symbol__remoteConfigIsSupported",ha="__angularfire_symbol__messagingIsSupportedValue",Nc="__angularfire_symbol__messagingIsSupported";function fa(b,D,M){if(D){if(1===D.length)return D[0];const te=D.filter(Se=>Se.app===M);if(1===te.length)return te[0]}return M.container.getProvider(b).getImmediate({optional:!0})}globalThis[Br]||(globalThis[Br]=oo().then(b=>globalThis[Ms]=b).catch(()=>globalThis[Ms]=!1)),globalThis[Nc]||(globalThis[Nc]=Ic().then(b=>globalThis[ha]=b).catch(()=>globalThis[ha]=!1)),globalThis[da]||(globalThis[da]=zs().then(b=>globalThis[jr]=b).catch(()=>globalThis[jr]=!1));const fh=(b,D)=>{const M=D?[D]:(0,Z.C6)(),F=[];return M.forEach(z=>{z.container.getProvider(b).instances.forEach(Se=>{F.includes(Se)||F.push(Se)})}),F};function ao(){}class pa{constructor(D,M=su){this.zone=D,this.delegate=M}now(){return this.delegate.now()}schedule(D,M,F){const z=this.zone;return this.delegate.schedule(function(Se){z.runGuarded(()=>{D.apply(this,[Se])})},M,F)}}class ph{constructor(D){this.zone=D,this.task=null}call(D,M){const F=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",ao,{},ao,ao)),M.pipe((0,ou.b)({next:F,complete:F,error:F})).subscribe(D).add(F)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let ll=(()=>{class b{constructor(M){this.ngZone=M,this.outsideAngular=M.runOutsideAngular(()=>new pa(Zone.current)),this.insideAngular=M.run(()=>new pa(Zone.current,br.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return b.\u0275fac=function(M){return new(M||b)(f.LFG(f.R0b))},b.\u0275prov=f.Yz7({token:b,factory:b.\u0275fac,providedIn:"root"}),b})();function Xi(){const b=globalThis.\u0275AngularFireScheduler;if(!b)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return b}function cl(b){return Xi(),function es(b){return function(M){return(M=M.lift(new ph(b.ngZone))).pipe((0,Dr.R)(b.outsideAngular),(0,Ii.Q)(b.insideAngular))}}(Xi())(b)}},2090:(it,Ce,k)=>{k.d(Ce,{$s:()=>Hs,BH:()=>Te,G6:()=>ne,L:()=>ue,LL:()=>Pe,Lj:()=>Nt,Mn:()=>je,Sg:()=>xe,UG:()=>ve,US:()=>re,X3:()=>ut,ZB:()=>Y,ZR:()=>pe,b$:()=>be,d:()=>me,eu:()=>Q,hl:()=>qe,jU:()=>Ye,m9:()=>at,ne:()=>ot,pd:()=>Ui,r3:()=>zt,ru:()=>ze,tV:()=>B,uI:()=>de,vZ:()=>ls,w1:()=>_e,xO:()=>Mi,xb:()=>Qn,z$:()=>ke,zI:()=>se,zd:()=>Ir});var f=k(5861);const J=function(U){const L=[];let $=0;for(let le=0;le<U.length;le++){let K=U.charCodeAt(le);K<128?L[$++]=K:K<2048?(L[$++]=K>>6|192,L[$++]=63&K|128):55296==(64512&K)&&le+1<U.length&&56320==(64512&U.charCodeAt(le+1))?(K=65536+((1023&K)<<10)+(1023&U.charCodeAt(++le)),L[$++]=K>>18|240,L[$++]=K>>12&63|128,L[$++]=K>>6&63|128,L[$++]=63&K|128):(L[$++]=K>>12|224,L[$++]=K>>6&63|128,L[$++]=63&K|128)}return L},re={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(U,L){if(!Array.isArray(U))throw Error("encodeByteArray takes an array as a parameter");this.init_();const $=L?this.byteToCharMapWebSafe_:this.byteToCharMap_,le=[];for(let K=0;K<U.length;K+=3){const Fe=U[K],ft=K+1<U.length,Wt=ft?U[K+1]:0,dr=K+2<U.length,Bt=dr?U[K+2]:0;let an=(15&Wt)<<2|Bt>>6,Wn=63&Bt;dr||(Wn=64,ft||(an=64)),le.push($[Fe>>2],$[(3&Fe)<<4|Wt>>4],$[an],$[Wn])}return le.join("")},encodeString(U,L){return this.HAS_NATIVE_SUPPORT&&!L?btoa(U):this.encodeByteArray(J(U),L)},decodeString(U,L){return this.HAS_NATIVE_SUPPORT&&!L?atob(U):function(U){const L=[];let $=0,le=0;for(;$<U.length;){const K=U[$++];if(K<128)L[le++]=String.fromCharCode(K);else if(K>191&&K<224){const Fe=U[$++];L[le++]=String.fromCharCode((31&K)<<6|63&Fe)}else if(K>239&&K<365){const dr=((7&K)<<18|(63&U[$++])<<12|(63&U[$++])<<6|63&U[$++])-65536;L[le++]=String.fromCharCode(55296+(dr>>10)),L[le++]=String.fromCharCode(56320+(1023&dr))}else{const Fe=U[$++],ft=U[$++];L[le++]=String.fromCharCode((15&K)<<12|(63&Fe)<<6|63&ft)}}return L.join("")}(this.decodeStringToByteArray(U,L))},decodeStringToByteArray(U,L){this.init_();const $=L?this.charToByteMapWebSafe_:this.charToByteMap_,le=[];for(let K=0;K<U.length;){const Fe=$[U.charAt(K++)],Wt=K<U.length?$[U.charAt(K)]:0;++K;const Bt=K<U.length?$[U.charAt(K)]:64;++K;const Ct=K<U.length?$[U.charAt(K)]:64;if(++K,null==Fe||null==Wt||null==Bt||null==Ct)throw Error();le.push(Fe<<2|Wt>>4),64!==Bt&&(le.push(Wt<<4&240|Bt>>2),64!==Ct&&le.push(Bt<<6&192|Ct))}return le},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let U=0;U<this.ENCODED_VALS.length;U++)this.byteToCharMap_[U]=this.ENCODED_VALS.charAt(U),this.charToByteMap_[this.byteToCharMap_[U]]=U,this.byteToCharMapWebSafe_[U]=this.ENCODED_VALS_WEBSAFE.charAt(U),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[U]]=U,U>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(U)]=U,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(U)]=U)}}},ue=function(U){return function(U){const L=J(U);return re.encodeByteArray(L,!0)}(U).replace(/\./g,"")},B=function(U){try{return re.decodeString(U,!0)}catch(L){console.error("base64Decode failed: ",L)}return null};function Y(U,L){if(!(L instanceof Object))return L;switch(L.constructor){case Date:return new Date(L.getTime());case Object:void 0===U&&(U={});break;case Array:U=[];break;default:return L}for(const $ in L)!L.hasOwnProperty($)||!$e($)||(U[$]=Y(U[$],L[$]));return U}function $e(U){return"__proto__"!==U}class Te{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((L,$)=>{this.resolve=L,this.reject=$})}wrapCallback(L){return($,le)=>{$?this.reject($):this.resolve(le),"function"==typeof L&&(this.promise.catch(()=>{}),1===L.length?L($):L($,le))}}}function xe(U,L){if(U.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const le=L||"demo-project",K=U.iat||0,Fe=U.sub||U.user_id;if(!Fe)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const ft=Object.assign({iss:`https://securetoken.google.com/${le}`,aud:le,iat:K,exp:K+3600,auth_time:K,sub:Fe,user_id:Fe,firebase:{sign_in_provider:"custom",identities:{}}},U);return[ue(JSON.stringify({alg:"none",type:"JWT"})),ue(JSON.stringify(ft)),""].join(".")}function ke(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function de(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(ke())}function ve(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(U){return!1}}function Ye(){return"object"==typeof self&&self.self===self}function ze(){const U="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof U&&void 0!==U.id}function be(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function me(){return ke().indexOf("Electron/")>=0}function _e(){const U=ke();return U.indexOf("MSIE ")>=0||U.indexOf("Trident/")>=0}function je(){return ke().indexOf("MSAppHost/")>=0}function ne(){return!ve()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function qe(){return"object"==typeof indexedDB}function Q(){return new Promise((U,L)=>{try{let $=!0;const le="validate-browser-context-for-indexeddb-analytics-module",K=self.indexedDB.open(le);K.onsuccess=()=>{K.result.close(),$||self.indexedDB.deleteDatabase(le),U(!0)},K.onupgradeneeded=()=>{$=!1},K.onerror=()=>{var Fe;L((null===(Fe=K.error)||void 0===Fe?void 0:Fe.message)||"")}}catch($){L($)}})}function se(){return!("undefined"==typeof navigator||!navigator.cookieEnabled)}class pe extends Error{constructor(L,$,le){super($),this.code=L,this.customData=le,this.name="FirebaseError",Object.setPrototypeOf(this,pe.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Pe.prototype.create)}}class Pe{constructor(L,$,le){this.service=L,this.serviceName=$,this.errors=le}create(L,...$){const le=$[0]||{},K=`${this.service}/${L}`,Fe=this.errors[L],ft=Fe?function wt(U,L){return U.replace($t,($,le)=>{const K=L[le];return null!=K?String(K):`<${le}?>`})}(Fe,le):"Error";return new pe(K,`${this.serviceName}: ${ft} (${K}).`,le)}}const $t=/\{\$([^}]+)}/g;function zt(U,L){return Object.prototype.hasOwnProperty.call(U,L)}function Qn(U){for(const L in U)if(Object.prototype.hasOwnProperty.call(U,L))return!1;return!0}function ls(U,L){if(U===L)return!0;const $=Object.keys(U),le=Object.keys(L);for(const K of $){if(!le.includes(K))return!1;const Fe=U[K],ft=L[K];if(wr(Fe)&&wr(ft)){if(!ls(Fe,ft))return!1}else if(Fe!==ft)return!1}for(const K of le)if(!$.includes(K))return!1;return!0}function wr(U){return null!==U&&"object"==typeof U}function Mi(U){const L=[];for(const[$,le]of Object.entries(U))Array.isArray(le)?le.forEach(K=>{L.push(encodeURIComponent($)+"="+encodeURIComponent(K))}):L.push(encodeURIComponent($)+"="+encodeURIComponent(le));return L.length?"&"+L.join("&"):""}function Ir(U){const L={};return U.replace(/^\?/,"").split("&").forEach(le=>{if(le){const[K,Fe]=le.split("=");L[decodeURIComponent(K)]=decodeURIComponent(Fe)}}),L}function Ui(U){const L=U.indexOf("?");if(!L)return"";const $=U.indexOf("#",L);return U.substring(L,$>0?$:void 0)}function ot(U,L){const $=new Or(U,L);return $.subscribe.bind($)}class Or{constructor(L,$){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=$,this.task.then(()=>{L(this)}).catch(le=>{this.error(le)})}next(L){this.forEachObserver($=>{$.next(L)})}error(L){this.forEachObserver($=>{$.error(L)}),this.close(L)}complete(){this.forEachObserver(L=>{L.complete()}),this.close()}subscribe(L,$,le){let K;if(void 0===L&&void 0===$&&void 0===le)throw new Error("Missing Observer.");K=function Fn(U,L){if("object"!=typeof U||null===U)return!1;for(const $ of L)if($ in U&&"function"==typeof U[$])return!0;return!1}(L,["next","error","complete"])?L:{next:L,error:$,complete:le},void 0===K.next&&(K.next=Jr),void 0===K.error&&(K.error=Jr),void 0===K.complete&&(K.complete=Jr);const Fe=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?K.error(this.finalError):K.complete()}catch(ft){}}),this.observers.push(K),Fe}unsubscribeOne(L){void 0===this.observers||void 0===this.observers[L]||(delete this.observers[L],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(L){if(!this.finalized)for(let $=0;$<this.observers.length;$++)this.sendOne($,L)}sendOne(L,$){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[L])try{$(this.observers[L])}catch(le){"undefined"!=typeof console&&console.error&&console.error(le)}})}close(L){this.finalized||(this.finalized=!0,void 0!==L&&(this.finalError=L),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Jr(){}function Hs(U,L=1e3,$=2){const le=L*Math.pow($,U),K=Math.round(.5*le*(Math.random()-.5)*2);return Math.min(144e5,le+K)}function at(U){return U&&U._delegate?U._delegate:U}function cr(U,L){return new Promise(($,le)=>{U.onsuccess=K=>{$(K.target.result)},U.onerror=K=>{var Fe;le(`${L}: ${null===(Fe=K.target.error)||void 0===Fe?void 0:Fe.message}`)}})}class Ot{constructor(L){this._db=L,this.objectStoreNames=this._db.objectStoreNames}transaction(L,$="readonly"){return new We(this._db.transaction.call(this._db,L,$))}createObjectStore(L,$){return new De(this._db.createObjectStore(L,$))}close(){this._db.close()}}class We{constructor(L){this._transaction=L,this.complete=new Promise(($,le)=>{this._transaction.oncomplete=function(){$()},this._transaction.onerror=()=>{le(this._transaction.error)},this._transaction.onabort=()=>{le(this._transaction.error)}})}objectStore(L){return new De(this._transaction.objectStore(L))}}class De{constructor(L){this._store=L}index(L){return new Ke(this._store.index(L))}createIndex(L,$,le){return new Ke(this._store.createIndex(L,$,le))}get(L){return cr(this._store.get(L),"Error reading from IndexedDB")}put(L,$){return cr(this._store.put(L,$),"Error writing to IndexedDB")}delete(L){return cr(this._store.delete(L),"Error deleting from IndexedDB")}clear(){return cr(this._store.clear(),"Error clearing IndexedDB object store")}}class Ke{constructor(L){this._index=L}get(L){return cr(this._index.get(L),"Error reading from IndexedDB")}}function ut(U,L,$){return new Promise((le,K)=>{try{const Fe=indexedDB.open(U,L);Fe.onsuccess=ft=>{le(new Ot(ft.target.result))},Fe.onerror=ft=>{var Wt;K(`Error opening indexedDB: ${null===(Wt=ft.target.error)||void 0===Wt?void 0:Wt.message}`)},Fe.onupgradeneeded=ft=>{$(new Ot(Fe.result),ft.oldVersion,ft.newVersion,new We(Fe.transaction))}}catch(Fe){K(`Error opening indexedDB: ${Fe.message}`)}})}function Nt(U){return Mt.apply(this,arguments)}function Mt(){return(Mt=(0,f.Z)(function*(U){return new Promise((L,$)=>{try{const le=indexedDB.deleteDatabase(U);le.onsuccess=()=>{L()},le.onerror=K=>{var Fe;$(`Error deleting indexedDB database "${U}": ${null===(Fe=K.target.error)||void 0===Fe?void 0:Fe.message}`)}}catch(le){$(`Error deleting indexedDB database "${U}": ${le.message}`)}})})).apply(this,arguments)}},6989:(it,Ce,k)=>{var f=k(5e3);let Z=null;function P(){return Z}const re=new f.OlP("DocumentToken");let ce=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=f.Yz7({token:n,factory:function(){return function ue(){return(0,f.LFG)(j)}()},providedIn:"platform"}),n})();const B=new f.OlP("Location Initialized");let j=(()=>{class n extends ce{constructor(t){super(),this._doc=t,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return P().getBaseHref(this._doc)}onPopState(t){const r=P().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){const r=P().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(t){this.location.pathname=t}pushState(t,r,o){Y()?this._history.pushState(t,r,o):this.location.hash=o}replaceState(t,r,o){Y()?this._history.replaceState(t,r,o):this.location.hash=o}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(re))},n.\u0275prov=f.Yz7({token:n,factory:function(){return function $e(){return new j((0,f.LFG)(re))}()},providedIn:"platform"}),n})();function Y(){return!!window.history.pushState}function Te(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function xe(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function ke(n){return n&&"?"!==n[0]?"?"+n:n}let de=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=f.Yz7({token:n,factory:function(){return function ve(n){const e=(0,f.LFG)(re).location;return new ze((0,f.LFG)(ce),e&&e.origin||"")}()},providedIn:"root"}),n})();const Ye=new f.OlP("appBaseHref");let ze=(()=>{class n extends de{constructor(t,r){if(super(),this._platformLocation=t,this._removeListenerFns=[],null==r&&(r=this._platformLocation.getBaseHrefFromDOM()),null==r)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=r}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return Te(this._baseHref,t)}path(t=!1){const r=this._platformLocation.pathname+ke(this._platformLocation.search),o=this._platformLocation.hash;return o&&t?`${r}${o}`:r}pushState(t,r,o,u){const d=this.prepareExternalUrl(o+ke(u));this._platformLocation.pushState(t,r,d)}replaceState(t,r,o,u){const d=this.prepareExternalUrl(o+ke(u));this._platformLocation.replaceState(t,r,d)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(t=0){var r,o;null===(o=(r=this._platformLocation).historyGo)||void 0===o||o.call(r,t)}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(ce),f.LFG(Ye,8))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})(),be=(()=>{class n extends de{constructor(t,r){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash;return null==r&&(r="#"),r.length>0?r.substring(1):r}prepareExternalUrl(t){const r=Te(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,o,u){let d=this.prepareExternalUrl(o+ke(u));0==d.length&&(d=this._platformLocation.pathname),this._platformLocation.pushState(t,r,d)}replaceState(t,r,o,u){let d=this.prepareExternalUrl(o+ke(u));0==d.length&&(d=this._platformLocation.pathname),this._platformLocation.replaceState(t,r,d)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(t=0){var r,o;null===(o=(r=this._platformLocation).historyGo)||void 0===o||o.call(r,t)}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(ce),f.LFG(Ye,8))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})(),me=(()=>{class n{constructor(t,r){this._subject=new f.vpe,this._urlChangeListeners=[],this._platformStrategy=t;const o=this._platformStrategy.getBaseHref();this._platformLocation=r,this._baseHref=xe(Be(o)),this._platformStrategy.onPopState(u=>{this._subject.emit({url:this.path(!0),pop:!0,state:u.state,type:u.type})})}path(t=!1){return this.normalize(this._platformStrategy.path(t))}getState(){return this._platformLocation.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+ke(r))}normalize(t){return n.stripTrailingSlash(function je(n,e){return n&&e.startsWith(n)?e.substring(n.length):e}(this._baseHref,Be(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._platformStrategy.prepareExternalUrl(t)}go(t,r="",o=null){this._platformStrategy.pushState(o,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+ke(r)),o)}replaceState(t,r="",o=null){this._platformStrategy.replaceState(o,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+ke(r)),o)}forward(){this._platformStrategy.forward()}back(){this._platformStrategy.back()}historyGo(t=0){var r,o;null===(o=(r=this._platformStrategy).historyGo)||void 0===o||o.call(r,t)}onUrlChange(t){this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}))}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(o=>o(t,r))}subscribe(t,r,o){return this._subject.subscribe({next:t,error:r,complete:o})}}return n.normalizeQueryParams=ke,n.joinWithSlash=Te,n.stripTrailingSlash=xe,n.\u0275fac=function(t){return new(t||n)(f.LFG(de),f.LFG(ce))},n.\u0275prov=f.Yz7({token:n,factory:function(){return function _e(){return new me((0,f.LFG)(de),(0,f.LFG)(ce))}()},providedIn:"root"}),n})();function Be(n){return n.replace(/\/index.html$/,"")}function Gs(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const r=t.indexOf("="),[o,u]=-1==r?[t,""]:[t.slice(0,r),t.slice(r+1)];if(o.trim()===e)return decodeURIComponent(u)}return null}class fs{constructor(e,t,r,o){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=o}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let Vn=(()=>{class n{constructor(t,r,o){this._viewContainer=t,this._template=r,this._differs=o,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const r=this._viewContainer;t.forEachOperation((o,u,d)=>{if(null==o.previousIndex)r.createEmbeddedView(this._template,new fs(o.item,this._ngForOf,-1,-1),null===d?void 0:d);else if(null==d)r.remove(null===u?void 0:u);else if(null!==u){const m=r.get(u);r.move(m,d),Hi(m,o)}});for(let o=0,u=r.length;o<u;o++){const m=r.get(o).context;m.index=o,m.count=u,m.ngForOf=this._ngForOf}t.forEachIdentityChange(o=>{Hi(r.get(o.currentIndex),o)})}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(f.s_b),f.Y36(f.Rgc),f.Y36(f.ZZ4))},n.\u0275dir=f.lG2({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}}),n})();function Hi(n,e){n.context.$implicit=e.item}let bo=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({}),n})();function tr(n){return"server"===n}let Ga=(()=>{class n{}return n.\u0275prov=(0,f.Yz7)({token:n,providedIn:"root",factory:()=>new qa((0,f.LFG)(re),window)}),n})();class qa{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const t=function ta(n,e){const t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if("function"==typeof n.createTreeWalker&&n.body&&(n.body.createShadowRoot||n.body.attachShadow)){const r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let o=r.currentNode;for(;o;){const u=o.shadowRoot;if(u){const d=u.getElementById(e)||u.querySelector(`[name="${e}"]`);if(d)return d}o=r.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){if(this.supportScrollRestoration()){const t=this.window.history;t&&t.scrollRestoration&&(t.scrollRestoration=e)}}scrollToElement(e){const t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,o=t.top+this.window.pageYOffset,u=this.offset();this.window.scrollTo(r-u[0],o-u[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const e=qi(this.window.history)||qi(Object.getPrototypeOf(this.window.history));return!(!e||!e.writable&&!e.set)}catch(e){return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch(e){return!1}}}function qi(n){return Object.getOwnPropertyDescriptor(n,"scrollRestoration")}class ln{}class _s extends class Do extends class fe{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){!function J(n){Z||(Z=n)}(new _s)}onAndCancel(e,t,r){return e.addEventListener(t,r,!1),()=>{e.removeEventListener(t,r,!1)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=function yc(){return sn=sn||document.querySelector("base"),sn?sn.getAttribute("href"):null}();return null==t?null:function Ks(n){Zs=Zs||document.createElement("a"),Zs.setAttribute("href",n);const e=Zs.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){sn=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return Gs(document.cookie,e)}}let Zs,sn=null;const hr=new f.OlP("TRANSITION_ID"),na=[{provide:f.ip1,useFactory:function Tn(n,e,t){return()=>{t.get(f.CZH).donePromise.then(()=>{const r=P(),o=e.querySelectorAll(`style[ng-transition="${n}"]`);for(let u=0;u<o.length;u++)r.remove(o[u])})}},deps:[hr,re,f.zs3],multi:!0}];class vi{static init(){(0,f.VLi)(new vi)}addToWindow(e){f.dqk.getAngularTestability=(r,o=!0)=>{const u=e.findTestabilityInTree(r,o);if(null==u)throw new Error("Could not find testability for element.");return u},f.dqk.getAllAngularTestabilities=()=>e.getAllTestabilities(),f.dqk.getAllAngularRootElements=()=>e.getAllRootElements(),f.dqk.frameworkStabilizers||(f.dqk.frameworkStabilizers=[]),f.dqk.frameworkStabilizers.push(r=>{const o=f.dqk.getAllAngularTestabilities();let u=o.length,d=!1;const m=function(w){d=d||w,u--,0==u&&r(d)};o.forEach(function(w){w.whenStable(m)})})}findTestabilityInTree(e,t,r){if(null==t)return null;const o=e.getTestability(t);return null!=o?o:r?P().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null}}let fr=(()=>{class n{build(){return new XMLHttpRequest}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();const vs=new f.OlP("EventManagerPlugins");let zi=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(o=>o.manager=this),this._plugins=t.slice().reverse()}addEventListener(t,r,o){return this._findPluginFor(r).addEventListener(t,r,o)}addGlobalEventListener(t,r,o){return this._findPluginFor(r).addGlobalEventListener(t,r,o)}getZone(){return this._zone}_findPluginFor(t){const r=this._eventNameToPlugin.get(t);if(r)return r;const o=this._plugins;for(let u=0;u<o.length;u++){const d=o[u];if(d.supports(t))return this._eventNameToPlugin.set(t,d),d}throw new Error(`No event manager plugin found for event ${t}`)}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(vs),f.LFG(f.R0b))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();class za{constructor(e){this._doc=e}addGlobalEventListener(e,t,r){const o=P().getGlobalEventTarget(this._doc,e);if(!o)throw new Error(`Unsupported event target ${o} for event ${t}`);return this.addEventListener(o,t,r)}}let Fr=(()=>{class n{constructor(){this._stylesSet=new Set}addStyles(t){const r=new Set;t.forEach(o=>{this._stylesSet.has(o)||(this._stylesSet.add(o),r.add(o))}),this.onStylesAdded(r)}onStylesAdded(t){}getAllStyles(){return Array.from(this._stylesSet)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})(),Es=(()=>{class n extends Fr{constructor(t){super(),this._doc=t,this._hostNodes=new Map,this._hostNodes.set(t.head,[])}_addStylesToHost(t,r,o){t.forEach(u=>{const d=this._doc.createElement("style");d.textContent=u,o.push(r.appendChild(d))})}addHost(t){const r=[];this._addStylesToHost(this._stylesSet,t,r),this._hostNodes.set(t,r)}removeHost(t){const r=this._hostNodes.get(t);r&&r.forEach(ws),this._hostNodes.delete(t)}onStylesAdded(t){this._hostNodes.forEach((r,o)=>{this._addStylesToHost(t,o,r)})}ngOnDestroy(){this._hostNodes.forEach(t=>t.forEach(ws))}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(re))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();function ws(n){P().remove(n)}const lt={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},Wa=/%COMP%/g;function we(n,e,t){for(let r=0;r<e.length;r++){let o=e[r];Array.isArray(o)?we(n,o,t):(o=o.replace(Wa,n),t.push(o))}return t}function xt(n){return e=>{if("__ngUnwrap__"===e)return n;!1===n(e)&&(e.preventDefault(),e.returnValue=!1)}}let gn=(()=>{class n{constructor(t,r,o){this.eventManager=t,this.sharedStylesHost=r,this.appId=o,this.rendererByCompId=new Map,this.defaultRenderer=new Co(t)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;switch(r.encapsulation){case f.ifc.Emulated:{let o=this.rendererByCompId.get(r.id);return o||(o=new $u(this.eventManager,this.sharedStylesHost,r,this.appId),this.rendererByCompId.set(r.id,o)),o.applyToHost(t),o}case 1:case f.ifc.ShadowDom:return new Gu(this.eventManager,this.sharedStylesHost,t,r);default:if(!this.rendererByCompId.has(r.id)){const o=we(r.id,r.styles,[]);this.sharedStylesHost.addStyles(o),this.rendererByCompId.set(r.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(zi),f.LFG(Es),f.LFG(f.AFp))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();class Co{constructor(e){this.eventManager=e,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,t){return t?document.createElementNS(lt[t]||t,e):document.createElement(e)}createComment(e){return document.createComment(e)}createText(e){return document.createTextNode(e)}appendChild(e,t){e.appendChild(t)}insertBefore(e,t,r){e&&e.insertBefore(t,r)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let r="string"==typeof e?document.querySelector(e):e;if(!r)throw new Error(`The selector "${e}" did not match any elements`);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,o){if(o){t=o+":"+t;const u=lt[o];u?e.setAttributeNS(u,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){const o=lt[r];o?e.removeAttributeNS(o,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,o){o&(f.JOm.DashCase|f.JOm.Important)?e.style.setProperty(t,r,o&f.JOm.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&f.JOm.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e[t]=r}setValue(e,t){e.nodeValue=t}listen(e,t,r){return"string"==typeof e?this.eventManager.addGlobalEventListener(e,t,xt(r)):this.eventManager.addEventListener(e,t,xt(r))}}class $u extends Co{constructor(e,t,r,o){super(e),this.component=r;const u=we(o+"-"+r.id,r.styles,[]);t.addStyles(u),this.contentAttr=function Bu(n){return"_ngcontent-%COMP%".replace(Wa,n)}(o+"-"+r.id),this.hostAttr=function ju(n){return"_nghost-%COMP%".replace(Wa,n)}(o+"-"+r.id)}applyToHost(e){super.setAttribute(e,this.hostAttr,"")}createElement(e,t){const r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}}class Gu extends Co{constructor(e,t,r,o){super(e),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const u=we(o.id,o.styles,[]);for(let d=0;d<u.length;d++){const m=document.createElement("style");m.textContent=u[d],this.shadowRoot.appendChild(m)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}}let _c=(()=>{class n extends za{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,o){return t.addEventListener(r,o,!1),()=>this.removeEventListener(t,r,o)}removeEventListener(t,r,o){return t.removeEventListener(r,o)}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(re))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();const qu=["alt","control","meta","shift"],Is={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},nr={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},ni={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let Ja=(()=>{class n extends za{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,r,o){const u=n.parseEventName(r),d=n.eventCallback(u.fullKey,o,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>P().onAndCancel(t,u.domEventName,d))}static parseEventName(t){const r=t.toLowerCase().split("."),o=r.shift();if(0===r.length||"keydown"!==o&&"keyup"!==o)return null;const u=n._normalizeKey(r.pop());let d="";if(qu.forEach(w=>{const C=r.indexOf(w);C>-1&&(r.splice(C,1),d+=w+".")}),d+=u,0!=r.length||0===u.length)return null;const m={};return m.domEventName=o,m.fullKey=d,m}static getEventFullKey(t){let r="",o=function bs(n){let e=n.key;if(null==e){if(e=n.keyIdentifier,null==e)return"Unidentified";e.startsWith("U+")&&(e=String.fromCharCode(parseInt(e.substring(2),16)),3===n.location&&nr.hasOwnProperty(e)&&(e=nr[e]))}return Is[e]||e}(t);return o=o.toLowerCase()," "===o?o="space":"."===o&&(o="dot"),qu.forEach(u=>{u!=o&&ni[u](t)&&(r+=u+".")}),r+=o,r}static eventCallback(t,r,o){return u=>{n.getEventFullKey(u)===t&&o.runGuarded(()=>r(u))}}static _normalizeKey(t){return"esc"===t?"escape":t}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(re))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();const Wu=(0,f.eFA)(f._c5,"browser",[{provide:f.Lbi,useValue:"browser"},{provide:f.g9A,useValue:function Ei(){_s.makeCurrent(),vi.init()},multi:!0},{provide:re,useFactory:function Xa(){return(0,f.RDi)(document),document},deps:[]}]),ia=[{provide:f.zSh,useValue:"root"},{provide:f.qLn,useFactory:function zu(){return new f.qLn},deps:[]},{provide:vs,useClass:_c,multi:!0,deps:[re,f.R0b,f.Lbi]},{provide:vs,useClass:Ja,multi:!0,deps:[re]},{provide:gn,useClass:gn,deps:[zi,Es,f.AFp]},{provide:f.FYo,useExisting:gn},{provide:Fr,useExisting:Es},{provide:Es,useClass:Es,deps:[re]},{provide:f.dDg,useClass:f.dDg,deps:[f.R0b]},{provide:zi,useClass:zi,deps:[vs,f.R0b]},{provide:ln,useClass:fr,deps:[]}];let sa=(()=>{class n{constructor(t){if(t)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(t){return{ngModule:n,providers:[{provide:f.AFp,useValue:t.appId},{provide:hr,useExisting:f.AFp},na]}}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(n,12))},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({providers:ia,imports:[bo,f.hGG]}),n})();"undefined"!=typeof window&&window;var An=k(8996),hn=k(8306);const{isArray:tl}=Array,{getPrototypeOf:Ki,prototype:nl,keys:aa}=Object;function eo(n){if(1===n.length){const e=n[0];if(tl(e))return{args:e,keys:null};if(function Tc(n){return n&&"object"==typeof n&&Ki(n)===nl}(e)){const t=aa(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}var Qt=k(8421),So=k(7669),mn=k(5403),vt=k(4004);const{isArray:Ts}=Array;function rl(n){return(0,vt.U)(e=>function Pp(n,e){return Ts(e)?n(...e):n(e)}(n,e))}function nu(n,e){return n.reduce((t,r,o)=>(t[r]=e[o],t),{})}let to=(()=>{class n{constructor(t,r){this._renderer=t,this._elementRef=r,this.onChange=o=>{},this.onTouched=()=>{}}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(f.Qsj),f.Y36(f.SBq))},n.\u0275dir=f.lG2({type:n}),n})(),ri=(()=>{class n extends to{}return n.\u0275fac=function(){let e;return function(r){return(e||(e=f.n5z(n)))(r||n)}}(),n.\u0275dir=f.lG2({type:n,features:[f.qOj]}),n})();const Un=new f.OlP("NgValueAccessor"),no={provide:Un,useExisting:(0,f.Gpc)(()=>As),multi:!0},ro=new f.OlP("CompositionEventMode");let As=(()=>{class n extends to{constructor(t,r,o){super(t,r),this._compositionMode=o,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function il(){const n=P()?P().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}())}writeValue(t){this.setProperty("value",null==t?"":t)}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(f.Qsj),f.Y36(f.SBq),f.Y36(ro,8))},n.\u0275dir=f.lG2({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(t,r){1&t&&f.NdJ("input",function(u){return r._handleInput(u.target.value)})("blur",function(){return r.onTouched()})("compositionstart",function(){return r._compositionStart()})("compositionend",function(u){return r._compositionEnd(u.target.value)})},features:[f._Bn([no]),f.qOj]}),n})();const Bn=new f.OlP("NgValidators"),io=new f.OlP("NgAsyncValidators");function si(n){return null!=n}function Sc(n){const e=(0,f.QGY)(n)?(0,An.D)(n):n;return(0,f.CqO)(e),e}function ru(n){let e={};return n.forEach(t=>{e=null!=t?Object.assign(Object.assign({},e),t):e}),0===Object.keys(e).length?null:e}function oo(n,e){return e.map(t=>t(n))}function uh(n){return n.map(e=>function iu(n){return!n.validate}(e)?e:t=>e.validate(t))}function Mc(n){return null!=n?function yn(n){if(!n)return null;const e=n.filter(si);return 0==e.length?null:function(t){return ru(oo(t,e))}}(uh(n)):null}function xc(n){return null!=n?function kp(n){if(!n)return null;const e=n.filter(si);return 0==e.length?null:function(t){return function ah(...n){const e=(0,So.jO)(n),{args:t,keys:r}=eo(n),o=new hn.y(u=>{const{length:d}=t;if(!d)return void u.complete();const m=new Array(d);let w=d,C=d;for(let x=0;x<d;x++){let R=!1;(0,Qt.Xf)(t[x]).subscribe((0,mn.x)(u,H=>{R||(R=!0,C--),m[x]=H},()=>w--,void 0,()=>{(!w||!R)&&(C||u.next(r?nu(r,m):m),u.complete())}))}});return e?o.pipe(rl(e)):o}(oo(t,e).map(Sc)).pipe((0,vt.U)(ru))}}(uh(n)):null}function ul(n,e){return null===n?[e]:Array.isArray(n)?[...n,e]:[n,e]}function Oc(n){return n?Array.isArray(n)?n:[n]:[]}function Oi(n,e){return Array.isArray(n)?n.includes(e):n===e}function ch(n,e){const t=Oc(e);return Oc(n).forEach(o=>{Oi(t,o)||t.push(o)}),t}function _n(n,e){return Oc(e).filter(t=>!Oi(n,t))}class su{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=Mc(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=xc(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e){this.control&&this.control.reset(e)}hasError(e,t){return!!this.control&&this.control.hasError(e,t)}getError(e,t){return this.control?this.control.getError(e,t):null}}class Ur extends su{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class br extends su{get formDirective(){return null}get path(){return null}}let ca=(()=>{class n extends class ou{constructor(e){this._cd=e}is(e){var t,r,o;return"submitted"===e?!!(null===(t=this._cd)||void 0===t?void 0:t.submitted):!!(null===(o=null===(r=this._cd)||void 0===r?void 0:r.control)||void 0===o?void 0:o[e])}}{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(Ur,2))},n.\u0275dir=f.lG2({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(t,r){2&t&&f.ekj("ng-untouched",r.is("untouched"))("ng-touched",r.is("touched"))("ng-pristine",r.is("pristine"))("ng-dirty",r.is("dirty"))("ng-valid",r.is("valid"))("ng-invalid",r.is("invalid"))("ng-pending",r.is("pending"))},features:[f.qOj]}),n})();function gr(n,e){(function es(n,e){const t=function Rc(n){return n._rawValidators}(n);null!==e.validator?n.setValidators(ul(t,e.validator)):"function"==typeof t&&n.setValidators([t]);const r=function lh(n){return n._rawAsyncValidators}(n);null!==e.asyncValidator?n.setAsyncValidators(ul(r,e.asyncValidator)):"function"==typeof r&&n.setAsyncValidators([r]);const o=()=>n.updateValueAndValidity();xo(e._rawValidators,o),xo(e._rawAsyncValidators,o)})(n,e),e.valueAccessor.writeValue(n.value),function dl(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,"change"===n.updateOn&&D(n,e)})}(n,e),function M(n,e){const t=(r,o)=>{e.valueAccessor.writeValue(r),o&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}(n,e),function b(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,"blur"===n.updateOn&&n._pendingChange&&D(n,e),"submit"!==n.updateOn&&n.markAsTouched()})}(n,e),function cl(n,e){if(e.valueAccessor.setDisabledState){const t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}(n,e)}function xo(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function D(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function vn(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}const Cr="VALID",Tr="INVALID",Hr="PENDING",bi="DISABLED";function kc(n){return(Fc(n)?n.validators:n)||null}function hl(n){return Array.isArray(n)?Mc(n):n||null}function Oo(n,e){return(Fc(e)?e.asyncValidators:n)||null}function gh(n){return Array.isArray(n)?xc(n):n||null}function Fc(n){return null!=n&&!Array.isArray(n)&&"object"==typeof n}const Rs=n=>n instanceof yh;function Vp(n){return(n=>n instanceof iy)(n)?n.value:n.getRawValue()}function Up(n,e){const t=Rs(n),r=n.controls;if(!(t?Object.keys(r):r).length)throw new f.vHH(1e3,"");if(!r[e])throw new f.vHH(1001,"")}function mh(n,e){Rs(n),n._forEachChild((r,o)=>{if(void 0===e[o])throw new f.vHH(1002,"")})}class uu{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=e,this._rawAsyncValidators=t,this._composedValidatorFn=hl(this._rawValidators),this._composedAsyncValidatorFn=gh(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===Cr}get invalid(){return this.status===Tr}get pending(){return this.status==Hr}get disabled(){return this.status===bi}get enabled(){return this.status!==bi}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._rawValidators=e,this._composedValidatorFn=hl(e)}setAsyncValidators(e){this._rawAsyncValidators=e,this._composedAsyncValidatorFn=gh(e)}addValidators(e){this.setValidators(ch(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(ch(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(_n(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(_n(e,this._rawAsyncValidators))}hasValidator(e){return Oi(this._rawValidators,e)}hasAsyncValidator(e){return Oi(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=Hr,!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=bi,this.errors=null,this._forEachChild(r=>{r.disable(Object.assign(Object.assign({},e),{onlySelf:!0}))}),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Object.assign(Object.assign({},e),{skipPristineCheck:t})),this._onDisabledChange.forEach(r=>r(!0))}enable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=Cr,this._forEachChild(r=>{r.enable(Object.assign(Object.assign({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(Object.assign(Object.assign({},e),{skipPristineCheck:t})),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Cr||this.status===Hr)&&this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?bi:Cr}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=Hr,this._hasOwnPendingAsyncValidator=!0;const t=Sc(this.asyncValidator(this));this._asyncValidationSubscription=t.subscribe(r=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(r,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(!1!==t.emitEvent)}get(e){return function Fp(n,e,t){if(null==e||(Array.isArray(e)||(e=e.split(t)),Array.isArray(e)&&0===e.length))return null;let r=n;return e.forEach(o=>{r=Rs(r)?r.controls.hasOwnProperty(o)?r.controls[o]:null:(n=>n instanceof sy)(r)&&r.at(o)||null}),r}(this,e,".")}getError(e,t){const r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new f.vpe,this.statusChanges=new f.vpe}_calculateStatus(){return this._allControlsDisabled()?bi:this.errors?Tr:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Hr)?Hr:this._anyControlsHaveStatus(Tr)?Tr:Cr}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_isBoxedValue(e){return"object"==typeof e&&null!==e&&2===Object.keys(e).length&&"value"in e&&"disabled"in e}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){Fc(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}}class iy extends uu{constructor(e=null,t,r){super(kc(t),Oo(r,t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),Fc(t)&&t.initialValueIsDefault&&(this.defaultValue=this._isBoxedValue(e)?e.value:e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&!1!==t.emitModelToViewChange&&this._onChange.forEach(r=>r(this.value,!1!==t.emitViewToModelChange)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){vn(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){vn(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(e){this._isBoxedValue(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}}class yh extends uu{constructor(e,t,r){super(kc(t),Oo(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,r={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){mh(this,e),Object.keys(e).forEach(r=>{Up(this,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(Object.keys(e).forEach(r=>{this.controls[r]&&this.controls[r].patchValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((r,o)=>{r.reset(e[o],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,r)=>(e[r]=Vp(t),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,r)=>!!r._syncPendingControls()||t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{const r=this.controls[t];r&&e(r,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(const t of Object.keys(this.controls)){const r=this.controls[t];if(this.contains(t)&&e(r))return!0}return!1}_reduceValue(){return this._reduceChildren({},(e,t,r)=>((t.enabled||this.disabled)&&(e[r]=t.value),e))}_reduceChildren(e,t){let r=e;return this._forEachChild((o,u)=>{r=t(r,o,u)}),r}_allControlsDisabled(){for(const e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}}class sy extends uu{constructor(e,t,r){super(kc(t),Oo(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(e){return this.controls[e]}push(e,t={}){this.controls.push(e),this._registerControl(e),this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}insert(e,t,r={}){this.controls.splice(e,0,t),this._registerControl(t),this.updateValueAndValidity({emitEvent:r.emitEvent})}removeAt(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),this.controls.splice(e,1),this.updateValueAndValidity({emitEvent:t.emitEvent})}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),this.controls.splice(e,1),t&&(this.controls.splice(e,0,t),this._registerControl(t)),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(e,t={}){mh(this,e),e.forEach((r,o)=>{Up(this,o),this.at(o).setValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(e.forEach((r,o)=>{this.at(o)&&this.at(o).patchValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e=[],t={}){this._forEachChild((r,o)=>{r.reset(e[o],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this.controls.map(e=>Vp(e))}clear(e={}){this.controls.length<1||(this._forEachChild(t=>t._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:e.emitEvent}))}_syncPendingControls(){let e=this.controls.reduce((t,r)=>!!r._syncPendingControls()||t,!1);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){this.controls.forEach((t,r)=>{e(t,r)})}_updateValue(){this.value=this.controls.filter(e=>e.enabled||this.disabled).map(e=>e.value)}_anyControls(e){return this.controls.some(t=>t.enabled&&e(t))}_setUpControls(){this._forEachChild(e=>this._registerControl(e))}_allControlsDisabled(){for(const e of this.controls)if(e.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(e){e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)}}const jp={provide:Ur,useExisting:(0,f.Gpc)(()=>lu)},Lc=(()=>Promise.resolve(null))();let lu=(()=>{class n extends Ur{constructor(t,r,o,u,d){super(),this._changeDetectorRef=d,this.control=new iy,this._registered=!1,this.update=new f.vpe,this._parent=t,this._setValidators(r),this._setAsyncValidators(o),this.valueAccessor=function Sn(n,e){if(!e)return null;let t,r,o;return Array.isArray(e),e.forEach(u=>{u.constructor===As?t=u:function jt(n){return Object.getPrototypeOf(n.constructor)===ri}(u)?r=u:o=u}),o||r||t||null}(0,u)}ngOnChanges(t){if(this._checkForErrors(),!this._registered||"name"in t){if(this._registered&&(this._checkName(),this.formDirective)){const r=t.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in t&&this._updateDisabled(t),function pt(n,e){if(!n.hasOwnProperty("model"))return!1;const t=n.model;return!!t.isFirstChange()||!Object.is(e,t.currentValue)}(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){gr(this.control,this),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(t){Lc.then(()=>{var r;this.control.setValue(t,{emitViewToModelChange:!1}),null===(r=this._changeDetectorRef)||void 0===r||r.markForCheck()})}_updateDisabled(t){const r=t.isDisabled.currentValue,o=""===r||r&&"false"!==r;Lc.then(()=>{var u;o&&!this.control.disabled?this.control.disable():!o&&this.control.disabled&&this.control.enable(),null===(u=this._changeDetectorRef)||void 0===u||u.markForCheck()})}_getPath(t){return this._parent?function au(n,e){return[...e.path,n]}(t,this._parent):[t]}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(br,9),f.Y36(Bn,10),f.Y36(io,10),f.Y36(Un,10),f.Y36(f.sBO,8))},n.\u0275dir=f.lG2({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[f._Bn([jp]),f.qOj,f.TTD]}),n})();const uy={provide:Un,useExisting:(0,f.Gpc)(()=>wh),multi:!0};let wh=(()=>{class n extends ri{writeValue(t){this.setProperty("value",null==t?"":t)}registerOnChange(t){this.onChange=r=>{t(""==r?null:parseFloat(r))}}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=f.n5z(n)))(r||n)}}(),n.\u0275dir=f.lG2({type:n,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(t,r){1&t&&f.NdJ("input",function(u){return r.onChange(u.target.value)})("blur",function(){return r.onTouched()})},features:[f._Bn([uy]),f.qOj]}),n})(),ts=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({}),n})(),I0=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({imports:[[ts]]}),n})(),vl=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({imports:[I0]}),n})();var fn=k(2011);function ct(...n){const e=(0,So.yG)(n);return(0,An.D)(n,e)}var rr=k(5577),Gr=k(576);function Os(n,e){return(0,Gr.m)(e)?(0,rr.z)(n,e,1):(0,rr.z)(n,1)}var qr=k(4482);function Ns(n,e){return(0,qr.e)((t,r)=>{let o=0;t.subscribe((0,mn.x)(r,u=>n.call(e,u,o++)&&r.next(u)))})}class El{}class Gc{}class Ps{constructor(e){this.normalizedNames=new Map,this.lazyUpdate=null,e?this.lazyInit="string"==typeof e?()=>{this.headers=new Map,e.split("\n").forEach(t=>{const r=t.indexOf(":");if(r>0){const o=t.slice(0,r),u=o.toLowerCase(),d=t.slice(r+1).trim();this.maybeSetNormalizedName(o,u),this.headers.has(u)?this.headers.get(u).push(d):this.headers.set(u,[d])}})}:()=>{this.headers=new Map,Object.keys(e).forEach(t=>{let r=e[t];const o=t.toLowerCase();"string"==typeof r&&(r=[r]),r.length>0&&(this.headers.set(o,r),this.maybeSetNormalizedName(t,o))})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();const t=this.headers.get(e.toLowerCase());return t&&t.length>0?t[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,t){return this.clone({name:e,value:t,op:"a"})}set(e,t){return this.clone({name:e,value:t,op:"s"})}delete(e,t){return this.clone({name:e,value:t,op:"d"})}maybeSetNormalizedName(e,t){this.normalizedNames.has(t)||this.normalizedNames.set(t,e)}init(){this.lazyInit&&(this.lazyInit instanceof Ps?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(t=>{this.headers.set(t,e.headers.get(t)),this.normalizedNames.set(t,e.normalizedNames.get(t))})}clone(e){const t=new Ps;return t.lazyInit=this.lazyInit&&this.lazyInit instanceof Ps?this.lazyInit:this,t.lazyUpdate=(this.lazyUpdate||[]).concat([e]),t}applyUpdate(e){const t=e.name.toLowerCase();switch(e.op){case"a":case"s":let r=e.value;if("string"==typeof r&&(r=[r]),0===r.length)return;this.maybeSetNormalizedName(e.name,t);const o=("a"===e.op?this.headers.get(t):void 0)||[];o.push(...r),this.headers.set(t,o);break;case"d":const u=e.value;if(u){let d=this.headers.get(t);if(!d)return;d=d.filter(m=>-1===u.indexOf(m)),0===d.length?(this.headers.delete(t),this.normalizedNames.delete(t)):this.headers.set(t,d)}else this.headers.delete(t),this.normalizedNames.delete(t)}}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(t=>e(this.normalizedNames.get(t),this.headers.get(t)))}}class tg{encodeKey(e){return rg(e)}encodeValue(e){return rg(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}}const ks=/%(\d[a-f0-9])/gi,ng={40:"@","3A":":",24:"$","2C":",","3B":";","2B":"+","3D":"=","3F":"?","2F":"/"};function rg(n){return encodeURIComponent(n).replace(ks,(e,t)=>{var r;return null!==(r=ng[t])&&void 0!==r?r:e})}function qc(n){return`${n}`}class Po{constructor(e={}){if(this.updates=null,this.cloneFrom=null,this.encoder=e.encoder||new tg,e.fromString){if(e.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function yy(n,e){const t=new Map;return n.length>0&&n.replace(/^\?/,"").split("&").forEach(o=>{const u=o.indexOf("="),[d,m]=-1==u?[e.decodeKey(o),""]:[e.decodeKey(o.slice(0,u)),e.decodeValue(o.slice(u+1))],w=t.get(d)||[];w.push(m),t.set(d,w)}),t}(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(t=>{const r=e.fromObject[t];this.map.set(t,Array.isArray(r)?r:[r])})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();const t=this.map.get(e);return t?t[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,t){return this.clone({param:e,value:t,op:"a"})}appendAll(e){const t=[];return Object.keys(e).forEach(r=>{const o=e[r];Array.isArray(o)?o.forEach(u=>{t.push({param:r,value:u,op:"a"})}):t.push({param:r,value:o,op:"a"})}),this.clone(t)}set(e,t){return this.clone({param:e,value:t,op:"s"})}delete(e,t){return this.clone({param:e,value:t,op:"d"})}toString(){return this.init(),this.keys().map(e=>{const t=this.encoder.encodeKey(e);return this.map.get(e).map(r=>t+"="+this.encoder.encodeValue(r)).join("&")}).filter(e=>""!==e).join("&")}clone(e){const t=new Po({encoder:this.encoder});return t.cloneFrom=this.cloneFrom||this,t.updates=(this.updates||[]).concat(e),t}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":const t=("a"===e.op?this.map.get(e.param):void 0)||[];t.push(qc(e.value)),this.map.set(e.param,t);break;case"d":if(void 0===e.value){this.map.delete(e.param);break}{let r=this.map.get(e.param)||[];const o=r.indexOf(qc(e.value));-1!==o&&r.splice(o,1),r.length>0?this.map.set(e.param,r):this.map.delete(e.param)}}}),this.cloneFrom=this.updates=null)}}class mr{constructor(){this.map=new Map}set(e,t){return this.map.set(e,t),this}get(e){return this.map.has(e)||this.map.set(e,e.defaultValue()),this.map.get(e)}delete(e){return this.map.delete(e),this}has(e){return this.map.has(e)}keys(){return this.map.keys()}}function zc(n){return"undefined"!=typeof ArrayBuffer&&n instanceof ArrayBuffer}function ig(n){return"undefined"!=typeof Blob&&n instanceof Blob}function Fs(n){return"undefined"!=typeof FormData&&n instanceof FormData}class Ea{constructor(e,t,r,o){let u;if(this.url=t,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=e.toUpperCase(),function Nh(n){switch(n){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||o?(this.body=void 0!==r?r:null,u=o):u=r,u&&(this.reportProgress=!!u.reportProgress,this.withCredentials=!!u.withCredentials,u.responseType&&(this.responseType=u.responseType),u.headers&&(this.headers=u.headers),u.context&&(this.context=u.context),u.params&&(this.params=u.params)),this.headers||(this.headers=new Ps),this.context||(this.context=new mr),this.params){const d=this.params.toString();if(0===d.length)this.urlWithParams=t;else{const m=t.indexOf("?");this.urlWithParams=t+(-1===m?"?":m<t.length-1?"&":"")+d}}else this.params=new Po,this.urlWithParams=t}serializeBody(){return null===this.body?null:zc(this.body)||ig(this.body)||Fs(this.body)||function wl(n){return"undefined"!=typeof URLSearchParams&&n instanceof URLSearchParams}(this.body)||"string"==typeof this.body?this.body:this.body instanceof Po?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||Fs(this.body)?null:ig(this.body)?this.body.type||null:zc(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof Po?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(e={}){var t;const r=e.method||this.method,o=e.url||this.url,u=e.responseType||this.responseType,d=void 0!==e.body?e.body:this.body,m=void 0!==e.withCredentials?e.withCredentials:this.withCredentials,w=void 0!==e.reportProgress?e.reportProgress:this.reportProgress;let C=e.headers||this.headers,x=e.params||this.params;const R=null!==(t=e.context)&&void 0!==t?t:this.context;return void 0!==e.setHeaders&&(C=Object.keys(e.setHeaders).reduce((H,G)=>H.set(G,e.setHeaders[G]),C)),e.setParams&&(x=Object.keys(e.setParams).reduce((H,G)=>H.set(G,e.setParams[G]),x)),new Ea(r,o,d,{params:x,headers:C,context:R,reportProgress:w,responseType:u,withCredentials:m})}}var Nn=(()=>((Nn=Nn||{})[Nn.Sent=0]="Sent",Nn[Nn.UploadProgress=1]="UploadProgress",Nn[Nn.ResponseHeader=2]="ResponseHeader",Nn[Nn.DownloadProgress=3]="DownloadProgress",Nn[Nn.Response=4]="Response",Nn[Nn.User=5]="User",Nn))();class Ph{constructor(e,t=200,r="OK"){this.headers=e.headers||new Ps,this.status=void 0!==e.status?e.status:t,this.statusText=e.statusText||r,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}}class Il extends Ph{constructor(e={}){super(e),this.type=Nn.ResponseHeader}clone(e={}){return new Il({headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}class Wc extends Ph{constructor(e={}){super(e),this.type=Nn.Response,this.body=void 0!==e.body?e.body:null}clone(e={}){return new Wc({body:void 0!==e.body?e.body:this.body,headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}class sg extends Ph{constructor(e){super(e,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${e.url||"(unknown url)"}`:`Http failure response for ${e.url||"(unknown url)"}: ${e.status} ${e.statusText}`,this.error=e.error||null}}function kh(n,e){return{body:e,headers:n.headers,context:n.context,observe:n.observe,params:n.params,reportProgress:n.reportProgress,responseType:n.responseType,withCredentials:n.withCredentials}}let og=(()=>{class n{constructor(t){this.handler=t}request(t,r,o={}){let u;if(t instanceof Ea)u=t;else{let w,C;w=o.headers instanceof Ps?o.headers:new Ps(o.headers),o.params&&(C=o.params instanceof Po?o.params:new Po({fromObject:o.params})),u=new Ea(t,r,void 0!==o.body?o.body:null,{headers:w,context:o.context,params:C,reportProgress:o.reportProgress,responseType:o.responseType||"json",withCredentials:o.withCredentials})}const d=ct(u).pipe(Os(w=>this.handler.handle(w)));if(t instanceof Ea||"events"===o.observe)return d;const m=d.pipe(Ns(w=>w instanceof Wc));switch(o.observe||"body"){case"body":switch(u.responseType){case"arraybuffer":return m.pipe((0,vt.U)(w=>{if(null!==w.body&&!(w.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return w.body}));case"blob":return m.pipe((0,vt.U)(w=>{if(null!==w.body&&!(w.body instanceof Blob))throw new Error("Response is not a Blob.");return w.body}));case"text":return m.pipe((0,vt.U)(w=>{if(null!==w.body&&"string"!=typeof w.body)throw new Error("Response is not a string.");return w.body}));default:return m.pipe((0,vt.U)(w=>w.body))}case"response":return m;default:throw new Error(`Unreachable: unhandled observe type ${o.observe}}`)}}delete(t,r={}){return this.request("DELETE",t,r)}get(t,r={}){return this.request("GET",t,r)}head(t,r={}){return this.request("HEAD",t,r)}jsonp(t,r){return this.request("JSONP",t,{params:(new Po).append(r,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(t,r={}){return this.request("OPTIONS",t,r)}patch(t,r,o={}){return this.request("PATCH",t,kh(o,r))}post(t,r,o={}){return this.request("POST",t,kh(o,r))}put(t,r,o={}){return this.request("PUT",t,kh(o,r))}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(El))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();class y{constructor(e,t){this.next=e,this.interceptor=t}handle(e){return this.interceptor.intercept(e,this.next)}}const h=new f.OlP("HTTP_INTERCEPTORS");let g=(()=>{class n{intercept(t,r){return r.handle(t)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();const st=/^\)\]\}',?\n/;let Di=(()=>{class n{constructor(t){this.xhrFactory=t}handle(t){if("JSONP"===t.method)throw new Error("Attempted to construct Jsonp request without HttpClientJsonpModule installed.");return new hn.y(r=>{const o=this.xhrFactory.build();if(o.open(t.method,t.urlWithParams),t.withCredentials&&(o.withCredentials=!0),t.headers.forEach((G,X)=>o.setRequestHeader(G,X.join(","))),t.headers.has("Accept")||o.setRequestHeader("Accept","application/json, text/plain, */*"),!t.headers.has("Content-Type")){const G=t.detectContentTypeHeader();null!==G&&o.setRequestHeader("Content-Type",G)}if(t.responseType){const G=t.responseType.toLowerCase();o.responseType="json"!==G?G:"text"}const u=t.serializeBody();let d=null;const m=()=>{if(null!==d)return d;const G=o.statusText||"OK",X=new Ps(o.getAllResponseHeaders()),Ne=function Dn(n){return"responseURL"in n&&n.responseURL?n.responseURL:/^X-Request-URL:/m.test(n.getAllResponseHeaders())?n.getResponseHeader("X-Request-URL"):null}(o)||t.url;return d=new Il({headers:X,status:o.status,statusText:G,url:Ne}),d},w=()=>{let{headers:G,status:X,statusText:Ne,url:tt}=m(),_t=null;204!==X&&(_t=void 0===o.response?o.responseText:o.response),0===X&&(X=_t?200:0);let kt=X>=200&&X<300;if("json"===t.responseType&&"string"==typeof _t){const qt=_t;_t=_t.replace(st,"");try{_t=""!==_t?JSON.parse(_t):null}catch(St){_t=qt,kt&&(kt=!1,_t={error:St,text:_t})}}kt?(r.next(new Wc({body:_t,headers:G,status:X,statusText:Ne,url:tt||void 0})),r.complete()):r.error(new sg({error:_t,headers:G,status:X,statusText:Ne,url:tt||void 0}))},C=G=>{const{url:X}=m(),Ne=new sg({error:G,status:o.status||0,statusText:o.statusText||"Unknown Error",url:X||void 0});r.error(Ne)};let x=!1;const R=G=>{x||(r.next(m()),x=!0);let X={type:Nn.DownloadProgress,loaded:G.loaded};G.lengthComputable&&(X.total=G.total),"text"===t.responseType&&!!o.responseText&&(X.partialText=o.responseText),r.next(X)},H=G=>{let X={type:Nn.UploadProgress,loaded:G.loaded};G.lengthComputable&&(X.total=G.total),r.next(X)};return o.addEventListener("load",w),o.addEventListener("error",C),o.addEventListener("timeout",C),o.addEventListener("abort",C),t.reportProgress&&(o.addEventListener("progress",R),null!==u&&o.upload&&o.upload.addEventListener("progress",H)),o.send(u),r.next({type:Nn.Sent}),()=>{o.removeEventListener("error",C),o.removeEventListener("abort",C),o.removeEventListener("load",w),o.removeEventListener("timeout",C),t.reportProgress&&(o.removeEventListener("progress",R),null!==u&&o.upload&&o.upload.removeEventListener("progress",H)),o.readyState!==o.DONE&&o.abort()}})}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(ln))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();const wa=new f.OlP("XSRF_COOKIE_NAME"),fu=new f.OlP("XSRF_HEADER_NAME");class pu{}let Fh=(()=>{class n{constructor(t,r,o){this.doc=t,this.platform=r,this.cookieName=o,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const t=this.doc.cookie||"";return t!==this.lastCookieString&&(this.parseCount++,this.lastToken=Gs(t,this.cookieName),this.lastCookieString=t),this.lastToken}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(re),f.LFG(f.Lbi),f.LFG(wa))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})(),Lh=(()=>{class n{constructor(t,r){this.tokenService=t,this.headerName=r}intercept(t,r){const o=t.url.toLowerCase();if("GET"===t.method||"HEAD"===t.method||o.startsWith("http://")||o.startsWith("https://"))return r.handle(t);const u=this.tokenService.getToken();return null!==u&&!t.headers.has(this.headerName)&&(t=t.clone({headers:t.headers.set(this.headerName,u)})),r.handle(t)}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(pu),f.LFG(fu))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})(),ko=(()=>{class n{constructor(t,r){this.backend=t,this.injector=r,this.chain=null}handle(t){if(null===this.chain){const r=this.injector.get(h,[]);this.chain=r.reduceRight((o,u)=>new y(o,u),this.backend)}return this.chain.handle(t)}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(Gc),f.LFG(f.zs3))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})(),Uh=(()=>{class n{static disable(){return{ngModule:n,providers:[{provide:Lh,useClass:g}]}}static withOptions(t={}){return{ngModule:n,providers:[t.cookieName?{provide:wa,useValue:t.cookieName}:[],t.headerName?{provide:fu,useValue:t.headerName}:[]]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({providers:[Lh,{provide:h,useExisting:Lh,multi:!0},{provide:pu,useClass:Fh},{provide:wa,useValue:"XSRF-TOKEN"},{provide:fu,useValue:"X-XSRF-TOKEN"}]}),n})(),Zc=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({providers:[og,{provide:El,useClass:ko},Di,{provide:Gc,useExisting:Di}],imports:[[Uh.withOptions({cookieName:"XSRF-TOKEN",headerName:"X-XSRF-TOKEN"})]]}),n})();var Fo=k(7579);class uo extends Fo.x{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){const{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}}var Bh=k(4671),gb=k(9672);function Ey(n,e,t){n?(0,gb.f)(t,n,e):e()}function Kc(n,e){const t=(0,Gr.m)(n)?n:()=>n,r=o=>o.error(t());return new hn.y(e?o=>e.schedule(r,0,o):r)}const lg=(0,k(3888).d)(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});var jh=k(8189);function Ia(...n){return function C0(){return(0,jh.J)(1)}()((0,An.D)(n,(0,So.yG)(n)))}function wy(n){return new hn.y(e=>{(0,Qt.Xf)(n()).subscribe(e)})}var bl=k(515),T0=k(727);function Hh(){return(0,qr.e)((n,e)=>{let t=null;n._refCount++;const r=(0,mn.x)(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(t=null);const o=n._connection,u=t;t=null,o&&(!u||o===u)&&o.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}class yb extends hn.y{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,(0,qr.A)(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,null==e||e.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new T0.w0;const t=this.getSubject();e.add(this.source.subscribe((0,mn.x)(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=T0.w0.EMPTY)}return e}refCount(){return Hh()(this)}}function ai(n,e){return(0,qr.e)((t,r)=>{let o=null,u=0,d=!1;const m=()=>d&&!o&&r.complete();t.subscribe((0,mn.x)(r,w=>{null==o||o.unsubscribe();let C=0;const x=u++;(0,Qt.Xf)(n(w,x)).subscribe(o=(0,mn.x)(r,R=>r.next(e?e(w,R,x,C++):R),()=>{o=null,m()}))},()=>{d=!0,m()}))})}var cg=k(5698);function $h(...n){const e=(0,So.yG)(n);return(0,qr.e)((t,r)=>{(e?Ia(n,t,e):Ia(n,t)).subscribe(r)})}function Iy(n,e,t,r,o){return(u,d)=>{let m=t,w=e,C=0;u.subscribe((0,mn.x)(d,x=>{const R=C++;w=m?n(w,x,R):(m=!0,x),r&&d.next(w)},o&&(()=>{m&&d.next(w),d.complete()})))}}function Yc(n,e){return(0,qr.e)(Iy(n,e,arguments.length>=2,!0))}function lo(n){return(0,qr.e)((e,t)=>{let u,r=null,o=!1;r=e.subscribe((0,mn.x)(t,void 0,void 0,d=>{u=(0,Qt.Xf)(n(d,lo(n)(e))),r?(r.unsubscribe(),r=null,u.subscribe(t)):o=!0})),o&&(r.unsubscribe(),r=null,u.subscribe(t))})}function Qc(n){return n<=0?()=>bl.E:(0,qr.e)((e,t)=>{let r=[];e.subscribe((0,mn.x)(t,o=>{r.push(o),n<r.length&&r.shift()},()=>{for(const o of r)t.next(o);t.complete()},void 0,()=>{r=null}))})}function by(n=Dy){return(0,qr.e)((e,t)=>{let r=!1;e.subscribe((0,mn.x)(t,o=>{r=!0,t.next(o)},()=>r?t.complete():t.error(n())))})}function Dy(){return new lg}function Cy(n){return(0,qr.e)((e,t)=>{let r=!1;e.subscribe((0,mn.x)(t,o=>{r=!0,t.next(o)},()=>{r||t.next(n),t.complete()}))})}function co(n,e){const t=arguments.length>=2;return r=>r.pipe(n?Ns((o,u)=>n(o,u,r)):Bh.y,(0,cg.q)(1),t?Cy(e):by(()=>new lg))}var ns=k(8505);class ba{constructor(e,t){this.id=e,this.url=t}}class Ay extends ba{constructor(e,t,r="imperative",o=null){super(e,t),this.navigationTrigger=r,this.restoredState=o}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Jc extends ba{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class dg extends ba{constructor(e,t,r){super(e,t),this.reason=r}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class S0 extends ba{constructor(e,t,r){super(e,t),this.error=r}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class VA extends ba{constructor(e,t,r,o){super(e,t),this.urlAfterRedirects=r,this.state=o}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class M0 extends ba{constructor(e,t,r,o){super(e,t),this.urlAfterRedirects=r,this.state=o}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class _b extends ba{constructor(e,t,r,o,u){super(e,t),this.urlAfterRedirects=r,this.state=o,this.shouldActivate=u}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class x0 extends ba{constructor(e,t,r,o){super(e,t),this.urlAfterRedirects=r,this.state=o}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class vb extends ba{constructor(e,t,r,o){super(e,t),this.urlAfterRedirects=r,this.state=o}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class R0{constructor(e){this.route=e}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class Ls{constructor(e){this.route=e}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class Eb{constructor(e){this.snapshot=e}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class O0{constructor(e){this.snapshot=e}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class wb{constructor(e){this.snapshot=e}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Ib{constructor(e){this.snapshot=e}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class N0{constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}const Ht="primary";class P0{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function Xc(n){return new P0(n)}const k0="ngNavigationCancelingError";function Sy(n){const e=Error("NavigationCancelingError: "+n);return e[k0]=!0,e}function F0(n,e,t){const r=t.path.split("/");if(r.length>n.length||"full"===t.pathMatch&&(e.hasChildren()||r.length<n.length))return null;const o={};for(let u=0;u<r.length;u++){const d=r[u],m=n[u];if(d.startsWith(":"))o[d.substring(1)]=m;else if(d!==m.path)return null}return{consumed:n.slice(0,r.length),posParams:o}}function ho(n,e){const t=n?Object.keys(n):void 0,r=e?Object.keys(e):void 0;if(!t||!r||t.length!=r.length)return!1;let o;for(let u=0;u<t.length;u++)if(o=t[u],!Gh(n[o],e[o]))return!1;return!0}function Gh(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;const t=[...n].sort(),r=[...e].sort();return t.every((o,u)=>r[u]===o)}return n===e}function Vs(n){return Array.prototype.concat.apply([],n)}function My(n){return n.length>0?n[n.length-1]:null}function yr(n,e){for(const t in n)n.hasOwnProperty(t)&&e(n[t],t)}function Ar(n){return(0,f.CqO)(n)?n:(0,f.QGY)(n)?(0,An.D)(Promise.resolve(n)):ct(n)}const V0={exact:function Db(n,e,t){if(!Dl(n.segments,e.segments)||!ed(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(const r in e.children)if(!n.children[r]||!Db(n.children[r],e.children[r],t))return!1;return!0},subset:qh},hg={exact:function U0(n,e){return ho(n,e)},subset:function fg(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>Gh(n[t],e[t]))},ignored:()=>!0};function bb(n,e,t){return V0[t.paths](n.root,e.root,t.matrixParams)&&hg[t.queryParams](n.queryParams,e.queryParams)&&!("exact"===t.fragment&&n.fragment!==e.fragment)}function qh(n,e,t){return pg(n,e,e.segments,t)}function pg(n,e,t,r){if(n.segments.length>t.length){const o=n.segments.slice(0,t.length);return!(!Dl(o,t)||e.hasChildren()||!ed(o,t,r))}if(n.segments.length===t.length){if(!Dl(n.segments,t)||!ed(n.segments,t,r))return!1;for(const o in e.children)if(!n.children[o]||!qh(n.children[o],e.children[o],r))return!1;return!0}{const o=t.slice(0,n.segments.length),u=t.slice(n.segments.length);return!!(Dl(n.segments,o)&&ed(n.segments,o,r)&&n.children[Ht])&&pg(n.children[Ht],e,u,r)}}function ed(n,e,t){return e.every((r,o)=>hg[t](n[o].parameters,r.parameters))}class Da{constructor(e,t,r){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Xc(this.queryParams)),this._queryParamMap}toString(){return Sb.serialize(this)}}class Yt{constructor(e,t){this.segments=e,this.children=t,this.parent=null,yr(t,(r,o)=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Oy(this)}}class zh{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=Xc(this.parameters)),this._parameterMap}toString(){return xb(this)}}function Dl(n,e){return n.length===e.length&&n.every((t,r)=>t.path===e[r].path)}class Ry{}class Ab{parse(e){const t=new Rb(e);return new Da(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){const t=`/${td(e.root,!0)}`,r=function jA(n){const e=Object.keys(n).map(t=>{const r=n[t];return Array.isArray(r)?r.map(o=>`${gg(t)}=${gg(o)}`).join("&"):`${gg(t)}=${gg(r)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}(e.queryParams);return`${t}${r}${"string"==typeof e.fragment?`#${function Py(n){return encodeURI(n)}(e.fragment)}`:""}`}}const Sb=new Ab;function Oy(n){return n.segments.map(e=>xb(e)).join("/")}function td(n,e){if(!n.hasChildren())return Oy(n);if(e){const t=n.children[Ht]?td(n.children[Ht],!1):"",r=[];return yr(n.children,(o,u)=>{u!==Ht&&r.push(`${u}:${td(o,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}{const t=function Tb(n,e){let t=[];return yr(n.children,(r,o)=>{o===Ht&&(t=t.concat(e(r,o)))}),yr(n.children,(r,o)=>{o!==Ht&&(t=t.concat(e(r,o)))}),t}(n,(r,o)=>o===Ht?[td(n.children[Ht],!1)]:[`${o}:${td(r,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[Ht]?`${Oy(n)}/${t[0]}`:`${Oy(n)}/(${t.join("//")})`}}function Ny(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function gg(n){return Ny(n).replace(/%3B/gi,";")}function B0(n){return Ny(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function ky(n){return decodeURIComponent(n)}function Mb(n){return ky(n.replace(/\+/g,"%20"))}function xb(n){return`${B0(n.path)}${function BA(n){return Object.keys(n).map(e=>`;${B0(e)}=${B0(n[e])}`).join("")}(n.parameters)}`}const HA=/^[^\/()?;=#]+/;function Fy(n){const e=n.match(HA);return e?e[0]:""}const $A=/^[^=?&#]+/,gu=/^[^&#]+/;class Rb{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new Yt([],{}):new Yt([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[Ht]=new Yt(e,t)),r}parseSegment(){const e=Fy(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new Error(`Empty path url segment cannot have parameters: '${this.remaining}'.`);return this.capture(e),new zh(ky(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=Fy(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const o=Fy(this.remaining);o&&(r=o,this.capture(r))}e[ky(t)]=ky(r)}parseQueryParam(e){const t=function GA(n){const e=n.match($A);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const d=function Ly(n){const e=n.match(gu);return e?e[0]:""}(this.remaining);d&&(r=d,this.capture(r))}const o=Mb(t),u=Mb(r);if(e.hasOwnProperty(o)){let d=e[o];Array.isArray(d)||(d=[d],e[o]=d),d.push(u)}else e[o]=u}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=Fy(this.remaining),o=this.remaining[r.length];if("/"!==o&&")"!==o&&";"!==o)throw new Error(`Cannot parse url '${this.url}'`);let u;r.indexOf(":")>-1?(u=r.substr(0,r.indexOf(":")),this.capture(u),this.capture(":")):e&&(u=Ht);const d=this.parseChildren();t[u]=1===Object.keys(d).length?d[Ht]:new Yt([],d),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new Error(`Expected "${e}".`)}}class Vy{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=Wh(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){const t=Wh(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=mg(e,this._root);return t.length<2?[]:t[t.length-2].children.map(o=>o.value).filter(o=>o!==e)}pathFromRoot(e){return mg(e,this._root).map(t=>t.value)}}function Wh(n,e){if(n===e.value)return e;for(const t of e.children){const r=Wh(n,t);if(r)return r}return null}function mg(n,e){if(n===e.value)return[e];for(const t of e.children){const r=mg(n,t);if(r.length)return r.unshift(e),r}return[]}class fo{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function nd(n){const e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}class Ca extends Vy{constructor(e,t){super(e),this.snapshot=t,Cl(this,e)}toString(){return this.snapshot.toString()}}function Uy(n,e){const t=function Ob(n,e){const d=new yg([],{},{},"",{},Ht,e,null,n.root,-1,{});return new $0("",new fo(d,[]))}(n,e),r=new uo([new zh("",{})]),o=new uo({}),u=new uo({}),d=new uo({}),m=new uo(""),w=new Lo(r,o,d,m,u,Ht,e,t.root);return w.snapshot=t.root,new Ca(new fo(w,[]),t)}class Lo{constructor(e,t,r,o,u,d,m,w){this.url=e,this.params=t,this.queryParams=r,this.fragment=o,this.data=u,this.outlet=d,this.component=m,this._futureSnapshot=w}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,vt.U)(e=>Xc(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,vt.U)(e=>Xc(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function j0(n,e="emptyOnly"){const t=n.pathFromRoot;let r=0;if("always"!==e)for(r=t.length-1;r>=1;){const o=t[r],u=t[r-1];if(o.routeConfig&&""===o.routeConfig.path)r--;else{if(u.component)break;r--}}return function H0(n){return n.reduce((e,t)=>({params:Object.assign(Object.assign({},e.params),t.params),data:Object.assign(Object.assign({},e.data),t.data),resolve:Object.assign(Object.assign({},e.resolve),t._resolvedData)}),{params:{},data:{},resolve:{}})}(t.slice(r))}class yg{constructor(e,t,r,o,u,d,m,w,C,x,R){this.url=e,this.params=t,this.queryParams=r,this.fragment=o,this.data=u,this.outlet=d,this.component=m,this.routeConfig=w,this._urlSegment=C,this._lastPathIndex=x,this._resolve=R}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=Xc(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Xc(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class $0 extends Vy{constructor(e,t){super(t),this.url=e,Cl(this,t)}toString(){return Tl(this._root)}}function Cl(n,e){e.value._routerState=n,e.children.forEach(t=>Cl(n,t))}function Tl(n){const e=n.children.length>0?` { ${n.children.map(Tl).join(", ")} } `:"";return`${n.value}${e}`}function Zh(n){if(n.snapshot){const e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,ho(e.queryParams,t.queryParams)||n.queryParams.next(t.queryParams),e.fragment!==t.fragment&&n.fragment.next(t.fragment),ho(e.params,t.params)||n.params.next(t.params),function L0(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!ho(n[t],e[t]))return!1;return!0}(e.url,t.url)||n.url.next(t.url),ho(e.data,t.data)||n.data.next(t.data)}else n.snapshot=n._futureSnapshot,n.data.next(n._futureSnapshot.data)}function mu(n,e){const t=ho(n.params,e.params)&&function Cb(n,e){return Dl(n,e)&&n.every((t,r)=>ho(t.parameters,e[r].parameters))}(n.url,e.url);return t&&!(!n.parent!=!e.parent)&&(!n.parent||mu(n.parent,e.parent))}function Vo(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){const r=t.value;r._futureSnapshot=e.value;const o=function Nb(n,e,t){return e.children.map(r=>{for(const o of t.children)if(n.shouldReuseRoute(r.value,o.value.snapshot))return Vo(n,r,o);return Vo(n,r)})}(n,e,t);return new fo(r,o)}{if(n.shouldAttach(e.value)){const u=n.retrieve(e.value);if(null!==u){const d=u.route;return d.value._futureSnapshot=e.value,d.children=e.children.map(m=>Vo(n,m)),d}}const r=function G0(n){return new Lo(new uo(n.url),new uo(n.params),new uo(n.queryParams),new uo(n.fragment),new uo(n.data),n.outlet,n.component,n)}(e.value),o=e.children.map(u=>Vo(n,u));return new fo(r,o)}}function rd(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function Al(n){return"object"==typeof n&&null!=n&&n.outlets}function _g(n,e,t,r,o){let u={};if(r&&yr(r,(m,w)=>{u[w]=Array.isArray(m)?m.map(C=>`${C}`):`${m}`}),n===e)return new Da(t,u,o);const d=Yh(n,e,t);return new Da(d,u,o)}function Yh(n,e,t){const r={};return yr(n.children,(o,u)=>{r[u]=o===e?t:Yh(o,e,t)}),new Yt(n.segments,r)}class z0{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&rd(r[0]))throw new Error("Root segment cannot have matrix parameters");const o=r.find(Al);if(o&&o!==My(r))throw new Error("{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class Z0{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}}function By(n,e,t){if(n||(n=new Yt([],{})),0===n.segments.length&&n.hasChildren())return vg(n,e,t);const r=function kb(n,e,t){let r=0,o=e;const u={match:!1,pathIndex:0,commandIndex:0};for(;o<n.segments.length;){if(r>=t.length)return u;const d=n.segments[o],m=t[r];if(Al(m))break;const w=`${m}`,C=r<t.length-1?t[r+1]:null;if(o>0&&void 0===w)break;if(w&&C&&"object"==typeof C&&void 0===C.outlets){if(!Lb(w,C,d))return u;r+=2}else{if(!Lb(w,{},d))return u;r++}o++}return{match:!0,pathIndex:o,commandIndex:r}}(n,e,t),o=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){const u=new Yt(n.segments.slice(0,r.pathIndex),{});return u.children[Ht]=new Yt(n.segments.slice(r.pathIndex),n.children),vg(u,0,o)}return r.match&&0===o.length?new Yt(n.segments,{}):r.match&&!n.hasChildren()?Ci(n,e,t):r.match?vg(n,0,o):Ci(n,e,t)}function vg(n,e,t){if(0===t.length)return new Yt(n.segments,{});{const r=function Pb(n){return Al(n[0])?n[0].outlets:{[Ht]:n}}(t),o={};return yr(r,(u,d)=>{"string"==typeof u&&(u=[u]),null!==u&&(o[d]=By(n.children[d],e,u))}),yr(n.children,(u,d)=>{void 0===r[d]&&(o[d]=u)}),new Yt(n.segments,o)}}function Ci(n,e,t){const r=n.segments.slice(0,e);let o=0;for(;o<t.length;){const u=t[o];if(Al(u)){const w=Fb(u.outlets);return new Yt(r,w)}if(0===o&&rd(t[0])){r.push(new zh(n.segments[e].path,Q0(t[0]))),o++;continue}const d=Al(u)?u.outlets[Ht]:`${u}`,m=o<t.length-1?t[o+1]:null;d&&m&&rd(m)?(r.push(new zh(d,Q0(m))),o+=2):(r.push(new zh(d,{})),o++)}return new Yt(r,{})}function Fb(n){const e={};return yr(n,(t,r)=>{"string"==typeof t&&(t=[t]),null!==t&&(e[r]=Ci(new Yt([],{}),0,t))}),e}function Q0(n){const e={};return yr(n,(t,r)=>e[r]=`${t}`),e}function Lb(n,e,t){return n==t.path&&ho(e,t.parameters)}class J0{constructor(e,t,r,o){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=o}activate(e){const t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),Zh(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){const o=nd(t);e.children.forEach(u=>{const d=u.value.outlet;this.deactivateRoutes(u,o[d],r),delete o[d]}),yr(o,(u,d)=>{this.deactivateRouteAndItsChildren(u,r)})}deactivateRoutes(e,t,r){const o=e.value,u=t?t.value:null;if(o===u)if(o.component){const d=r.getContext(o.outlet);d&&this.deactivateChildRoutes(e,t,d.children)}else this.deactivateChildRoutes(e,t,r);else u&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const r=t.getContext(e.value.outlet),o=r&&e.value.component?r.children:t,u=nd(e);for(const d of Object.keys(u))this.deactivateRouteAndItsChildren(u[d],o);if(r&&r.outlet){const d=r.outlet.detach(),m=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:d,route:e,contexts:m})}}deactivateRouteAndOutlet(e,t){const r=t.getContext(e.value.outlet),o=r&&e.value.component?r.children:t,u=nd(e);for(const d of Object.keys(u))this.deactivateRouteAndItsChildren(u[d],o);r&&r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated(),r.attachRef=null,r.resolver=null,r.route=null)}activateChildRoutes(e,t,r){const o=nd(t);e.children.forEach(u=>{this.activateRoutes(u,o[u.value.outlet],r),this.forwardEvent(new Ib(u.value.snapshot))}),e.children.length&&this.forwardEvent(new O0(e.value.snapshot))}activateRoutes(e,t,r){const o=e.value,u=t?t.value:null;if(Zh(o),o===u)if(o.component){const d=r.getOrCreateContext(o.outlet);this.activateChildRoutes(e,t,d.children)}else this.activateChildRoutes(e,t,r);else if(o.component){const d=r.getOrCreateContext(o.outlet);if(this.routeReuseStrategy.shouldAttach(o.snapshot)){const m=this.routeReuseStrategy.retrieve(o.snapshot);this.routeReuseStrategy.store(o.snapshot,null),d.children.onOutletReAttached(m.contexts),d.attachRef=m.componentRef,d.route=m.route.value,d.outlet&&d.outlet.attach(m.componentRef,m.route.value),Zh(m.route.value),this.activateChildRoutes(e,null,d.children)}else{const m=function zA(n){for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig;if(t&&t.component)return null}return null}(o.snapshot),w=m?m.module.componentFactoryResolver:null;d.attachRef=null,d.route=o,d.resolver=w,d.outlet&&d.outlet.activateWith(o,w),this.activateChildRoutes(e,null,d.children)}}else this.activateChildRoutes(e,null,r)}}class jy{constructor(e,t){this.routes=e,this.module=t}}function Uo(n){return"function"==typeof n}function Sl(n){return n instanceof Da}const id=Symbol("INITIAL_VALUE");function Qh(){return ai(n=>function D0(...n){const e=(0,So.yG)(n),t=(0,So.jO)(n),{args:r,keys:o}=eo(n);if(0===r.length)return(0,An.D)([],e);const u=new hn.y(function vy(n,e,t=Bh.y){return r=>{Ey(e,()=>{const{length:o}=n,u=new Array(o);let d=o,m=o;for(let w=0;w<o;w++)Ey(e,()=>{const C=(0,An.D)(n[w],e);let x=!1;C.subscribe((0,mn.x)(r,R=>{u[w]=R,x||(x=!0,m--),m||r.next(t(u.slice()))},()=>{--d||r.complete()}))},r)},r)}}(r,e,o?d=>nu(o,d):Bh.y));return t?u.pipe(rl(t)):u}(n.map(e=>e.pipe((0,cg.q)(1),$h(id)))).pipe(Yc((e,t)=>{let r=!1;return t.reduce((o,u,d)=>o!==id?o:(u===id&&(r=!0),r||!1!==u&&d!==t.length-1&&!Sl(u)?o:u),e)},id),Ns(e=>e!==id),(0,vt.U)(e=>Sl(e)?e:!0===e),(0,cg.q)(1)))}class jb{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.children=new sd,this.attachRef=null}}class sd{constructor(){this.contexts=new Map}onChildOutletCreated(e,t){const r=this.getOrCreateContext(e);r.outlet=t,this.contexts.set(e,r)}onChildOutletDestroyed(e){const t=this.getContext(e);t&&(t.outlet=null,t.attachRef=null)}onOutletDeactivated(){const e=this.contexts;return this.contexts=new Map,e}onOutletReAttached(e){this.contexts=e}getOrCreateContext(e){let t=this.getContext(e);return t||(t=new jb,this.contexts.set(e,t)),t}getContext(e){return this.contexts.get(e)||null}}let Eg=(()=>{class n{constructor(t,r,o,u,d){this.parentContexts=t,this.location=r,this.resolver=o,this.changeDetector=d,this.activated=null,this._activatedRoute=null,this.activateEvents=new f.vpe,this.deactivateEvents=new f.vpe,this.attachEvents=new f.vpe,this.detachEvents=new f.vpe,this.name=u||Ht,t.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const t=this.parentContexts.getContext(this.name);t&&t.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.resolver||null))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=t;const d=(r=r||this.resolver).resolveComponentFactory(t._futureSnapshot.routeConfig.component),m=this.parentContexts.getOrCreateContext(this.name).children,w=new Hb(t,m,this.location.injector);this.activated=this.location.createComponent(d,this.location.length,w),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(sd),f.Y36(f.s_b),f.Y36(f._Vd),f.$8M("name"),f.Y36(f.sBO))},n.\u0275dir=f.lG2({type:n,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"]}),n})();class Hb{constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===Lo?this.route:e===sd?this.childContexts:this.parent.get(e,t)}}let po=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=f.Xpm({type:n,selectors:[["ng-component"]],decls:1,vars:0,template:function(t,r){1&t&&f._UZ(0,"router-outlet")},directives:[Eg],encapsulation:2}),n})();function wg(n,e=""){for(let t=0;t<n.length;t++){const r=n[t];$b(r,Gb(e,r))}}function $b(n,e){n.children&&wg(n.children,e)}function Gb(n,e){return e?n||e.path?n&&!e.path?`${n}/`:!n&&e.path?e.path:`${n}/${e.path}`:"":n}function tE(n){const e=n.children&&n.children.map(tE),t=e?Object.assign(Object.assign({},n),{children:e}):Object.assign({},n);return!t.component&&(e||t.loadChildren)&&t.outlet&&t.outlet!==Ht&&(t.component=po),t}function rs(n){return n.outlet||Ht}function nE(n,e){const t=n.filter(r=>rs(r)===e);return t.push(...n.filter(r=>rs(r)!==e)),t}const rE={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function Ig(n,e,t){var r;if(""===e.path)return"full"===e.pathMatch&&(n.hasChildren()||t.length>0)?Object.assign({},rE):{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};const u=(e.matcher||F0)(t,n,e);if(!u)return Object.assign({},rE);const d={};yr(u.posParams,(w,C)=>{d[C]=w.path});const m=u.consumed.length>0?Object.assign(Object.assign({},d),u.consumed[u.consumed.length-1].parameters):d;return{matched:!0,consumedSegments:u.consumed,remainingSegments:t.slice(u.consumed.length),parameters:m,positionalParamSegments:null!==(r=u.posParams)&&void 0!==r?r:{}}}function od(n,e,t,r,o="corrected"){if(t.length>0&&function bg(n,e,t){return t.some(r=>Dg(n,e,r)&&rs(r)!==Ht)}(n,t,r)){const d=new Yt(e,function zb(n,e,t,r){const o={};o[Ht]=r,r._sourceSegment=n,r._segmentIndexShift=e.length;for(const u of t)if(""===u.path&&rs(u)!==Ht){const d=new Yt([],{});d._sourceSegment=n,d._segmentIndexShift=e.length,o[rs(u)]=d}return o}(n,e,r,new Yt(t,n.children)));return d._sourceSegment=n,d._segmentIndexShift=e.length,{segmentGroup:d,slicedSegments:[]}}if(0===t.length&&function Hy(n,e,t){return t.some(r=>Dg(n,e,r))}(n,t,r)){const d=new Yt(n.segments,function qb(n,e,t,r,o,u){const d={};for(const m of r)if(Dg(n,t,m)&&!o[rs(m)]){const w=new Yt([],{});w._sourceSegment=n,w._segmentIndexShift="legacy"===u?n.segments.length:e.length,d[rs(m)]=w}return Object.assign(Object.assign({},o),d)}(n,e,t,r,n.children,o));return d._sourceSegment=n,d._segmentIndexShift=e.length,{segmentGroup:d,slicedSegments:t}}const u=new Yt(n.segments,n.children);return u._sourceSegment=n,u._segmentIndexShift=e.length,{segmentGroup:u,slicedSegments:t}}function Dg(n,e,t){return(!(n.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}function Cg(n,e,t,r){return!!(rs(n)===r||r!==Ht&&Dg(e,t,n))&&("**"===n.path||Ig(e,n,t).matched)}function Tg(n,e,t){return 0===e.length&&!n.children[t]}class Jh{constructor(e){this.segmentGroup=e||null}}class iE{constructor(e){this.urlTree=e}}function Xh(n){return Kc(new Jh(n))}function Ag(n){return Kc(new iE(n))}class oE{constructor(e,t,r,o,u){this.configLoader=t,this.urlSerializer=r,this.urlTree=o,this.config=u,this.allowRedirects=!0,this.ngModule=e.get(f.h0i)}apply(){const e=od(this.urlTree.root,[],[],this.config).segmentGroup,t=new Yt(e.segments,e.children);return this.expandSegmentGroup(this.ngModule,this.config,t,Ht).pipe((0,vt.U)(u=>this.createUrlTree(Sg(u),this.urlTree.queryParams,this.urlTree.fragment))).pipe(lo(u=>{if(u instanceof iE)return this.allowRedirects=!1,this.match(u.urlTree);throw u instanceof Jh?this.noMatchError(u):u}))}match(e){return this.expandSegmentGroup(this.ngModule,this.config,e.root,Ht).pipe((0,vt.U)(o=>this.createUrlTree(Sg(o),e.queryParams,e.fragment))).pipe(lo(o=>{throw o instanceof Jh?this.noMatchError(o):o}))}noMatchError(e){return new Error(`Cannot match any routes. URL Segment: '${e.segmentGroup}'`)}createUrlTree(e,t,r){const o=e.segments.length>0?new Yt([],{[Ht]:e}):e;return new Da(o,t,r)}expandSegmentGroup(e,t,r,o){return 0===r.segments.length&&r.hasChildren()?this.expandChildren(e,t,r).pipe((0,vt.U)(u=>new Yt([],u))):this.expandSegment(e,r,t,r.segments,o,!0)}expandChildren(e,t,r){const o=[];for(const u of Object.keys(r.children))"primary"===u?o.unshift(u):o.push(u);return(0,An.D)(o).pipe(Os(u=>{const d=r.children[u],m=nE(t,u);return this.expandSegmentGroup(e,m,d,u).pipe((0,vt.U)(w=>({segment:w,outlet:u})))}),Yc((u,d)=>(u[d.outlet]=d.segment,u),{}),function Ty(n,e){const t=arguments.length>=2;return r=>r.pipe(n?Ns((o,u)=>n(o,u,r)):Bh.y,Qc(1),t?Cy(e):by(()=>new lg))}())}expandSegment(e,t,r,o,u,d){return(0,An.D)(r).pipe(Os(m=>this.expandSegmentAgainstRoute(e,t,r,m,o,u,d).pipe(lo(C=>{if(C instanceof Jh)return ct(null);throw C}))),co(m=>!!m),lo((m,w)=>{if(m instanceof lg||"EmptyError"===m.name)return Tg(t,o,u)?ct(new Yt([],{})):Xh(t);throw m}))}expandSegmentAgainstRoute(e,t,r,o,u,d,m){return Cg(o,t,u,d)?void 0===o.redirectTo?this.matchSegmentAgainstRoute(e,t,o,u,d):m&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,t,r,o,u,d):Xh(t):Xh(t)}expandSegmentAgainstRouteUsingRedirect(e,t,r,o,u,d){return"**"===o.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,r,o,d):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,o,u,d)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,r,o){const u=this.applyRedirectCommands([],r.redirectTo,{});return r.redirectTo.startsWith("/")?Ag(u):this.lineralizeSegments(r,u).pipe((0,rr.z)(d=>{const m=new Yt(d,{});return this.expandSegment(e,m,t,d,o,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,o,u,d){const{matched:m,consumedSegments:w,remainingSegments:C,positionalParamSegments:x}=Ig(t,o,u);if(!m)return Xh(t);const R=this.applyRedirectCommands(w,o.redirectTo,x);return o.redirectTo.startsWith("/")?Ag(R):this.lineralizeSegments(o,R).pipe((0,rr.z)(H=>this.expandSegment(e,t,r,H.concat(C),d,!1)))}matchSegmentAgainstRoute(e,t,r,o,u){if("**"===r.path)return r.loadChildren?(r._loadedConfig?ct(r._loadedConfig):this.configLoader.load(e.injector,r)).pipe((0,vt.U)(R=>(r._loadedConfig=R,new Yt(o,{})))):ct(new Yt(o,{}));const{matched:d,consumedSegments:m,remainingSegments:w}=Ig(t,r,o);return d?this.getChildConfig(e,r,o).pipe((0,rr.z)(x=>{const R=x.module,H=x.routes,{segmentGroup:G,slicedSegments:X}=od(t,m,w,H),Ne=new Yt(G.segments,G.children);if(0===X.length&&Ne.hasChildren())return this.expandChildren(R,H,Ne).pipe((0,vt.U)(qt=>new Yt(m,qt)));if(0===H.length&&0===X.length)return ct(new Yt(m,{}));const tt=rs(r)===u;return this.expandSegment(R,Ne,H,X,tt?Ht:u,!0).pipe((0,vt.U)(kt=>new Yt(m.concat(kt.segments),kt.children)))})):Xh(t)}getChildConfig(e,t,r){return t.children?ct(new jy(t.children,e)):t.loadChildren?void 0!==t._loadedConfig?ct(t._loadedConfig):this.runCanLoadGuards(e.injector,t,r).pipe((0,rr.z)(o=>o?this.configLoader.load(e.injector,t).pipe((0,vt.U)(u=>(t._loadedConfig=u,u))):function Wb(n){return Kc(Sy(`Cannot load children because the guard of the route "path: '${n.path}'" returned false`))}(t))):ct(new jy([],e))}runCanLoadGuards(e,t,r){const o=t.canLoad;return o&&0!==o.length?ct(o.map(d=>{const m=e.get(d);let w;if(function Vb(n){return n&&Uo(n.canLoad)}(m))w=m.canLoad(t,r);else{if(!Uo(m))throw new Error("Invalid CanLoad guard");w=m(t,r)}return Ar(w)})).pipe(Qh(),(0,ns.b)(d=>{if(!Sl(d))return;const m=Sy(`Redirecting to "${this.urlSerializer.serialize(d)}"`);throw m.url=d,m}),(0,vt.U)(d=>!0===d)):ct(!0)}lineralizeSegments(e,t){let r=[],o=t.root;for(;;){if(r=r.concat(o.segments),0===o.numberOfChildren)return ct(r);if(o.numberOfChildren>1||!o.children[Ht])return Kc(new Error(`Only absolute redirects can have named outlets. redirectTo: '${e.redirectTo}'`));o=o.children[Ht]}}applyRedirectCommands(e,t,r){return this.applyRedirectCreatreUrlTree(t,this.urlSerializer.parse(t),e,r)}applyRedirectCreatreUrlTree(e,t,r,o){const u=this.createSegmentGroup(e,t.root,r,o);return new Da(u,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const r={};return yr(e,(o,u)=>{if("string"==typeof o&&o.startsWith(":")){const m=o.substring(1);r[u]=t[m]}else r[u]=o}),r}createSegmentGroup(e,t,r,o){const u=this.createSegments(e,t.segments,r,o);let d={};return yr(t.children,(m,w)=>{d[w]=this.createSegmentGroup(e,m,r,o)}),new Yt(u,d)}createSegments(e,t,r,o){return t.map(u=>u.path.startsWith(":")?this.findPosParam(e,u,o):this.findOrReturn(u,r))}findPosParam(e,t,r){const o=r[t.path.substring(1)];if(!o)throw new Error(`Cannot redirect to '${e}'. Cannot find '${t.path}'.`);return o}findOrReturn(e,t){let r=0;for(const o of t){if(o.path===e.path)return t.splice(r),o;r++}return e}}function Sg(n){const e={};for(const r of Object.keys(n.children)){const u=Sg(n.children[r]);(u.segments.length>0||u.hasChildren())&&(e[r]=u)}return function aE(n){if(1===n.numberOfChildren&&n.children[Ht]){const e=n.children[Ht];return new Yt(n.segments.concat(e.segments),e.children)}return n}(new Yt(n.segments,e))}class Bo{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class Ml{constructor(e,t){this.component=e,this.route=t}}function Zb(n,e,t){const r=n._root;return ad(r,e?e._root:null,t,[r.value])}function $y(n,e,t){const r=function Gy(n){if(!n)return null;for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig}return null}(e);return(r?r.module.injector:t).get(n)}function ad(n,e,t,r,o={canDeactivateChecks:[],canActivateChecks:[]}){const u=nd(e);return n.children.forEach(d=>{(function qy(n,e,t,r,o={canDeactivateChecks:[],canActivateChecks:[]}){const u=n.value,d=e?e.value:null,m=t?t.getContext(n.value.outlet):null;if(d&&u.routeConfig===d.routeConfig){const w=function ef(n,e,t){if("function"==typeof t)return t(n,e);switch(t){case"pathParamsChange":return!Dl(n.url,e.url);case"pathParamsOrQueryParamsChange":return!Dl(n.url,e.url)||!ho(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!mu(n,e)||!ho(n.queryParams,e.queryParams);default:return!mu(n,e)}}(d,u,u.routeConfig.runGuardsAndResolvers);w?o.canActivateChecks.push(new Bo(r)):(u.data=d.data,u._resolvedData=d._resolvedData),ad(n,e,u.component?m?m.children:null:t,r,o),w&&m&&m.outlet&&m.outlet.isActivated&&o.canDeactivateChecks.push(new Ml(m.outlet.component,d))}else d&&tf(e,m,o),o.canActivateChecks.push(new Bo(r)),ad(n,null,u.component?m?m.children:null:t,r,o)})(d,u[d.value.outlet],t,r.concat([d.value]),o),delete u[d.value.outlet]}),yr(u,(d,m)=>tf(d,t.getContext(m),o)),o}function tf(n,e,t){const r=nd(n),o=n.value;yr(r,(u,d)=>{tf(u,o.component?e?e.children.getContext(d):null:e,t)}),t.canDeactivateChecks.push(new Ml(o.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,o))}class hE{}function xl(n){return new hn.y(e=>e.error(n))}class Xb{constructor(e,t,r,o,u,d){this.rootComponentType=e,this.config=t,this.urlTree=r,this.url=o,this.paramsInheritanceStrategy=u,this.relativeLinkResolution=d}recognize(){const e=od(this.urlTree.root,[],[],this.config.filter(d=>void 0===d.redirectTo),this.relativeLinkResolution).segmentGroup,t=this.processSegmentGroup(this.config,e,Ht);if(null===t)return null;const r=new yg([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},Ht,this.rootComponentType,null,this.urlTree.root,-1,{}),o=new fo(r,t),u=new $0(this.url,o);return this.inheritParamsAndData(u._root),u}inheritParamsAndData(e){const t=e.value,r=j0(t,this.paramsInheritanceStrategy);t.params=Object.freeze(r.params),t.data=Object.freeze(r.data),e.children.forEach(o=>this.inheritParamsAndData(o))}processSegmentGroup(e,t,r){return 0===t.segments.length&&t.hasChildren()?this.processChildren(e,t):this.processSegment(e,t,t.segments,r)}processChildren(e,t){const r=[];for(const u of Object.keys(t.children)){const d=t.children[u],m=nE(e,u),w=this.processSegmentGroup(m,d,u);if(null===w)return null;r.push(...w)}const o=pE(r);return function eD(n){n.sort((e,t)=>e.value.outlet===Ht?-1:t.value.outlet===Ht?1:e.value.outlet.localeCompare(t.value.outlet))}(o),o}processSegment(e,t,r,o){for(const u of e){const d=this.processSegmentAgainstRoute(u,t,r,o);if(null!==d)return d}return Tg(t,r,o)?[]:null}processSegmentAgainstRoute(e,t,r,o){if(e.redirectTo||!Cg(e,t,r,o))return null;let u,d=[],m=[];if("**"===e.path){const G=r.length>0?My(r).parameters:{};u=new yg(r,G,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,Mg(e),rs(e),e.component,e,gE(t),go(t)+r.length,Zy(e))}else{const G=Ig(t,e,r);if(!G.matched)return null;d=G.consumedSegments,m=G.remainingSegments,u=new yg(d,G.parameters,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,Mg(e),rs(e),e.component,e,gE(t),go(t)+d.length,Zy(e))}const w=function ud(n){return n.children?n.children:n.loadChildren?n._loadedConfig.routes:[]}(e),{segmentGroup:C,slicedSegments:x}=od(t,d,m,w.filter(G=>void 0===G.redirectTo),this.relativeLinkResolution);if(0===x.length&&C.hasChildren()){const G=this.processChildren(w,C);return null===G?null:[new fo(u,G)]}if(0===w.length&&0===x.length)return[new fo(u,[])];const R=rs(e)===o,H=this.processSegment(w,C,x,R?Ht:o);return null===H?null:[new fo(u,H)]}}function tD(n){const e=n.value.routeConfig;return e&&""===e.path&&void 0===e.redirectTo}function pE(n){const e=[],t=new Set;for(const r of n){if(!tD(r)){e.push(r);continue}const o=e.find(u=>r.value.routeConfig===u.value.routeConfig);void 0!==o?(o.children.push(...r.children),t.add(o)):e.push(r)}for(const r of t){const o=pE(r.children);e.push(new fo(r.value,o))}return e.filter(r=>!t.has(r))}function gE(n){let e=n;for(;e._sourceSegment;)e=e._sourceSegment;return e}function go(n){let e=n,t=e._segmentIndexShift?e._segmentIndexShift:0;for(;e._sourceSegment;)e=e._sourceSegment,t+=e._segmentIndexShift?e._segmentIndexShift:0;return t-1}function Mg(n){return n.data||{}}function Zy(n){return n.resolve||{}}function vE(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}function Ky(n){return ai(e=>{const t=n(e);return t?(0,An.D)(t).pipe((0,vt.U)(()=>e)):ct(e)})}class wE extends class KA{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}{}const Yy=new f.OlP("ROUTES");class IE{constructor(e,t,r,o){this.injector=e,this.compiler=t,this.onLoadStartListener=r,this.onLoadEndListener=o}load(e,t){if(t._loader$)return t._loader$;this.onLoadStartListener&&this.onLoadStartListener(t);const o=this.loadModuleFactory(t.loadChildren).pipe((0,vt.U)(u=>{this.onLoadEndListener&&this.onLoadEndListener(t);const d=u.create(e);return new jy(Vs(d.injector.get(Yy,void 0,f.XFs.Self|f.XFs.Optional)).map(tE),d)}),lo(u=>{throw t._loader$=void 0,u}));return t._loader$=new yb(o,()=>new Fo.x).pipe(Hh()),t._loader$}loadModuleFactory(e){return Ar(e()).pipe((0,rr.z)(t=>t instanceof f.YKP?ct(t):(0,An.D)(this.compiler.compileModuleAsync(t))))}}class QA{shouldProcessUrl(e){return!0}extract(e){return e}merge(e,t){return e}}function Qy(n){throw n}function iD(n,e,t){return e.parse("/")}function Jy(n,e){return ct(null)}const bE={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},JA={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let pn=(()=>{class n{constructor(t,r,o,u,d,m,w){this.rootComponentType=t,this.urlSerializer=r,this.rootContexts=o,this.location=u,this.config=w,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new Fo.x,this.errorHandler=Qy,this.malformedUriErrorHandler=iD,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:Jy,afterPreactivation:Jy},this.urlHandlingStrategy=new QA,this.routeReuseStrategy=new wE,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.ngModule=d.get(f.h0i),this.console=d.get(f.c2e);const R=d.get(f.R0b);this.isNgZoneEnabled=R instanceof f.R0b&&f.R0b.isInAngularZone(),this.resetConfig(w),this.currentUrlTree=function xy(){return new Da(new Yt([],{}),{},null)}(),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new IE(d,m,H=>this.triggerEvent(new R0(H)),H=>this.triggerEvent(new Ls(H))),this.routerState=Uy(this.currentUrlTree,this.rootComponentType),this.transitions=new uo({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){var t;return null===(t=this.location.getState())||void 0===t?void 0:t.\u0275routerPageId}setupNavigations(t){const r=this.events;return t.pipe(Ns(o=>0!==o.id),(0,vt.U)(o=>Object.assign(Object.assign({},o),{extractedUrl:this.urlHandlingStrategy.extract(o.rawUrl)})),ai(o=>{let u=!1,d=!1;return ct(o).pipe((0,ns.b)(m=>{this.currentNavigation={id:m.id,initialUrl:m.currentRawUrl,extractedUrl:m.extractedUrl,trigger:m.source,extras:m.extras,previousNavigation:this.lastSuccessfulNavigation?Object.assign(Object.assign({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),ai(m=>{const w=this.browserUrlTree.toString(),C=!this.navigated||m.extractedUrl.toString()!==w||w!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||C)&&this.urlHandlingStrategy.shouldProcessUrl(m.rawUrl))return sD(m.source)&&(this.browserUrlTree=m.extractedUrl),ct(m).pipe(ai(R=>{const H=this.transitions.getValue();return r.next(new Ay(R.id,this.serializeUrl(R.extractedUrl),R.source,R.restoredState)),H!==this.transitions.getValue()?bl.E:Promise.resolve(R)}),function uE(n,e,t,r){return ai(o=>function sE(n,e,t,r,o){return new oE(n,e,t,r,o).apply()}(n,e,t,o.extractedUrl,r).pipe((0,vt.U)(u=>Object.assign(Object.assign({},o),{urlAfterRedirects:u}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),(0,ns.b)(R=>{this.currentNavigation=Object.assign(Object.assign({},this.currentNavigation),{finalUrl:R.urlAfterRedirects})}),function mE(n,e,t,r,o){return(0,rr.z)(u=>function fE(n,e,t,r,o="emptyOnly",u="legacy"){try{const d=new Xb(n,e,t,r,o,u).recognize();return null===d?xl(new hE):ct(d)}catch(d){return xl(d)}}(n,e,u.urlAfterRedirects,t(u.urlAfterRedirects),r,o).pipe((0,vt.U)(d=>Object.assign(Object.assign({},u),{targetSnapshot:d}))))}(this.rootComponentType,this.config,R=>this.serializeUrl(R),this.paramsInheritanceStrategy,this.relativeLinkResolution),(0,ns.b)(R=>{if("eager"===this.urlUpdateStrategy){if(!R.extras.skipLocationChange){const G=this.urlHandlingStrategy.merge(R.urlAfterRedirects,R.rawUrl);this.setBrowserUrl(G,R)}this.browserUrlTree=R.urlAfterRedirects}const H=new VA(R.id,this.serializeUrl(R.extractedUrl),this.serializeUrl(R.urlAfterRedirects),R.targetSnapshot);r.next(H)}));if(C&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:H,extractedUrl:G,source:X,restoredState:Ne,extras:tt}=m,_t=new Ay(H,this.serializeUrl(G),X,Ne);r.next(_t);const kt=Uy(G,this.rootComponentType).snapshot;return ct(Object.assign(Object.assign({},m),{targetSnapshot:kt,urlAfterRedirects:G,extras:Object.assign(Object.assign({},tt),{skipLocationChange:!1,replaceUrl:!1})}))}return this.rawUrlTree=m.rawUrl,m.resolve(null),bl.E}),Ky(m=>{const{targetSnapshot:w,id:C,extractedUrl:x,rawUrl:R,extras:{skipLocationChange:H,replaceUrl:G}}=m;return this.hooks.beforePreactivation(w,{navigationId:C,appliedUrlTree:x,rawUrlTree:R,skipLocationChange:!!H,replaceUrl:!!G})}),(0,ns.b)(m=>{const w=new M0(m.id,this.serializeUrl(m.extractedUrl),this.serializeUrl(m.urlAfterRedirects),m.targetSnapshot);this.triggerEvent(w)}),(0,vt.U)(m=>Object.assign(Object.assign({},m),{guards:Zb(m.targetSnapshot,m.currentSnapshot,this.rootContexts)})),function zy(n,e){return(0,rr.z)(t=>{const{targetSnapshot:r,currentSnapshot:o,guards:{canActivateChecks:u,canDeactivateChecks:d}}=t;return 0===d.length&&0===u.length?ct(Object.assign(Object.assign({},t),{guardsResult:!0})):function lE(n,e,t,r){return(0,An.D)(n).pipe((0,rr.z)(o=>function Jb(n,e,t,r,o){const u=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return u&&0!==u.length?ct(u.map(m=>{const w=$y(m,e,o);let C;if(function Bb(n){return n&&Uo(n.canDeactivate)}(w))C=Ar(w.canDeactivate(n,e,t,r));else{if(!Uo(w))throw new Error("Invalid CanDeactivate guard");C=Ar(w(n,e,t,r))}return C.pipe(co())})).pipe(Qh()):ct(!0)}(o.component,o.route,t,e,r)),co(o=>!0!==o,!0))}(d,r,o,n).pipe((0,rr.z)(m=>m&&function X0(n){return"boolean"==typeof n}(m)?function cE(n,e,t,r){return(0,An.D)(e).pipe(Os(o=>Ia(function Yb(n,e){return null!==n&&e&&e(new Eb(n)),ct(!0)}(o.route.parent,r),function dE(n,e){return null!==n&&e&&e(new wb(n)),ct(!0)}(o.route,r),function Qb(n,e,t){const r=e[e.length-1],u=e.slice(0,e.length-1).reverse().map(d=>function Kb(n){const e=n.routeConfig?n.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:n,guards:e}:null}(d)).filter(d=>null!==d).map(d=>wy(()=>ct(d.guards.map(w=>{const C=$y(w,d.node,t);let x;if(function eE(n){return n&&Uo(n.canActivateChild)}(C))x=Ar(C.canActivateChild(r,n));else{if(!Uo(C))throw new Error("Invalid CanActivateChild guard");x=Ar(C(r,n))}return x.pipe(co())})).pipe(Qh())));return ct(u).pipe(Qh())}(n,o.path,t),function Wy(n,e,t){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return ct(!0);const o=r.map(u=>wy(()=>{const d=$y(u,e,t);let m;if(function Ub(n){return n&&Uo(n.canActivate)}(d))m=Ar(d.canActivate(e,n));else{if(!Uo(d))throw new Error("Invalid CanActivate guard");m=Ar(d(e,n))}return m.pipe(co())}));return ct(o).pipe(Qh())}(n,o.route,t))),co(o=>!0!==o,!0))}(r,u,n,e):ct(m)),(0,vt.U)(m=>Object.assign(Object.assign({},t),{guardsResult:m})))})}(this.ngModule.injector,m=>this.triggerEvent(m)),(0,ns.b)(m=>{if(Sl(m.guardsResult)){const C=Sy(`Redirecting to "${this.serializeUrl(m.guardsResult)}"`);throw C.url=m.guardsResult,C}const w=new _b(m.id,this.serializeUrl(m.extractedUrl),this.serializeUrl(m.urlAfterRedirects),m.targetSnapshot,!!m.guardsResult);this.triggerEvent(w)}),Ns(m=>!!m.guardsResult||(this.restoreHistory(m),this.cancelNavigationTransition(m,""),!1)),Ky(m=>{if(m.guards.canActivateChecks.length)return ct(m).pipe((0,ns.b)(w=>{const C=new x0(w.id,this.serializeUrl(w.extractedUrl),this.serializeUrl(w.urlAfterRedirects),w.targetSnapshot);this.triggerEvent(C)}),ai(w=>{let C=!1;return ct(w).pipe(function yE(n,e){return(0,rr.z)(t=>{const{targetSnapshot:r,guards:{canActivateChecks:o}}=t;if(!o.length)return ct(t);let u=0;return(0,An.D)(o).pipe(Os(d=>function _E(n,e,t,r){return function nD(n,e,t,r){const o=vE(n);if(0===o.length)return ct({});const u={};return(0,An.D)(o).pipe((0,rr.z)(d=>function rD(n,e,t,r){const o=$y(n,e,r);return Ar(o.resolve?o.resolve(e,t):o(e,t))}(n[d],e,t,r).pipe((0,ns.b)(m=>{u[d]=m}))),Qc(1),(0,rr.z)(()=>vE(u).length===o.length?ct(u):bl.E))}(n._resolve,n,e,r).pipe((0,vt.U)(u=>(n._resolvedData=u,n.data=Object.assign(Object.assign({},n.data),j0(n,t).resolve),null)))}(d.route,r,n,e)),(0,ns.b)(()=>u++),Qc(1),(0,rr.z)(d=>u===o.length?ct(t):bl.E))})}(this.paramsInheritanceStrategy,this.ngModule.injector),(0,ns.b)({next:()=>C=!0,complete:()=>{C||(this.restoreHistory(w),this.cancelNavigationTransition(w,"At least one route resolver didn't emit any value."))}}))}),(0,ns.b)(w=>{const C=new vb(w.id,this.serializeUrl(w.extractedUrl),this.serializeUrl(w.urlAfterRedirects),w.targetSnapshot);this.triggerEvent(C)}))}),Ky(m=>{const{targetSnapshot:w,id:C,extractedUrl:x,rawUrl:R,extras:{skipLocationChange:H,replaceUrl:G}}=m;return this.hooks.afterPreactivation(w,{navigationId:C,appliedUrlTree:x,rawUrlTree:R,skipLocationChange:!!H,replaceUrl:!!G})}),(0,vt.U)(m=>{const w=function Kh(n,e,t){const r=Vo(n,e._root,t?t._root:void 0);return new Ca(r,e)}(this.routeReuseStrategy,m.targetSnapshot,m.currentRouterState);return Object.assign(Object.assign({},m),{targetRouterState:w})}),(0,ns.b)(m=>{this.currentUrlTree=m.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(m.urlAfterRedirects,m.rawUrl),this.routerState=m.targetRouterState,"deferred"===this.urlUpdateStrategy&&(m.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,m),this.browserUrlTree=m.urlAfterRedirects)}),((n,e,t)=>(0,vt.U)(r=>(new J0(e,r.targetRouterState,r.currentRouterState,t).activate(n),r)))(this.rootContexts,this.routeReuseStrategy,m=>this.triggerEvent(m)),(0,ns.b)({next(){u=!0},complete(){u=!0}}),function A0(n){return(0,qr.e)((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}(()=>{var m;u||d||this.cancelNavigationTransition(o,`Navigation ID ${o.id} is not equal to the current navigation id ${this.navigationId}`),(null===(m=this.currentNavigation)||void 0===m?void 0:m.id)===o.id&&(this.currentNavigation=null)}),lo(m=>{if(d=!0,function Tt(n){return n&&n[k0]}(m)){const w=Sl(m.url);w||(this.navigated=!0,this.restoreHistory(o,!0));const C=new dg(o.id,this.serializeUrl(o.extractedUrl),m.message);r.next(C),w?setTimeout(()=>{const x=this.urlHandlingStrategy.merge(m.url,this.rawUrlTree),R={skipLocationChange:o.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||sD(o.source)};this.scheduleNavigation(x,"imperative",null,R,{resolve:o.resolve,reject:o.reject,promise:o.promise})},0):o.resolve(!1)}else{this.restoreHistory(o,!0);const w=new S0(o.id,this.serializeUrl(o.extractedUrl),m);r.next(w);try{o.resolve(this.errorHandler(m))}catch(C){o.reject(C)}}return bl.E}))}))}resetRootComponentType(t){this.rootComponentType=t,this.routerState.root.component=this.rootComponentType}setTransition(t){this.transitions.next(Object.assign(Object.assign({},this.transitions.value),t))}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const r="popstate"===t.type?"popstate":"hashchange";"popstate"===r&&setTimeout(()=>{var o;const u={replaceUrl:!0},d=(null===(o=t.state)||void 0===o?void 0:o.navigationId)?t.state:null;if(d){const w=Object.assign({},d);delete w.navigationId,delete w.\u0275routerPageId,0!==Object.keys(w).length&&(u.state=w)}const m=this.parseUrl(t.url);this.scheduleNavigation(m,r,d,u)},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(t){this.events.next(t)}resetConfig(t){wg(t),this.config=t.map(tE),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(t,r={}){const{relativeTo:o,queryParams:u,fragment:d,queryParamsHandling:m,preserveFragment:w}=r,C=o||this.routerState.root,x=w?this.currentUrlTree.fragment:d;let R=null;switch(m){case"merge":R=Object.assign(Object.assign({},this.currentUrlTree.queryParams),u);break;case"preserve":R=this.currentUrlTree.queryParams;break;default:R=u||null}return null!==R&&(R=this.removeEmptyProps(R)),function q0(n,e,t,r,o){if(0===t.length)return _g(e.root,e.root,e.root,r,o);const u=function W0(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new z0(!0,0,n);let e=0,t=!1;const r=n.reduce((o,u,d)=>{if("object"==typeof u&&null!=u){if(u.outlets){const m={};return yr(u.outlets,(w,C)=>{m[C]="string"==typeof w?w.split("/"):w}),[...o,{outlets:m}]}if(u.segmentPath)return[...o,u.segmentPath]}return"string"!=typeof u?[...o,u]:0===d?(u.split("/").forEach((m,w)=>{0==w&&"."===m||(0==w&&""===m?t=!0:".."===m?e++:""!=m&&o.push(m))}),o):[...o,u]},[]);return new z0(t,e,r)}(t);if(u.toRoot())return _g(e.root,e.root,new Yt([],{}),r,o);const d=function K0(n,e,t){if(n.isAbsolute)return new Z0(e.root,!0,0);if(-1===t.snapshot._lastPathIndex){const u=t.snapshot._urlSegment;return new Z0(u,u===e.root,0)}const r=rd(n.commands[0])?0:1;return function Y0(n,e,t){let r=n,o=e,u=t;for(;u>o;){if(u-=o,r=r.parent,!r)throw new Error("Invalid number of '../'");o=r.segments.length}return new Z0(r,!1,o-u)}(t.snapshot._urlSegment,t.snapshot._lastPathIndex+r,n.numberOfDoubleDots)}(u,e,n),m=d.processChildren?vg(d.segmentGroup,d.index,u.commands):By(d.segmentGroup,d.index,u.commands);return _g(e.root,d.segmentGroup,m,r,o)}(C,this.currentUrlTree,t,R,null!=x?x:null)}navigateByUrl(t,r={skipLocationChange:!1}){const o=Sl(t)?t:this.parseUrl(t),u=this.urlHandlingStrategy.merge(o,this.rawUrlTree);return this.scheduleNavigation(u,"imperative",null,r)}navigate(t,r={skipLocationChange:!1}){return function XA(n){for(let e=0;e<n.length;e++){const t=n[e];if(null==t)throw new Error(`The requested path contains ${t} segment at index ${e}`)}}(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let r;try{r=this.urlSerializer.parse(t)}catch(o){r=this.malformedUriErrorHandler(o,this.urlSerializer,t)}return r}isActive(t,r){let o;if(o=!0===r?Object.assign({},bE):!1===r?Object.assign({},JA):r,Sl(t))return bb(this.currentUrlTree,t,o);const u=this.parseUrl(t);return bb(this.currentUrlTree,u,o)}removeEmptyProps(t){return Object.keys(t).reduce((r,o)=>{const u=t[o];return null!=u&&(r[o]=u),r},{})}processNavigations(){this.navigations.subscribe(t=>{this.navigated=!0,this.lastSuccessfulId=t.id,this.currentPageId=t.targetPageId,this.events.next(new Jc(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,t.resolve(!0)},t=>{this.console.warn(`Unhandled Navigation Error: ${t}`)})}scheduleNavigation(t,r,o,u,d){var m,w;if(this.disposed)return Promise.resolve(!1);let C,x,R;d?(C=d.resolve,x=d.reject,R=d.promise):R=new Promise((X,Ne)=>{C=X,x=Ne});const H=++this.navigationId;let G;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(o=this.location.getState()),G=o&&o.\u0275routerPageId?o.\u0275routerPageId:u.replaceUrl||u.skipLocationChange?null!==(m=this.browserPageId)&&void 0!==m?m:0:(null!==(w=this.browserPageId)&&void 0!==w?w:0)+1):G=0,this.setTransition({id:H,targetPageId:G,source:r,restoredState:o,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:t,extras:u,resolve:C,reject:x,promise:R,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),R.catch(X=>Promise.reject(X))}setBrowserUrl(t,r){const o=this.urlSerializer.serialize(t),u=Object.assign(Object.assign({},r.extras.state),this.generateNgRouterState(r.id,r.targetPageId));this.location.isCurrentPathEqualTo(o)||r.extras.replaceUrl?this.location.replaceState(o,"",u):this.location.go(o,"",u)}restoreHistory(t,r=!1){var o,u;if("computed"===this.canceledNavigationResolution){const d=this.currentPageId-t.targetPageId;"popstate"!==t.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==(null===(o=this.currentNavigation)||void 0===o?void 0:o.finalUrl)||0===d?this.currentUrlTree===(null===(u=this.currentNavigation)||void 0===u?void 0:u.finalUrl)&&0===d&&(this.resetState(t),this.browserUrlTree=t.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(d)}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=t.currentRouterState,this.currentUrlTree=t.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(t,r){const o=new dg(t.id,this.serializeUrl(t.extractedUrl),r);this.triggerEvent(o),t.resolve(!1)}generateNgRouterState(t,r){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}}return n.\u0275fac=function(t){f.$Z()},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();function sD(n){return"imperative"!==n}let Rl=(()=>{class n{constructor(t,r,o,u,d){this.router=t,this.route=r,this.tabIndexAttribute=o,this.renderer=u,this.el=d,this.commands=null,this.onChanges=new Fo.x,this.setTabIndexIfNotOnNativeEl("0")}setTabIndexIfNotOnNativeEl(t){if(null!=this.tabIndexAttribute)return;const r=this.renderer,o=this.el.nativeElement;null!==t?r.setAttribute(o,"tabindex",t):r.removeAttribute(o,"tabindex")}ngOnChanges(t){this.onChanges.next(this)}set routerLink(t){null!=t?(this.commands=Array.isArray(t)?t:[t],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(){if(null===this.urlTree)return!0;const t={skipLocationChange:Ol(this.skipLocationChange),replaceUrl:Ol(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,t),!0}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:Ol(this.preserveFragment)})}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(pn),f.Y36(Lo),f.$8M("tabindex"),f.Y36(f.Qsj),f.Y36(f.SBq))},n.\u0275dir=f.lG2({type:n,selectors:[["","routerLink","",5,"a",5,"area"]],hostBindings:function(t,r){1&t&&f.NdJ("click",function(){return r.onClick()})},inputs:{queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo",routerLink:"routerLink"},features:[f.TTD]}),n})(),nf=(()=>{class n{constructor(t,r,o){this.router=t,this.route=r,this.locationStrategy=o,this.commands=null,this.href=null,this.onChanges=new Fo.x,this.subscription=t.events.subscribe(u=>{u instanceof Jc&&this.updateTargetUrlAndHref()})}set routerLink(t){this.commands=null!=t?Array.isArray(t)?t:[t]:null}ngOnChanges(t){this.updateTargetUrlAndHref(),this.onChanges.next(this)}ngOnDestroy(){this.subscription.unsubscribe()}onClick(t,r,o,u,d){if(0!==t||r||o||u||d||"string"==typeof this.target&&"_self"!=this.target||null===this.urlTree)return!0;const m={skipLocationChange:Ol(this.skipLocationChange),replaceUrl:Ol(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,m),!1}updateTargetUrlAndHref(){this.href=null!==this.urlTree?this.locationStrategy.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:Ol(this.preserveFragment)})}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(pn),f.Y36(Lo),f.Y36(de))},n.\u0275dir=f.lG2({type:n,selectors:[["a","routerLink",""],["area","routerLink",""]],hostVars:2,hostBindings:function(t,r){1&t&&f.NdJ("click",function(u){return r.onClick(u.button,u.ctrlKey,u.shiftKey,u.altKey,u.metaKey)}),2&t&&f.uIk("target",r.target)("href",r.href,f.LSH)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo",routerLink:"routerLink"},features:[f.TTD]}),n})();function Ol(n){return""===n||!!n}class Xy{}class DE{preload(e,t){return ct(null)}}let xg=(()=>{class n{constructor(t,r,o,u){this.router=t,this.injector=o,this.preloadingStrategy=u,this.loader=new IE(o,r,w=>t.triggerEvent(new R0(w)),w=>t.triggerEvent(new Ls(w)))}setUpPreloading(){this.subscription=this.router.events.pipe(Ns(t=>t instanceof Jc),Os(()=>this.preload())).subscribe(()=>{})}preload(){const t=this.injector.get(f.h0i);return this.processRoutes(t,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){const o=[];for(const u of r)if(u.loadChildren&&!u.canLoad&&u._loadedConfig){const d=u._loadedConfig;o.push(this.processRoutes(d.module,d.routes))}else u.loadChildren&&!u.canLoad?o.push(this.preloadConfig(t,u)):u.children&&o.push(this.processRoutes(t,u.children));return(0,An.D)(o).pipe((0,jh.J)(),(0,vt.U)(u=>{}))}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>(r._loadedConfig?ct(r._loadedConfig):this.loader.load(t.injector,r)).pipe((0,rr.z)(u=>(r._loadedConfig=u,this.processRoutes(u.module,u.routes)))))}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(pn),f.LFG(f.Sil),f.LFG(f.zs3),f.LFG(Xy))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})(),t_=(()=>{class n{constructor(t,r,o={}){this.router=t,this.viewportScroller=r,this.options=o,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},o.scrollPositionRestoration=o.scrollPositionRestoration||"disabled",o.anchorScrolling=o.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(t=>{t instanceof Ay?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof Jc&&(this.lastId=t.id,this.scheduleScrollEvent(t,this.router.parseUrl(t.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(t=>{t instanceof N0&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.router.triggerEvent(new N0(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return n.\u0275fac=function(t){f.$Z()},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();const Nl=new f.OlP("ROUTER_CONFIGURATION"),CE=new f.OlP("ROUTER_FORROOT_GUARD"),aD=[me,{provide:Ry,useClass:Ab},{provide:pn,useFactory:function cD(n,e,t,r,o,u,d={},m,w){const C=new pn(null,n,e,t,r,o,Vs(u));return m&&(C.urlHandlingStrategy=m),w&&(C.routeReuseStrategy=w),function n_(n,e){n.errorHandler&&(e.errorHandler=n.errorHandler),n.malformedUriErrorHandler&&(e.malformedUriErrorHandler=n.malformedUriErrorHandler),n.onSameUrlNavigation&&(e.onSameUrlNavigation=n.onSameUrlNavigation),n.paramsInheritanceStrategy&&(e.paramsInheritanceStrategy=n.paramsInheritanceStrategy),n.relativeLinkResolution&&(e.relativeLinkResolution=n.relativeLinkResolution),n.urlUpdateStrategy&&(e.urlUpdateStrategy=n.urlUpdateStrategy),n.canceledNavigationResolution&&(e.canceledNavigationResolution=n.canceledNavigationResolution)}(d,C),d.enableTracing&&C.events.subscribe(x=>{var R,H;null===(R=console.group)||void 0===R||R.call(console,`Router Event: ${x.constructor.name}`),console.log(x.toString()),console.log(x),null===(H=console.groupEnd)||void 0===H||H.call(console)}),C},deps:[Ry,sd,me,f.zs3,f.Sil,Yy,Nl,[class YA{},new f.FiY],[class EE{},new f.FiY]]},sd,{provide:Lo,useFactory:function jo(n){return n.routerState.root},deps:[pn]},xg,DE,class e_{preload(e,t){return t().pipe(lo(()=>ct(null)))}},{provide:Nl,useValue:{enableTracing:!1}}];function uD(){return new f.PXZ("Router",pn)}let rf=(()=>{class n{constructor(t,r){}static forRoot(t,r){return{ngModule:n,providers:[aD,TE(t),{provide:CE,useFactory:sf,deps:[[pn,new f.FiY,new f.tp0]]},{provide:Nl,useValue:r||{}},{provide:de,useFactory:lD,deps:[ce,[new f.tBr(Ye),new f.FiY],Nl]},{provide:t_,useFactory:ld,deps:[pn,Ga,Nl]},{provide:Xy,useExisting:r&&r.preloadingStrategy?r.preloadingStrategy:DE},{provide:f.PXZ,multi:!0,useFactory:uD},[Pl,{provide:f.ip1,multi:!0,useFactory:ui,deps:[Pl]},{provide:of,useFactory:kl,deps:[Pl]},{provide:f.tb,multi:!0,useExisting:of}]]}}static forChild(t){return{ngModule:n,providers:[TE(t)]}}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(CE,8),f.LFG(pn,8))},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({}),n})();function ld(n,e,t){return t.scrollOffset&&e.setOffset(t.scrollOffset),new t_(n,e,t)}function lD(n,e,t={}){return t.useHash?new be(n,e):new ze(n,e)}function sf(n){return"guarded"}function TE(n){return[{provide:f.deG,multi:!0,useValue:n},{provide:Yy,multi:!0,useValue:n}]}let Pl=(()=>{class n{constructor(t){this.injector=t,this.initNavigation=!1,this.destroyed=!1,this.resultOfPreactivationDone=new Fo.x}appInitializer(){return this.injector.get(B,Promise.resolve(null)).then(()=>{if(this.destroyed)return Promise.resolve(!0);let r=null;const o=new Promise(m=>r=m),u=this.injector.get(pn),d=this.injector.get(Nl);return"disabled"===d.initialNavigation?(u.setUpLocationChangeListener(),r(!0)):"enabled"===d.initialNavigation||"enabledBlocking"===d.initialNavigation?(u.hooks.afterPreactivation=()=>this.initNavigation?ct(null):(this.initNavigation=!0,r(!0),this.resultOfPreactivationDone),u.initialNavigation()):r(!0),o})}bootstrapListener(t){const r=this.injector.get(Nl),o=this.injector.get(xg),u=this.injector.get(t_),d=this.injector.get(pn),m=this.injector.get(f.z2F);t===m.components[0]&&(("enabledNonBlocking"===r.initialNavigation||void 0===r.initialNavigation)&&d.initialNavigation(),o.setUpPreloading(),u.init(),d.resetRootComponentType(m.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}ngOnDestroy(){this.destroyed=!0}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(f.zs3))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();function ui(n){return n.appInitializer.bind(n)}function kl(n){return n.bootstrapListener.bind(n)}const of=new f.OlP("Router Initializer");let Ta=(()=>{class n{constructor(t){this.router=t}canActivate(t,r){return!!localStorage.getItem("user")||(this.router.navigate(["/login"]),!1)}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(pn))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),cd=(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=f.Xpm({type:n,selectors:[["app-error"]],decls:4,vars:1,consts:[[3,"routerLink"]],template:function(t,r){1&t&&(f.TgZ(0,"h1"),f._uU(1,"Something went wrong"),f.qZA(),f.TgZ(2,"button",0),f._uU(3,"BACK TO THE STORE"),f.qZA()),2&t&&(f.xp6(2),f.Q6J("routerLink","/store"))},directives:[Rl],styles:[""]}),n})();var dd=k(6451),Aa=k(5363),hd=k(6063);class fd extends Fo.x{constructor(e=1/0,t=1/0,r=hd.l){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){const{isStopped:t,_buffer:r,_infiniteTimeWindow:o,_timestampProvider:u,_windowTime:d}=this;t||(r.push(e),!o&&r.push(u.now()+d)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();const t=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:o}=this,u=o.slice();for(let d=0;d<u.length&&!e.closed;d+=r?1:2)e.next(u[d]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){const{_bufferSize:e,_timestampProvider:t,_buffer:r,_infiniteTimeWindow:o}=this,u=(o?1:2)*e;if(e<1/0&&u<r.length&&r.splice(0,r.length-u),!o){const d=t.now();let m=0;for(let w=1;w<r.length&&r[w]<=d;w+=2)m=w;m&&r.splice(0,m+1)}}}var pd=k(3099);function Fl(n,e,t){let r,o=!1;return n&&"object"==typeof n?({bufferSize:r=1/0,windowTime:e=1/0,refCount:o=!1,scheduler:t}=n):r=null!=n?n:1/0,(0,pd.B)({connector:()=>new fd(r,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:o})}function Ll(n,e){return(0,Gr.m)(e)?ai(()=>n,e):ai(()=>n)}var Rg=k(9468),zr=k(5813);k(5867);var ye=k(5861),gd=k(9681),Ng=k(4859),Pt=k(2090),Ho=k(1877);const RE=new Map,uS={activated:!1,tokenObservers:[]},lS={initialized:!1,enabled:!1};function Wr(n){return RE.get(n)||uS}function mo(n,e){RE.set(n,e)}function uf(){return lS}class NE{constructor(e,t,r,o,u){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=o,this.upperBound=u,this.pending=null,this.nextErrorWaitInterval=o,o>u)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){var t=this;return(0,ye.Z)(function*(){t.stop();try{t.pending=new Pt.BH,yield function Pg(n){return new Promise(e=>{setTimeout(e,n)})}(t.getNextRun(e)),t.pending.resolve(),yield t.pending.promise,t.pending=new Pt.BH,yield t.operation(),t.pending.resolve(),yield t.pending.promise,t.process(!0).catch(()=>{})}catch(r){t.retryPolicy(r)?t.process(!1).catch(()=>{}):t.stop()}})()}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}}const li=new Pt.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function PE(n){if(!Wr(n).activated)throw li.create("use-before-activation",{appName:n.name})}function Lg(n,e){return o_.apply(this,arguments)}function o_(){return(o_=(0,ye.Z)(function*({url:n,body:e},t){const r={"Content-Type":"application/json"},o=t.getImmediate({optional:!0});if(o){const R=yield o.getHeartbeatsHeader();R&&(r["X-Firebase-Client"]=R)}const u={method:"POST",body:JSON.stringify(e),headers:r};let d,m;try{d=yield fetch(n,u)}catch(R){throw li.create("fetch-network-error",{originalErrorMessage:R.message})}if(200!==d.status)throw li.create("fetch-status-error",{httpStatus:d.status});try{m=yield d.json()}catch(R){throw li.create("fetch-parse-error",{originalErrorMessage:R.message})}const w=m.ttl.match(/^([\d.]+)(s)$/);if(!w||!w[2]||isNaN(Number(w[1])))throw li.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${m.ttl}`});const C=1e3*Number(w[1]),x=Date.now();return{token:m.token,expireTimeMillis:x+C,issuedAtTimeMillis:x}})).apply(this,arguments)}function a_(n,e){const{projectId:t,appId:r,apiKey:o}=n.options;return{url:`https://content-firebaseappcheck.googleapis.com/v1/projects/${t}/apps/${r}:exchangeDebugToken?key=${o}`,body:{debug_token:e}}}const lf="firebase-app-check-store";let yu=null;function l_(){return yu||(yu=new Promise((n,e)=>{try{const t=indexedDB.open("firebase-app-check-database",1);t.onsuccess=r=>{n(r.target.result)},t.onerror=r=>{var o;e(li.create("storage-open",{originalErrorMessage:null===(o=r.target.error)||void 0===o?void 0:o.message}))},t.onupgradeneeded=r=>{0===r.oldVersion&&r.target.result.createObjectStore(lf,{keyPath:"compositeKey"})}}catch(t){e(li.create("storage-open",{originalErrorMessage:t.message}))}}),yu)}function df(){return(df=(0,ye.Z)(function*(n,e){const r=(yield l_()).transaction(lf,"readwrite"),u=r.objectStore(lf).put({compositeKey:n,value:e});return new Promise((d,m)=>{u.onsuccess=w=>{d()},r.onerror=w=>{var C;m(li.create("storage-set",{originalErrorMessage:null===(C=w.target.error)||void 0===C?void 0:C.message}))}})})).apply(this,arguments)}const _u=new Ho.Yd("@firebase/app-check");function Bg(n,e){return(0,Pt.hl)()?function d_(n,e){return function cf(n,e){return df.apply(this,arguments)}(function hf(n){return`${n.options.appId}-${n.name}`}(n),e)}(n,e).catch(t=>{_u.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function Hg(){return uf().enabled}function f_(){return p_.apply(this,arguments)}function p_(){return(p_=(0,ye.Z)(function*(){const n=uf();if(n.enabled&&n.token)return n.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")})).apply(this,arguments)}const BE={error:"UNKNOWN_ERROR"};function g_(n){return Pt.US.encodeString(JSON.stringify(n),!1)}function ff(n){return m_.apply(this,arguments)}function m_(){return(m_=(0,ye.Z)(function*(n,e=!1){const t=n.app;PE(t);const r=Wr(t);let u,o=r.token;if(!o){const w=yield r.cachedTokenPromise;w&&pf(w)&&(o=w)}if(!e&&o&&pf(o))return{token:o.token};let m,d=!1;if(Hg()){r.exchangeTokenPromise||(r.exchangeTokenPromise=Lg(a_(t,yield f_()),n.heartbeatServiceProvider).then(C=>(r.exchangeTokenPromise=void 0,C)),d=!0);const w=yield r.exchangeTokenPromise;return yield Bg(t,w),mo(t,Object.assign(Object.assign({},r),{token:w})),{token:w.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().then(w=>(r.exchangeTokenPromise=void 0,w)),d=!0),o=yield r.exchangeTokenPromise}catch(w){"appCheck/throttled"===w.code?_u.warn(w.message):_u.error(w),u=w}return o?(m={token:o.token},mo(t,Object.assign(Object.assign({},r),{token:o})),yield Bg(t,o)):m=jE(u),d&&w_(t,m),m})).apply(this,arguments)}function __(n,e){const t=Wr(n),r=t.tokenObservers.filter(o=>o.next!==e);0===r.length&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),mo(n,Object.assign(Object.assign({},t),{tokenObservers:r}))}function v_(n){const{app:e}=n,t=Wr(e);let r=t.tokenRefresher;r||(r=function E_(n){const{app:e}=n;return new NE((0,ye.Z)(function*(){let r;if(r=Wr(e).token?yield ff(n,!0):yield ff(n),r.error)throw r.error}),()=>!0,()=>{const t=Wr(e);if(t.token){let r=t.token.issuedAtTimeMillis+.5*(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)+3e5;return r=Math.min(r,t.token.expireTimeMillis-3e5),Math.max(0,r-Date.now())}return 0},3e4,96e4)}(n),mo(e,Object.assign(Object.assign({},t),{tokenRefresher:r}))),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function w_(n,e){const t=Wr(n).tokenObservers;for(const r of t)try{"EXTERNAL"===r.type&&null!=e.error?r.error(e.error):r.next(e)}catch(o){}}function pf(n){return n.expireTimeMillis-Date.now()>0}function jE(n){return{token:g_(BE),error:n}}class HE{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){const{tokenObservers:e}=Wr(this.app);for(const t of e)__(this.app,t.next);return Promise.resolve()}}const JE="app-check-internal";!function OD(){(0,gd._registerComponent)(new Ng.wA("app-check",n=>function $E(n,e){return new HE(n,e)}(n.getProvider("app").getImmediate(),n.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(JE).initialize()})),(0,gd._registerComponent)(new Ng.wA(JE,n=>function GE(n){return{getToken:e=>ff(n,e),addTokenListener:e=>function y_(n,e,t,r){const{app:o}=n,u=Wr(o),d={next:t,error:r,type:e};if(mo(o,Object.assign(Object.assign({},u),{tokenObservers:[...u.tokenObservers,d]})),u.token&&pf(u.token)){const m=u.token;Promise.resolve().then(()=>{t({token:m.token}),v_(n)}).catch(()=>{})}u.cachedTokenPromise.then(()=>v_(n))}(n,"INTERNAL",e),removeTokenListener:e=>__(n.app,e)}}(n.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,gd.registerVersion)("@firebase/app-check","0.5.7")}();class ss{constructor(){return(0,zr.vb)("app-check")}}"undefined"!=typeof window&&window,k(127);const zg=new f.OlP("angularfire2.auth.use-emulator"),mf=new f.OlP("angularfire2.auth.settings"),Wg=new f.OlP("angularfire2.auth.tenant-id"),S_=new f.OlP("angularfire2.auth.langugage-code"),M_=new f.OlP("angularfire2.auth.use-device-language"),x_=new f.OlP("angularfire.auth.persistence"),R_=(n,e,t,r,o,u,d,m)=>(0,fn.cc)(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{const w=e.runOutsideAngular(()=>n.auth());if(t&&w.useEmulator(...t),r&&(w.tenantId=r),w.languageCode=o,u&&w.useDeviceLanguage(),d)for(const[C,x]of Object.entries(d))w.settings[C]=x;return m&&w.setPersistence(m),w},[t,r,o,u,d,m]);let Zg=(()=>{class n{constructor(t,r,o,u,d,m,w,C,x,R,H,G){const X=new Fo.x,Ne=ct(void 0).pipe((0,Aa.Q)(d.outsideAngular),ai(()=>u.runOutsideAngular(()=>Promise.resolve().then(k.bind(k,820)))),(0,vt.U)(()=>(0,fn.on)(t,u,r)),(0,vt.U)(tt=>R_(tt,u,m,C,x,R,w,H)),Fl({bufferSize:1,refCount:!1}));if(tr(o))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=ct(null);else{Ne.pipe(co()).subscribe();const _t=Ne.pipe(ai(St=>St.getRedirectResult().then(Zt=>Zt,()=>null)),zr.iC,Fl({bufferSize:1,refCount:!1})),kt=Ne.pipe(ai(St=>new hn.y(Zt=>({unsubscribe:u.runOutsideAngular(()=>St.onAuthStateChanged(cn=>Zt.next(cn),cn=>Zt.error(cn),()=>Zt.complete()))})))),qt=Ne.pipe(ai(St=>new hn.y(Zt=>({unsubscribe:u.runOutsideAngular(()=>St.onIdTokenChanged(cn=>Zt.next(cn),cn=>Zt.error(cn),()=>Zt.complete()))}))));this.authState=_t.pipe(Ll(kt),(0,Rg.R)(d.outsideAngular),(0,Aa.Q)(d.insideAngular)),this.user=_t.pipe(Ll(qt),(0,Rg.R)(d.outsideAngular),(0,Aa.Q)(d.insideAngular)),this.idToken=this.user.pipe(ai(St=>St?(0,An.D)(St.getIdToken()):ct(null))),this.idTokenResult=this.user.pipe(ai(St=>St?(0,An.D)(St.getIdTokenResult()):ct(null))),this.credential=(0,dd.T)(_t,X,this.authState.pipe(Ns(St=>!St))).pipe((0,vt.U)(St=>(null==St?void 0:St.user)?St:null),(0,Rg.R)(d.outsideAngular),(0,Aa.Q)(d.insideAngular))}return(0,fn.pX)(this,Ne,u,{spy:{apply:(tt,_t,kt)=>{(tt.startsWith("signIn")||tt.startsWith("createUser"))&&kt.then(qt=>X.next(qt))}}})}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(fn.Dh),f.LFG(fn.xv,8),f.LFG(f.Lbi),f.LFG(f.R0b),f.LFG(zr.HU),f.LFG(zg,8),f.LFG(mf,8),f.LFG(Wg,8),f.LFG(S_,8),f.LFG(M_,8),f.LFG(x_,8),f.LFG(ss,8))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),tw=(()=>{class n{constructor(t,r){this.http=t,this.auth=r}login(t,r){return this.auth.signInWithEmailAndPassword(t,r)}logout(){return this.auth.signOut()}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(og),f.LFG(Zg))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),BD=(()=>{class n{constructor(t,r){this.router=t,this.loginService=r,this.email="",this.password=""}ngOnInit(){localStorage.getItem("user")&&(localStorage.removeItem("user"),this.loginService.logout().then(()=>console.log("Logout sikeres")).catch(t=>console.log("Logout error",t)))}login(){""!=this.email&&""!=this.password&&this.loginService.login(this.email,this.password).then(t=>{localStorage.setItem("user",t.user.uid),this.router.navigate(["/store"])}).catch(t=>console.log("Login error",t))}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(pn),f.Y36(tw))},n.\u0275cmp=f.Xpm({type:n,selectors:[["app-login"]],decls:15,vars:2,consts:[["type","text",3,"ngModel","ngModelChange"],["type","password",3,"ngModel","ngModelChange"],[3,"click"]],template:function(t,r){1&t&&(f.TgZ(0,"h2"),f._uU(1,"Welcome to the best store of the world :kappa:"),f.qZA(),f.TgZ(2,"div"),f._uU(3,"Let's start with a quick login"),f.qZA(),f.TgZ(4,"div")(5,"div")(6,"label"),f._uU(7,"Email"),f.qZA(),f.TgZ(8,"input",0),f.NdJ("ngModelChange",function(u){return r.email=u}),f.qZA()(),f.TgZ(9,"div")(10,"label"),f._uU(11,"Password"),f.qZA(),f.TgZ(12,"input",1),f.NdJ("ngModelChange",function(u){return r.password=u}),f.qZA()(),f.TgZ(13,"button",2),f.NdJ("click",function(){return r.login()}),f._uU(14,"LOGIN"),f.qZA()()),2&t&&(f.xp6(8),f.Q6J("ngModel",r.email),f.xp6(4),f.Q6J("ngModel",r.password))},directives:[As,ca,lu],styles:[""]}),n})();const Ul_firebase={apiKey:"AIzaSyBGg30OpVIYk5uBtr5TsNDSyPUj69RfPRA",authDomain:"prf-shop.firebaseapp.com",projectId:"prf-shop",storageBucket:"prf-shop.appspot.com",messagingSenderId:"533395711984",appId:"1:533395711984:web:e01102fe9151a227369f35"},Ul_collections_goods="Goods",Ul_collections_orders="Orders",Ul_collections_comments="Comment";var jD=k(4986);function O_(){return(0,qr.e)((n,e)=>{let t,r=!1;n.subscribe((0,mn.x)(e,o=>{const u=t;t=o,r&&e.next([u,o]),r=!0}))})}function $D(n,e){return n===e}k(820);var Xe,GD=k(3942),qD="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},Sa={},N_=N_||{},Dt=qD||self;function Kg(){}function P_(n){var e=typeof n;return"array"==(e="object"!=e?e:n?Array.isArray(n)?"array":e:"null")||"object"==e&&"number"==typeof n.length}function yf(n){var e=typeof n;return"object"==e&&null!=n||"function"==e}var k_="closure_uid_"+(1e9*Math.random()>>>0),nw=0;function rw(n,e,t){return n.call.apply(n.bind,arguments)}function iw(n,e,t){if(!n)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var o=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(o,r),n.apply(e,o)}}return function(){return n.apply(e,arguments)}}function Sr(n,e,t){return(Sr=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?rw:iw).apply(null,arguments)}function _f(n,e){var t=Array.prototype.slice.call(arguments,1);return function(){var r=t.slice();return r.push.apply(r,arguments),n.apply(this,r)}}function Mr(n,e){function t(){}t.prototype=e.prototype,n.Z=e.prototype,n.prototype=new t,n.prototype.constructor=n,n.Vb=function(r,o,u){for(var d=Array(arguments.length-2),m=2;m<arguments.length;m++)d[m-2]=arguments[m];return e.prototype[o].apply(r,d)}}function Ma(){this.s=this.s,this.o=this.o}var ow={};Ma.prototype.s=!1,Ma.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var n=function zD(n){return Object.prototype.hasOwnProperty.call(n,k_)&&n[k_]||(n[k_]=++nw)}(this);delete ow[n]}},Ma.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const F_=Array.prototype.indexOf?function(n,e){return Array.prototype.indexOf.call(n,e,void 0)}:function(n,e){if("string"==typeof n)return"string"!=typeof e||1!=e.length?-1:n.indexOf(e,0);for(let t=0;t<n.length;t++)if(t in n&&n[t]===e)return t;return-1},L_=Array.prototype.forEach?function(n,e,t){Array.prototype.forEach.call(n,e,t)}:function(n,e,t){const r=n.length,o="string"==typeof n?n.split(""):n;for(let u=0;u<r;u++)u in o&&e.call(t,o[u],u,n)};function aw(n){return Array.prototype.concat.apply([],arguments)}function V_(n){const e=n.length;if(0<e){const t=Array(e);for(let r=0;r<e;r++)t[r]=n[r];return t}return[]}function xa(n){return/^[\s\xa0]*$/.test(n)}var ci,WD=String.prototype.trim?function(n){return n.trim()}:function(n){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(n)[1]};function Zr(n,e){return-1!=n.indexOf(e)}function uw(n,e){return n<e?-1:n>e?1:0}e:{var U_=Dt.navigator;if(U_){var ZD=U_.userAgent;if(ZD){ci=ZD;break e}}ci=""}function ht(n,e,t){for(const r in n)e.call(t,n[r],r,n)}function lw(n){const e={};for(const t in n)e[t]=n[t];return e}var cw="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function dw(n,e){let t,r;for(let o=1;o<arguments.length;o++){for(t in r=arguments[o],r)n[t]=r[t];for(let u=0;u<cw.length;u++)t=cw[u],Object.prototype.hasOwnProperty.call(r,t)&&(n[t]=r[t])}}function yd(n){return yd[" "](n),n}yd[" "]=Kg;var vf,n,Yg=Zr(ci,"Opera"),Ra=Zr(ci,"Trident")||Zr(ci,"MSIE"),Pn=Zr(ci,"Edge"),hw=Pn||Ra,B_=Zr(ci,"Gecko")&&!(Zr(ci.toLowerCase(),"webkit")&&!Zr(ci,"Edge"))&&!(Zr(ci,"Trident")||Zr(ci,"MSIE"))&&!Zr(ci,"Edge"),YD=Zr(ci.toLowerCase(),"webkit")&&!Zr(ci,"Edge");function fw(){var n=Dt.document;return n?n.documentMode:void 0}e:{var Qg="",Jg=(n=ci,B_?/rv:([^\);]+)(\)|;)/.exec(n):Pn?/Edge\/([\d\.]+)/.exec(n):Ra?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(n):YD?/WebKit\/(\S+)/.exec(n):Yg?/(?:Version)[ \/]?(\S+)/.exec(n):void 0);if(Jg&&(Qg=Jg?Jg[1]:""),Ra){var Xg=fw();if(null!=Xg&&Xg>parseFloat(Qg)){vf=String(Xg);break e}}vf=Qg}var QD={};var XD=Dt.document&&Ra&&(fw()||parseInt(vf,10))||void 0,eC=function(){if(!Dt.addEventListener||!Object.defineProperty)return!1;var n=!1,e=Object.defineProperty({},"passive",{get:function(){n=!0}});try{Dt.addEventListener("test",Kg,e),Dt.removeEventListener("test",Kg,e)}catch(t){}return n}();function di(n,e){this.type=n,this.g=this.target=e,this.defaultPrevented=!1}function vu(n,e){if(di.call(this,n?n.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,n){var t=this.type=n.type,r=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:null;if(this.target=n.target||n.srcElement,this.g=e,e=n.relatedTarget){if(B_){e:{try{yd(e.nodeName);var o=!0;break e}catch(u){}o=!1}o||(e=null)}}else"mouseover"==t?e=n.fromElement:"mouseout"==t&&(e=n.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==n.clientX?n.clientX:n.pageX,this.clientY=void 0!==n.clientY?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0),this.button=n.button,this.key=n.key||"",this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.pointerId=n.pointerId||0,this.pointerType="string"==typeof n.pointerType?n.pointerType:pw[n.pointerType]||"",this.state=n.state,this.i=n,n.defaultPrevented&&vu.Z.h.call(this)}}di.prototype.h=function(){this.defaultPrevented=!0},Mr(vu,di);var pw={2:"touch",3:"pen",4:"mouse"};vu.prototype.h=function(){vu.Z.h.call(this);var n=this.i;n.preventDefault?n.preventDefault():n.returnValue=!1};var vd="closure_listenable_"+(1e6*Math.random()|0),gw=0;function tC(n,e,t,r,o){this.listener=n,this.proxy=null,this.src=e,this.type=t,this.capture=!!r,this.ia=o,this.key=++gw,this.ca=this.fa=!1}function Eu(n){n.ca=!0,n.listener=null,n.proxy=null,n.src=null,n.ia=null}function wu(n){this.src=n,this.g={},this.h=0}function H_(n,e){var t=e.type;if(t in n.g){var u,r=n.g[t],o=F_(r,e);(u=0<=o)&&Array.prototype.splice.call(r,o,1),u&&(Eu(e),0==n.g[t].length&&(delete n.g[t],n.h--))}}function $_(n,e,t,r){for(var o=0;o<n.length;++o){var u=n[o];if(!u.ca&&u.listener==e&&u.capture==!!t&&u.ia==r)return o}return-1}wu.prototype.add=function(n,e,t,r,o){var u=n.toString();(n=this.g[u])||(n=this.g[u]=[],this.h++);var d=$_(n,e,r,o);return-1<d?(e=n[d],t||(e.fa=!1)):((e=new tC(e,this.src,u,!!r,o)).fa=t,n.push(e)),e};var G_="closure_lm_"+(1e6*Math.random()|0),em={};function q_(n,e,t,r,o){if(r&&r.once)return W_(n,e,t,r,o);if(Array.isArray(e)){for(var u=0;u<e.length;u++)q_(n,e[u],t,r,o);return null}return t=tm(t),n&&n[vd]?n.N(e,t,yf(r)?!!r.capture:!!r,o):z_(n,e,t,!1,r,o)}function z_(n,e,t,r,o,u){if(!e)throw Error("Invalid event type");var d=yf(o)?!!o.capture:!!o,m=yw(n);if(m||(n[G_]=m=new wu(n)),(t=m.add(e,t,r,d,u)).proxy)return t;if(r=function nC(){var e=_S;return function n(t){return e.call(n.src,n.listener,t)}}(),t.proxy=r,r.src=n,r.listener=t,n.addEventListener)eC||(o=d),void 0===o&&(o=!1),n.addEventListener(e.toString(),r,o);else if(n.attachEvent)n.attachEvent(rC(e.toString()),r);else{if(!n.addListener||!n.removeListener)throw Error("addEventListener and attachEvent are unavailable.");n.addListener(r)}return t}function W_(n,e,t,r,o){if(Array.isArray(e)){for(var u=0;u<e.length;u++)W_(n,e[u],t,r,o);return null}return t=tm(t),n&&n[vd]?n.O(e,t,yf(r)?!!r.capture:!!r,o):z_(n,e,t,!0,r,o)}function mw(n,e,t,r,o){if(Array.isArray(e))for(var u=0;u<e.length;u++)mw(n,e[u],t,r,o);else r=yf(r)?!!r.capture:!!r,t=tm(t),n&&n[vd]?(n=n.i,(e=String(e).toString())in n.g&&-1<(t=$_(u=n.g[e],t,r,o))&&(Eu(u[t]),Array.prototype.splice.call(u,t,1),0==u.length&&(delete n.g[e],n.h--))):n&&(n=yw(n))&&(e=n.g[e.toString()],n=-1,e&&(n=$_(e,t,r,o)),(t=-1<n?e[n]:null)&&Z_(t))}function Z_(n){if("number"!=typeof n&&n&&!n.ca){var e=n.src;if(e&&e[vd])H_(e.i,n);else{var t=n.type,r=n.proxy;e.removeEventListener?e.removeEventListener(t,r,n.capture):e.detachEvent?e.detachEvent(rC(t),r):e.addListener&&e.removeListener&&e.removeListener(r),(t=yw(e))?(H_(t,n),0==t.h&&(t.src=null,e[G_]=null)):Eu(n)}}}function rC(n){return n in em?em[n]:em[n]="on"+n}function _S(n,e){if(n.ca)n=!0;else{e=new vu(e,this);var t=n.listener,r=n.ia||n.src;n.fa&&Z_(n),n=t.call(r,e)}return n}function yw(n){return(n=n[G_])instanceof wu?n:null}var _w="__closure_events_fn_"+(1e9*Math.random()>>>0);function tm(n){return"function"==typeof n?n:(n[_w]||(n[_w]=function(e){return n.handleEvent(e)}),n[_w])}function Zn(){Ma.call(this),this.i=new wu(this),this.P=this,this.I=null}function Kr(n,e){var t,r=n.I;if(r)for(t=[];r;r=r.I)t.push(r);if(n=n.P,r=e.type||e,"string"==typeof e)e=new di(e,n);else if(e instanceof di)e.target=e.target||n;else{var o=e;dw(e=new di(r,n),o)}if(o=!0,t)for(var u=t.length-1;0<=u;u--){var d=e.g=t[u];o=nm(d,r,!0,e)&&o}if(o=nm(d=e.g=n,r,!0,e)&&o,o=nm(d,r,!1,e)&&o,t)for(u=0;u<t.length;u++)o=nm(d=e.g=t[u],r,!1,e)&&o}function nm(n,e,t,r){if(!(e=n.i.g[String(e)]))return!0;e=e.concat();for(var o=!0,u=0;u<e.length;++u){var d=e[u];if(d&&!d.ca&&d.capture==t){var m=d.listener,w=d.ia||d.src;d.fa&&H_(n.i,d),o=!1!==m.call(w,r)&&o}}return o&&!r.defaultPrevented}Mr(Zn,Ma),Zn.prototype[vd]=!0,Zn.prototype.removeEventListener=function(n,e,t,r){mw(this,n,e,t,r)},Zn.prototype.M=function(){if(Zn.Z.M.call(this),this.i){var e,n=this.i;for(e in n.g){for(var t=n.g[e],r=0;r<t.length;r++)Eu(t[r]);delete n.g[e],n.h--}}this.I=null},Zn.prototype.N=function(n,e,t,r){return this.i.add(String(n),e,!1,t,r)},Zn.prototype.O=function(n,e,t,r){return this.i.add(String(n),e,!0,t,r)};var rm=Dt.JSON.stringify;function Ef(){var n=jl;let e=null;return n.g&&(e=n.g,n.g=n.g.next,n.g||(n.h=null),e.next=null),e}var im,vw=new class{constructor(n,e){this.i=n,this.j=e,this.h=0,this.g=null}get(){let n;return 0<this.h?(this.h--,n=this.g,this.g=n.next,n.next=null):n=this.i(),n}}(()=>new sC,n=>n.reset());class sC{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function oC(n){Dt.setTimeout(()=>{throw n},0)}function K_(n,e){im||function aC(){var n=Dt.Promise.resolve(void 0);im=function(){n.then(uC)}}(),Y_||(im(),Y_=!0),jl.add(n,e)}var Y_=!1,jl=new class iC{constructor(){this.h=this.g=null}add(e,t){const r=vw.get();r.set(e,t),this.h?this.h.next=r:this.g=r,this.h=r}};function uC(){for(var n;n=Ef();){try{n.h.call(n.g)}catch(t){oC(t)}var e=vw;e.j(n),100>e.h&&(e.h++,n.next=e.g,e.g=n)}Y_=!1}function wf(n,e){Zn.call(this),this.h=n||1,this.g=e||Dt,this.j=Sr(this.kb,this),this.l=Date.now()}function Q_(n){n.da=!1,n.S&&(n.g.clearTimeout(n.S),n.S=null)}function sm(n,e,t){if("function"==typeof n)t&&(n=Sr(n,t));else{if(!n||"function"!=typeof n.handleEvent)throw Error("Invalid listener argument");n=Sr(n.handleEvent,n)}return 2147483647<Number(e)?-1:Dt.setTimeout(n,e||0)}function Ew(n){n.g=sm(()=>{n.g=null,n.i&&(n.i=!1,Ew(n))},n.j);const e=n.h;n.h=null,n.m.apply(null,e)}Mr(wf,Zn),(Xe=wf.prototype).da=!1,Xe.S=null,Xe.kb=function(){if(this.da){var n=Date.now()-this.l;0<n&&n<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-n):(this.S&&(this.g.clearTimeout(this.S),this.S=null),Kr(this,"tick"),this.da&&(Q_(this),this.start()))}},Xe.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())},Xe.M=function(){wf.Z.M.call(this),Q_(this),delete this.g};class ww extends Ma{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:Ew(this)}M(){super.M(),this.g&&(Dt.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function If(n){Ma.call(this),this.h=n,this.g={}}Mr(If,Ma);var om=[];function Iw(n,e,t,r){Array.isArray(t)||(t&&(om[0]=t.toString()),t=om);for(var o=0;o<t.length;o++){var u=q_(e,t[o],r||n.handleEvent,!1,n.h||n);if(!u)break;n.g[u.key]=u}}function J_(n){ht(n.g,function(e,t){this.g.hasOwnProperty(t)&&Z_(e)},n),n.g={}}function bf(){this.g=!0}function Ed(n,e,t,r){n.info(function(){return"XMLHTTP TEXT ("+e+"): "+function dC(n,e){if(!n.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(n=0;n<t.length;n++)if(Array.isArray(t[n])){var r=t[n];if(!(2>r.length)){var o=r[1];if(Array.isArray(o)&&!(1>o.length)){var u=o[0];if("noop"!=u&&"stop"!=u&&"close"!=u)for(var d=1;d<o.length;d++)o[d]=""}}}return rm(t)}catch(m){return e}}(n,t)+(r?" "+r:"")})}If.prototype.M=function(){If.Z.M.call(this),J_(this)},If.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},bf.prototype.Aa=function(){this.g=!1},bf.prototype.info=function(){};var Iu={},bw=null;function am(){return bw=bw||new Zn}function Dw(n){di.call(this,Iu.Ma,n)}function Df(n){const e=am();Kr(e,new Dw(e,n))}function Cw(n,e){di.call(this,Iu.STAT_EVENT,n),this.stat=e}function Ti(n){const e=am();Kr(e,new Cw(e,n))}function Tw(n,e){di.call(this,Iu.Na,n),this.size=e}function Cf(n,e){if("function"!=typeof n)throw Error("Fn must not be null and must be a function");return Dt.setTimeout(function(){n()},e)}Iu.Ma="serverreachability",Mr(Dw,di),Iu.STAT_EVENT="statevent",Mr(Cw,di),Iu.Na="timingevent",Mr(Tw,di);var Tf={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},ev={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function tv(){}function nv(){}tv.prototype.h=null;var Sf,Af={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function rv(){di.call(this,"d")}function iv(){di.call(this,"c")}function wd(){}function Id(n,e,t,r){this.l=n,this.j=e,this.m=t,this.X=r||1,this.V=new If(this),this.P=hC,this.W=new wf(n=hw?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new um}function um(){this.i=null,this.g="",this.h=!1}Mr(rv,di),Mr(iv,di),Mr(wd,tv),wd.prototype.g=function(){return new XMLHttpRequest},wd.prototype.i=function(){return{}},Sf=new wd;var hC=45e3,sv={},bd={};function ov(n,e,t){n.K=1,n.v=Of(Go(e)),n.s=t,n.U=!0,av(n,null)}function av(n,e){n.F=Date.now(),Dd(n),n.A=Go(n.v);var t=n.A,r=n.X;Array.isArray(r)||(r=[String(r)]),wC(t.h,"t",r),n.C=0,t=n.l.H,n.h=new um,n.g=vv(n.l,t?e:null,!n.s),0<n.O&&(n.L=new ww(Sr(n.Ia,n,n.g),n.O)),Iw(n.V,n.g,"readystatechange",n.gb),e=n.H?lw(n.H):{},n.s?(n.u||(n.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",n.g.ea(n.A,n.u,n.s,e)):(n.u="GET",n.g.ea(n.A,n.u,null,e)),Df(1),function lC(n,e,t,r,o,u){n.info(function(){if(n.g)if(u)for(var d="",m=u.split("&"),w=0;w<m.length;w++){var C=m[w].split("=");if(1<C.length){var x=C[0];C=C[1];var R=x.split("_");d=2<=R.length&&"type"==R[1]?d+(x+"=")+C+"&":d+(x+"=redacted&")}}else d=null;else d=u;return"XMLHTTP REQ ("+r+") [attempt "+o+"]: "+e+"\n"+t+"\n"+d})}(n.j,n.u,n.A,n.m,n.X,n.s)}function Sw(n){return!!n.g&&"GET"==n.u&&2!=n.K&&n.l.Ba}function uv(n,e,t){let o,r=!0;for(;!n.I&&n.C<t.length;){if(o=fC(n,t),o==bd){4==e&&(n.o=4,Ti(14),r=!1),Ed(n.j,n.m,null,"[Incomplete Response]");break}if(o==sv){n.o=4,Ti(15),Ed(n.j,n.m,t,"[Invalid Chunk]"),r=!1;break}Ed(n.j,n.m,o,null),Du(n,o)}Sw(n)&&o!=bd&&o!=sv&&(n.h.g="",n.C=0),4!=e||0!=t.length||n.h.h||(n.o=1,Ti(16),r=!1),n.i=n.i&&r,r?0<t.length&&!n.aa&&(n.aa=!0,(e=n.l).g==n&&e.$&&!e.L&&(e.h.info("Great, no buffering proxy detected. Bytes received: "+t.length),$f(e),e.L=!0,Ti(11))):(Ed(n.j,n.m,t,"[Invalid Chunked Response]"),Hl(n),bu(n))}function fC(n,e){var t=n.C,r=e.indexOf("\n",t);return-1==r?bd:(t=Number(e.substring(t,r)),isNaN(t)?sv:(r+=1)+t>e.length?bd:(e=e.substr(r,t),n.C=r+t,e))}function Dd(n){n.Y=Date.now()+n.P,pC(n,n.P)}function pC(n,e){if(null!=n.B)throw Error("WatchDog timer not null");n.B=Cf(Sr(n.eb,n),e)}function lm(n){n.B&&(Dt.clearTimeout(n.B),n.B=null)}function bu(n){0==n.l.G||n.I||$w(n.l,n)}function Hl(n){lm(n);var e=n.L;e&&"function"==typeof e.na&&e.na(),n.L=null,Q_(n.W),J_(n.V),n.g&&(e=n.g,n.g=null,e.abort(),e.na())}function Du(n,e){try{var t=n.l;if(0!=t.G&&(t.g==n||hv(t.i,n)))if(t.I=n.N,!n.J&&hv(t.i,n)&&3==t.G){try{var r=t.Ca.g.parse(e)}catch(C){r=null}if(Array.isArray(r)&&3==r.length){var o=r;if(0==o[0])e:if(t.u)t.ta=o[1],0<t.ta-t.U&&37500>o[2]&&t.N&&0==t.A&&!t.v&&(t.v=Cf(Sr(t.ab,t),6e3));else{if(t.g){if(!(t.g.F+3e3<n.F))break e;vm(t),Bf(t)}ym(t),Ti(18)}if(1>=kw(t.i)&&t.ka){try{t.ka()}catch(C){}t.ka=void 0}}else Kl(t,11)}else if((n.J||t.g==n)&&vm(t),!xa(e))for(o=t.Ca.g.parse(e),e=0;e<o.length;e++){let C=o[e];if(t.U=C[0],C=C[1],2==t.G)if("c"==C[0]){t.J=C[1],t.la=C[2];const x=C[3];null!=x&&(t.ma=x,t.h.info("VER="+t.ma));const R=C[4];null!=R&&(t.za=R,t.h.info("SVER="+t.za));const H=C[5];null!=H&&"number"==typeof H&&0<H&&(t.K=r=1.5*H,t.h.info("backChannelRequestTimeoutMs_="+r)),r=t;const G=n.g;if(G){const X=G.g?G.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(X){var u=r.i;!u.g&&(Zr(X,"spdy")||Zr(X,"quic")||Zr(X,"h2"))&&(u.j=u.l,u.g=new Set,u.h&&(fv(u,u.h),u.h=null))}if(r.D){const Ne=G.g?G.g.getResponseHeader("X-HTTP-Session-Id"):null;Ne&&(r.sa=Ne,Mn(r.F,r.D,Ne))}}t.G=3,t.j&&t.j.xa(),t.$&&(t.O=Date.now()-n.F,t.h.info("Handshake RTT: "+t.O+"ms"));var d=n;if((r=t).oa=Em(r,r.H?r.la:null,r.W),d.J){Fw(r.i,d);var m=d,w=r.K;w&&m.setTimeout(w),m.B&&(lm(m),Dd(m)),r.g=d}else mm(r);0<t.l.length&&Hf(t)}else"stop"!=C[0]&&"close"!=C[0]||Kl(t,7);else 3==t.G&&("stop"==C[0]||"close"==C[0]?"stop"==C[0]?Kl(t,7):mv(t):"noop"!=C[0]&&t.j&&t.j.wa(C),t.A=0)}Df(4)}catch(C){}}function lv(n,e){if(n.forEach&&"function"==typeof n.forEach)n.forEach(e,void 0);else if(P_(n)||"string"==typeof n)L_(n,e,void 0);else{if(n.T&&"function"==typeof n.T)var t=n.T();else if(n.R&&"function"==typeof n.R)t=void 0;else if(P_(n)||"string"==typeof n){t=[];for(var r=n.length,o=0;o<r;o++)t.push(o)}else for(o in t=[],r=0,n)t[r++]=o;r=function Mf(n){if(n.R&&"function"==typeof n.R)return n.R();if("string"==typeof n)return n.split("");if(P_(n)){for(var e=[],t=n.length,r=0;r<t;r++)e.push(n[r]);return e}for(r in e=[],t=0,n)e[t++]=n[r];return e}(n),o=r.length;for(var u=0;u<o;u++)e.call(void 0,r[u],t&&t[u],n)}}function xf(n,e){this.h={},this.g=[],this.i=0;var t=arguments.length;if(1<t){if(t%2)throw Error("Uneven number of arguments");for(var r=0;r<t;r+=2)this.set(arguments[r],arguments[r+1])}else if(n)if(n instanceof xf)for(t=n.T(),r=0;r<t.length;r++)this.set(t[r],n.get(t[r]));else for(r in n)this.set(r,n[r])}function cm(n){if(n.i!=n.g.length){for(var e=0,t=0;e<n.g.length;){var r=n.g[e];$l(n.h,r)&&(n.g[t++]=r),e++}n.g.length=t}if(n.i!=n.g.length){var o={};for(t=e=0;e<n.g.length;)$l(o,r=n.g[e])||(n.g[t++]=r,o[r]=1),e++;n.g.length=t}}function $l(n,e){return Object.prototype.hasOwnProperty.call(n,e)}(Xe=Id.prototype).setTimeout=function(n){this.P=n},Xe.gb=function(n){n=n.target;const e=this.L;e&&3==Oa(n)?e.l():this.Ia(n)},Xe.Ia=function(n){try{if(n==this.g)e:{const x=Oa(this.g);var e=this.g.Da();const R=this.g.ba();if(!(3>x)&&(3!=x||hw||this.g&&(this.h.h||this.g.ga()||Bw(this.g)))){this.I||4!=x||7==e||Df(8==e||0>=R?3:2),lm(this);var t=this.g.ba();this.N=t;t:if(Sw(this)){var r=Bw(this.g);n="";var o=r.length,u=4==Oa(this.g);if(!this.h.i){if("undefined"==typeof TextDecoder){Hl(this),bu(this);var d="";break t}this.h.i=new Dt.TextDecoder}for(e=0;e<o;e++)this.h.h=!0,n+=this.h.i.decode(r[e],{stream:u&&e==o-1});r.splice(0,o),this.h.g+=n,this.C=0,d=this.h.g}else d=this.g.ga();if(this.i=200==t,function cC(n,e,t,r,o,u,d){n.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+o+"]: "+e+"\n"+t+"\n"+u+" "+d})}(this.j,this.u,this.A,this.m,this.X,x,t),this.i){if(this.$&&!this.J){t:{if(this.g){var m,w=this.g;if((m=w.g?w.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!xa(m)){var C=m;break t}}C=null}if(!(t=C)){this.i=!1,this.o=3,Ti(12),Hl(this),bu(this);break e}Ed(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,Du(this,t)}this.U?(uv(this,x,d),hw&&this.i&&3==x&&(Iw(this.V,this.W,"tick",this.fb),this.W.start())):(Ed(this.j,this.m,d,null),Du(this,d)),4==x&&Hl(this),this.i&&!this.I&&(4==x?$w(this.l,this):(this.i=!1,Dd(this)))}else 400==t&&0<d.indexOf("Unknown SID")?(this.o=3,Ti(12)):(this.o=0,Ti(13)),Hl(this),bu(this)}}}catch(x){}},Xe.fb=function(){if(this.g){var n=Oa(this.g),e=this.g.ga();this.C<e.length&&(lm(this),uv(this,n,e),this.i&&4!=n&&Dd(this))}},Xe.cancel=function(){this.I=!0,Hl(this)},Xe.eb=function(){this.B=null;const n=Date.now();0<=n-this.Y?(function X_(n,e){n.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.K&&(Df(3),Ti(17)),Hl(this),this.o=2,bu(this)):pC(this,this.Y-n)},(Xe=xf.prototype).R=function(){cm(this);for(var n=[],e=0;e<this.g.length;e++)n.push(this.h[this.g[e]]);return n},Xe.T=function(){return cm(this),this.g.concat()},Xe.get=function(n,e){return $l(this.h,n)?this.h[n]:e},Xe.set=function(n,e){$l(this.h,n)||(this.i++,this.g.push(n)),this.h[n]=e},Xe.forEach=function(n,e){for(var t=this.T(),r=0;r<t.length;r++){var o=t[r],u=this.get(o);n.call(e,u,o,this)}};var Mw=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function Gl(n,e){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,n instanceof Gl){this.g=void 0!==e?e:n.g,Rf(this,n.j),this.s=n.s,Cd(this,n.i),ql(this,n.m),this.l=n.l,e=n.h;var t=new qo;t.i=e.i,e.g&&(t.g=new xf(e.g),t.h=e.h),Td(this,t),this.o=n.o}else n&&(t=String(n).match(Mw))?(this.g=!!e,Rf(this,t[1]||"",!0),this.s=Nf(t[2]||""),Cd(this,t[3]||"",!0),ql(this,t[4]),this.l=Nf(t[5]||"",!0),Td(this,t[6]||"",!0),this.o=Nf(t[7]||"")):(this.g=!!e,this.h=new qo(null,this.g))}function Go(n){return new Gl(n)}function Rf(n,e,t){n.j=t?Nf(e,!0):e,n.j&&(n.j=n.j.replace(/:$/,""))}function Cd(n,e,t){n.i=t?Nf(e,!0):e}function ql(n,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);n.m=e}else n.m=null}function Td(n,e,t){e instanceof qo?(n.h=e,function vS(n,e){e&&!n.j&&(Wl(n),n.i=null,n.g.forEach(function(t,r){var o=r.toLowerCase();r!=o&&(cv(this,r),wC(this,o,t))},n)),n.j=e}(n.h,n.g)):(t||(e=zl(e,Ad)),n.h=new qo(e,n.g))}function Mn(n,e,t){n.h.set(e,t)}function Of(n){return Mn(n,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),n}function Nf(n,e){return n?e?decodeURI(n.replace(/%25/g,"%2525")):decodeURIComponent(n):""}function zl(n,e,t){return"string"==typeof n?(n=encodeURI(n).replace(e,yC),t&&(n=n.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n):null}function yC(n){return"%"+((n=n.charCodeAt(0))>>4&15).toString(16)+(15&n).toString(16)}Gl.prototype.toString=function(){var n=[],e=this.j;e&&n.push(zl(e,_C,!0),":");var t=this.i;return(t||"file"==e)&&(n.push("//"),(e=this.s)&&n.push(zl(e,_C,!0),"@"),n.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&n.push(":",String(t))),(t=this.l)&&(this.i&&"/"!=t.charAt(0)&&n.push("/"),n.push(zl(t,"/"==t.charAt(0)?EC:vC,!0))),(t=this.h.toString())&&n.push("?",t),(t=this.o)&&n.push("#",zl(t,Rw)),n.join("")};var _C=/[#\/\?@]/g,vC=/[#\?:]/g,EC=/[#\?]/g,Ad=/[#\?@]/g,Rw=/#/g;function qo(n,e){this.h=this.g=null,this.i=n||null,this.j=!!e}function Wl(n){n.g||(n.g=new xf,n.h=0,n.i&&function gC(n,e){if(n){n=n.split("&");for(var t=0;t<n.length;t++){var r=n[t].indexOf("="),o=null;if(0<=r){var u=n[t].substring(0,r);o=n[t].substring(r+1)}else u=n[t];e(u,o?decodeURIComponent(o.replace(/\+/g," ")):"")}}}(n.i,function(e,t){n.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function cv(n,e){Wl(n),e=Zl(n,e),$l(n.g.h,e)&&(n.i=null,n.h-=n.g.get(e).length,$l((n=n.g).h,e)&&(delete n.h[e],n.i--,n.g.length>2*n.i&&cm(n)))}function Ow(n,e){return Wl(n),e=Zl(n,e),$l(n.g.h,e)}function wC(n,e,t){cv(n,e),0<t.length&&(n.i=null,n.g.set(Zl(n,e),V_(t)),n.h+=t.length)}function Zl(n,e){return e=String(e),n.j&&(e=e.toLowerCase()),e}function dm(n){this.l=n||Pw,n=Dt.PerformanceNavigationTiming?0<(n=Dt.performance.getEntriesByType("navigation")).length&&("hq"==n[0].nextHopProtocol||"h2"==n[0].nextHopProtocol):!!(Dt.g&&Dt.g.Ea&&Dt.g.Ea()&&Dt.g.Ea().Zb),this.j=n?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(Xe=qo.prototype).add=function(n,e){Wl(this),this.i=null,n=Zl(this,n);var t=this.g.get(n);return t||this.g.set(n,t=[]),t.push(e),this.h+=1,this},Xe.forEach=function(n,e){Wl(this),this.g.forEach(function(t,r){L_(t,function(o){n.call(e,o,r,this)},this)},this)},Xe.T=function(){Wl(this);for(var n=this.g.R(),e=this.g.T(),t=[],r=0;r<e.length;r++)for(var o=n[r],u=0;u<o.length;u++)t.push(e[r]);return t},Xe.R=function(n){Wl(this);var e=[];if("string"==typeof n)Ow(this,n)&&(e=aw(e,this.g.get(Zl(this,n))));else{n=this.g.R();for(var t=0;t<n.length;t++)e=aw(e,n[t])}return e},Xe.set=function(n,e){return Wl(this),this.i=null,Ow(this,n=Zl(this,n))&&(this.h-=this.g.get(n).length),this.g.set(n,[e]),this.h+=1,this},Xe.get=function(n,e){return n&&0<(n=this.R(n)).length?String(n[0]):e},Xe.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var n=[],e=this.g.T(),t=0;t<e.length;t++){var r=e[t],o=encodeURIComponent(String(r));r=this.R(r);for(var u=0;u<r.length;u++){var d=o;""!==r[u]&&(d+="="+encodeURIComponent(String(r[u]))),n.push(d)}}return this.i=n.join("&")};var Pw=10;function dv(n){return!!n.h||!!n.g&&n.g.size>=n.j}function kw(n){return n.h?1:n.g?n.g.size:0}function hv(n,e){return n.h?n.h==e:!!n.g&&n.g.has(e)}function fv(n,e){n.g?n.g.add(e):n.h=e}function Fw(n,e){n.h&&n.h==e?n.h=null:n.g&&n.g.has(e)&&n.g.delete(e)}function Lw(n){if(null!=n.h)return n.i.concat(n.h.D);if(null!=n.g&&0!==n.g.size){let e=n.i;for(const t of n.g.values())e=e.concat(t.D);return e}return V_(n.i)}function pv(){}function IC(){this.g=new pv}function bC(n,e,t){const r=t||"";try{lv(n,function(o,u){let d=o;yf(o)&&(d=rm(o)),e.push(r+u+"="+encodeURIComponent(d))})}catch(o){throw e.push(r+"type="+encodeURIComponent("_badmap")),o}}function kf(n,e,t,r,o){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,o(r)}catch(u){}}function Sd(n){this.l=n.$b||null,this.j=n.ib||!1}function Ff(n,e){Zn.call(this),this.D=n,this.u=e,this.m=void 0,this.readyState=hm,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}dm.prototype.cancel=function(){if(this.i=Lw(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const n of this.g.values())n.cancel();this.g.clear()}},pv.prototype.stringify=function(n){return Dt.JSON.stringify(n,void 0)},pv.prototype.parse=function(n){return Dt.JSON.parse(n,void 0)},Mr(Sd,tv),Sd.prototype.g=function(){return new Ff(this.l,this.j)},Sd.prototype.i=function(n){return function(){return n}}({}),Mr(Ff,Zn);var hm=0;function gv(n){n.j.read().then(n.Sa.bind(n)).catch(n.ha.bind(n))}function Lf(n){n.readyState=4,n.l=null,n.j=null,n.A=null,Vf(n)}function Vf(n){n.onreadystatechange&&n.onreadystatechange.call(n)}(Xe=Ff.prototype).open=function(n,e){if(this.readyState!=hm)throw this.abort(),Error("Error reopening a connection");this.C=n,this.B=e,this.readyState=1,Vf(this)},Xe.send=function(n){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};n&&(e.body=n),(this.D||Dt).fetch(new Request(this.B,e)).then(this.Va.bind(this),this.ha.bind(this))},Xe.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Lf(this)),this.readyState=hm},Xe.Va=function(n){if(this.g&&(this.l=n,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=n.headers,this.readyState=2,Vf(this)),this.g&&(this.readyState=3,Vf(this),this.g)))if("arraybuffer"===this.responseType)n.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if(void 0!==Dt.ReadableStream&&"body"in n){if(this.j=n.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;gv(this)}else n.text().then(this.Ua.bind(this),this.ha.bind(this))},Xe.Sa=function(n){if(this.g){if(this.u&&n.value)this.response.push(n.value);else if(!this.u){var e=n.value?n.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!n.done}))&&(this.response=this.responseText+=e)}n.done?Lf(this):Vf(this),3==this.readyState&&gv(this)}},Xe.Ua=function(n){this.g&&(this.response=this.responseText=n,Lf(this))},Xe.Ta=function(n){this.g&&(this.response=n,Lf(this))},Xe.ha=function(){this.g&&Lf(this)},Xe.setRequestHeader=function(n,e){this.v.append(n,e)},Xe.getResponseHeader=function(n){return this.h&&this.h.get(n.toLowerCase())||""},Xe.getAllResponseHeaders=function(){if(!this.h)return"";const n=[],e=this.h.entries();for(var t=e.next();!t.done;)n.push((t=t.value)[0]+": "+t[1]),t=e.next();return n.join("\r\n")},Object.defineProperty(Ff.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(n){this.m=n?"include":"same-origin"}});var DC=Dt.JSON.parse;function sr(n){Zn.call(this),this.headers=new xf,this.u=n||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=Vw,this.K=this.L=!1}Mr(sr,Zn);var Vw="",CC=/^https?$/i,TC=["POST","PUT"];function AC(n){return"content-type"==n.toLowerCase()}function fm(n,e){n.h=!1,n.g&&(n.l=!0,n.g.abort(),n.l=!1),n.j=e,n.m=5,_o(n),Md(n)}function _o(n){n.D||(n.D=!0,Kr(n,"complete"),Kr(n,"error"))}function Uw(n){if(n.h&&void 0!==N_&&(!n.C[1]||4!=Oa(n)||2!=n.ba()))if(n.v&&4==Oa(n))sm(n.Fa,0,n);else if(Kr(n,"readystatechange"),4==Oa(n)){n.h=!1;try{const m=n.ba();e:switch(m){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var r;if(r=0===m){var o=String(n.H).match(Mw)[1]||null;if(!o&&Dt.self&&Dt.self.location){var u=Dt.self.location.protocol;o=u.substr(0,u.length-1)}r=!CC.test(o?o.toLowerCase():"")}t=r}if(t)Kr(n,"complete"),Kr(n,"success");else{n.m=6;try{var d=2<Oa(n)?n.g.statusText:""}catch(w){d=""}n.j=d+" ["+n.ba()+"]",_o(n)}}finally{Md(n)}}}function Md(n,e){if(n.g){xd(n);const t=n.g,r=n.C[0]?Kg:null;n.g=null,n.C=null,e||Kr(n,"ready");try{t.onreadystatechange=r}catch(o){}}}function xd(n){n.g&&n.K&&(n.g.ontimeout=null),n.A&&(Dt.clearTimeout(n.A),n.A=null)}function Oa(n){return n.g?n.g.readyState:0}function Bw(n){try{if(!n.g)return null;if("response"in n.g)return n.g.response;switch(n.J){case Vw:case"text":return n.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in n.g)return n.g.mozResponseArrayBuffer}return null}catch(e){return null}}function Rd(n,e,t){e:{for(r in t){var r=!1;break e}r=!0}r||(t=function SC(n){let e="";return ht(n,function(t,r){e+=r,e+=":",e+=t,e+="\r\n"}),e}(t),"string"==typeof n?null!=t&&encodeURIComponent(String(t)):Mn(n,e,t))}function Cu(n,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[n]||e}function jw(n){this.za=0,this.l=[],this.h=new bf,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=Cu("failFast",!1,n),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=Cu("baseRetryDelayMs",5e3,n),this.$a=Cu("retryDelaySeedMs",1e4,n),this.Ya=Cu("forwardChannelMaxRetries",2,n),this.ra=Cu("forwardChannelRequestTimeoutMs",2e4,n),this.qa=n&&n.xmlHttpFactory||void 0,this.Ba=n&&n.Yb||!1,this.K=void 0,this.H=n&&n.supportsCrossDomainXhr||!1,this.J="",this.i=new dm(n&&n.concurrentRequestLimit),this.Ca=new IC,this.ja=n&&n.fastHandshake||!1,this.Ra=n&&n.Wb||!1,n&&n.Aa&&this.h.Aa(),n&&n.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&n&&n.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!n||!1!==n.Xb}function mv(n){if(yv(n),3==n.G){var e=n.V++,t=Go(n.F);Mn(t,"SID",n.J),Mn(t,"RID",e),Mn(t,"TYPE","terminate"),pm(n,t),(e=new Id(n,n.h,e,void 0)).K=2,e.v=Of(Go(t)),t=!1,Dt.navigator&&Dt.navigator.sendBeacon&&(t=Dt.navigator.sendBeacon(e.v.toString(),"")),!t&&Dt.Image&&((new Image).src=e.v,t=!0),t||(e.g=vv(e.l,null),e.g.ea(e.v)),e.F=Date.now(),Dd(e)}_v(n)}function Bf(n){n.g&&($f(n),n.g.cancel(),n.g=null)}function yv(n){Bf(n),n.u&&(Dt.clearTimeout(n.u),n.u=null),vm(n),n.i.cancel(),n.m&&("number"==typeof n.m&&Dt.clearTimeout(n.m),n.m=null)}function jf(n,e){n.l.push(new class{constructor(n,e){this.h=n,this.g=e}}(n.Za++,e)),3==n.G&&Hf(n)}function Hf(n){dv(n.i)||n.m||(n.m=!0,K_(n.Ha,n),n.C=0)}function Hw(n,e){var t;t=e?e.m:n.V++;const r=Go(n.F);Mn(r,"SID",n.J),Mn(r,"RID",t),Mn(r,"AID",n.U),pm(n,r),n.o&&n.s&&Rd(r,n.o,n.s),t=new Id(n,n.h,t,n.C+1),null===n.o&&(t.H=n.s),e&&(n.l=e.D.concat(n.l)),e=gm(n,t,1e3),t.setTimeout(Math.round(.5*n.ra)+Math.round(.5*n.ra*Math.random())),fv(n.i,t),ov(t,r,e)}function pm(n,e){n.j&&lv({},function(t,r){Mn(e,r,t)})}function gm(n,e,t){t=Math.min(n.l.length,t);var r=n.j?Sr(n.j.Oa,n.j,n):null;e:{var o=n.l;let u=-1;for(;;){const d=["count="+t];-1==u?0<t?(u=o[0].h,d.push("ofs="+u)):u=0:d.push("ofs="+u);let m=!0;for(let w=0;w<t;w++){let C=o[w].h;const x=o[w].g;if(C-=u,0>C)u=Math.max(0,o[w].h-100),m=!1;else try{bC(x,d,"req"+C+"_")}catch(R){r&&r(x)}}if(m){r=d.join("&");break e}}}return n=n.l.splice(0,t),e.D=n,r}function mm(n){n.g||n.u||(n.Y=1,K_(n.Ga,n),n.A=0)}function ym(n){return!(n.g||n.u||3<=n.A||(n.Y++,n.u=Cf(Sr(n.Ga,n),Gw(n,n.A)),n.A++,0))}function $f(n){null!=n.B&&(Dt.clearTimeout(n.B),n.B=null)}function _m(n){n.g=new Id(n,n.h,"rpc",n.Y),null===n.o&&(n.g.H=n.s),n.g.O=0;var e=Go(n.oa);Mn(e,"RID","rpc"),Mn(e,"SID",n.J),Mn(e,"CI",n.N?"0":"1"),Mn(e,"AID",n.U),pm(n,e),Mn(e,"TYPE","xmlhttp"),n.o&&n.s&&Rd(e,n.o,n.s),n.K&&n.g.setTimeout(n.K);var t=n.g;n=n.la,t.K=1,t.v=Of(Go(e)),t.s=null,t.U=!0,av(t,n)}function vm(n){null!=n.v&&(Dt.clearTimeout(n.v),n.v=null)}function $w(n,e){var t=null;if(n.g==e){vm(n),$f(n),n.g=null;var r=2}else{if(!hv(n.i,e))return;t=e.D,Fw(n.i,e),r=1}if(n.I=e.N,0!=n.G)if(e.i)if(1==r){t=e.s?e.s.length:0,e=Date.now()-e.F;var o=n.C;Kr(r=am(),new Tw(r,t,e,o)),Hf(n)}else mm(n);else if(3==(o=e.o)||0==o&&0<n.I||!(1==r&&function MC(n,e){return!(kw(n.i)>=n.i.j-(n.m?1:0)||(n.m?(n.l=e.D.concat(n.l),0):1==n.G||2==n.G||n.C>=(n.Xa?0:n.Ya)||(n.m=Cf(Sr(n.Ha,n,e),Gw(n,n.C)),n.C++,0)))}(n,e)||2==r&&ym(n)))switch(t&&0<t.length&&(e=n.i,e.i=e.i.concat(t)),o){case 1:Kl(n,5);break;case 4:Kl(n,10);break;case 3:Kl(n,6);break;default:Kl(n,2)}}function Gw(n,e){let t=n.Pa+Math.floor(Math.random()*n.$a);return n.j||(t*=2),t*e}function Kl(n,e){if(n.h.info("Error code "+e),2==e){var t=null;n.j&&(t=null);var r=Sr(n.jb,n);t||(t=new Gl("//www.google.com/images/cleardot.gif"),Dt.location&&"http"==Dt.location.protocol||Rf(t,"https"),Of(t)),function Pf(n,e){const t=new bf;if(Dt.Image){const r=new Image;r.onload=_f(kf,t,r,"TestLoadImage: loaded",!0,e),r.onerror=_f(kf,t,r,"TestLoadImage: error",!1,e),r.onabort=_f(kf,t,r,"TestLoadImage: abort",!1,e),r.ontimeout=_f(kf,t,r,"TestLoadImage: timeout",!1,e),Dt.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=n}else e(!1)}(t.toString(),r)}else Ti(2);n.G=0,n.j&&n.j.va(e),_v(n),yv(n)}function _v(n){n.G=0,n.I=-1,n.j&&((0!=Lw(n.i).length||0!=n.l.length)&&(n.i.i.length=0,V_(n.l),n.l.length=0),n.j.ua())}function Em(n,e,t){let r=function xw(n){return n instanceof Gl?Go(n):new Gl(n,void 0)}(t);if(""!=r.i)e&&Cd(r,e+"."+r.i),ql(r,r.m);else{const o=Dt.location;r=function mC(n,e,t,r){var o=new Gl(null,void 0);return n&&Rf(o,n),e&&Cd(o,e),t&&ql(o,t),r&&(o.l=r),o}(o.protocol,e?e+"."+o.hostname:o.hostname,+o.port,t)}return n.aa&&ht(n.aa,function(o,u){Mn(r,u,o)}),t=n.sa,(e=n.D)&&t&&Mn(r,e,t),Mn(r,"VER",n.ma),pm(n,r),r}function vv(n,e,t){if(e&&!n.H)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new sr(t&&n.Ba&&!n.qa?new Sd({ib:!0}):n.qa)).L=n.H,e}function qw(){}function Gf(){if(Ra&&!(10<=Number(XD)))throw Error("Environmental error: no available transport.")}function Pi(n,e){Zn.call(this),this.g=new jw(e),this.l=n,this.h=e&&e.messageUrlParams||null,n=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(n?n["X-Client-Protocol"]="webchannel":n={"X-Client-Protocol":"webchannel"}),this.g.s=n,n=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(n?n["X-WebChannel-Content-Type"]=e.messageContentType:n={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(n?n["X-WebChannel-Client-Profile"]=e.ya:n={"X-WebChannel-Client-Profile":e.ya}),this.g.P=n,(n=e&&e.httpHeadersOverwriteParam)&&!xa(n)&&(this.g.o=n),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!xa(e)&&(this.g.D=e,null!==(n=this.h)&&e in n&&e in(n=this.h)&&delete n[e]),this.j=new Yl(this)}function zw(n){rv.call(this);var e=n.__sm__;if(e){e:{for(const t in e){n=t;break e}n=void 0}(this.i=n)&&(n=this.i,e=null!==e&&n in e?e[n]:void 0),this.data=e}else this.data=n}function Ev(){iv.call(this),this.status=1}function Yl(n){this.g=n}(Xe=sr.prototype).ea=function(n,e,t,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+n);e=e?e.toUpperCase():"GET",this.H=n,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():Sf.g(),this.C=function Aw(n){return n.h||(n.h=n.i())}(this.u?this.u:Sf),this.g.onreadystatechange=Sr(this.Fa,this);try{this.F=!0,this.g.open(e,String(n),!0),this.F=!1}catch(u){return void fm(this,u)}n=t||"";const o=new xf(this.headers);r&&lv(r,function(u,d){o.set(d,u)}),r=function Bl(n){e:{var e=AC;const t=n.length,r="string"==typeof n?n.split(""):n;for(let o=0;o<t;o++)if(o in r&&e.call(void 0,r[o],o,n)){e=o;break e}e=-1}return 0>e?null:"string"==typeof n?n.charAt(e):n[e]}(o.T()),t=Dt.FormData&&n instanceof Dt.FormData,!(0<=F_(TC,e))||r||t||o.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),o.forEach(function(u,d){this.g.setRequestHeader(d,u)},this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{xd(this),0<this.B&&((this.K=function Uf(n){return Ra&&function JD(){return function KD(n){var e=QD;return Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=n(9)}(function(){let n=0;const e=WD(String(vf)).split("."),t=WD("9").split("."),r=Math.max(e.length,t.length);for(let d=0;0==n&&d<r;d++){var o=e[d]||"",u=t[d]||"";do{if(o=/(\d*)(\D*)(.*)/.exec(o)||["","","",""],u=/(\d*)(\D*)(.*)/.exec(u)||["","","",""],0==o[0].length&&0==u[0].length)break;n=uw(0==o[1].length?0:parseInt(o[1],10),0==u[1].length?0:parseInt(u[1],10))||uw(0==o[2].length,0==u[2].length)||uw(o[2],u[2]),o=o[3],u=u[3]}while(0==n)}return 0<=n})}()&&"number"==typeof n.timeout&&void 0!==n.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Sr(this.pa,this)):this.A=sm(this.pa,this.B,this)),this.v=!0,this.g.send(n),this.v=!1}catch(u){fm(this,u)}},Xe.pa=function(){void 0!==N_&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Kr(this,"timeout"),this.abort(8))},Xe.abort=function(n){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=n||7,Kr(this,"complete"),Kr(this,"abort"),Md(this))},Xe.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Md(this,!0)),sr.Z.M.call(this)},Xe.Fa=function(){this.s||(this.F||this.v||this.l?Uw(this):this.cb())},Xe.cb=function(){Uw(this)},Xe.ba=function(){try{return 2<Oa(this)?this.g.status:-1}catch(n){return-1}},Xe.ga=function(){try{return this.g?this.g.responseText:""}catch(n){return""}},Xe.Qa=function(n){if(this.g){var e=this.g.responseText;return n&&0==e.indexOf(n)&&(e=e.substring(n.length)),DC(e)}},Xe.Da=function(){return this.m},Xe.La=function(){return"string"==typeof this.j?this.j:String(this.j)},(Xe=jw.prototype).ma=8,Xe.G=1,Xe.hb=function(n){try{this.h.info("Origin Trials invoked: "+n)}catch(e){}},Xe.Ha=function(n){if(this.m)if(this.m=null,1==this.G){if(!n){this.V=Math.floor(1e5*Math.random()),n=this.V++;const o=new Id(this,this.h,n,void 0);let u=this.s;if(this.P&&(u?(u=lw(u),dw(u,this.P)):u=this.P),null===this.o&&(o.H=u),this.ja)e:{for(var e=0,t=0;t<this.l.length;t++){var r=this.l[t];if(void 0===(r="__data__"in r.g&&"string"==typeof(r=r.g.__data__)?r.length:void 0))break;if(4096<(e+=r)){e=t;break e}if(4096===e||t===this.l.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=gm(this,o,e),Mn(t=Go(this.F),"RID",n),Mn(t,"CVER",22),this.D&&Mn(t,"X-HTTP-Session-Id",this.D),pm(this,t),this.o&&u&&Rd(t,this.o,u),fv(this.i,o),this.Ra&&Mn(t,"TYPE","init"),this.ja?(Mn(t,"$req",e),Mn(t,"SID","null"),o.$=!0,ov(o,t,null)):ov(o,t,e),this.G=2}}else 3==this.G&&(n?Hw(this,n):0==this.l.length||dv(this.i)||Hw(this))},Xe.Ga=function(){if(this.u=null,_m(this),this.$&&!(this.L||null==this.g||0>=this.O)){var n=2*this.O;this.h.info("BP detection timer enabled: "+n),this.B=Cf(Sr(this.bb,this),n)}},Xe.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,Ti(10),Bf(this),_m(this))},Xe.ab=function(){null!=this.v&&(this.v=null,Bf(this),ym(this),Ti(19))},Xe.jb=function(n){n?(this.h.info("Successfully pinged google.com"),Ti(2)):(this.h.info("Failed to ping google.com"),Ti(1))},(Xe=qw.prototype).xa=function(){},Xe.wa=function(){},Xe.va=function(){},Xe.ua=function(){},Xe.Oa=function(){},Gf.prototype.g=function(n,e){return new Pi(n,e)},Mr(Pi,Zn),Pi.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var n=this.g,e=this.l,t=this.h||void 0;n.Wa&&(n.h.info("Origin Trials enabled."),K_(Sr(n.hb,n,e))),Ti(0),n.W=e,n.aa=t||{},n.N=n.X,n.F=Em(n,null,n.W),Hf(n)},Pi.prototype.close=function(){mv(this.g)},Pi.prototype.u=function(n){if("string"==typeof n){var e={};e.__data__=n,jf(this.g,e)}else this.v?((e={}).__data__=rm(n),jf(this.g,e)):jf(this.g,n)},Pi.prototype.M=function(){this.g.j=null,delete this.j,mv(this.g),delete this.g,Pi.Z.M.call(this)},Mr(zw,rv),Mr(Ev,iv),Mr(Yl,qw),Yl.prototype.xa=function(){Kr(this.g,"a")},Yl.prototype.wa=function(n){Kr(this.g,new zw(n))},Yl.prototype.va=function(n){Kr(this.g,new Ev(n))},Yl.prototype.ua=function(){Kr(this.g,"b")},Gf.prototype.createWebChannel=Gf.prototype.g,Pi.prototype.send=Pi.prototype.u,Pi.prototype.open=Pi.prototype.m,Pi.prototype.close=Pi.prototype.close,Tf.NO_ERROR=0,Tf.TIMEOUT=8,Tf.HTTP_ERROR=6,ev.COMPLETE="complete",nv.EventType=Af,Af.OPEN="a",Af.CLOSE="b",Af.ERROR="c",Af.MESSAGE="d",Zn.prototype.listen=Zn.prototype.N,sr.prototype.listenOnce=sr.prototype.O,sr.prototype.getLastError=sr.prototype.La,sr.prototype.getLastErrorCode=sr.prototype.Da,sr.prototype.getStatus=sr.prototype.ba,sr.prototype.getResponseJson=sr.prototype.Qa,sr.prototype.getResponseText=sr.prototype.ga,sr.prototype.send=sr.prototype.ea;var xC=Sa.createWebChannelTransport=function(){return new Gf},Ww=Sa.getStatEventTarget=function(){return am()},wv=Sa.ErrorCode=Tf,Ai=Sa.EventType=ev,Od=Sa.Event=Iu,Zw=Sa.Stat={rb:0,ub:1,vb:2,Ob:3,Tb:4,Qb:5,Rb:6,Pb:7,Nb:8,Sb:9,PROXY:10,NOPROXY:11,Lb:12,Hb:13,Ib:14,Gb:15,Jb:16,Kb:17,nb:18,mb:19,ob:20},RC=Sa.FetchXmlHttpFactory=Sd,Iv=Sa.WebChannel=nv,qf=Sa.XhrIo=sr;const Kw="@firebase/firestore";class _r{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}_r.UNAUTHENTICATED=new _r(null),_r.GOOGLE_CREDENTIALS=new _r("google-credentials-uid"),_r.FIRST_PARTY=new _r("first-party-uid"),_r.MOCK_USER=new _r("mock-user");let Nd="9.6.11";const Na=new Ho.Yd("@firebase/firestore");function bv(){return Na.logLevel}function Oe(n,...e){if(Na.logLevel<=Ho.in.DEBUG){const t=e.map(kd);Na.debug(`Firestore (${Nd}): ${n}`,...t)}}function Kn(n,...e){if(Na.logLevel<=Ho.in.ERROR){const t=e.map(kd);Na.error(`Firestore (${Nd}): ${n}`,...t)}}function Pd(n,...e){if(Na.logLevel<=Ho.in.WARN){const t=e.map(kd);Na.warn(`Firestore (${Nd}): ${n}`,...t)}}function kd(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch(t){return n}}function et(n="Unexpected state"){const e=`FIRESTORE (${Nd}) INTERNAL ASSERTION FAILED: `+n;throw Kn(e),new Error(e)}function It(n,e){n||et()}function Ge(n,e){return n}const ae={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Ae extends Pt.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class vr{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class Qw{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class Dv{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(_r.UNAUTHENTICATED))}shutdown(){}}class Cv{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class ES{constructor(e){this.t=e,this.currentUser=_r.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var r=this;let o=this.i;const u=C=>this.i!==o?(o=this.i,t(C)):Promise.resolve();let d=new vr;this.o=()=>{this.i++,this.currentUser=this.u(),d.resolve(),d=new vr,e.enqueueRetryable(()=>u(this.currentUser))};const m=()=>{const C=d;e.enqueueRetryable((0,ye.Z)(function*(){yield C.promise,yield u(r.currentUser)}))},w=C=>{Oe("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=C,this.auth.addAuthTokenListener(this.o),m()};this.t.onInit(C=>w(C)),setTimeout(()=>{if(!this.auth){const C=this.t.getImmediate({optional:!0});C?w(C):(Oe("FirebaseAuthCredentialsProvider","Auth not yet detected"),d.resolve(),d=new vr)}},0),m()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(Oe("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(It("string"==typeof r.accessToken),new Qw(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return It(null===e||"string"==typeof e),new _r(e)}}class NC{constructor(e,t,r){this.type="FirstParty",this.user=_r.FIRST_PARTY,this.headers=new Map,this.headers.set("X-Goog-AuthUser",t);const o=e.auth.getAuthHeaderValueForFirstParty([]);o&&this.headers.set("Authorization",o),r&&this.headers.set("X-Goog-Iam-Authorization-Token",r)}}class PC{constructor(e,t,r){this.h=e,this.l=t,this.m=r}getToken(){return Promise.resolve(new NC(this.h,this.l,this.m))}start(e,t){e.enqueueRetryable(()=>t(_r.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Tv{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Jw{constructor(e){this.g=e,this.forceRefresh=!1,this.appCheck=null,this.p=null}start(e,t){const r=u=>{null!=u.error&&Oe("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${u.error.message}`);const d=u.token!==this.p;return this.p=u.token,Oe("FirebaseAppCheckTokenProvider",`Received ${d?"new":"existing"} token.`),d?t(u.token):Promise.resolve()};this.o=u=>{e.enqueueRetryable(()=>r(u))};const o=u=>{Oe("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=u,this.appCheck.addTokenListener(this.o)};this.g.onInit(u=>o(u)),setTimeout(()=>{if(!this.appCheck){const u=this.g.getImmediate({optional:!0});u?o(u):Oe("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(It("string"==typeof t.token),this.p=t.token,new Tv(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}class ki{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.I(r),this.T=r=>t.writeSequenceNumber(r))}I(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.T&&this.T(e),e}}function Xw(n){const e="undefined"!=typeof self&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}ki.A=-1;class eI{static R(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const o=Xw(40);for(let u=0;u<o.length;++u)r.length<20&&o[u]<t&&(r+=e.charAt(o[u]%e.length))}return r}}function Rt(n,e){return n<e?-1:n>e?1:0}function Ql(n,e,t){return n.length===e.length&&n.every((r,o)=>t(r,e[o]))}function tI(n){return n+"\0"}class Hn{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Ae(ae.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Ae(ae.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new Ae(ae.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Ae(ae.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Hn.fromMillis(Date.now())}static fromDate(e){return Hn.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new Hn(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Rt(this.nanoseconds,e.nanoseconds):Rt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class yt{constructor(e){this.timestamp=e}static fromTimestamp(e){return new yt(e)}static min(){return new yt(new Hn(0,0))}static max(){return new yt(new Hn(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}function Av(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Tu(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function nI(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}class zf{constructor(e,t,r){void 0===t?t=0:t>e.length&&et(),void 0===r?r=e.length-t:r>e.length-t&&et(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return 0===zf.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof zf?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let o=0;o<r;o++){const u=e.get(o),d=t.get(o);if(u<d)return-1;if(u>d)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class Jt extends zf{construct(e,t,r){return new Jt(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new Ae(ae.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(o=>o.length>0))}return new Jt(t)}static emptyPath(){return new Jt([])}}const rI=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Yr extends zf{construct(e,t,r){return new Yr(e,t,r)}static isValidIdentifier(e){return rI.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Yr.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new Yr(["__name__"])}static fromServerFormat(e){const t=[];let r="",o=0;const u=()=>{if(0===r.length)throw new Ae(ae.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let d=!1;for(;o<e.length;){const m=e[o];if("\\"===m){if(o+1===e.length)throw new Ae(ae.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const w=e[o+1];if("\\"!==w&&"."!==w&&"`"!==w)throw new Ae(ae.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=w,o+=2}else"`"===m?(d=!d,o++):"."!==m||d?(r+=m,o++):(u(),o++)}if(u(),d)throw new Ae(ae.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Yr(t)}static emptyPath(){return new Yr([])}}class Wf{constructor(e){this.fields=e,e.sort(Yr.comparator)}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Ql(this.fields,e.fields,(t,r)=>t.isEqual(r))}}class xr{constructor(e){this.binaryString=e}static fromBase64String(e){const t=atob(e);return new xr(t)}static fromUint8Array(e){const t=function(r){let o="";for(let u=0;u<r.length;++u)o+=String.fromCharCode(r[u]);return o}(e);return new xr(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Rt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}xr.EMPTY_BYTE_STRING=new xr("");const bS=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Jl(n){if(It(!!n),"string"==typeof n){let e=0;const t=bS.exec(n);if(It(!!t),t[1]){let o=t[1];o=(o+"000000000").substr(0,9),e=Number(o)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Yn(n.seconds),nanos:Yn(n.nanos)}}function Yn(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function Fd(n){return"string"==typeof n?xr.fromBase64String(n):xr.fromUint8Array(n)}function Ld(n){var e,t;return"server_timestamp"===(null===(t=((null===(e=null==n?void 0:n.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function kC(n){const e=n.mapValue.fields.__previous_value__;return Ld(e)?kC(e):e}function Vd(n){const e=Jl(n.mapValue.fields.__local_write_time__.timestampValue);return new Hn(e.seconds,e.nanos)}class Sv{constructor(e,t,r,o,u,d,m,w){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=o,this.ssl=u,this.forceLongPolling=d,this.autoDetectLongPolling=m,this.useFetchStreams=w}}class zo{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new zo("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof zo&&e.projectId===this.projectId&&e.database===this.database}}function Au(n){return null==n}function wm(n){return 0===n&&1/n==-1/0}function Im(n){return"number"==typeof n&&Number.isInteger(n)&&!wm(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}class Ue{constructor(e){this.path=e}static fromPath(e){return new Ue(Jt.fromString(e))}static fromName(e){return new Ue(Jt.fromString(e).popFirst(5))}static empty(){return new Ue(Jt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===Jt.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return Jt.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Ue(new Jt(e.slice()))}}const iI={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},Mv={nullValue:"NULL_VALUE"};function Ud(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?Ld(n)?4:uI(n)?9:10:et()}function Wo(n,e){if(n===e)return!0;const t=Ud(n);if(t!==Ud(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Vd(n).isEqual(Vd(e));case 3:return function(r,o){if("string"==typeof r.timestampValue&&"string"==typeof o.timestampValue&&r.timestampValue.length===o.timestampValue.length)return r.timestampValue===o.timestampValue;const u=Jl(r.timestampValue),d=Jl(o.timestampValue);return u.seconds===d.seconds&&u.nanos===d.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return o=e,Fd(n.bytesValue).isEqual(Fd(o.bytesValue));case 7:return n.referenceValue===e.referenceValue;case 8:return function(r,o){return Yn(r.geoPointValue.latitude)===Yn(o.geoPointValue.latitude)&&Yn(r.geoPointValue.longitude)===Yn(o.geoPointValue.longitude)}(n,e);case 2:return function(r,o){if("integerValue"in r&&"integerValue"in o)return Yn(r.integerValue)===Yn(o.integerValue);if("doubleValue"in r&&"doubleValue"in o){const u=Yn(r.doubleValue),d=Yn(o.doubleValue);return u===d?wm(u)===wm(d):isNaN(u)&&isNaN(d)}return!1}(n,e);case 9:return Ql(n.arrayValue.values||[],e.arrayValue.values||[],Wo);case 10:return function(r,o){const u=r.mapValue.fields||{},d=o.mapValue.fields||{};if(Av(u)!==Av(d))return!1;for(const m in u)if(u.hasOwnProperty(m)&&(void 0===d[m]||!Wo(u[m],d[m])))return!1;return!0}(n,e);default:return et()}var o}function Zf(n,e){return void 0!==(n.values||[]).find(t=>Wo(t,e))}function Zo(n,e){if(n===e)return 0;const t=Ud(n),r=Ud(e);if(t!==r)return Rt(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return Rt(n.booleanValue,e.booleanValue);case 2:return function(o,u){const d=Yn(o.integerValue||o.doubleValue),m=Yn(u.integerValue||u.doubleValue);return d<m?-1:d>m?1:d===m?0:isNaN(d)?isNaN(m)?0:-1:1}(n,e);case 3:return sI(n.timestampValue,e.timestampValue);case 4:return sI(Vd(n),Vd(e));case 5:return Rt(n.stringValue,e.stringValue);case 6:return function(o,u){const d=Fd(o),m=Fd(u);return d.compareTo(m)}(n.bytesValue,e.bytesValue);case 7:return function(o,u){const d=o.split("/"),m=u.split("/");for(let w=0;w<d.length&&w<m.length;w++){const C=Rt(d[w],m[w]);if(0!==C)return C}return Rt(d.length,m.length)}(n.referenceValue,e.referenceValue);case 8:return function(o,u){const d=Rt(Yn(o.latitude),Yn(u.latitude));return 0!==d?d:Rt(Yn(o.longitude),Yn(u.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return function(o,u){const d=o.values||[],m=u.values||[];for(let w=0;w<d.length&&w<m.length;++w){const C=Zo(d[w],m[w]);if(C)return C}return Rt(d.length,m.length)}(n.arrayValue,e.arrayValue);case 10:return function(o,u){const d=o.fields||{},m=Object.keys(d),w=u.fields||{},C=Object.keys(w);m.sort(),C.sort();for(let x=0;x<m.length&&x<C.length;++x){const R=Rt(m[x],C[x]);if(0!==R)return R;const H=Zo(d[m[x]],w[C[x]]);if(0!==H)return H}return Rt(m.length,C.length)}(n.mapValue,e.mapValue);default:throw et()}}function sI(n,e){if("string"==typeof n&&"string"==typeof e&&n.length===e.length)return Rt(n,e);const t=Jl(n),r=Jl(e),o=Rt(t.seconds,r.seconds);return 0!==o?o:Rt(t.nanos,r.nanos)}function Kf(n){return oI(n)}function oI(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(r){const o=Jl(r);return`time(${o.seconds},${o.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?Fd(n.bytesValue).toBase64():"referenceValue"in n?Ue.fromName(n.referenceValue).toString():"geoPointValue"in n?`geo(${(e=n.geoPointValue).latitude},${e.longitude})`:"arrayValue"in n?function(r){let o="[",u=!0;for(const d of r.values||[])u?u=!1:o+=",",o+=oI(d);return o+"]"}(n.arrayValue):"mapValue"in n?function(r){const o=Object.keys(r.fields||{}).sort();let u="{",d=!0;for(const m of o)d?d=!1:u+=",",u+=`${m}:${oI(r.fields[m])}`;return u+"}"}(n.mapValue):et();var e}function Bd(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function xv(n){return!!n&&"integerValue"in n}function Yf(n){return!!n&&"arrayValue"in n}function aI(n){return!!n&&"nullValue"in n}function FC(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function bm(n){return!!n&&"mapValue"in n}function Xl(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return Tu(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=Xl(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Xl(n.arrayValue.values[t]);return e}return Object.assign({},n)}function uI(n){return"__max__"===(((n.mapValue||{}).fields||{}).__type__||{}).stringValue}function vo(n){return"nullValue"in n?Mv:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?Bd(zo.empty(),Ue.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?{mapValue:{}}:et()}function LC(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?Bd(zo.empty(),Ue.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?{mapValue:{}}:"mapValue"in n?iI:et()}function Dm(n,e){return void 0===n?e:void 0===e||Zo(n,e)>0?n:e}function lI(n,e){return void 0===n?e:void 0===e||Zo(n,e)<0?n:e}class hi{constructor(e){this.value=e}static empty(){return new hi({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!bm(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Xl(t)}setAll(e){let t=Yr.emptyPath(),r={},o=[];e.forEach((d,m)=>{if(!t.isImmediateParentOf(m)){const w=this.getFieldsMap(t);this.applyChanges(w,r,o),r={},o=[],t=m.popLast()}d?r[m.lastSegment()]=Xl(d):o.push(m.lastSegment())});const u=this.getFieldsMap(t);this.applyChanges(u,r,o)}delete(e){const t=this.field(e.popLast());bm(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Wo(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let o=t.mapValue.fields[e.get(r)];bm(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=o),t=o}return t.mapValue.fields}applyChanges(e,t,r){Tu(t,(o,u)=>e[o]=u);for(const o of r)delete e[o]}clone(){return new hi(Xl(this.value))}}function Cm(n){const e=[];return Tu(n.fields,(t,r)=>{const o=new Yr([t]);if(bm(r)){const u=Cm(r.mapValue).fields;if(0===u.length)e.push(o);else for(const d of u)e.push(o.child(d))}else e.push(o)}),new Wf(e)}class En{constructor(e,t,r,o,u,d){this.key=e,this.documentType=t,this.version=r,this.readTime=o,this.data=u,this.documentState=d}static newInvalidDocument(e){return new En(e,0,yt.min(),yt.min(),hi.empty(),0)}static newFoundDocument(e,t,r){return new En(e,1,t,yt.min(),r,0)}static newNoDocument(e,t){return new En(e,2,t,yt.min(),hi.empty(),0)}static newUnknownDocument(e,t){return new En(e,3,t,yt.min(),hi.empty(),2)}convertToFoundDocument(e,t){return this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=hi.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=hi.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof En&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new En(this.key,this.documentType,this.version,this.readTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class Qf{constructor(e,t,r,o){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=o}}function Rv(n){return n.fields.find(e=>2===e.kind)}function Su(n){return n.fields.filter(e=>2!==e.kind)}Qf.UNKNOWN_ID=-1;class Tm{constructor(e,t){this.fieldPath=e,this.kind=t}}class Jf{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new Jf(0,Si.min())}}function cI(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,o=yt.fromTimestamp(1e9===r?new Hn(t+1,0):new Hn(t,r));return new Si(o,Ue.empty(),e)}function Ov(n){return new Si(n.readTime,n.key,-1)}class Si{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new Si(yt.min(),Ue.empty(),-1)}static max(){return new Si(yt.max(),Ue.empty(),-1)}}function dI(n,e){let t=n.readTime.compareTo(e.readTime);return 0!==t?t:(t=Ue.comparator(n.documentKey,e.documentKey),0!==t?t:Rt(n.largestBatchId,e.largestBatchId))}class hI{constructor(e,t=null,r=[],o=[],u=null,d=null,m=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=o,this.limit=u,this.startAt=d,this.endAt=m,this.P=null}}function fI(n,e=null,t=[],r=[],o=null,u=null,d=null){return new hI(n,e,t,r,o,u,d)}function jd(n){const e=Ge(n);if(null===e.P){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>{return(o=r).field.canonicalString()+o.op.toString()+Kf(o.value);var o}).join(","),t+="|ob:",t+=e.orderBy.map(r=>{return(o=r).field.canonicalString()+o.dir;var o}).join(","),Au(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>Kf(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>Kf(r)).join(",")),e.P=t}return e.P}function Xf(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let o=0;o<n.orderBy.length;o++)if(!EI(n.orderBy[o],e.orderBy[o]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let o=0;o<n.filters.length;o++)if((t=n.filters[o]).op!==(r=e.filters[o]).op||!t.field.isEqual(r.field)||!Wo(t.value,r.value))return!1;var t,r;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!II(n.startAt,e.startAt)&&II(n.endAt,e.endAt)}function Am(n){return Ue.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}function ep(n,e){return n.filters.filter(t=>t instanceof fi&&t.field.isEqual(e))}function pI(n,e,t){let r,o=!0;for(const u of ep(n,e)){let d,m=!0;switch(u.op){case"<":case"<=":d=vo(u.value);break;case"==":case"in":case">=":d=u.value;break;case">":d=u.value,m=!1;break;case"!=":case"not-in":d=Mv}Dm(r,d)===d&&(r=d,o=m)}if(null!==t)for(let u=0;u<n.orderBy.length;++u)if(n.orderBy[u].field.isEqual(e)){const d=t.position[u];Dm(r,d)===d&&(r=d,o=t.inclusive);break}return{value:r,inclusive:o}}function gI(n,e,t){let r,o=!0;for(const u of ep(n,e)){let d,m=!0;switch(u.op){case">=":case">":d=LC(u.value),m=!1;break;case"==":case"in":case"<=":d=u.value;break;case"<":d=u.value,m=!1;break;case"!=":case"not-in":d=iI}lI(r,d)===d&&(r=d,o=m)}if(null!==t)for(let u=0;u<n.orderBy.length;++u)if(n.orderBy[u].field.isEqual(e)){const d=t.position[u];lI(r,d)===d&&(r=d,o=t.inclusive);break}return{value:r,inclusive:o}}class fi extends class{}{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.V(e,t,r):new Nv(e,t,r):"array-contains"===t?new _I(e,r):"in"===t?new Pv(e,r):"not-in"===t?new kv(e,r):"array-contains-any"===t?new vI(e,r):new fi(e,t,r)}static V(e,t,r){return"in"===t?new mI(e,r):new UC(e,r)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.v(Zo(t,this.value)):null!==t&&Ud(this.value)===Ud(t)&&this.v(Zo(t,this.value))}v(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return et()}}S(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}class Nv extends fi{constructor(e,t,r){super(e,t,r),this.key=Ue.fromName(r.referenceValue)}matches(e){const t=Ue.comparator(e.key,this.key);return this.v(t)}}class mI extends fi{constructor(e,t){super(e,"in",t),this.keys=yI(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class UC extends fi{constructor(e,t){super(e,"not-in",t),this.keys=yI(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function yI(n,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(r=>Ue.fromName(r.referenceValue))}class _I extends fi{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Yf(t)&&Zf(t.arrayValue,this.value)}}class Pv extends fi{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&Zf(this.value.arrayValue,t)}}class kv extends fi{constructor(e,t){super(e,"not-in",t)}matches(e){if(Zf(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!Zf(this.value.arrayValue,t)}}class vI extends fi{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Yf(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>Zf(this.value.arrayValue,r))}}class Mu{constructor(e,t){this.position=e,this.inclusive=t}}class ec{constructor(e,t="asc"){this.field=e,this.dir=t}}function EI(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}function wI(n,e,t){let r=0;for(let o=0;o<n.position.length;o++){const u=e[o],d=n.position[o];if(r=u.field.isKeyField()?Ue.comparator(Ue.fromName(d.referenceValue),t.key):Zo(d,t.data.field(u.field)),"desc"===u.dir&&(r*=-1),0!==r)break}return r}function II(n,e){if(null===n)return null===e;if(null===e||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Wo(n.position[t],e.position[t]))return!1;return!0}class xu{constructor(e,t=null,r=[],o=[],u=null,d="F",m=null,w=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=o,this.limit=u,this.limitType=d,this.startAt=m,this.endAt=w,this.D=null,this.C=null}}function BC(n,e,t,r,o,u,d,m){return new xu(n,e,t,r,o,u,d,m)}function tc(n){return new xu(n)}function Sm(n){return!Au(n.limit)&&"F"===n.limitType}function Mm(n){return!Au(n.limit)&&"L"===n.limitType}function Fv(n){return n.explicitOrderBy.length>0?n.explicitOrderBy[0].field:null}function bI(n){for(const e of n.filters)if(e.S())return e.field;return null}function DI(n){return null!==n.collectionGroup}function tp(n){const e=Ge(n);if(null===e.D){e.D=[];const t=bI(e),r=Fv(e);if(null!==t&&null===r)t.isKeyField()||e.D.push(new ec(t)),e.D.push(new ec(Yr.keyField(),"asc"));else{let o=!1;for(const u of e.explicitOrderBy)e.D.push(u),u.field.isKeyField()&&(o=!0);if(!o){const u=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.D.push(new ec(Yr.keyField(),u))}}}return e.D}function Eo(n){const e=Ge(n);if(!e.C)if("F"===e.limitType)e.C=fI(e.path,e.collectionGroup,tp(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const u of tp(e))t.push(new ec(u.field,"desc"===u.dir?"asc":"desc"));const r=e.endAt?new Mu(e.endAt.position,!e.endAt.inclusive):null,o=e.startAt?new Mu(e.startAt.position,!e.startAt.inclusive):null;e.C=fI(e.path,e.collectionGroup,t,e.filters,e.limit,r,o)}return e.C}function jC(n,e,t){return new xu(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function np(n,e){return Xf(Eo(n),Eo(e))&&n.limitType===e.limitType}function rp(n){return`${jd(Eo(n))}|lt:${n.limitType}`}function Lv(n){return`Query(target=${function VC(n){let e=n.path.canonicalString();return null!==n.collectionGroup&&(e+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(e+=`, filters: [${n.filters.map(t=>{return`${(r=t).field.canonicalString()} ${r.op} ${Kf(r.value)}`;var r}).join(", ")}]`),Au(n.limit)||(e+=", limit: "+n.limit),n.orderBy.length>0&&(e+=`, orderBy: [${n.orderBy.map(t=>{return`${(r=t).field.canonicalString()} (${r.dir})`;var r}).join(", ")}]`),n.startAt&&(e+=", startAt: ",e+=n.startAt.inclusive?"b:":"a:",e+=n.startAt.position.map(t=>Kf(t)).join(",")),n.endAt&&(e+=", endAt: ",e+=n.endAt.inclusive?"a:":"b:",e+=n.endAt.position.map(t=>Kf(t)).join(",")),`Target(${e})`}(Eo(n))}; limitType=${n.limitType})`}function Vv(n,e){return e.isFoundDocument()&&function(t,r){const o=r.key.path;return null!==t.collectionGroup?r.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(o):Ue.isDocumentKey(t.path)?t.path.isEqual(o):t.path.isImmediateParentOf(o)}(n,e)&&function(t,r){for(const o of t.explicitOrderBy)if(!o.field.isKeyField()&&null===r.data.field(o.field))return!1;return!0}(n,e)&&function(t,r){for(const o of t.filters)if(!o.matches(r))return!1;return!0}(n,e)&&(r=e,!((t=n).startAt&&!function(o,u,d){const m=wI(o,u,d);return o.inclusive?m<=0:m<0}(t.startAt,tp(t),r)||t.endAt&&!function(o,u,d){const m=wI(o,u,d);return o.inclusive?m>=0:m>0}(t.endAt,tp(t),r)));var t,r}function Uv(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function Ru(n){return(e,t)=>{let r=!1;for(const o of tp(n)){const u=CI(o,e,t);if(0!==u)return u;r=r||o.field.isKeyField()}return 0}}function CI(n,e,t){const r=n.field.isKeyField()?Ue.comparator(e.key,t.key):function(o,u,d){const m=u.data.field(o),w=d.data.field(o);return null!==m&&null!==w?Zo(m,w):et()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return et()}}function xm(n,e){if(n.N){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:wm(e)?"-0":e}}function Rm(n){return{integerValue:""+n}}function TI(n,e){return Im(e)?Rm(e):xm(n,e)}class Hd{constructor(){this._=void 0}}function Bv(n,e,t){return n instanceof ip?function(r,o){const u={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return o&&(u.fields.__previous_value__=o),{mapValue:u}}(t,e):n instanceof $d?$C(n,e):n instanceof Ou?AI(n,e):function(r,o){const u=HC(r,o),d=SI(u)+SI(r.k);return xv(u)&&xv(r.k)?Rm(d):xm(r.M,d)}(n,e)}function Om(n,e,t){return n instanceof $d?$C(n,e):n instanceof Ou?AI(n,e):t}function HC(n,e){return n instanceof Gd?xv(t=e)||(r=t)&&"doubleValue"in r?e:{integerValue:0}:null;var r,t}class ip extends Hd{}class $d extends Hd{constructor(e){super(),this.elements=e}}function $C(n,e){const t=MI(e);for(const r of n.elements)t.some(o=>Wo(o,r))||t.push(r);return{arrayValue:{values:t}}}class Ou extends Hd{constructor(e){super(),this.elements=e}}function AI(n,e){let t=MI(e);for(const r of n.elements)t=t.filter(o=>!Wo(o,r));return{arrayValue:{values:t}}}class Gd extends Hd{constructor(e,t){super(),this.M=e,this.k=t}}function SI(n){return Yn(n.integerValue||n.doubleValue)}function MI(n){return Yf(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class qd{constructor(e,t){this.field=e,this.transform=t}}class RI{constructor(e,t){this.version=e,this.transformResults=t}}class or{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new or}static exists(e){return new or(void 0,e)}static updateTime(e){return new or(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Nm(n,e){return void 0!==n.updateTime?e.isFoundDocument()&&e.version.isEqual(n.updateTime):void 0===n.exists||n.exists===e.isFoundDocument()}class sp{}function jv(n,e,t){n instanceof op?function(r,o,u){const d=r.value.clone(),m=kI(r.fieldTransforms,o,u.transformResults);d.setAll(m),o.convertToFoundDocument(u.version,d).setHasCommittedMutations()}(n,e,t):n instanceof zd?function(r,o,u){if(!Nm(r.precondition,o))return void o.convertToUnknownDocument(u.version);const d=kI(r.fieldTransforms,o,u.transformResults),m=o.data;m.setAll(GC(r)),m.setAll(d),o.convertToFoundDocument(u.version,m).setHasCommittedMutations()}(n,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function OI(n,e,t){var o;n instanceof op?function(r,o,u){if(!Nm(r.precondition,o))return;const d=r.value.clone(),m=FI(r.fieldTransforms,u,o);d.setAll(m),o.convertToFoundDocument(PI(o),d).setHasLocalMutations()}(n,e,t):n instanceof zd?function(r,o,u){if(!Nm(r.precondition,o))return;const d=FI(r.fieldTransforms,u,o),m=o.data;m.setAll(GC(r)),m.setAll(d),o.convertToFoundDocument(PI(o),m).setHasLocalMutations()}(n,e,t):Nm(n.precondition,o=e)&&o.convertToNoDocument(yt.min())}function NI(n,e){let t=null;for(const r of n.fieldTransforms){const o=e.data.field(r.field),u=HC(r.transform,o||null);null!=u&&(null==t&&(t=hi.empty()),t.set(r.field,u))}return t||null}function Pm(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&(r=e.fieldTransforms,!!(void 0===(t=n.fieldTransforms)&&void 0===r||t&&r&&Ql(t,r,(o,u)=>function xI(n,e){return n.field.isEqual(e.field)&&(r=e.transform,(t=n.transform)instanceof $d&&r instanceof $d||t instanceof Ou&&r instanceof Ou?Ql(t.elements,r.elements,Wo):t instanceof Gd&&r instanceof Gd?Wo(t.k,r.k):t instanceof ip&&r instanceof ip);var t,r}(o,u))))&&(0===n.type?n.value.isEqual(e.value):1!==n.type||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask));var t,r}function PI(n){return n.isFoundDocument()?n.version:yt.min()}class op extends sp{constructor(e,t,r,o=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=o,this.type=0}}class zd extends sp{constructor(e,t,r,o,u=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=o,this.fieldTransforms=u,this.type=1}}function GC(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function kI(n,e,t){const r=new Map;It(n.length===t.length);for(let o=0;o<t.length;o++){const u=n[o],d=u.transform,m=e.data.field(u.field);r.set(u.field,Om(d,m,t[o]))}return r}function FI(n,e,t){const r=new Map;for(const o of n){const u=o.transform,d=t.data.field(o.field);r.set(o.field,Bv(u,d,e))}return r}class km extends sp{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}}class LI extends sp{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}}class DS{constructor(e){this.count=e}}var Er,Xt;function VI(n){switch(n){default:return et();case ae.CANCELLED:case ae.UNKNOWN:case ae.DEADLINE_EXCEEDED:case ae.RESOURCE_EXHAUSTED:case ae.INTERNAL:case ae.UNAVAILABLE:case ae.UNAUTHENTICATED:return!1;case ae.INVALID_ARGUMENT:case ae.NOT_FOUND:case ae.ALREADY_EXISTS:case ae.PERMISSION_DENIED:case ae.FAILED_PRECONDITION:case ae.ABORTED:case ae.OUT_OF_RANGE:case ae.UNIMPLEMENTED:case ae.DATA_LOSS:return!0}}function qC(n){if(void 0===n)return Kn("GRPC error has no .code"),ae.UNKNOWN;switch(n){case Er.OK:return ae.OK;case Er.CANCELLED:return ae.CANCELLED;case Er.UNKNOWN:return ae.UNKNOWN;case Er.DEADLINE_EXCEEDED:return ae.DEADLINE_EXCEEDED;case Er.RESOURCE_EXHAUSTED:return ae.RESOURCE_EXHAUSTED;case Er.INTERNAL:return ae.INTERNAL;case Er.UNAVAILABLE:return ae.UNAVAILABLE;case Er.UNAUTHENTICATED:return ae.UNAUTHENTICATED;case Er.INVALID_ARGUMENT:return ae.INVALID_ARGUMENT;case Er.NOT_FOUND:return ae.NOT_FOUND;case Er.ALREADY_EXISTS:return ae.ALREADY_EXISTS;case Er.PERMISSION_DENIED:return ae.PERMISSION_DENIED;case Er.FAILED_PRECONDITION:return ae.FAILED_PRECONDITION;case Er.ABORTED:return ae.ABORTED;case Er.OUT_OF_RANGE:return ae.OUT_OF_RANGE;case Er.UNIMPLEMENTED:return ae.UNIMPLEMENTED;case Er.DATA_LOSS:return ae.DATA_LOSS;default:return et()}}(Xt=Er||(Er={}))[Xt.OK=0]="OK",Xt[Xt.CANCELLED=1]="CANCELLED",Xt[Xt.UNKNOWN=2]="UNKNOWN",Xt[Xt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Xt[Xt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Xt[Xt.NOT_FOUND=5]="NOT_FOUND",Xt[Xt.ALREADY_EXISTS=6]="ALREADY_EXISTS",Xt[Xt.PERMISSION_DENIED=7]="PERMISSION_DENIED",Xt[Xt.UNAUTHENTICATED=16]="UNAUTHENTICATED",Xt[Xt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Xt[Xt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Xt[Xt.ABORTED=10]="ABORTED",Xt[Xt.OUT_OF_RANGE=11]="OUT_OF_RANGE",Xt[Xt.UNIMPLEMENTED=12]="UNIMPLEMENTED",Xt[Xt.INTERNAL=13]="INTERNAL",Xt[Xt.UNAVAILABLE=14]="UNAVAILABLE",Xt[Xt.DATA_LOSS=15]="DATA_LOSS";class nc{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0!==r)for(const[o,u]of r)if(this.equalsFn(o,e))return u}has(e){return void 0!==this.get(e)}set(e,t){const r=this.mapKeyFn(e),o=this.inner[r];if(void 0===o)return this.inner[r]=[[e,t]],void this.innerSize++;for(let u=0;u<o.length;u++)if(this.equalsFn(o[u][0],e))return void(o[u]=[e,t]);o.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0===r)return!1;for(let o=0;o<r.length;o++)if(this.equalsFn(r[o][0],e))return 1===r.length?delete this.inner[t]:r.splice(o,1),this.innerSize--,!0;return!1}forEach(e){Tu(this.inner,(t,r)=>{for(const[o,u]of r)e(o,u)})}isEmpty(){return nI(this.inner)}size(){return this.innerSize}}class ar{constructor(e,t){this.comparator=e,this.root=t||i.EMPTY}insert(e,t){return new ar(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,i.BLACK,null,null))}remove(e){return new ar(this.comparator,this.root.remove(e,this.comparator).copy(null,null,i.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(0===r)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const o=this.comparator(e,r.key);if(0===o)return t+r.left.size;o<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Hv(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Hv(this.root,e,this.comparator,!1)}getReverseIterator(){return new Hv(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Hv(this.root,e,this.comparator,!0)}}class Hv{constructor(e,t,r,o){this.isReverse=o,this.nodeStack=[];let u=1;for(;!e.isEmpty();)if(u=t?r(e.key,t):1,t&&o&&(u*=-1),u<0)e=this.isReverse?e.left:e.right;else{if(0===u){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class i{constructor(e,t,r,o,u){this.key=e,this.value=t,this.color=null!=r?r:i.RED,this.left=null!=o?o:i.EMPTY,this.right=null!=u?u:i.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,o,u){return new i(null!=e?e:this.key,null!=t?t:this.value,null!=r?r:this.color,null!=o?o:this.left,null!=u?u:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let o=this;const u=r(e,o.key);return o=u<0?o.copy(null,null,null,o.left.insert(e,t,r),null):0===u?o.copy(null,t,null,null,null):o.copy(null,null,null,null,o.right.insert(e,t,r)),o.fixUp()}removeMin(){if(this.left.isEmpty())return i.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,o=this;if(t(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,t),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),0===t(e,o.key)){if(o.right.isEmpty())return i.EMPTY;r=o.right.min(),o=o.copy(r.key,r.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,t))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,i.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,i.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw et();const e=this.left.check();if(e!==this.right.check())throw et();return e+(this.isRed()?0:1)}}i.EMPTY=null,i.RED=!0,i.BLACK=!1,i.EMPTY=new class{constructor(){this.size=0}get key(){throw et()}get value(){throw et()}get color(){throw et()}get left(){throw et()}get right(){throw et()}copy(n,e,t,r,o){return this}insert(n,e,t){return new i(n,e)}remove(n,e){return this}isEmpty(){return!0}inorderTraversal(n){return!1}reverseTraversal(n){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class s{constructor(e){this.comparator=e,this.data=new ar(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const o=r.getNext();if(this.comparator(o.key,e[1])>=0)return;t(o.key)}}forEachWhile(e,t){let r;for(r=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new a(this.data.getIterator())}getIteratorFrom(e){return new a(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof s)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const o=t.getNext().key,u=r.getNext().key;if(0!==this.comparator(o,u))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new s(this.comparator);return t.data=e,t}}class a{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function l(n){return n.hasNext()?n.getNext():void 0}const c=new ar(Ue.comparator);function p(){return c}const _=new ar(Ue.comparator);function E(){return _}function I(){return new nc(n=>n.toString(),(n,e)=>n.isEqual(e))}const A=new ar(Ue.comparator),S=new s(Ue.comparator);function N(...n){let e=S;for(const t of n)e=e.add(t);return e}const V=new s(Rt);function W(){return V}class ge{constructor(e,t,r,o,u){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=o,this.resolvedLimboDocuments=u}static createSynthesizedRemoteEventForCurrentChange(e,t){const r=new Map;return r.set(e,Me.createSynthesizedTargetChangeForCurrentChange(e,t)),new ge(yt.min(),r,W(),p(),N())}}class Me{constructor(e,t,r,o,u){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=o,this.removedDocuments=u}static createSynthesizedTargetChangeForCurrentChange(e,t){return new Me(xr.EMPTY_BYTE_STRING,t,N(),N(),N())}}class Le{constructor(e,t,r,o){this.O=e,this.removedTargetIds=t,this.key=r,this.F=o}}class Qe{constructor(e,t){this.targetId=e,this.$=t}}class Ie{constructor(e,t,r=xr.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=o}}class dt{constructor(){this.B=0,this.L=Fi(),this.U=xr.EMPTY_BYTE_STRING,this.q=!1,this.K=!0}get current(){return this.q}get resumeToken(){return this.U}get G(){return 0!==this.B}get j(){return this.K}W(e){e.approximateByteSize()>0&&(this.K=!0,this.U=e)}H(){let e=N(),t=N(),r=N();return this.L.forEach((o,u)=>{switch(u){case 0:e=e.add(o);break;case 2:t=t.add(o);break;case 1:r=r.add(o);break;default:et()}}),new Me(this.U,this.q,e,t,r)}J(){this.K=!1,this.L=Fi()}Y(e,t){this.K=!0,this.L=this.L.insert(e,t)}X(e){this.K=!0,this.L=this.L.remove(e)}Z(){this.B+=1}tt(){this.B-=1}et(){this.K=!0,this.q=!0}}class Gt{constructor(e){this.nt=e,this.st=new Map,this.it=p(),this.rt=on(),this.ot=new s(Rt)}ut(e){for(const t of e.O)e.F&&e.F.isFoundDocument()?this.at(t,e.F):this.ct(t,e.key,e.F);for(const t of e.removedTargetIds)this.ct(t,e.key,e.F)}ht(e){this.forEachTarget(e,t=>{const r=this.lt(t);switch(e.state){case 0:this.ft(t)&&r.W(e.resumeToken);break;case 1:r.tt(),r.G||r.J(),r.W(e.resumeToken);break;case 2:r.tt(),r.G||this.removeTarget(t);break;case 3:this.ft(t)&&(r.et(),r.W(e.resumeToken));break;case 4:this.ft(t)&&(this.dt(t),r.W(e.resumeToken));break;default:et()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.st.forEach((r,o)=>{this.ft(o)&&t(o)})}_t(e){const t=e.targetId,r=e.$.count,o=this.wt(t);if(o){const u=o.target;if(Am(u))if(0===r){const d=new Ue(u.path);this.ct(t,d,En.newNoDocument(d,yt.min()))}else It(1===r);else this.gt(t)!==r&&(this.dt(t),this.ot=this.ot.add(t))}}yt(e){const t=new Map;this.st.forEach((u,d)=>{const m=this.wt(d);if(m){if(u.current&&Am(m.target)){const w=new Ue(m.target.path);null!==this.it.get(w)||this.It(d,w)||this.ct(d,w,En.newNoDocument(w,e))}u.j&&(t.set(d,u.H()),u.J())}});let r=N();this.rt.forEach((u,d)=>{let m=!0;d.forEachWhile(w=>{const C=this.wt(w);return!C||2===C.purpose||(m=!1,!1)}),m&&(r=r.add(u))}),this.it.forEach((u,d)=>d.setReadTime(e));const o=new ge(e,t,this.ot,this.it,r);return this.it=p(),this.rt=on(),this.ot=new s(Rt),o}at(e,t){if(!this.ft(e))return;const r=this.It(e,t.key)?2:0;this.lt(e).Y(t.key,r),this.it=this.it.insert(t.key,t),this.rt=this.rt.insert(t.key,this.Tt(t.key).add(e))}ct(e,t,r){if(!this.ft(e))return;const o=this.lt(e);this.It(e,t)?o.Y(t,1):o.X(t),this.rt=this.rt.insert(t,this.Tt(t).delete(e)),r&&(this.it=this.it.insert(t,r))}removeTarget(e){this.st.delete(e)}gt(e){const t=this.lt(e).H();return this.nt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Z(e){this.lt(e).Z()}lt(e){let t=this.st.get(e);return t||(t=new dt,this.st.set(e,t)),t}Tt(e){let t=this.rt.get(e);return t||(t=new s(Rt),this.rt=this.rt.insert(e,t)),t}ft(e){const t=null!==this.wt(e);return t||Oe("WatchChangeAggregator","Detected inactive target",e),t}wt(e){const t=this.st.get(e);return t&&t.G?null:this.nt.Et(e)}dt(e){this.st.set(e,new dt),this.nt.getRemoteKeysForTarget(e).forEach(t=>{this.ct(e,t,null)})}It(e,t){return this.nt.getRemoteKeysForTarget(e).has(t)}}function on(){return new ar(Ue.comparator)}function Fi(){return new ar(Ue.comparator)}const rc={asc:"ASCENDING",desc:"DESCENDING"},$v={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"};class Gv{constructor(e,t){this.databaseId=e,this.N=t}}function ic(n,e){return n.N?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Fm(n,e){return n.N?e.toBase64():e.toUint8Array()}function qv(n,e){return ic(n,e.toTimestamp())}function ur(n){return It(!!n),yt.fromTimestamp(function(e){const t=Jl(e);return new Hn(t.seconds,t.nanos)}(n))}function ap(n,e){return(t=n,new Jt(["projects",t.projectId,"databases",t.database])).child("documents").child(e).canonicalString();var t}function Lm(n){const e=Jt.fromString(n);return It(NS(e)),e}function sc(n,e){return ap(n.databaseId,e.path)}function Nu(n,e){const t=Lm(e);if(t.get(1)!==n.databaseId.projectId)throw new Ae(ae.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new Ae(ae.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new Ue(TS(t))}function zC(n,e){return ap(n.databaseId,e)}function CS(n){const e=Lm(n);return 4===e.length?Jt.emptyPath():TS(e)}function zv(n){return new Jt(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function TS(n){return It(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function AS(n,e,t){return{name:sc(n,e),fields:t.value.mapValue.fields}}function SS(n,e,t){const r=Nu(n,e.name),o=ur(e.updateTime),u=new hi({mapValue:{fields:e.fields}}),d=En.newFoundDocument(r,o,u);return t&&d.setHasCommittedMutations(),t?d.setHasCommittedMutations():d}function Wv(n,e){let t;if(e instanceof op)t={update:AS(n,e.key,e.value)};else if(e instanceof km)t={delete:sc(n,e.key)};else if(e instanceof zd)t={update:AS(n,e.key,e.data),updateMask:Yx(e.fieldMask)};else{if(!(e instanceof LI))return et();t={verify:sc(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(o,u){const d=u.transform;if(d instanceof ip)return{fieldPath:u.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(d instanceof $d)return{fieldPath:u.field.canonicalString(),appendMissingElements:{values:d.elements}};if(d instanceof Ou)return{fieldPath:u.field.canonicalString(),removeAllFromArray:{values:d.elements}};if(d instanceof Gd)return{fieldPath:u.field.canonicalString(),increment:d.k};throw et()}(0,r))),e.precondition.isNone||(t.currentDocument=void 0!==(o=e.precondition).updateTime?{updateTime:qv(n,o.updateTime)}:void 0!==o.exists?{exists:o.exists}:et()),t;var o}function WC(n,e){const t=e.currentDocument?void 0!==(o=e.currentDocument).updateTime?or.updateTime(ur(o.updateTime)):void 0!==o.exists?or.exists(o.exists):or.none():or.none(),r=e.updateTransforms?e.updateTransforms.map(o=>function(u,d){let m=null;"setToServerValue"in d?(It("REQUEST_TIME"===d.setToServerValue),m=new ip):"appendMissingElements"in d?m=new $d(d.appendMissingElements.values||[]):"removeAllFromArray"in d?m=new Ou(d.removeAllFromArray.values||[]):"increment"in d?m=new Gd(u,d.increment):et();const w=Yr.fromServerFormat(d.fieldPath);return new qd(w,m)}(n,o)):[];var o;if(e.update){const o=Nu(n,e.update.name),u=new hi({mapValue:{fields:e.update.fields}});if(e.updateMask){const d=new Wf((e.updateMask.fieldPaths||[]).map(C=>Yr.fromServerFormat(C)));return new zd(o,u,d,t,r)}return new op(o,u,t,r)}if(e.delete){const o=Nu(n,e.delete);return new km(o,t)}if(e.verify){const o=Nu(n,e.verify);return new LI(o,t)}return et()}function MS(n,e){return{documents:[zC(n,e.path)]}}function xS(n,e){const t={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(t.parent=zC(n,r),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=zC(n,r.popLast()),t.structuredQuery.from=[{collectionId:r.lastSegment()}]);const o=function(w){if(0===w.length)return;const C=w.map(x=>function(R){if("=="===R.op){if(FC(R.value))return{unaryFilter:{field:Vm(R.field),op:"IS_NAN"}};if(aI(R.value))return{unaryFilter:{field:Vm(R.field),op:"IS_NULL"}}}else if("!="===R.op){if(FC(R.value))return{unaryFilter:{field:Vm(R.field),op:"IS_NOT_NAN"}};if(aI(R.value))return{unaryFilter:{field:Vm(R.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Vm(R.field),op:Wx(R.op),value:R.value}}}(x));return 1===C.length?C[0]:{compositeFilter:{op:"AND",filters:C}}}(e.filters);o&&(t.structuredQuery.where=o);const u=function(w){if(0!==w.length)return w.map(C=>{return{field:Vm((x=C).field),direction:zx(x.dir)};var x})}(e.orderBy);u&&(t.structuredQuery.orderBy=u);const d=(C=e.limit,n.N||Au(C)?C:{value:C});var C,m,w;return null!==d&&(t.structuredQuery.limit=d),e.startAt&&(t.structuredQuery.startAt={before:(m=e.startAt).inclusive,values:m.position}),e.endAt&&(t.structuredQuery.endAt={before:!(w=e.endAt).inclusive,values:w.position}),t}function RS(n){let e=CS(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let o=null;if(r>0){It(1===r);const x=t.from[0];x.allDescendants?o=x.collectionId:e=e.child(x.collectionId)}let u=[];t.where&&(u=OS(t.where));let d=[];t.orderBy&&(d=t.orderBy.map(x=>{return new ec(Um((R=x).field),function(H){switch(H){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(R.direction));var R}));let m=null;t.limit&&(m=function(x){let R;return R="object"==typeof x?x.value:x,Au(R)?null:R}(t.limit));let w=null;var x;t.startAt&&(w=new Mu((x=t.startAt).values||[],!!x.before));let C=null;return t.endAt&&(C=function(x){return new Mu(x.values||[],!x.before)}(t.endAt)),BC(e,o,d,u,m,"F",w,C)}function OS(n){return n?void 0!==n.unaryFilter?[Kx(n)]:void 0!==n.fieldFilter?[Zx(n)]:void 0!==n.compositeFilter?n.compositeFilter.filters.map(e=>OS(e)).reduce((e,t)=>e.concat(t)):et():[]}function zx(n){return rc[n]}function Wx(n){return $v[n]}function Vm(n){return{fieldPath:n.canonicalString()}}function Um(n){return Yr.fromServerFormat(n.fieldPath)}function Zx(n){return fi.create(Um(n.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return et()}}(n.fieldFilter.op),n.fieldFilter.value)}function Kx(n){switch(n.unaryFilter.op){case"IS_NAN":const e=Um(n.unaryFilter.field);return fi.create(e,"==",{doubleValue:NaN});case"IS_NULL":const t=Um(n.unaryFilter.field);return fi.create(t,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=Um(n.unaryFilter.field);return fi.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=Um(n.unaryFilter.field);return fi.create(o,"!=",{nullValue:"NULL_VALUE"});default:return et()}}function Yx(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function NS(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}function os(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=PS(e)),e=Qx(n.get(t),e);return PS(e)}function Qx(n,e){let t=e;const r=n.length;for(let o=0;o<r;o++){const u=n.charAt(o);switch(u){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=u}}return t}function PS(n){return n+"\x01\x01"}function Pu(n){const e=n.length;if(It(e>=2),2===e)return It("\x01"===n.charAt(0)&&"\x01"===n.charAt(1)),Jt.emptyPath();const t=e-2,r=[];let o="";for(let u=0;u<e;){const d=n.indexOf("\x01",u);switch((d<0||d>t)&&et(),n.charAt(d+1)){case"\x01":const m=n.substring(u,d);let w;0===o.length?w=m:(o+=m,w=o,o=""),r.push(w);break;case"\x10":o+=n.substring(u,d),o+="\0";break;case"\x11":o+=n.substring(u,d+1);break;default:et()}u=d+2}return new Jt(r)}const kS=["userId","batchId"];function UI(n,e){return[n,os(e)]}function FS(n,e,t){return[n,os(e),t]}const Jx={},Xx=["prefixPath","collectionGroup","readTime","documentId"],eR=["prefixPath","collectionGroup","documentId"],tR=["collectionGroup","readTime","prefixPath","documentId"],nR=["canonicalId","targetId"],rR=["targetId","path"],iR=["path","targetId"],sR=["collectionId","parent"],oR=["indexId","uid"],aR=["uid","sequenceNumber"],uR=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],lR=["indexId","uid","orderedDocumentKey"],cR=["userId","collectionPath","documentId"],dR=["userId","collectionPath","largestBatchId"],hR=["userId","collectionGroup","largestBatchId"],LS=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],fR=[...LS,"documentOverlays"],VS=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],pR=[...VS,"indexConfiguration","indexState","indexEntries"],US="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class BS{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}class he{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&et(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new he((r,o)=>{this.nextCallback=u=>{this.wrapSuccess(e,u).next(r,o)},this.catchCallback=u=>{this.wrapFailure(t,u).next(r,o)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof he?t:he.resolve(t)}catch(t){return he.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):he.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):he.reject(t)}static resolve(e){return new he((t,r)=>{t(e)})}static reject(e){return new he((t,r)=>{r(e)})}static waitFor(e){return new he((t,r)=>{let o=0,u=0,d=!1;e.forEach(m=>{++o,m.next(()=>{++u,d&&u===o&&t()},w=>r(w))}),d=!0,u===o&&t()})}static or(e){let t=he.resolve(!1);for(const r of e)t=t.next(o=>o?he.resolve(o):r());return t}static forEach(e,t){const r=[];return e.forEach((o,u)=>{r.push(t.call(this,o,u))}),this.waitFor(r)}}class BI{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.At=new vr,this.transaction.oncomplete=()=>{this.At.resolve()},this.transaction.onabort=()=>{t.error?this.At.reject(new Zv(e,t.error)):this.At.resolve()},this.transaction.onerror=r=>{const o=ZC(r.target.error);this.At.reject(new Zv(e,o))}}static open(e,t,r,o){try{return new BI(t,e.transaction(o,r))}catch(u){throw new Zv(t,u)}}get Rt(){return this.At.promise}abort(e){e&&this.At.reject(e),this.aborted||(Oe("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}Pt(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new mR(t)}}class Pa{constructor(e,t,r){this.name=e,this.version=t,this.bt=r,12.2===Pa.Vt((0,Pt.z$)())&&Kn("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return Oe("SimpleDb","Removing database:",e),lp(window.indexedDB.deleteDatabase(e)).toPromise()}static vt(){if(!(0,Pt.hl)())return!1;if(Pa.St())return!0;const e=(0,Pt.z$)(),t=Pa.Vt(e),r=0<t&&t<10,o=Pa.Dt(e),u=0<o&&o<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||u)}static St(){var e;return"undefined"!=typeof process&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.Ct)}static xt(e,t){return e.store(t)}static Vt(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}static Dt(e){const t=e.match(/Android ([\d.]+)/i),r=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(r)}Nt(e){var t=this;return(0,ye.Z)(function*(){return t.db||(Oe("SimpleDb","Opening database:",t.name),t.db=yield new Promise((r,o)=>{const u=indexedDB.open(t.name,t.version);u.onsuccess=d=>{r(d.target.result)},u.onblocked=()=>{o(new Zv(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},u.onerror=d=>{const m=d.target.error;o("VersionError"===m.name?new Ae(ae.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===m.name?new Ae(ae.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+m):new Zv(e,m))},u.onupgradeneeded=d=>{Oe("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',d.oldVersion),t.bt.kt(d.target.result,u.transaction,d.oldVersion,t.version).next(()=>{Oe("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.Mt&&(t.db.onversionchange=r=>t.Mt(r)),t.db})()}Ot(e){this.Mt=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,r,o){var u=this;return(0,ye.Z)(function*(){const d="readonly"===t;let m=0;for(;;){++m;try{u.db=yield u.Nt(e);const w=BI.open(u.db,e,d?"readonly":"readwrite",r),C=o(w).next(x=>(w.Pt(),x)).catch(x=>(w.abort(x),he.reject(x))).toPromise();return C.catch(()=>{}),yield w.Rt,C}catch(w){const C="FirebaseError"!==w.name&&m<3;if(Oe("SimpleDb","Transaction failed with error:",w.message,"Retrying:",C),u.close(),!C)return Promise.reject(w)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class gR{constructor(e){this.Ft=e,this.$t=!1,this.Bt=null}get isDone(){return this.$t}get Lt(){return this.Bt}set cursor(e){this.Ft=e}done(){this.$t=!0}Ut(e){this.Bt=e}delete(){return lp(this.Ft.delete())}}class Zv extends Ae{constructor(e,t){super(ae.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function up(n){return"IndexedDbTransactionError"===n.name}class mR{constructor(e){this.store=e}put(e,t){let r;return void 0!==t?(Oe("SimpleDb","PUT",this.store.name,e,t),r=this.store.put(t,e)):(Oe("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),lp(r)}add(e){return Oe("SimpleDb","ADD",this.store.name,e,e),lp(this.store.add(e))}get(e){return lp(this.store.get(e)).next(t=>(void 0===t&&(t=null),Oe("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return Oe("SimpleDb","DELETE",this.store.name,e),lp(this.store.delete(e))}count(){return Oe("SimpleDb","COUNT",this.store.name),lp(this.store.count())}qt(e,t){const r=this.options(e,t);if(r.index||"function"!=typeof this.store.getAll){const o=this.cursor(r),u=[];return this.Kt(o,(d,m)=>{u.push(m)}).next(()=>u)}{const o=this.store.getAll(r.range);return new he((u,d)=>{o.onerror=m=>{d(m.target.error)},o.onsuccess=m=>{u(m.target.result)}})}}Gt(e,t){const r=this.store.getAll(e,null===t?void 0:t);return new he((o,u)=>{r.onerror=d=>{u(d.target.error)},r.onsuccess=d=>{o(d.target.result)}})}Qt(e,t){Oe("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,t);r.jt=!1;const o=this.cursor(r);return this.Kt(o,(u,d,m)=>m.delete())}Wt(e,t){let r;t?r=e:(r={},t=e);const o=this.cursor(r);return this.Kt(o,t)}zt(e){const t=this.cursor({});return new he((r,o)=>{t.onerror=u=>{const d=ZC(u.target.error);o(d)},t.onsuccess=u=>{const d=u.target.result;d?e(d.primaryKey,d.value).next(m=>{m?d.continue():r()}):r()}})}Kt(e,t){const r=[];return new he((o,u)=>{e.onerror=d=>{u(d.target.error)},e.onsuccess=d=>{const m=d.target.result;if(!m)return void o();const w=new gR(m),C=t(m.primaryKey,m.value,w);if(C instanceof he){const x=C.catch(R=>(w.done(),he.reject(R)));r.push(x)}w.isDone?o():null===w.Lt?m.continue():m.continue(w.Lt)}}).next(()=>he.waitFor(r))}options(e,t){let r;return void 0!==e&&("string"==typeof e?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.jt?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function lp(n){return new he((e,t)=>{n.onsuccess=r=>{e(r.target.result)},n.onerror=r=>{const o=ZC(r.target.error);t(o)}})}let jS=!1;function ZC(n){const e=Pa.Vt((0,Pt.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const r=new Ae("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return jS||(jS=!0,setTimeout(()=>{throw r},0)),r}}return n}class HS extends BS{constructor(e,t){super(),this.Ht=e,this.currentSequenceNumber=t}}function pi(n,e){const t=Ge(n);return Pa.xt(t.Ht,e)}class KC{constructor(e,t,r,o){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=o}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let o=0;o<this.mutations.length;o++){const u=this.mutations[o];u.key.isEqual(e.key)&&jv(u,e,r[o])}}applyToLocalView(e){for(const t of this.baseMutations)t.key.isEqual(e.key)&&OI(t,e,this.localWriteTime);for(const t of this.mutations)t.key.isEqual(e.key)&&OI(t,e,this.localWriteTime)}applyToLocalDocumentSet(e){this.mutations.forEach(t=>{const r=e.get(t.key),o=r;this.applyToLocalView(o),r.isValidDocument()||o.convertToNoDocument(yt.min())})}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),N())}isEqual(e){return this.batchId===e.batchId&&Ql(this.mutations,e.mutations,(t,r)=>Pm(t,r))&&Ql(this.baseMutations,e.baseMutations,(t,r)=>Pm(t,r))}}class YC{constructor(e,t,r,o){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=o}static from(e,t,r){It(e.mutations.length===r.length);let o=A;const u=e.mutations;for(let d=0;d<u.length;d++)o=o.insert(u[d].key,r[d].version);return new YC(e,t,r,o)}}class QC{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class Wd{constructor(e,t,r,o,u=yt.min(),d=yt.min(),m=xr.EMPTY_BYTE_STRING){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=o,this.snapshotVersion=u,this.lastLimboFreeSnapshotVersion=d,this.resumeToken=m}withSequenceNumber(e){return new Wd(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(e,t){return new Wd(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e)}withLastLimboFreeSnapshotVersion(e){return new Wd(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}}class $S{constructor(e){this.Jt=e}}function GS(n,e){const t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:jI(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document={name:sc(o=n.Jt,(u=e).key),fields:u.data.value.mapValue.fields,updateTime:ic(o,u.version.toTimestamp())};else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:cp(e.version)};else{if(!e.isUnknownDocument())return et();r.unknownDocument={path:t.path.toArray(),version:cp(e.version)}}var o,u;return r}function jI(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function cp(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function dp(n){const e=new Hn(n.seconds,n.nanoseconds);return yt.fromTimestamp(e)}function Bm(n,e){const t=(e.baseMutations||[]).map(u=>WC(n.Jt,u));for(let u=0;u<e.mutations.length-1;++u){const d=e.mutations[u];u+1<e.mutations.length&&void 0!==e.mutations[u+1].transform&&(d.updateTransforms=e.mutations[u+1].transform.fieldTransforms,e.mutations.splice(u+1,1),++u)}const r=e.mutations.map(u=>WC(n.Jt,u)),o=Hn.fromMillis(e.localWriteTimeMs);return new KC(e.batchId,o,t,r)}function Kv(n){const e=dp(n.readTime),t=void 0!==n.lastLimboFreeSnapshotVersion?dp(n.lastLimboFreeSnapshotVersion):yt.min();let r;var o;return void 0!==n.query.documents?(It(1===(o=n.query).documents.length),r=Eo(tc(CS(o.documents[0])))):r=Eo(RS(n.query)),new Wd(r,n.targetId,0,n.lastListenSequenceNumber,e,t,xr.fromBase64String(n.resumeToken))}function qS(n,e){const t=cp(e.snapshotVersion),r=cp(e.lastLimboFreeSnapshotVersion);let o;o=Am(e.target)?MS(n.Jt,e.target):xS(n.Jt,e.target);const u=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:jd(e.target),readTime:t,resumeToken:u,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:o}}function JC(n){const e=RS({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?jC(e,e.limit,"L"):e}function XC(n,e){return new QC(e.largestBatchId,WC(n.Jt,e.overlayMutation))}function zS(n,e){const t=e.path.lastSegment();return[n,os(e.path.popLast()),t]}class _R{getBundleMetadata(e,t){return WS(e).get(t).next(r=>{if(r)return{id:(o=r).bundleId,createTime:dp(o.createTime),version:o.version};var o})}saveBundleMetadata(e,t){return WS(e).put({bundleId:(r=t).id,createTime:cp(ur(r.createTime)),version:r.version});var r}getNamedQuery(e,t){return ZS(e).get(t).next(r=>{if(r)return{name:(o=r).name,query:JC(o.bundledQuery),readTime:dp(o.readTime)};var o})}saveNamedQuery(e,t){return ZS(e).put({name:(r=t).name,readTime:cp(ur(r.readTime)),bundledQuery:r.bundledQuery});var r}}function WS(n){return pi(n,"bundles")}function ZS(n){return pi(n,"namedQueries")}class eT{constructor(e,t){this.M=e,this.userId=t}static Yt(e,t){return new eT(e,t.uid||"")}getOverlay(e,t){return Yv(e).get(zS(this.userId,t)).next(r=>r?XC(this.M,r):null)}saveOverlays(e,t,r){const o=[];return r.forEach((u,d)=>{const m=new QC(t,d);o.push(this.Xt(e,m))}),he.waitFor(o)}removeOverlaysForBatchId(e,t,r){const o=new Set;t.forEach(d=>o.add(os(d.getCollectionPath())));const u=[];return o.forEach(d=>{const m=IDBKeyRange.bound([this.userId,d,r],[this.userId,d,r+1],!1,!0);u.push(Yv(e).Qt("collectionPathOverlayIndex",m))}),he.waitFor(u)}getOverlaysForCollection(e,t,r){const o=I(),u=os(t),d=IDBKeyRange.bound([this.userId,u,r],[this.userId,u,Number.POSITIVE_INFINITY],!0);return Yv(e).qt("collectionPathOverlayIndex",d).next(m=>{for(const w of m){const C=XC(this.M,w);o.set(C.getKey(),C)}return o})}getOverlaysForCollectionGroup(e,t,r,o){const u=I();let d;const m=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return Yv(e).Wt({index:"collectionGroupOverlayIndex",range:m},(w,C,x)=>{const R=XC(this.M,C);u.size()<o||R.largestBatchId===d?(u.set(R.getKey(),R),d=R.largestBatchId):x.done()}).next(()=>u)}Xt(e,t){return Yv(e).put(function(r,o,u){const[d,m,w]=zS(o,u.mutation.key);return{userId:o,collectionPath:m,documentId:w,collectionGroup:u.mutation.key.getCollectionGroup(),largestBatchId:u.largestBatchId,overlayMutation:Wv(r.Jt,u.mutation)}}(this.M,this.userId,t))}}function Yv(n){return pi(n,"documentOverlays")}class hp{constructor(){}Zt(e,t){this.te(e,t),t.ee()}te(e,t){if("nullValue"in e)this.ne(t,5);else if("booleanValue"in e)this.ne(t,10),t.se(e.booleanValue?1:0);else if("integerValue"in e)this.ne(t,15),t.se(Yn(e.integerValue));else if("doubleValue"in e){const r=Yn(e.doubleValue);isNaN(r)?this.ne(t,13):(this.ne(t,15),wm(r)?t.se(0):t.se(r))}else if("timestampValue"in e){const r=e.timestampValue;this.ne(t,20),"string"==typeof r?t.ie(r):(t.ie(`${r.seconds||""}`),t.se(r.nanos||0))}else if("stringValue"in e)this.re(e.stringValue,t),this.oe(t);else if("bytesValue"in e)this.ne(t,30),t.ue(Fd(e.bytesValue)),this.oe(t);else if("referenceValue"in e)this.ae(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.ne(t,45),t.se(r.latitude||0),t.se(r.longitude||0)}else"mapValue"in e?uI(e)?this.ne(t,Number.MAX_SAFE_INTEGER):(this.ce(e.mapValue,t),this.oe(t)):"arrayValue"in e?(this.he(e.arrayValue,t),this.oe(t)):et()}re(e,t){this.ne(t,25),this.le(e,t)}le(e,t){t.ie(e)}ce(e,t){const r=e.fields||{};this.ne(t,55);for(const o of Object.keys(r))this.re(o,t),this.te(r[o],t)}he(e,t){const r=e.values||[];this.ne(t,50);for(const o of r)this.te(o,t)}ae(e,t){this.ne(t,37),Ue.fromName(e).path.forEach(r=>{this.ne(t,60),this.le(r,t)})}ne(e,t){e.se(t)}oe(e){e.se(2)}}function vR(n){if(0===n)return 8;let e=0;return n>>4==0&&(e+=4,n<<=4),n>>6==0&&(e+=2,n<<=2),n>>7==0&&(e+=1),e}function KS(n){const e=64-function(t){let r=0;for(let o=0;o<8;++o){const u=vR(255&t[o]);if(r+=u,8!==u)break}return r}(n);return Math.ceil(e/8)}hp.fe=new hp;class ER{constructor(){this.buffer=new Uint8Array(1024),this.position=0}de(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this._e(r.value),r=t.next();this.we()}me(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.ge(r.value),r=t.next();this.ye()}pe(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this._e(r);else if(r<2048)this._e(960|r>>>6),this._e(128|63&r);else if(t<"\ud800"||"\udbff"<t)this._e(480|r>>>12),this._e(128|63&r>>>6),this._e(128|63&r);else{const o=t.codePointAt(0);this._e(240|o>>>18),this._e(128|63&o>>>12),this._e(128|63&o>>>6),this._e(128|63&o)}}this.we()}Ie(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.ge(r);else if(r<2048)this.ge(960|r>>>6),this.ge(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.ge(480|r>>>12),this.ge(128|63&r>>>6),this.ge(128|63&r);else{const o=t.codePointAt(0);this.ge(240|o>>>18),this.ge(128|63&o>>>12),this.ge(128|63&o>>>6),this.ge(128|63&o)}}this.ye()}Te(e){const t=this.Ee(e),r=KS(t);this.Ae(1+r),this.buffer[this.position++]=255&r;for(let o=t.length-r;o<t.length;++o)this.buffer[this.position++]=255&t[o]}Re(e){const t=this.Ee(e),r=KS(t);this.Ae(1+r),this.buffer[this.position++]=~(255&r);for(let o=t.length-r;o<t.length;++o)this.buffer[this.position++]=~(255&t[o])}Pe(){this.be(255),this.be(255)}Ve(){this.ve(255),this.ve(255)}reset(){this.position=0}seed(e){this.Ae(e.length),this.buffer.set(e,this.position),this.position+=e.length}Se(){return this.buffer.slice(0,this.position)}Ee(e){const t=function(o){const u=new DataView(new ArrayBuffer(8));return u.setFloat64(0,o,!1),new Uint8Array(u.buffer)}(e),r=0!=(128&t[0]);t[0]^=r?255:128;for(let o=1;o<t.length;++o)t[o]^=r?255:0;return t}_e(e){const t=255&e;0===t?(this.be(0),this.be(255)):255===t?(this.be(255),this.be(0)):this.be(t)}ge(e){const t=255&e;0===t?(this.ve(0),this.ve(255)):255===t?(this.ve(255),this.ve(0)):this.ve(e)}we(){this.be(0),this.be(1)}ye(){this.ve(0),this.ve(1)}be(e){this.Ae(1),this.buffer[this.position++]=e}ve(e){this.Ae(1),this.buffer[this.position++]=~e}Ae(e){const t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);const o=new Uint8Array(r);o.set(this.buffer),this.buffer=o}}class wR{constructor(e){this.De=e}ue(e){this.De.de(e)}ie(e){this.De.pe(e)}se(e){this.De.Te(e)}ee(){this.De.Pe()}}class IR{constructor(e){this.De=e}ue(e){this.De.me(e)}ie(e){this.De.Ie(e)}se(e){this.De.Re(e)}ee(){this.De.Ve()}}class Qv{constructor(){this.De=new ER,this.Ce=new wR(this.De),this.xe=new IR(this.De)}seed(e){this.De.seed(e)}Ne(e){return 0===e?this.Ce:this.xe}Se(){return this.De.Se()}reset(){this.De.reset()}}class Zd{constructor(e,t,r,o){this.indexId=e,this.documentKey=t,this.arrayValue=r,this.directionalValue=o}ke(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,r=new Uint8Array(t);return r.set(this.directionalValue,0),t!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new Zd(this.indexId,this.documentKey,this.arrayValue,r)}}function fp(n,e){let t=n.indexId-e.indexId;return 0!==t?t:(t=YS(n.arrayValue,e.arrayValue),0!==t?t:(t=YS(n.directionalValue,e.directionalValue),0!==t?t:Ue.comparator(n.documentKey,e.documentKey)))}function YS(n,e){for(let t=0;t<n.length&&t<e.length;++t){const r=n[t]-e[t];if(0!==r)return r}return n.length-e.length}class bR{constructor(e){this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Me=e.orderBy,this.Oe=[];for(const t of e.filters){const r=t;r.S()?this.Fe=r:this.Oe.push(r)}}$e(e){const t=Rv(e);if(void 0!==t&&!this.Be(t))return!1;const r=Su(e);let o=0,u=0;for(;o<r.length&&this.Be(r[o]);++o);if(o===r.length)return!0;if(void 0!==this.Fe){const d=r[o];if(!this.Le(this.Fe,d)||!this.Ue(this.Me[u++],d))return!1;++o}for(;o<r.length;++o){const d=r[o];if(u>=this.Me.length||!this.Ue(this.Me[u++],d))return!1}return!0}Be(e){for(const t of this.Oe)if(this.Le(t,e))return!0;return!1}Le(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}Ue(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}class DR{constructor(){this.qe=new tT}addToCollectionParentIndex(e,t){return this.qe.add(t),he.resolve()}getCollectionParents(e,t){return he.resolve(this.qe.getEntries(t))}addFieldIndex(e,t){return he.resolve()}deleteFieldIndex(e,t){return he.resolve()}getDocumentsMatchingTarget(e,t){return he.resolve(null)}getFieldIndex(e,t){return he.resolve(null)}getFieldIndexes(e,t){return he.resolve([])}getNextCollectionGroupToUpdate(e){return he.resolve(null)}updateCollectionGroup(e,t,r){return he.resolve()}updateIndexEntries(e,t){return he.resolve()}}class tT{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),o=this.index[t]||new s(Jt.comparator),u=!o.has(r);return this.index[t]=o.add(r),u}has(e){const t=e.lastSegment(),r=e.popLast(),o=this.index[t];return o&&o.has(r)}getEntries(e){return(this.index[e]||new s(Jt.comparator)).toArray()}}const jm=new Uint8Array(0);class CR{constructor(e,t){this.user=e,this.databaseId=t,this.Ke=new tT,this.Ge=new nc(r=>jd(r),(r,o)=>Xf(r,o)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.Ke.has(t)){const r=t.lastSegment(),o=t.popLast();e.addOnCommittedListener(()=>{this.Ke.add(t)});const u={collectionId:r,parent:os(o)};return QS(e).put(u)}return he.resolve()}getCollectionParents(e,t){const r=[],o=IDBKeyRange.bound([t,""],[tI(t),""],!1,!0);return QS(e).qt(o).next(u=>{for(const d of u){if(d.collectionId!==t)break;r.push(Pu(d.parent))}return r})}addFieldIndex(e,t){const r=HI(e),o={indexId:(u=t).indexId,collectionGroup:u.collectionGroup,fields:u.fields.map(d=>[d.fieldPath.canonicalString(),d.kind])};var u;return delete o.indexId,r.add(o).next()}deleteFieldIndex(e,t){const r=HI(e),o=$I(e),u=Jv(e);return r.delete(t.indexId).next(()=>o.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>u.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,t){const r=Jv(e);let o=!0;const u=new Map;return he.forEach(this.Qe(t),d=>this.getFieldIndex(e,d).next(m=>{o&&(o=!!m),u.set(d,m)})).next(()=>{if(o){let d=N();const m=[];return he.forEach(u,(w,C)=>{var x;Oe("IndexedDbIndexManager",`Using index ${x=w,`id=${x.indexId}|cg=${x.collectionGroup}|f=${x.fields.map(qt=>`${qt.fieldPath}:${qt.kind}`).join(",")}`} to execute ${jd(t)}`);const R=function(qt,St){const Zt=Rv(St);if(void 0===Zt)return null;for(const cn of ep(qt,Zt.fieldPath))switch(cn.op){case"array-contains-any":return cn.value.arrayValue.values||[];case"array-contains":return[cn.value]}return null}(C,w),H=function(qt,St){const Zt=new Map;for(const cn of Su(St))for(const Vi of ep(qt,cn.fieldPath))switch(Vi.op){case"==":case"in":Zt.set(cn.fieldPath.canonicalString(),Vi.value);break;case"not-in":case"!=":return Zt.set(cn.fieldPath.canonicalString(),Vi.value),Array.from(Zt.values())}return null}(C,w),G=function(qt,St){const Zt=[];let cn=!0;for(const Vi of Su(St)){const Cp=0===Vi.kind?pI(qt,Vi.fieldPath,qt.startAt):gI(qt,Vi.fieldPath,qt.startAt);if(!Cp.value)return null;Zt.push(Cp.value),cn&&(cn=Cp.inclusive)}return new Mu(Zt,cn)}(C,w),X=function(qt,St){const Zt=[];let cn=!0;for(const Vi of Su(St)){const Cp=0===Vi.kind?gI(qt,Vi.fieldPath,qt.endAt):pI(qt,Vi.fieldPath,qt.endAt);if(!Cp.value)return null;Zt.push(Cp.value),cn&&(cn=Cp.inclusive)}return new Mu(Zt,cn)}(C,w),Ne=this.je(w,C,G),tt=this.je(w,C,X),_t=this.We(w,C,H),kt=this.ze(w.indexId,R,Ne,!!G&&G.inclusive,tt,!!X&&X.inclusive,_t);return he.forEach(kt,qt=>r.Gt(qt,t.limit).next(St=>{St.forEach(Zt=>{const cn=Ue.fromSegments(Zt.documentKey);d.has(cn)||(d=d.add(cn),m.push(cn))})}))}).next(()=>m)}return he.resolve(null)})}Qe(e){let t=this.Ge.get(e);return t||(t=[e],this.Ge.set(e,t),t)}ze(e,t,r,o,u,d,m){const w=(null!=t?t.length:1)*Math.max(null!=r?r.length:1,null!=u?u.length:1),C=w/(null!=t?t.length:1),x=[];for(let R=0;R<w;++R){const H=t?this.He(t[R/C]):jm,G=r?this.Je(e,H,r[R%C],o):this.Ye(e),X=u?this.Xe(e,H,u[R%C],d):this.Ye(e+1);x.push(...this.createRange(G,X,m.map(Ne=>this.Je(e,H,Ne,!0))))}return x}Je(e,t,r,o){const u=new Zd(e,Ue.empty(),t,r);return o?u:u.ke()}Xe(e,t,r,o){const u=new Zd(e,Ue.empty(),t,r);return o?u.ke():u}Ye(e){return new Zd(e,Ue.empty(),jm,jm)}getFieldIndex(e,t){const r=new bR(t),o=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,o).next(u=>{const d=u.filter(m=>r.$e(m));return d.sort((m,w)=>w.fields.length-m.fields.length),d.length>0?d[0]:null})}Ze(e,t){const r=new Qv;for(const o of Su(e)){const u=t.data.field(o.fieldPath);if(null==u)return null;const d=r.Ne(o.kind);hp.fe.Zt(u,d)}return r.Se()}He(e){const t=new Qv;return hp.fe.Zt(e,t.Ne(0)),t.Se()}tn(e,t){const r=new Qv;return hp.fe.Zt(Bd(this.databaseId,t),r.Ne(function(o){const u=Su(o);return 0===u.length?0:u[u.length-1].kind}(e))),r.Se()}We(e,t,r){if(null===r)return[];let o=[];o.push(new Qv);let u=0;for(const d of Su(e)){const m=r[u++];for(const w of o)if(this.en(t,d.fieldPath)&&Yf(m))o=this.nn(o,d,m);else{const C=w.Ne(d.kind);hp.fe.Zt(m,C)}}return this.sn(o)}je(e,t,r){return null==r?null:this.We(e,t,r.position)}sn(e){const t=[];for(let r=0;r<e.length;++r)t[r]=e[r].Se();return t}nn(e,t,r){const o=[...e],u=[];for(const d of r.arrayValue.values||[])for(const m of o){const w=new Qv;w.seed(m.Se()),hp.fe.Zt(d,w.Ne(t.kind)),u.push(w)}return u}en(e,t){return!!e.filters.find(r=>r instanceof fi&&r.field.isEqual(t)&&("in"===r.op||"not-in"===r.op))}getFieldIndexes(e,t){const r=HI(e),o=$I(e);return(t?r.qt("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.qt()).next(u=>{const d=[];return he.forEach(u,m=>o.get([m.indexId,this.uid]).next(w=>{d.push(function(C,x){const R=x?new Jf(x.sequenceNumber,new Si(dp(x.readTime),new Ue(Pu(x.documentKey)),x.largestBatchId)):Jf.empty(),H=C.fields.map(([G,X])=>new Tm(Yr.fromServerFormat(G),X));return new Qf(C.indexId,C.collectionGroup,H,R)}(m,w))})).next(()=>d)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((r,o)=>{const u=r.indexState.sequenceNumber-o.indexState.sequenceNumber;return 0!==u?u:Rt(r.collectionGroup,o.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,r){const o=HI(e),u=$I(e);return this.rn(e).next(d=>o.qt("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(m=>he.forEach(m,w=>{return u.put({indexId:w.indexId,uid:this.user.uid||"",sequenceNumber:d,readTime:cp((H=r).readTime),documentKey:os(H.documentKey.path),largestBatchId:H.largestBatchId});var H})))}updateIndexEntries(e,t){const r=new Map;return he.forEach(t,(o,u)=>{const d=r.get(o.collectionGroup);return(d?he.resolve(d):this.getFieldIndexes(e,o.collectionGroup)).next(m=>(r.set(o.collectionGroup,m),he.forEach(m,w=>this.on(e,o,w).next(C=>{const x=this.un(u,w);return C.isEqual(x)?he.resolve():this.an(e,u,w,C,x)}))))})}cn(e,t,r,o){return Jv(e).put({indexId:o.indexId,uid:this.uid,arrayValue:o.arrayValue,directionalValue:o.directionalValue,orderedDocumentKey:this.tn(r,t.key),documentKey:t.key.path.toArray()})}hn(e,t,r,o){return Jv(e).delete([o.indexId,this.uid,o.arrayValue,o.directionalValue,this.tn(r,t.key),t.key.path.toArray()])}on(e,t,r){const o=Jv(e);let u=new s(fp);return o.Wt({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.tn(r,t)])},(d,m)=>{u=u.add(new Zd(r.indexId,t,m.arrayValue,m.directionalValue))}).next(()=>u)}un(e,t){let r=new s(fp);const o=this.Ze(t,e);if(null==o)return r;const u=Rv(t);if(null!=u){const d=e.data.field(u.fieldPath);if(Yf(d))for(const m of d.arrayValue.values||[])r=r.add(new Zd(t.indexId,e.key,this.He(m),o))}else r=r.add(new Zd(t.indexId,e.key,jm,o));return r}an(e,t,r,o,u){Oe("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const d=[];return function(m,w,C,x,R){const H=m.getIterator(),G=w.getIterator();let X=l(H),Ne=l(G);for(;X||Ne;){let tt=!1,_t=!1;if(X&&Ne){const kt=C(X,Ne);kt<0?_t=!0:kt>0&&(tt=!0)}else null!=X?_t=!0:tt=!0;tt?(x(Ne),Ne=l(G)):_t?(R(X),X=l(H)):(X=l(H),Ne=l(G))}}(o,u,fp,m=>{d.push(this.cn(e,t,r,m))},m=>{d.push(this.hn(e,t,r,m))}),he.waitFor(d)}rn(e){let t=1;return $I(e).Wt({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,o,u)=>{u.done(),t=o.sequenceNumber+1}).next(()=>t)}createRange(e,t,r){r=r.sort((d,m)=>fp(d,m)).filter((d,m,w)=>!m||0!==fp(d,w[m-1]));const o=[];o.push(e);for(const d of r){const m=fp(d,e),w=fp(d,t);if(0===m)o[0]=e.ke();else if(m>0&&w<0)o.push(d),o.push(d.ke());else if(w>0)break}o.push(t);const u=[];for(let d=0;d<o.length;d+=2)u.push(IDBKeyRange.bound([o[d].indexId,this.uid,o[d].arrayValue,o[d].directionalValue,jm,[]],[o[d+1].indexId,this.uid,o[d+1].arrayValue,o[d+1].directionalValue,jm,[]]));return u}}function QS(n){return pi(n,"collectionParents")}function Jv(n){return pi(n,"indexEntries")}function HI(n){return pi(n,"indexConfiguration")}function $I(n){return pi(n,"indexState")}const JS={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class Bs{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new Bs(e,Bs.DEFAULT_COLLECTION_PERCENTILE,Bs.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function XS(n,e,t){const r=n.store("mutations"),o=n.store("documentMutations"),u=[],d=IDBKeyRange.only(t.batchId);let m=0;const w=r.Wt({range:d},(x,R,H)=>(m++,H.delete()));u.push(w.next(()=>{It(1===m)}));const C=[];for(const x of t.mutations){const R=FS(e,x.key.path,t.batchId);u.push(o.delete(R)),C.push(x.key)}return he.waitFor(u).next(()=>C)}function GI(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw et();e=n.noDocument}return JSON.stringify(e).length}Bs.DEFAULT_COLLECTION_PERCENTILE=10,Bs.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Bs.DEFAULT=new Bs(41943040,Bs.DEFAULT_COLLECTION_PERCENTILE,Bs.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Bs.DISABLED=new Bs(-1,0,0);class nT{constructor(e,t,r,o){this.userId=e,this.M=t,this.indexManager=r,this.referenceDelegate=o,this.ln={}}static Yt(e,t,r,o){It(""!==e.uid);const u=e.isAuthenticated()?e.uid:"";return new nT(u,t,r,o)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Kd(e).Wt({index:"userMutationsIndex",range:r},(o,u,d)=>{t=!1,d.done()}).next(()=>t)}addMutationBatch(e,t,r,o){const u=Hm(e),d=Kd(e);return d.add({}).next(m=>{It("number"==typeof m);const w=new KC(m,t,r,o),C=function(H,G,X){const Ne=X.baseMutations.map(_t=>Wv(H.Jt,_t)),tt=X.mutations.map(_t=>Wv(H.Jt,_t));return{userId:G,batchId:X.batchId,localWriteTimeMs:X.localWriteTime.toMillis(),baseMutations:Ne,mutations:tt}}(this.M,this.userId,w),x=[];let R=new s((H,G)=>Rt(H.canonicalString(),G.canonicalString()));for(const H of o){const G=FS(this.userId,H.key.path,m);R=R.add(H.key.path.popLast()),x.push(d.put(C)),x.push(u.put(G,Jx))}return R.forEach(H=>{x.push(this.indexManager.addToCollectionParentIndex(e,H))}),e.addOnCommittedListener(()=>{this.ln[m]=w.keys()}),he.waitFor(x).next(()=>w)})}lookupMutationBatch(e,t){return Kd(e).get(t).next(r=>r?(It(r.userId===this.userId),Bm(this.M,r)):null)}fn(e,t){return this.ln[t]?he.resolve(this.ln[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){const o=r.keys();return this.ln[t]=o,o}return null})}getNextMutationBatchAfterBatchId(e,t){const r=t+1,o=IDBKeyRange.lowerBound([this.userId,r]);let u=null;return Kd(e).Wt({index:"userMutationsIndex",range:o},(d,m,w)=>{m.userId===this.userId&&(It(m.batchId>=r),u=Bm(this.M,m)),w.done()}).next(()=>u)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return Kd(e).Wt({index:"userMutationsIndex",range:t,reverse:!0},(o,u,d)=>{r=u.batchId,d.done()}).next(()=>r)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Kd(e).qt("userMutationsIndex",t).next(r=>r.map(o=>Bm(this.M,o)))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=UI(this.userId,t.path),o=IDBKeyRange.lowerBound(r),u=[];return Hm(e).Wt({range:o},(d,m,w)=>{const[C,x,R]=d,H=Pu(x);if(C===this.userId&&t.path.isEqual(H))return Kd(e).get(R).next(G=>{if(!G)throw et();It(G.userId===this.userId),u.push(Bm(this.M,G))});w.done()}).next(()=>u)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new s(Rt);const o=[];return t.forEach(u=>{const d=UI(this.userId,u.path),m=IDBKeyRange.lowerBound(d),w=Hm(e).Wt({range:m},(C,x,R)=>{const[H,G,X]=C,Ne=Pu(G);H===this.userId&&u.path.isEqual(Ne)?r=r.add(X):R.done()});o.push(w)}),he.waitFor(o).next(()=>this.dn(e,r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,o=r.length+1,u=UI(this.userId,r),d=IDBKeyRange.lowerBound(u);let m=new s(Rt);return Hm(e).Wt({range:d},(w,C,x)=>{const[R,H,G]=w,X=Pu(H);R===this.userId&&r.isPrefixOf(X)?X.length===o&&(m=m.add(G)):x.done()}).next(()=>this.dn(e,m))}dn(e,t){const r=[],o=[];return t.forEach(u=>{o.push(Kd(e).get(u).next(d=>{if(null===d)throw et();It(d.userId===this.userId),r.push(Bm(this.M,d))}))}),he.waitFor(o).next(()=>r)}removeMutationBatch(e,t){return XS(e.Ht,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this._n(t.batchId)}),he.forEach(r,o=>this.referenceDelegate.markPotentiallyOrphaned(e,o))))}_n(e){delete this.ln[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return he.resolve();const r=IDBKeyRange.lowerBound([this.userId]),o=[];return Hm(e).Wt({range:r},(u,d,m)=>{if(u[0]===this.userId){const w=Pu(u[1]);o.push(w)}else m.done()}).next(()=>{It(0===o.length)})})}containsKey(e,t){return eM(e,this.userId,t)}wn(e){return tM(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function eM(n,e,t){const r=UI(e,t.path),o=r[1],u=IDBKeyRange.lowerBound(r);let d=!1;return Hm(n).Wt({range:u,jt:!0},(m,w,C)=>{const[x,R,H]=m;x===e&&R===o&&(d=!0),C.done()}).next(()=>d)}function Kd(n){return pi(n,"mutations")}function Hm(n){return pi(n,"documentMutations")}function tM(n){return pi(n,"mutationQueues")}class pp{constructor(e){this.mn=e}next(){return this.mn+=2,this.mn}static gn(){return new pp(0)}static yn(){return new pp(-1)}}class TR{constructor(e,t){this.referenceDelegate=e,this.M=t}allocateTargetId(e){return this.pn(e).next(t=>{const r=new pp(t.highestTargetId);return t.highestTargetId=r.next(),this.In(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.pn(e).next(t=>yt.fromTimestamp(new Hn(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.pn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.pn(e).next(o=>(o.highestListenSequenceNumber=t,r&&(o.lastRemoteSnapshotVersion=r.toTimestamp()),t>o.highestListenSequenceNumber&&(o.highestListenSequenceNumber=t),this.In(e,o)))}addTargetData(e,t){return this.Tn(e,t).next(()=>this.pn(e).next(r=>(r.targetCount+=1,this.En(t,r),this.In(e,r))))}updateTargetData(e,t){return this.Tn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>$m(e).delete(t.targetId)).next(()=>this.pn(e)).next(r=>(It(r.targetCount>0),r.targetCount-=1,this.In(e,r)))}removeTargets(e,t,r){let o=0;const u=[];return $m(e).Wt((d,m)=>{const w=Kv(m);w.sequenceNumber<=t&&null===r.get(w.targetId)&&(o++,u.push(this.removeTargetData(e,w)))}).next(()=>he.waitFor(u)).next(()=>o)}forEachTarget(e,t){return $m(e).Wt((r,o)=>{const u=Kv(o);t(u)})}pn(e){return nM(e).get("targetGlobalKey").next(t=>(It(null!==t),t))}In(e,t){return nM(e).put("targetGlobalKey",t)}Tn(e,t){return $m(e).put(qS(this.M,t))}En(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.pn(e).next(t=>t.targetCount)}getTargetData(e,t){const r=jd(t),o=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let u=null;return $m(e).Wt({range:o,index:"queryTargetsIndex"},(d,m,w)=>{const C=Kv(m);Xf(t,C.target)&&(u=C,w.done())}).next(()=>u)}addMatchingKeys(e,t,r){const o=[],u=Yd(e);return t.forEach(d=>{const m=os(d.path);o.push(u.put({targetId:r,path:m})),o.push(this.referenceDelegate.addReference(e,r,d))}),he.waitFor(o)}removeMatchingKeys(e,t,r){const o=Yd(e);return he.forEach(t,u=>{const d=os(u.path);return he.waitFor([o.delete([r,d]),this.referenceDelegate.removeReference(e,r,u)])})}removeMatchingKeysForTargetId(e,t){const r=Yd(e),o=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(o)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),o=Yd(e);let u=N();return o.Wt({range:r,jt:!0},(d,m,w)=>{const C=Pu(d[1]),x=new Ue(C);u=u.add(x)}).next(()=>u)}containsKey(e,t){const r=os(t.path),o=IDBKeyRange.bound([r],[tI(r)],!1,!0);let u=0;return Yd(e).Wt({index:"documentTargetsIndex",jt:!0,range:o},([d,m],w,C)=>{0!==d&&(u++,C.done())}).next(()=>u>0)}Et(e,t){return $m(e).get(t).next(r=>r?Kv(r):null)}}function $m(n){return pi(n,"targets")}function nM(n){return pi(n,"targetGlobal")}function Yd(n){return pi(n,"targetDocuments")}function gp(n){return rT.apply(this,arguments)}function rT(){return rT=(0,ye.Z)(function*(n){if(n.code!==ae.FAILED_PRECONDITION||n.message!==US)throw n;Oe("LocalStore","Unexpectedly lost primary lease")}),rT.apply(this,arguments)}function rM([n,e],[t,r]){const o=Rt(n,t);return 0===o?Rt(e,r):o}class AR{constructor(e){this.An=e,this.buffer=new s(rM),this.Rn=0}Pn(){return++this.Rn}bn(e){const t=[e,this.Pn()];if(this.buffer.size<this.An)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();rM(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class SR{constructor(e,t){this.garbageCollector=e,this.asyncQueue=t,this.Vn=!1,this.vn=null}start(e){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Sn(e)}stop(){this.vn&&(this.vn.cancel(),this.vn=null)}get started(){return null!==this.vn}Sn(e){var t=this;const r=this.Vn?3e5:6e4;Oe("LruGarbageCollector",`Garbage collection scheduled in ${r}ms`),this.vn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",r,(0,ye.Z)(function*(){t.vn=null,t.Vn=!0;try{yield e.collectGarbage(t.garbageCollector)}catch(o){up(o)?Oe("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",o):yield gp(o)}yield t.Sn(e)}))}}class MR{constructor(e,t){this.Dn=e,this.params=t}calculateTargetCount(e,t){return this.Dn.Cn(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(0===t)return he.resolve(ki.A);const r=new AR(t);return this.Dn.forEachTarget(e,o=>r.bn(o.sequenceNumber)).next(()=>this.Dn.xn(e,o=>r.bn(o))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.Dn.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.Dn.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(Oe("LruGarbageCollector","Garbage collection skipped; disabled"),he.resolve(JS)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(Oe("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),JS):this.Nn(e,t))}getCacheSize(e){return this.Dn.getCacheSize(e)}Nn(e,t){let r,o,u,d,m,w,C;const x=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(R=>(R>this.params.maximumSequenceNumbersToCollect?(Oe("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${R}`),o=this.params.maximumSequenceNumbersToCollect):o=R,d=Date.now(),this.nthSequenceNumber(e,o))).next(R=>(r=R,m=Date.now(),this.removeTargets(e,r,t))).next(R=>(u=R,w=Date.now(),this.removeOrphanedDocuments(e,r))).next(R=>(C=Date.now(),bv()<=Ho.in.DEBUG&&Oe("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${d-x}ms\n\tDetermined least recently used ${o} in `+(m-d)+`ms\n\tRemoved ${u} targets in `+(w-m)+`ms\n\tRemoved ${R} documents in `+(C-w)+`ms\nTotal Duration: ${C-x}ms`),he.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:u,documentsRemoved:R})))}}class xR{constructor(e,t){this.db=e,this.garbageCollector=new MR(this,t)}Cn(e){const t=this.kn(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(o=>r+o))}kn(e){let t=0;return this.xn(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}xn(e,t){return this.Mn(e,(r,o)=>t(o))}addReference(e,t,r){return qI(e,r)}removeReference(e,t,r){return qI(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return qI(e,t)}On(e,t){return function(r,o){let u=!1;return tM(r).zt(d=>eM(r,d,o).next(m=>(m&&(u=!0),he.resolve(!m)))).next(()=>u)}(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),o=[];let u=0;return this.Mn(e,(d,m)=>{if(m<=t){const w=this.On(e,d).next(C=>{if(!C)return u++,r.getEntry(e,d).next(()=>(r.removeEntry(d,yt.min()),Yd(e).delete([0,os(d.path)])))});o.push(w)}}).next(()=>he.waitFor(o)).next(()=>r.apply(e)).next(()=>u)}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return qI(e,t)}Mn(e,t){const r=Yd(e);let o,u=ki.A;return r.Wt({index:"documentTargetsIndex"},([d,m],{path:w,sequenceNumber:C})=>{0===d?(u!==ki.A&&t(new Ue(Pu(o)),u),u=C,o=w):u=ki.A}).next(()=>{u!==ki.A&&t(new Ue(Pu(o)),u)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function qI(n,e){return Yd(n).put((r=n.currentSequenceNumber,{targetId:0,path:os(e.path),sequenceNumber:r}));var r}class iM{constructor(){this.changes=new nc(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,En.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return void 0!==r?he.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class RR{constructor(e){this.M=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return mp(e).put(r)}removeEntry(e,t,r){return mp(e).delete(function(o,u){const d=o.path.toArray();return[d.slice(0,d.length-2),d[d.length-2],jI(u),d[d.length-1]]}(t,r))}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.Fn(e,r)))}getEntry(e,t){let r=En.newInvalidDocument(t);return mp(e).Wt({index:"documentKeyIndex",range:IDBKeyRange.only(Xv(t))},(o,u)=>{r=this.$n(t,u)}).next(()=>r)}Bn(e,t){let r={size:0,document:En.newInvalidDocument(t)};return mp(e).Wt({index:"documentKeyIndex",range:IDBKeyRange.only(Xv(t))},(o,u)=>{r={document:this.$n(t,u),size:GI(u)}}).next(()=>r)}getEntries(e,t){let r=p();return this.Ln(e,t,(o,u)=>{const d=this.$n(o,u);r=r.insert(o,d)}).next(()=>r)}Un(e,t){let r=p(),o=new ar(Ue.comparator);return this.Ln(e,t,(u,d)=>{const m=this.$n(u,d);r=r.insert(u,m),o=o.insert(u,GI(d))}).next(()=>({documents:r,qn:o}))}Ln(e,t,r){if(t.isEmpty())return he.resolve();let o=new s(aM);t.forEach(w=>o=o.add(w));const u=IDBKeyRange.bound(Xv(o.first()),Xv(o.last())),d=o.getIterator();let m=d.getNext();return mp(e).Wt({index:"documentKeyIndex",range:u},(w,C,x)=>{const R=Ue.fromSegments([...C.prefixPath,C.collectionGroup,C.documentId]);for(;m&&aM(m,R)<0;)r(m,null),m=d.getNext();m&&m.isEqual(R)&&(r(m,C),m=d.hasNext()?d.getNext():null),m?x.Ut(Xv(m)):x.done()}).next(()=>{for(;m;)r(m,null),m=d.hasNext()?d.getNext():null})}getAllFromCollection(e,t,r){const o=[t.popLast().toArray(),t.lastSegment(),jI(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],u=[t.popLast().toArray(),t.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return mp(e).qt(IDBKeyRange.bound(o,u,!0)).next(d=>{let m=p();for(const w of d){const C=this.$n(Ue.fromSegments(w.prefixPath.concat(w.collectionGroup,w.documentId)),w);m=m.insert(C.key,C)}return m})}getAllFromCollectionGroup(e,t,r,o){let u=p();const d=oM(t,r),m=oM(t,Si.max());return mp(e).Wt({index:"collectionGroupIndex",range:IDBKeyRange.bound(d,m,!0)},(w,C,x)=>{const R=this.$n(Ue.fromSegments(C.prefixPath.concat(C.collectionGroup,C.documentId)),C);u=u.insert(R.key,R),u.size===o&&x.done()}).next(()=>u)}newChangeBuffer(e){return new OR(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return sM(e).get("remoteDocumentGlobalKey").next(t=>(It(!!t),t))}Fn(e,t){return sM(e).put("remoteDocumentGlobalKey",t)}$n(e,t){if(t){const r=function yR(n,e){let t;if(e.document)t=SS(n.Jt,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=Ue.fromSegments(e.noDocument.path),o=dp(e.noDocument.readTime);t=En.newNoDocument(r,o),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return et();{const r=Ue.fromSegments(e.unknownDocument.path),o=dp(e.unknownDocument.version);t=En.newUnknownDocument(r,o)}}return e.readTime&&t.setReadTime(function(r){const o=new Hn(r[0],r[1]);return yt.fromTimestamp(o)}(e.readTime)),t}(this.M,t);if(!r.isNoDocument()||!r.version.isEqual(yt.min()))return r}return En.newInvalidDocument(e)}}class OR extends iM{constructor(e,t){super(),this.Kn=e,this.trackRemovals=t,this.Gn=new nc(r=>r.toString(),(r,o)=>r.isEqual(o))}applyChanges(e){const t=[];let r=0,o=new s((u,d)=>Rt(u.canonicalString(),d.canonicalString()));return this.changes.forEach((u,d)=>{const m=this.Gn.get(u);if(t.push(this.Kn.removeEntry(e,u,m.readTime)),d.isValidDocument()){const w=GS(this.Kn.M,d);o=o.add(u.path.popLast()),r+=GI(w)-m.size,t.push(this.Kn.addEntry(e,u,w))}else if(r-=m.size,this.trackRemovals){const w=GS(this.Kn.M,d.convertToNoDocument(yt.min()));t.push(this.Kn.addEntry(e,u,w))}}),o.forEach(u=>{t.push(this.Kn.indexManager.addToCollectionParentIndex(e,u))}),t.push(this.Kn.updateMetadata(e,r)),he.waitFor(t)}getFromCache(e,t){return this.Kn.Bn(e,t).next(r=>(this.Gn.set(t,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,t){return this.Kn.Un(e,t).next(({documents:r,qn:o})=>(o.forEach((u,d)=>{this.Gn.set(u,{size:d,readTime:r.get(u).readTime})}),r))}}function sM(n){return pi(n,"remoteDocumentGlobal")}function mp(n){return pi(n,"remoteDocumentsV14")}function Xv(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function oM(n,e){const t=e.documentKey.path.toArray();return[n,jI(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function aM(n,e){const t=n.path.toArray(),r=e.path.toArray();let o=0;for(let u=0;u<t.length-2&&u<r.length-2;++u)if(o=Rt(t[u],r[u]),o)return o;return o=Rt(t.length,r.length),o||(o=Rt(t[t.length-2],r[r.length-2]),o||Rt(t[t.length-1],r[r.length-1]))}class NR{constructor(e){this.M=e}kt(e,t,r,o){const u=new BI("createOrUpgrade",t);var m;r<1&&o>=1&&(e.createObjectStore("owner"),(m=e).createObjectStore("mutationQueues",{keyPath:"userId"}),m.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",kS,{unique:!0}),m.createObjectStore("documentMutations"),uM(e),function(m){m.createObjectStore("remoteDocuments")}(e));let d=he.resolve();return r<3&&o>=3&&(0!==r&&(function(m){m.deleteObjectStore("targetDocuments"),m.deleteObjectStore("targets"),m.deleteObjectStore("targetGlobal")}(e),uM(e)),d=d.next(()=>function(m){const w=m.store("targetGlobal"),C={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:yt.min().toTimestamp(),targetCount:0};return w.put("targetGlobalKey",C)}(u))),r<4&&o>=4&&(0!==r&&(d=d.next(()=>function(m,w){return w.store("mutations").qt().next(C=>{m.deleteObjectStore("mutations"),m.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",kS,{unique:!0});const x=w.store("mutations"),R=C.map(H=>x.put(H));return he.waitFor(R)})}(e,u))),d=d.next(()=>{!function(m){m.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),r<5&&o>=5&&(d=d.next(()=>this.Qn(u))),r<6&&o>=6&&(d=d.next(()=>(function(m){m.createObjectStore("remoteDocumentGlobal")}(e),this.jn(u)))),r<7&&o>=7&&(d=d.next(()=>this.Wn(u))),r<8&&o>=8&&(d=d.next(()=>this.zn(e,u))),r<9&&o>=9&&(d=d.next(()=>{!function(m){m.objectStoreNames.contains("remoteDocumentChanges")&&m.deleteObjectStore("remoteDocumentChanges")}(e)})),r<10&&o>=10&&(d=d.next(()=>this.Hn(u))),r<11&&o>=11&&(d=d.next(()=>{(function(m){m.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(m){m.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&o>=12&&(d=d.next(()=>{!function(m){const w=m.createObjectStore("documentOverlays",{keyPath:cR});w.createIndex("collectionPathOverlayIndex",dR,{unique:!1}),w.createIndex("collectionGroupOverlayIndex",hR,{unique:!1})}(e)})),r<13&&o>=13&&(d=d.next(()=>function(m){const w=m.createObjectStore("remoteDocumentsV14",{keyPath:Xx});w.createIndex("documentKeyIndex",eR),w.createIndex("collectionGroupIndex",tR)}(e)).next(()=>this.Jn(e,u)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&o>=14&&(d=d.next(()=>{!function(m){m.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),m.createObjectStore("indexState",{keyPath:oR}).createIndex("sequenceNumberIndex",aR,{unique:!1}),m.createObjectStore("indexEntries",{keyPath:uR}).createIndex("documentKeyIndex",lR,{unique:!1})}(e)})),d}jn(e){let t=0;return e.store("remoteDocuments").Wt((r,o)=>{t+=GI(o)}).next(()=>{const r={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}Qn(e){const t=e.store("mutationQueues"),r=e.store("mutations");return t.qt().next(o=>he.forEach(o,u=>{const d=IDBKeyRange.bound([u.userId,-1],[u.userId,u.lastAcknowledgedBatchId]);return r.qt("userMutationsIndex",d).next(m=>he.forEach(m,w=>{It(w.userId===u.userId);const C=Bm(this.M,w);return XS(e,u.userId,C).next(()=>{})}))}))}Wn(e){const t=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(o=>{const u=[];return r.Wt((d,m)=>{const w=new Jt(d),C=[0,os(w)];u.push(t.get(C).next(x=>x?he.resolve():t.put({targetId:0,path:os(w),sequenceNumber:o.highestListenSequenceNumber})))}).next(()=>he.waitFor(u))})}zn(e,t){e.createObjectStore("collectionParents",{keyPath:sR});const r=t.store("collectionParents"),o=new tT,u=d=>{if(o.add(d)){const m=d.lastSegment(),w=d.popLast();return r.put({collectionId:m,parent:os(w)})}};return t.store("remoteDocuments").Wt({jt:!0},(d,m)=>{const w=new Jt(d);return u(w.popLast())}).next(()=>t.store("documentMutations").Wt({jt:!0},([d,m,w],C)=>{const x=Pu(m);return u(x.popLast())}))}Hn(e){const t=e.store("targets");return t.Wt((r,o)=>{const u=Kv(o),d=qS(this.M,u);return t.put(d)})}Jn(e,t){const r=t.store("remoteDocuments"),o=[];return r.Wt((u,d)=>{const m=t.store("remoteDocumentsV14"),w=(C=d,C.document?new Ue(Jt.fromString(C.document.name).popFirst(5)):C.noDocument?Ue.fromSegments(C.noDocument.path):C.unknownDocument?Ue.fromSegments(C.unknownDocument.path):et()).path.toArray();var C;const x={prefixPath:w.slice(0,w.length-2),collectionGroup:w[w.length-2],documentId:w[w.length-1],readTime:d.readTime||[0,0],unknownDocument:d.unknownDocument,noDocument:d.noDocument,document:d.document,hasCommittedMutations:!!d.hasCommittedMutations};o.push(m.put(x))}).next(()=>he.waitFor(o))}}function uM(n){n.createObjectStore("targetDocuments",{keyPath:rR}).createIndex("documentTargetsIndex",iR,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",nR,{unique:!0}),n.createObjectStore("targetGlobal")}const iT="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class sT{constructor(e,t,r,o,u,d,m,w,C,x,R=13){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.Yn=u,this.window=d,this.document=m,this.Xn=C,this.Zn=x,this.ts=R,this.es=null,this.ns=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ss=null,this.inForeground=!1,this.rs=null,this.os=null,this.us=Number.NEGATIVE_INFINITY,this.cs=H=>Promise.resolve(),!sT.vt())throw new Ae(ae.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new xR(this,o),this.hs=t+"main",this.M=new $S(w),this.ls=new Pa(this.hs,this.ts,new NR(this.M)),this.fs=new TR(this.referenceDelegate,this.M),this.ds=new RR(this.M),this._s=new _R,this.window&&this.window.localStorage?this.ws=this.window.localStorage:(this.ws=null,!1===x&&Kn("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.gs().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Ae(ae.FAILED_PRECONDITION,iT);return this.ys(),this.ps(),this.Is(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.fs.getHighestSequenceNumber(e))}).then(e=>{this.es=new ki(e,this.Xn)}).then(()=>{this.ns=!0}).catch(e=>(this.ls&&this.ls.close(),Promise.reject(e)))}Ts(e){var t=this;return this.cs=function(){var r=(0,ye.Z)(function*(o){if(t.started)return e(o)});return function(o){return r.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.ls.Ot(function(){var t=(0,ye.Z)(function*(r){null===r.newVersion&&(yield e())});return function(r){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.Yn.enqueueAndForget((0,ye.Z)(function*(){t.started&&(yield t.gs())})))}gs(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>zI(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.Es(e).next(t=>{t||(this.isPrimary=!1,this.Yn.enqueueRetryable(()=>this.cs(!1)))})}).next(()=>this.As(e)).next(t=>this.isPrimary&&!t?this.Rs(e).next(()=>!1):!!t&&this.Ps(e).next(()=>!0))).catch(e=>{if(up(e))return Oe("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return Oe("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.Yn.enqueueRetryable(()=>this.cs(e)),this.isPrimary=e})}Es(e){return e0(e).get("owner").next(t=>he.resolve(this.bs(t)))}Vs(e){return zI(e).delete(this.clientId)}vs(){var e=this;return(0,ye.Z)(function*(){if(e.isPrimary&&!e.Ss(e.us,18e5)){e.us=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",r=>{const o=pi(r,"clientMetadata");return o.qt().next(u=>{const d=e.Ds(u,18e5),m=u.filter(w=>-1===d.indexOf(w));return he.forEach(m,w=>o.delete(w.clientId)).next(()=>m)})}).catch(()=>[]);if(e.ws)for(const r of t)e.ws.removeItem(e.Cs(r.clientId))}})()}Is(){this.os=this.Yn.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.gs().then(()=>this.vs()).then(()=>this.Is()))}bs(e){return!!e&&e.ownerId===this.clientId}As(e){return this.Zn?he.resolve(!0):e0(e).get("owner").next(t=>{if(null!==t&&this.Ss(t.leaseTimestampMs,5e3)&&!this.xs(t.ownerId)){if(this.bs(t)&&this.networkEnabled)return!0;if(!this.bs(t)){if(!t.allowTabSynchronization)throw new Ae(ae.FAILED_PRECONDITION,iT);return!1}}return!(!this.networkEnabled||!this.inForeground)||zI(e).qt().next(r=>void 0===this.Ds(r,5e3).find(o=>{if(this.clientId!==o.clientId){const d=!this.inForeground&&o.inForeground,m=this.networkEnabled===o.networkEnabled;if(!this.networkEnabled&&o.networkEnabled||d&&m)return!0}return!1}))}).next(t=>(this.isPrimary!==t&&Oe("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,ye.Z)(function*(){e.ns=!1,e.Ns(),e.os&&(e.os.cancel(),e.os=null),e.ks(),e.Ms(),yield e.ls.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const r=new HS(t,ki.A);return e.Rs(r).next(()=>e.Vs(r))}),e.ls.close(),e.Os()})()}Ds(e,t){return e.filter(r=>this.Ss(r.updateTimeMs,t)&&!this.xs(r.clientId))}Fs(){return this.runTransaction("getActiveClients","readonly",e=>zI(e).qt().next(t=>this.Ds(t,18e5).map(r=>r.clientId)))}get started(){return this.ns}getMutationQueue(e,t){return nT.Yt(e,this.M,t,this.referenceDelegate)}getTargetCache(){return this.fs}getRemoteDocumentCache(){return this.ds}getIndexManager(e){return new CR(e,this.M.Jt.databaseId)}getDocumentOverlayCache(e){return eT.Yt(this.M,e)}getBundleCache(){return this._s}runTransaction(e,t,r){Oe("IndexedDbPersistence","Starting transaction:",e);const o="readonly"===t?"readonly":"readwrite",u=14===(d=this.ts)?pR:13===d?VS:12===d?fR:11===d?LS:void et();var d;let m;return this.ls.runTransaction(e,o,u,w=>(m=new HS(w,this.es?this.es.next():ki.A),"readwrite-primary"===t?this.Es(m).next(C=>!!C||this.As(m)).next(C=>{if(!C)throw Kn(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Yn.enqueueRetryable(()=>this.cs(!1)),new Ae(ae.FAILED_PRECONDITION,US);return r(m)}).next(C=>this.Ps(m).next(()=>C)):this.$s(m).next(()=>r(m)))).then(w=>(m.raiseOnCommittedEvent(),w))}$s(e){return e0(e).get("owner").next(t=>{if(null!==t&&this.Ss(t.leaseTimestampMs,5e3)&&!this.xs(t.ownerId)&&!this.bs(t)&&!(this.Zn||this.allowTabSynchronization&&t.allowTabSynchronization))throw new Ae(ae.FAILED_PRECONDITION,iT)})}Ps(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return e0(e).put("owner",t)}static vt(){return Pa.vt()}Rs(e){const t=e0(e);return t.get("owner").next(r=>this.bs(r)?(Oe("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):he.resolve())}Ss(e,t){const r=Date.now();return!(e<r-t||e>r&&(Kn(`Detected an update time that is in the future: ${e} > ${r}`),1))}ys(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.rs=()=>{this.Yn.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.gs()))},this.document.addEventListener("visibilitychange",this.rs),this.inForeground="visible"===this.document.visibilityState)}ks(){this.rs&&(this.document.removeEventListener("visibilitychange",this.rs),this.rs=null)}ps(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.ss=()=>{this.Ns(),(0,Pt.G6)()&&navigator.appVersion.match(/Version\/1[45]/)&&this.Yn.enterRestrictedMode(!0),this.Yn.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.ss))}Ms(){this.ss&&(this.window.removeEventListener("pagehide",this.ss),this.ss=null)}xs(e){var t;try{const r=null!==(null===(t=this.ws)||void 0===t?void 0:t.getItem(this.Cs(e)));return Oe("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return Kn("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}Ns(){if(this.ws)try{this.ws.setItem(this.Cs(this.clientId),String(Date.now()))}catch(e){Kn("Failed to set zombie client id.",e)}}Os(){if(this.ws)try{this.ws.removeItem(this.Cs(this.clientId))}catch(e){}}Cs(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function e0(n){return pi(n,"owner")}function zI(n){return pi(n,"clientMetadata")}function oT(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}class PR{constructor(e,t,r){this.ds=e,this.Bs=t,this.indexManager=r}Ls(e,t){return this.Bs.getAllMutationBatchesAffectingDocumentKey(e,t).next(r=>this.Us(e,t,r))}Us(e,t,r){return this.ds.getEntry(e,t).next(o=>{for(const u of r)u.applyToLocalView(o);return o})}qs(e,t){e.forEach((r,o)=>{for(const u of t)u.applyToLocalView(o)})}Ks(e,t){return this.ds.getEntries(e,t).next(r=>this.Gs(e,r).next(()=>r))}Gs(e,t){return this.Bs.getAllMutationBatchesAffectingDocumentKeys(e,t).next(r=>this.qs(t,r))}Qs(e,t,r){return Ue.isDocumentKey((o=t).path)&&null===o.collectionGroup&&0===o.filters.length?this.js(e,t.path):DI(t)?this.Ws(e,t,r):this.zs(e,t,r);var o}js(e,t){return this.Ls(e,new Ue(t)).next(r=>{let o=E();return r.isFoundDocument()&&(o=o.insert(r.key,r)),o})}Ws(e,t,r){const o=t.collectionGroup;let u=E();return this.indexManager.getCollectionParents(e,o).next(d=>he.forEach(d,m=>{const w=(C=t,x=m.child(o),new xu(x,null,C.explicitOrderBy.slice(),C.filters.slice(),C.limit,C.limitType,C.startAt,C.endAt));var C,x;return this.zs(e,w,r).next(C=>{C.forEach((x,R)=>{u=u.insert(x,R)})})}).next(()=>u))}zs(e,t,r){let o;return this.ds.getAllFromCollection(e,t.path,r).next(u=>(o=u,this.Bs.getAllMutationBatchesAffectingQuery(e,t))).next(u=>{for(const d of u)for(const m of d.mutations){const w=m.key;let C=o.get(w);null==C&&(C=En.newInvalidDocument(w),o=o.insert(w,C)),OI(m,C,d.localWriteTime),C.isFoundDocument()||(o=o.remove(w))}}).next(()=>(o.forEach((u,d)=>{Vv(t,d)||(o=o.remove(u))}),o))}}class aT{constructor(e,t,r,o){this.targetId=e,this.fromCache=t,this.Hs=r,this.Js=o}static Ys(e,t){let r=N(),o=N();for(const u of t.docChanges)switch(u.type){case 0:r=r.add(u.doc.key);break;case 1:o=o.add(u.doc.key)}return new aT(e,t.fromCache,r,o)}}class lM{Xs(e){this.Zs=e}Qs(e,t,r,o){return 0===(u=t).filters.length&&null===u.limit&&null==u.startAt&&null==u.endAt&&(0===u.explicitOrderBy.length||1===u.explicitOrderBy.length&&u.explicitOrderBy[0].field.isKeyField())||r.isEqual(yt.min())?this.ti(e,t):this.Zs.Ks(e,o).next(u=>{const d=this.ei(t,u);return(Sm(t)||Mm(t))&&this.ni(t.limitType,d,o,r)?this.ti(e,t):(bv()<=Ho.in.DEBUG&&Oe("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),Lv(t)),this.Zs.Qs(e,t,cI(r,-1)).next(m=>(d.forEach(w=>{m=m.insert(w.key,w)}),m)))});var u}ei(e,t){let r=new s(Ru(e));return t.forEach((o,u)=>{Vv(e,u)&&(r=r.add(u))}),r}ni(e,t,r,o){if(r.size!==t.size)return!0;const u="F"===e?t.last():t.first();return!!u&&(u.hasPendingWrites||u.version.compareTo(o)>0)}ti(e,t){return bv()<=Ho.in.DEBUG&&Oe("QueryEngine","Using full collection scan to execute query:",Lv(t)),this.Zs.Qs(e,t,Si.min())}}class kR{constructor(e,t,r,o){this.persistence=e,this.si=t,this.M=o,this.ii=new ar(Rt),this.ri=new nc(u=>jd(u),Xf),this.oi=new Map,this.ui=e.getRemoteDocumentCache(),this.fs=e.getTargetCache(),this._s=e.getBundleCache(),this.ai(r)}ai(e){this.indexManager=this.persistence.getIndexManager(e),this.Bs=this.persistence.getMutationQueue(e,this.indexManager),this.ci=new PR(this.ui,this.Bs,this.indexManager),this.ui.setIndexManager(this.indexManager),this.si.Xs(this.ci)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.ii))}}function cM(n,e,t,r){return new kR(n,e,t,r)}function dM(n,e){return uT.apply(this,arguments)}function uT(){return uT=(0,ye.Z)(function*(n,e){const t=Ge(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let o;return t.Bs.getAllMutationBatches(r).next(u=>(o=u,t.ai(e),t.Bs.getAllMutationBatches(r))).next(u=>{const d=[],m=[];let w=N();for(const C of o){d.push(C.batchId);for(const x of C.mutations)w=w.add(x.key)}for(const C of u){m.push(C.batchId);for(const x of C.mutations)w=w.add(x.key)}return t.ci.Ks(r,w).next(C=>({hi:C,removedBatchIds:d,addedBatchIds:m}))})})}),uT.apply(this,arguments)}function FR(n,e){const t=Ge(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const o=e.batch.keys(),u=t.ui.newChangeBuffer({trackRemovals:!0});return function(d,m,w,C){const x=w.batch,R=x.keys();let H=he.resolve();return R.forEach(G=>{H=H.next(()=>C.getEntry(m,G)).next(X=>{const Ne=w.docVersions.get(G);It(null!==Ne),X.version.compareTo(Ne)<0&&(x.applyToRemoteDocument(X,w),X.isValidDocument()&&(X.setReadTime(w.commitVersion),C.addEntry(X)))})}),H.next(()=>d.Bs.removeMutationBatch(m,x))}(t,r,e,u).next(()=>u.apply(r)).next(()=>t.Bs.performConsistencyCheck(r)).next(()=>t.ci.Ks(r,o))})}function hM(n){const e=Ge(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.fs.getLastRemoteSnapshotVersion(t))}function LR(n,e){const t=Ge(n),r=e.snapshotVersion;let o=t.ii;return t.persistence.runTransaction("Apply remote event","readwrite-primary",u=>{const d=t.ui.newChangeBuffer({trackRemovals:!0});o=t.ii;const m=[];e.targetChanges.forEach((C,x)=>{const R=o.get(x);if(!R)return;m.push(t.fs.removeMatchingKeys(u,C.removedDocuments,x).next(()=>t.fs.addMatchingKeys(u,C.addedDocuments,x)));let H=R.withSequenceNumber(u.currentSequenceNumber);var G,X,Ne;e.targetMismatches.has(x)?H=H.withResumeToken(xr.EMPTY_BYTE_STRING,yt.min()).withLastLimboFreeSnapshotVersion(yt.min()):C.resumeToken.approximateByteSize()>0&&(H=H.withResumeToken(C.resumeToken,r)),o=o.insert(x,H),X=H,Ne=C,(0===(G=R).resumeToken.approximateByteSize()||X.snapshotVersion.toMicroseconds()-G.snapshotVersion.toMicroseconds()>=3e8||Ne.addedDocuments.size+Ne.modifiedDocuments.size+Ne.removedDocuments.size>0)&&m.push(t.fs.updateTargetData(u,H))});let w=p();if(e.documentUpdates.forEach(C=>{e.resolvedLimboDocuments.has(C)&&m.push(t.persistence.referenceDelegate.updateLimboDocument(u,C))}),m.push(fM(u,d,e.documentUpdates).next(C=>{w=C})),!r.isEqual(yt.min())){const C=t.fs.getLastRemoteSnapshotVersion(u).next(x=>t.fs.setTargetsMetadata(u,u.currentSequenceNumber,r));m.push(C)}return he.waitFor(m).next(()=>d.apply(u)).next(()=>t.ci.Gs(u,w)).next(()=>w)}).then(u=>(t.ii=o,u))}function fM(n,e,t){let r=N();return t.forEach(o=>r=r.add(o)),e.getEntries(n,r).next(o=>{let u=p();return t.forEach((d,m)=>{const w=o.get(d);m.isNoDocument()&&m.version.isEqual(yt.min())?(e.removeEntry(d,m.readTime),u=u.insert(d,m)):!w.isValidDocument()||m.version.compareTo(w.version)>0||0===m.version.compareTo(w.version)&&w.hasPendingWrites?(e.addEntry(m),u=u.insert(d,m)):Oe("LocalStore","Ignoring outdated watch update for ",d,". Current version:",w.version," Watch version:",m.version)}),u})}function VR(n,e){const t=Ge(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(void 0===e&&(e=-1),t.Bs.getNextMutationBatchAfterBatchId(r,e)))}function Gm(n,e){const t=Ge(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let o;return t.fs.getTargetData(r,e).next(u=>u?(o=u,he.resolve(o)):t.fs.allocateTargetId(r).next(d=>(o=new Wd(e,d,0,r.currentSequenceNumber),t.fs.addTargetData(r,o).next(()=>o))))}).then(r=>{const o=t.ii.get(r.targetId);return(null===o||r.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(t.ii=t.ii.insert(r.targetId,r),t.ri.set(e,r.targetId)),r})}function qm(n,e,t){return lT.apply(this,arguments)}function lT(){return lT=(0,ye.Z)(function*(n,e,t){const r=Ge(n),o=r.ii.get(e),u=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",u,d=>r.persistence.referenceDelegate.removeTarget(d,o)))}catch(d){if(!up(d))throw d;Oe("LocalStore",`Failed to update sequence numbers for target ${e}: ${d}`)}r.ii=r.ii.remove(e),r.ri.delete(o.target)}),lT.apply(this,arguments)}function WI(n,e,t){const r=Ge(n);let o=yt.min(),u=N();return r.persistence.runTransaction("Execute query","readonly",d=>function(m,w,C){const x=Ge(m),R=x.ri.get(C);return void 0!==R?he.resolve(x.ii.get(R)):x.fs.getTargetData(w,C)}(r,d,Eo(e)).next(m=>{if(m)return o=m.lastLimboFreeSnapshotVersion,r.fs.getMatchingKeysForTargetId(d,m.targetId).next(w=>{u=w})}).next(()=>r.si.Qs(d,e,t?o:yt.min(),t?u:N())).next(m=>(mM(r,Uv(e),m),{documents:m,li:u})))}function pM(n,e){const t=Ge(n),r=Ge(t.fs),o=t.ii.get(e);return o?Promise.resolve(o.target):t.persistence.runTransaction("Get target data","readonly",u=>r.Et(u,e).next(d=>d?d.target:null))}function gM(n,e){const t=Ge(n),r=t.oi.get(e)||yt.min();return t.persistence.runTransaction("Get new document changes","readonly",o=>t.ui.getAllFromCollectionGroup(o,e,cI(r,-1),Number.MAX_SAFE_INTEGER)).then(o=>(mM(t,e,o),o))}function mM(n,e,t){let r=yt.min();t.forEach((o,u)=>{u.readTime.compareTo(r)>0&&(r=u.readTime)}),n.oi.set(e,r)}function cT(){return cT=(0,ye.Z)(function*(n,e,t,r){const o=Ge(n);let u=N(),d=p();for(const C of t){const x=e.fi(C.metadata.name);C.document&&(u=u.add(x));const R=e.di(C);R.setReadTime(e._i(C.metadata.readTime)),d=d.insert(x,R)}const m=o.ui.newChangeBuffer({trackRemovals:!0}),w=yield Gm(o,(C=r,Eo(tc(Jt.fromString(`__bundle__/docs/${C}`)))));var C;return o.persistence.runTransaction("Apply bundle documents","readwrite",C=>fM(C,m,d).next(x=>(m.apply(C),x)).next(x=>o.fs.removeMatchingKeysForTargetId(C,w.targetId).next(()=>o.fs.addMatchingKeys(C,u,w.targetId)).next(()=>o.ci.Gs(C,x)).next(()=>x)))}),cT.apply(this,arguments)}function BR(n,e){return dT.apply(this,arguments)}function dT(){return dT=(0,ye.Z)(function*(n,e,t=N()){const r=yield Gm(n,Eo(JC(e.bundledQuery))),o=Ge(n);return o.persistence.runTransaction("Save named query","readwrite",u=>{const d=ur(e.readTime);if(r.snapshotVersion.compareTo(d)>=0)return o._s.saveNamedQuery(u,e);const m=r.withResumeToken(xr.EMPTY_BYTE_STRING,d);return o.ii=o.ii.insert(m.targetId,m),o.fs.updateTargetData(u,m).next(()=>o.fs.removeMatchingKeysForTargetId(u,r.targetId)).next(()=>o.fs.addMatchingKeys(u,t,r.targetId)).next(()=>o._s.saveNamedQuery(u,e))})}),dT.apply(this,arguments)}class jR{constructor(e){this.M=e,this.wi=new Map,this.mi=new Map}getBundleMetadata(e,t){return he.resolve(this.wi.get(t))}saveBundleMetadata(e,t){var r;return this.wi.set(t.id,{id:(r=t).id,version:r.version,createTime:ur(r.createTime)}),he.resolve()}getNamedQuery(e,t){return he.resolve(this.mi.get(t))}saveNamedQuery(e,t){return this.mi.set(t.name,{name:(r=t).name,query:JC(r.bundledQuery),readTime:ur(r.readTime)}),he.resolve();var r}}class HR{constructor(){this.overlays=new ar(Ue.comparator),this.gi=new Map}getOverlay(e,t){return he.resolve(this.overlays.get(t))}saveOverlays(e,t,r){return r.forEach((o,u)=>{this.Xt(e,t,u)}),he.resolve()}removeOverlaysForBatchId(e,t,r){const o=this.gi.get(r);return void 0!==o&&(o.forEach(u=>this.overlays=this.overlays.remove(u)),this.gi.delete(r)),he.resolve()}getOverlaysForCollection(e,t,r){const o=I(),u=t.length+1,d=new Ue(t.child("")),m=this.overlays.getIteratorFrom(d);for(;m.hasNext();){const w=m.getNext().value,C=w.getKey();if(!t.isPrefixOf(C.path))break;C.path.length===u&&w.largestBatchId>r&&o.set(w.getKey(),w)}return he.resolve(o)}getOverlaysForCollectionGroup(e,t,r,o){let u=new ar((C,x)=>C-x);const d=this.overlays.getIterator();for(;d.hasNext();){const C=d.getNext().value;if(C.getKey().getCollectionGroup()===t&&C.largestBatchId>r){let x=u.get(C.largestBatchId);null===x&&(x=I(),u=u.insert(C.largestBatchId,x)),x.set(C.getKey(),C)}}const m=I(),w=u.getIterator();for(;w.hasNext()&&(w.getNext().value.forEach((C,x)=>m.set(C,x)),!(m.size()>=o)););return he.resolve(m)}Xt(e,t,r){if(null===r)return;const o=this.overlays.get(r.key);if(null!==o){const d=this.gi.get(o.largestBatchId).delete(r.key);this.gi.set(o.largestBatchId,d)}this.overlays=this.overlays.insert(r.key,new QC(t,r));let u=this.gi.get(t);void 0===u&&(u=N(),this.gi.set(t,u)),this.gi.set(t,u.add(r.key))}}class hT{constructor(){this.yi=new s(gi.pi),this.Ii=new s(gi.Ti)}isEmpty(){return this.yi.isEmpty()}addReference(e,t){const r=new gi(e,t);this.yi=this.yi.add(r),this.Ii=this.Ii.add(r)}Ei(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.Ai(new gi(e,t))}Ri(e,t){e.forEach(r=>this.removeReference(r,t))}Pi(e){const t=new Ue(new Jt([])),r=new gi(t,e),o=new gi(t,e+1),u=[];return this.Ii.forEachInRange([r,o],d=>{this.Ai(d),u.push(d.key)}),u}bi(){this.yi.forEach(e=>this.Ai(e))}Ai(e){this.yi=this.yi.delete(e),this.Ii=this.Ii.delete(e)}Vi(e){const t=new Ue(new Jt([])),r=new gi(t,e),o=new gi(t,e+1);let u=N();return this.Ii.forEachInRange([r,o],d=>{u=u.add(d.key)}),u}containsKey(e){const t=new gi(e,0),r=this.yi.firstAfterOrEqual(t);return null!==r&&e.isEqual(r.key)}}class gi{constructor(e,t){this.key=e,this.vi=t}static pi(e,t){return Ue.comparator(e.key,t.key)||Rt(e.vi,t.vi)}static Ti(e,t){return Rt(e.vi,t.vi)||Ue.comparator(e.key,t.key)}}class $R{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.Bs=[],this.Si=1,this.Di=new s(gi.pi)}checkEmpty(e){return he.resolve(0===this.Bs.length)}addMutationBatch(e,t,r,o){const u=this.Si;this.Si++;const d=new KC(u,t,r,o);this.Bs.push(d);for(const m of o)this.Di=this.Di.add(new gi(m.key,u)),this.indexManager.addToCollectionParentIndex(e,m.key.path.popLast());return he.resolve(d)}lookupMutationBatch(e,t){return he.resolve(this.Ci(t))}getNextMutationBatchAfterBatchId(e,t){const o=this.xi(t+1),u=o<0?0:o;return he.resolve(this.Bs.length>u?this.Bs[u]:null)}getHighestUnacknowledgedBatchId(){return he.resolve(0===this.Bs.length?-1:this.Si-1)}getAllMutationBatches(e){return he.resolve(this.Bs.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new gi(t,0),o=new gi(t,Number.POSITIVE_INFINITY),u=[];return this.Di.forEachInRange([r,o],d=>{const m=this.Ci(d.vi);u.push(m)}),he.resolve(u)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new s(Rt);return t.forEach(o=>{const u=new gi(o,0),d=new gi(o,Number.POSITIVE_INFINITY);this.Di.forEachInRange([u,d],m=>{r=r.add(m.vi)})}),he.resolve(this.Ni(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,o=r.length+1;let u=r;Ue.isDocumentKey(u)||(u=u.child(""));const d=new gi(new Ue(u),0);let m=new s(Rt);return this.Di.forEachWhile(w=>{const C=w.key.path;return!!r.isPrefixOf(C)&&(C.length===o&&(m=m.add(w.vi)),!0)},d),he.resolve(this.Ni(m))}Ni(e){const t=[];return e.forEach(r=>{const o=this.Ci(r);null!==o&&t.push(o)}),t}removeMutationBatch(e,t){It(0===this.ki(t.batchId,"removed")),this.Bs.shift();let r=this.Di;return he.forEach(t.mutations,o=>{const u=new gi(o.key,t.batchId);return r=r.delete(u),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)}).next(()=>{this.Di=r})}_n(e){}containsKey(e,t){const r=new gi(t,0),o=this.Di.firstAfterOrEqual(r);return he.resolve(t.isEqual(o&&o.key))}performConsistencyCheck(e){return he.resolve()}ki(e,t){return this.xi(e)}xi(e){return 0===this.Bs.length?0:e-this.Bs[0].batchId}Ci(e){const t=this.xi(e);return t<0||t>=this.Bs.length?null:this.Bs[t]}}class GR{constructor(e){this.Mi=e,this.docs=new ar(Ue.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,o=this.docs.get(r),u=o?o.size:0,d=this.Mi(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:d}),this.size+=d-u,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return he.resolve(r?r.document.mutableCopy():En.newInvalidDocument(t))}getEntries(e,t){let r=p();return t.forEach(o=>{const u=this.docs.get(o);r=r.insert(o,u?u.document.mutableCopy():En.newInvalidDocument(o))}),he.resolve(r)}getAllFromCollection(e,t,r){let o=p();const u=new Ue(t.child("")),d=this.docs.getIteratorFrom(u);for(;d.hasNext();){const{key:m,value:{document:w}}=d.getNext();if(!t.isPrefixOf(m.path))break;m.path.length>t.length+1||dI(Ov(w),r)<=0||(o=o.insert(w.key,w.mutableCopy()))}return he.resolve(o)}getAllFromCollectionGroup(e,t,r,o){et()}Oi(e,t){return he.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new qR(this)}getSize(e){return he.resolve(this.size)}}class qR extends iM{constructor(e){super(),this.Kn=e}applyChanges(e){const t=[];return this.changes.forEach((r,o)=>{o.isValidDocument()?t.push(this.Kn.addEntry(e,o)):this.Kn.removeEntry(r)}),he.waitFor(t)}getFromCache(e,t){return this.Kn.getEntry(e,t)}getAllFromCache(e,t){return this.Kn.getEntries(e,t)}}class zR{constructor(e){this.persistence=e,this.Fi=new nc(t=>jd(t),Xf),this.lastRemoteSnapshotVersion=yt.min(),this.highestTargetId=0,this.$i=0,this.Bi=new hT,this.targetCount=0,this.Li=pp.gn()}forEachTarget(e,t){return this.Fi.forEach((r,o)=>t(o)),he.resolve()}getLastRemoteSnapshotVersion(e){return he.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return he.resolve(this.$i)}allocateTargetId(e){return this.highestTargetId=this.Li.next(),he.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.$i&&(this.$i=t),he.resolve()}Tn(e){this.Fi.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Li=new pp(t),this.highestTargetId=t),e.sequenceNumber>this.$i&&(this.$i=e.sequenceNumber)}addTargetData(e,t){return this.Tn(t),this.targetCount+=1,he.resolve()}updateTargetData(e,t){return this.Tn(t),he.resolve()}removeTargetData(e,t){return this.Fi.delete(t.target),this.Bi.Pi(t.targetId),this.targetCount-=1,he.resolve()}removeTargets(e,t,r){let o=0;const u=[];return this.Fi.forEach((d,m)=>{m.sequenceNumber<=t&&null===r.get(m.targetId)&&(this.Fi.delete(d),u.push(this.removeMatchingKeysForTargetId(e,m.targetId)),o++)}),he.waitFor(u).next(()=>o)}getTargetCount(e){return he.resolve(this.targetCount)}getTargetData(e,t){const r=this.Fi.get(t)||null;return he.resolve(r)}addMatchingKeys(e,t,r){return this.Bi.Ei(t,r),he.resolve()}removeMatchingKeys(e,t,r){this.Bi.Ri(t,r);const o=this.persistence.referenceDelegate,u=[];return o&&t.forEach(d=>{u.push(o.markPotentiallyOrphaned(e,d))}),he.waitFor(u)}removeMatchingKeysForTargetId(e,t){return this.Bi.Pi(t),he.resolve()}getMatchingKeysForTargetId(e,t){const r=this.Bi.Vi(t);return he.resolve(r)}containsKey(e,t){return he.resolve(this.Bi.containsKey(t))}}class WR{constructor(e,t){this.Ui={},this.overlays={},this.es=new ki(0),this.ns=!1,this.ns=!0,this.referenceDelegate=e(this),this.fs=new zR(this),this.indexManager=new DR,this.ds=new GR(r=>this.referenceDelegate.qi(r)),this.M=new $S(t),this._s=new jR(this.M)}start(){return Promise.resolve()}shutdown(){return this.ns=!1,Promise.resolve()}get started(){return this.ns}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new HR,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.Ui[e.toKey()];return r||(r=new $R(t,this.referenceDelegate),this.Ui[e.toKey()]=r),r}getTargetCache(){return this.fs}getRemoteDocumentCache(){return this.ds}getBundleCache(){return this._s}runTransaction(e,t,r){Oe("MemoryPersistence","Starting transaction:",e);const o=new ZR(this.es.next());return this.referenceDelegate.Ki(),r(o).next(u=>this.referenceDelegate.Gi(o).next(()=>u)).toPromise().then(u=>(o.raiseOnCommittedEvent(),u))}Qi(e,t){return he.or(Object.values(this.Ui).map(r=>()=>r.containsKey(e,t)))}}class ZR extends BS{constructor(e){super(),this.currentSequenceNumber=e}}class fT{constructor(e){this.persistence=e,this.ji=new hT,this.Wi=null}static zi(e){return new fT(e)}get Hi(){if(this.Wi)return this.Wi;throw et()}addReference(e,t,r){return this.ji.addReference(r,t),this.Hi.delete(r.toString()),he.resolve()}removeReference(e,t,r){return this.ji.removeReference(r,t),this.Hi.add(r.toString()),he.resolve()}markPotentiallyOrphaned(e,t){return this.Hi.add(t.toString()),he.resolve()}removeTarget(e,t){this.ji.Pi(t.targetId).forEach(o=>this.Hi.add(o.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(o=>{o.forEach(u=>this.Hi.add(u.toString()))}).next(()=>r.removeTargetData(e,t))}Ki(){this.Wi=new Set}Gi(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return he.forEach(this.Hi,r=>{const o=Ue.fromPath(r);return this.Ji(e,o).next(u=>{u||t.removeEntry(o,yt.min())})}).next(()=>(this.Wi=null,t.apply(e)))}updateLimboDocument(e,t){return this.Ji(e,t).next(r=>{r?this.Hi.delete(t.toString()):this.Hi.add(t.toString())})}qi(e){return 0}Ji(e,t){return he.or([()=>he.resolve(this.ji.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Qi(e,t)])}}function yM(n,e){return`firestore_clients_${n}_${e}`}function _M(n,e,t){let r=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function pT(n,e){return`firestore_targets_${n}_${e}`}class ZI{constructor(e,t,r,o){this.user=e,this.batchId=t,this.state=r,this.error=o}static Yi(e,t,r){const o=JSON.parse(r);let u,d="object"==typeof o&&-1!==["pending","acknowledged","rejected"].indexOf(o.state)&&(void 0===o.error||"object"==typeof o.error);return d&&o.error&&(d="string"==typeof o.error.message&&"string"==typeof o.error.code,d&&(u=new Ae(o.error.code,o.error.message))),d?new ZI(e,t,o.state,u):(Kn("SharedClientState",`Failed to parse mutation state for ID '${t}': ${r}`),null)}Xi(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class t0{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static Yi(e,t){const r=JSON.parse(t);let o,u="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return u&&r.error&&(u="string"==typeof r.error.message&&"string"==typeof r.error.code,u&&(o=new Ae(r.error.code,r.error.message))),u?new t0(e,r.state,o):(Kn("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}Xi(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class KI{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Yi(e,t){const r=JSON.parse(t);let o="object"==typeof r&&r.activeTargetIds instanceof Array,u=W();for(let d=0;o&&d<r.activeTargetIds.length;++d)o=Im(r.activeTargetIds[d]),u=u.add(r.activeTargetIds[d]);return o?new KI(e,u):(Kn("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class gT{constructor(e,t){this.clientId=e,this.onlineState=t}static Yi(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new gT(t.clientId,t.onlineState):(Kn("SharedClientState",`Failed to parse online state: ${e}`),null)}}class mT{constructor(){this.activeTargetIds=W()}Zi(e){this.activeTargetIds=this.activeTargetIds.add(e)}tr(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Xi(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class yT{constructor(e,t,r,o,u){this.window=e,this.Yn=t,this.persistenceKey=r,this.er=o,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.nr=this.sr.bind(this),this.ir=new ar(Rt),this.started=!1,this.rr=[];const d=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=u,this.ur=yM(this.persistenceKey,this.er),this.ar=`firestore_sequence_number_${this.persistenceKey}`,this.ir=this.ir.insert(this.er,new mT),this.cr=new RegExp(`^firestore_clients_${d}_([^_]*)$`),this.hr=new RegExp(`^firestore_mutations_${d}_(\\d+)(?:_(.*))?$`),this.lr=new RegExp(`^firestore_targets_${d}_(\\d+)$`),this.dr=`firestore_online_state_${this.persistenceKey}`,this._r=function(m){return`firestore_bundle_loaded_v2_${m}`}(this.persistenceKey),this.window.addEventListener("storage",this.nr)}static vt(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,ye.Z)(function*(){const t=yield e.syncEngine.Fs();for(const o of t){if(o===e.er)continue;const u=e.getItem(yM(e.persistenceKey,o));if(u){const d=KI.Yi(o,u);d&&(e.ir=e.ir.insert(d.clientId,d))}}e.wr();const r=e.storage.getItem(e.dr);if(r){const o=e.mr(r);o&&e.gr(o)}for(const o of e.rr)e.sr(o);e.rr=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.ar,JSON.stringify(e))}getAllActiveQueryTargets(){return this.yr(this.ir)}isActiveQueryTarget(e){let t=!1;return this.ir.forEach((r,o)=>{o.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.pr(e,"pending")}updateMutationState(e,t,r){this.pr(e,t,r),this.Ir(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const r=this.storage.getItem(pT(this.persistenceKey,e));if(r){const o=t0.Yi(e,r);o&&(t=o.state)}}return this.Tr.Zi(e),this.wr(),t}removeLocalQueryTarget(e){this.Tr.tr(e),this.wr()}isLocalQueryTarget(e){return this.Tr.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(pT(this.persistenceKey,e))}updateQueryState(e,t,r){this.Er(e,t,r)}handleUserChange(e,t,r){t.forEach(o=>{this.Ir(o)}),this.currentUser=e,r.forEach(o=>{this.addPendingMutation(o)})}setOnlineState(e){this.Ar(e)}notifyBundleLoaded(e){this.Rr(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.nr),this.removeItem(this.ur),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return Oe("SharedClientState","READ",e,t),t}setItem(e,t){Oe("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){Oe("SharedClientState","REMOVE",e),this.storage.removeItem(e)}sr(e){var t=this;const r=e;if(r.storageArea===this.storage){if(Oe("SharedClientState","EVENT",r.key,r.newValue),r.key===this.ur)return void Kn("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Yn.enqueueRetryable((0,ye.Z)(function*(){if(t.started){if(null!==r.key)if(t.cr.test(r.key)){if(null==r.newValue){const o=t.Pr(r.key);return t.br(o,null)}{const o=t.Vr(r.key,r.newValue);if(o)return t.br(o.clientId,o)}}else if(t.hr.test(r.key)){if(null!==r.newValue){const o=t.vr(r.key,r.newValue);if(o)return t.Sr(o)}}else if(t.lr.test(r.key)){if(null!==r.newValue){const o=t.Dr(r.key,r.newValue);if(o)return t.Cr(o)}}else if(r.key===t.dr){if(null!==r.newValue){const o=t.mr(r.newValue);if(o)return t.gr(o)}}else if(r.key===t.ar){const o=function(u){let d=ki.A;if(null!=u)try{const m=JSON.parse(u);It("number"==typeof m),d=m}catch(m){Kn("SharedClientState","Failed to read sequence number from WebStorage",m)}return d}(r.newValue);o!==ki.A&&t.sequenceNumberHandler(o)}else if(r.key===t._r){const o=t.Nr(r.newValue);yield Promise.all(o.map(u=>t.syncEngine.kr(u)))}}else t.rr.push(r)}))}}get Tr(){return this.ir.get(this.er)}wr(){this.setItem(this.ur,this.Tr.Xi())}pr(e,t,r){const o=new ZI(this.currentUser,e,t,r),u=_M(this.persistenceKey,this.currentUser,e);this.setItem(u,o.Xi())}Ir(e){const t=_M(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Ar(e){this.storage.setItem(this.dr,JSON.stringify({clientId:this.er,onlineState:e}))}Er(e,t,r){const o=pT(this.persistenceKey,e),u=new t0(e,t,r);this.setItem(o,u.Xi())}Rr(e){const t=JSON.stringify(Array.from(e));this.setItem(this._r,t)}Pr(e){const t=this.cr.exec(e);return t?t[1]:null}Vr(e,t){const r=this.Pr(e);return KI.Yi(r,t)}vr(e,t){const r=this.hr.exec(e),o=Number(r[1]);return ZI.Yi(new _r(void 0!==r[2]?r[2]:null),o,t)}Dr(e,t){const r=this.lr.exec(e),o=Number(r[1]);return t0.Yi(o,t)}mr(e){return gT.Yi(e)}Nr(e){return JSON.parse(e)}Sr(e){var t=this;return(0,ye.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.Mr(e.batchId,e.state,e.error);Oe("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}Cr(e){return this.syncEngine.Or(e.targetId,e.state,e.error)}br(e,t){const r=t?this.ir.insert(e,t):this.ir.remove(e),o=this.yr(this.ir),u=this.yr(r),d=[],m=[];return u.forEach(w=>{o.has(w)||d.push(w)}),o.forEach(w=>{u.has(w)||m.push(w)}),this.syncEngine.Fr(d,m).then(()=>{this.ir=r})}gr(e){this.ir.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}yr(e){let t=W();return e.forEach((r,o)=>{t=t.unionWith(o.activeTargetIds)}),t}}class vM{constructor(){this.$r=new mT,this.Br={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e){return this.$r.Zi(e),this.Br[e]||"not-current"}updateQueryState(e,t,r){this.Br[e]=t}removeLocalQueryTarget(e){this.$r.tr(e)}isLocalQueryTarget(e){return this.$r.activeTargetIds.has(e)}clearQueryState(e){delete this.Br[e]}getAllActiveQueryTargets(){return this.$r.activeTargetIds}isActiveQueryTarget(e){return this.$r.activeTargetIds.has(e)}start(){return this.$r=new mT,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class KR{Lr(e){}shutdown(){}}class EM{constructor(){this.Ur=()=>this.qr(),this.Kr=()=>this.Gr(),this.Qr=[],this.jr()}Lr(e){this.Qr.push(e)}shutdown(){window.removeEventListener("online",this.Ur),window.removeEventListener("offline",this.Kr)}jr(){window.addEventListener("online",this.Ur),window.addEventListener("offline",this.Kr)}qr(){Oe("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.Qr)e(0)}Gr(){Oe("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.Qr)e(1)}static vt(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}const YR={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"};class QR{constructor(e){this.Wr=e.Wr,this.zr=e.zr}Hr(e){this.Jr=e}Yr(e){this.Xr=e}onMessage(e){this.Zr=e}close(){this.zr()}send(e){this.Wr(e)}eo(){this.Jr()}no(e){this.Xr(e)}so(e){this.Zr(e)}}class JR extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.io=(e.ssl?"https":"http")+"://"+e.host,this.ro="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}oo(e,t,r,o,u){const d=this.uo(e,t);Oe("RestConnection","Sending: ",d,r);const m={};return this.ao(m,o,u),this.co(e,d,m,r).then(w=>(Oe("RestConnection","Received: ",w),w),w=>{throw Pd("RestConnection",`${e} failed with error: `,w,"url: ",d,"request:",r),w})}ho(e,t,r,o,u){return this.oo(e,t,r,o,u)}ao(e,t,r){e["X-Goog-Api-Client"]="gl-js/ fire/"+Nd,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((o,u)=>e[u]=o),r&&r.headers.forEach((o,u)=>e[u]=o)}uo(e,t){return`${this.io}/v1/${t}:${YR[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}co(e,t,r,o){return new Promise((u,d)=>{const m=new qf;m.listenOnce(Ai.COMPLETE,()=>{try{switch(m.getLastErrorCode()){case wv.NO_ERROR:const C=m.getResponseJson();Oe("Connection","XHR received:",JSON.stringify(C)),u(C);break;case wv.TIMEOUT:Oe("Connection",'RPC "'+e+'" timed out'),d(new Ae(ae.DEADLINE_EXCEEDED,"Request time out"));break;case wv.HTTP_ERROR:const x=m.getStatus();if(Oe("Connection",'RPC "'+e+'" failed with status:',x,"response text:",m.getResponseText()),x>0){const R=m.getResponseJson().error;if(R&&R.status&&R.message){const H=function(G){const X=G.toLowerCase().replace(/_/g,"-");return Object.values(ae).indexOf(X)>=0?X:ae.UNKNOWN}(R.status);d(new Ae(H,R.message))}else d(new Ae(ae.UNKNOWN,"Server responded with status "+m.getStatus()))}else d(new Ae(ae.UNAVAILABLE,"Connection failed."));break;default:et()}}finally{Oe("Connection",'RPC "'+e+'" completed.')}});const w=JSON.stringify(o);m.send(t,"POST",w,r,15)})}lo(e,t,r){const o=[this.io,"/","google.firestore.v1.Firestore","/",e,"/channel"],u=xC(),d=Ww(),m={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(m.xmlHttpFactory=new RC({})),this.ao(m.initMessageHeaders,t,r),(0,Pt.uI)()||(0,Pt.b$)()||(0,Pt.d)()||(0,Pt.w1)()||(0,Pt.Mn)()||(0,Pt.ru)()||(m.httpHeadersOverwriteParam="$httpHeaders");const w=o.join("");Oe("Connection","Creating WebChannel: "+w,m);const C=u.createWebChannel(w,m);let x=!1,R=!1;const H=new QR({Wr:X=>{R?Oe("Connection","Not sending because WebChannel is closed:",X):(x||(Oe("Connection","Opening WebChannel transport."),C.open(),x=!0),Oe("Connection","WebChannel sending:",X),C.send(X))},zr:()=>C.close()}),G=(X,Ne,tt)=>{X.listen(Ne,_t=>{try{tt(_t)}catch(kt){setTimeout(()=>{throw kt},0)}})};return G(C,Iv.EventType.OPEN,()=>{R||Oe("Connection","WebChannel transport opened.")}),G(C,Iv.EventType.CLOSE,()=>{R||(R=!0,Oe("Connection","WebChannel transport closed"),H.no())}),G(C,Iv.EventType.ERROR,X=>{R||(R=!0,Pd("Connection","WebChannel transport errored:",X),H.no(new Ae(ae.UNAVAILABLE,"The operation could not be completed")))}),G(C,Iv.EventType.MESSAGE,X=>{var Ne;if(!R){const tt=X.data[0];It(!!tt);const _t=tt,kt=_t.error||(null===(Ne=_t[0])||void 0===Ne?void 0:Ne.error);if(kt){Oe("Connection","WebChannel received error:",kt);const qt=kt.status;let St=function(cn){const Vi=Er[cn];if(void 0!==Vi)return qC(Vi)}(qt),Zt=kt.message;void 0===St&&(St=ae.INTERNAL,Zt="Unknown error status: "+qt+" with message "+kt.message),R=!0,H.no(new Ae(St,Zt)),C.close()}else Oe("Connection","WebChannel received:",tt),H.so(tt)}}),G(d,Od.STAT_EVENT,X=>{X.stat===Zw.PROXY?Oe("Connection","Detected buffering proxy"):X.stat===Zw.NOPROXY&&Oe("Connection","Detected no buffering proxy")}),setTimeout(()=>{H.eo()},0),H}}function wM(){return"undefined"!=typeof window?window:null}function YI(){return"undefined"!=typeof document?document:null}function n0(n){return new Gv(n,!0)}class _T{constructor(e,t,r=1e3,o=1.5,u=6e4){this.Yn=e,this.timerId=t,this.fo=r,this._o=o,this.wo=u,this.mo=0,this.yo=null,this.po=Date.now(),this.reset()}reset(){this.mo=0}Io(){this.mo=this.wo}To(e){this.cancel();const t=Math.floor(this.mo+this.Eo()),r=Math.max(0,Date.now()-this.po),o=Math.max(0,t-r);o>0&&Oe("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.mo} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.yo=this.Yn.enqueueAfterDelay(this.timerId,o,()=>(this.po=Date.now(),e())),this.mo*=this._o,this.mo<this.fo&&(this.mo=this.fo),this.mo>this.wo&&(this.mo=this.wo)}Ao(){null!==this.yo&&(this.yo.skipDelay(),this.yo=null)}cancel(){null!==this.yo&&(this.yo.cancel(),this.yo=null)}Eo(){return(Math.random()-.5)*this.mo}}class IM{constructor(e,t,r,o,u,d,m,w){this.Yn=e,this.Ro=r,this.Po=o,this.bo=u,this.authCredentialsProvider=d,this.appCheckCredentialsProvider=m,this.listener=w,this.state=0,this.Vo=0,this.vo=null,this.So=null,this.stream=null,this.Do=new _T(e,t)}Co(){return 1===this.state||5===this.state||this.xo()}xo(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.No()}stop(){var e=this;return(0,ye.Z)(function*(){e.Co()&&(yield e.close(0))})()}ko(){this.state=0,this.Do.reset()}Mo(){this.xo()&&null===this.vo&&(this.vo=this.Yn.enqueueAfterDelay(this.Ro,6e4,()=>this.Oo()))}Fo(e){this.$o(),this.stream.send(e)}Oo(){var e=this;return(0,ye.Z)(function*(){if(e.xo())return e.close(0)})()}$o(){this.vo&&(this.vo.cancel(),this.vo=null)}Bo(){this.So&&(this.So.cancel(),this.So=null)}close(e,t){var r=this;return(0,ye.Z)(function*(){r.$o(),r.Bo(),r.Do.cancel(),r.Vo++,4!==e?r.Do.reset():t&&t.code===ae.RESOURCE_EXHAUSTED?(Kn(t.toString()),Kn("Using maximum backoff delay to prevent overloading the backend."),r.Do.Io()):t&&t.code===ae.UNAUTHENTICATED&&3!==r.state&&(r.authCredentialsProvider.invalidateToken(),r.appCheckCredentialsProvider.invalidateToken()),null!==r.stream&&(r.Lo(),r.stream.close(),r.stream=null),r.state=e,yield r.listener.Yr(t)})()}Lo(){}auth(){this.state=1;const e=this.Uo(this.Vo),t=this.Vo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,o])=>{this.Vo===t&&this.qo(r,o)},r=>{e(()=>{const o=new Ae(ae.UNKNOWN,"Fetching auth token failed: "+r.message);return this.Ko(o)})})}qo(e,t){const r=this.Uo(this.Vo);this.stream=this.Go(e,t),this.stream.Hr(()=>{r(()=>(this.state=2,this.So=this.Yn.enqueueAfterDelay(this.Po,1e4,()=>(this.xo()&&(this.state=3),Promise.resolve())),this.listener.Hr()))}),this.stream.Yr(o=>{r(()=>this.Ko(o))}),this.stream.onMessage(o=>{r(()=>this.onMessage(o))})}No(){var e=this;this.state=5,this.Do.To((0,ye.Z)(function*(){e.state=0,e.start()}))}Ko(e){return Oe("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Uo(e){return t=>{this.Yn.enqueueAndForget(()=>this.Vo===e?t():(Oe("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class XR extends IM{constructor(e,t,r,o,u,d){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,o,d),this.M=u}Go(e,t){return this.bo.lo("Listen",e,t)}onMessage(e){this.Do.reset();const t=function $x(n,e){let t;if("targetChange"in e){const r="NO_CHANGE"===(w=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===w?1:"REMOVE"===w?2:"CURRENT"===w?3:"RESET"===w?4:et(),o=e.targetChange.targetIds||[],u=function(w,C){return w.N?(It(void 0===C||"string"==typeof C),xr.fromBase64String(C||"")):(It(void 0===C||C instanceof Uint8Array),xr.fromUint8Array(C||new Uint8Array))}(n,e.targetChange.resumeToken),d=e.targetChange.cause,m=d&&function(w){const C=void 0===w.code?ae.UNKNOWN:qC(w.code);return new Ae(C,w.message||"")}(d);t=new Ie(r,o,u,m||null)}else if("documentChange"in e){const r=e.documentChange,o=Nu(n,r.document.name),u=ur(r.document.updateTime),d=new hi({mapValue:{fields:r.document.fields}}),m=En.newFoundDocument(o,u,d);t=new Le(r.targetIds||[],r.removedTargetIds||[],m.key,m)}else if("documentDelete"in e){const r=e.documentDelete,o=Nu(n,r.document),u=r.readTime?ur(r.readTime):yt.min(),d=En.newNoDocument(o,u);t=new Le([],r.removedTargetIds||[],d.key,d)}else if("documentRemove"in e){const r=e.documentRemove,o=Nu(n,r.document);t=new Le([],r.removedTargetIds||[],o,null)}else{if(!("filter"in e))return et();{const r=e.filter,u=new DS(r.count||0);t=new Qe(r.targetId,u)}}var w;return t}(this.M,e),r=function(o){if(!("targetChange"in o))return yt.min();const u=o.targetChange;return u.targetIds&&u.targetIds.length?yt.min():u.readTime?ur(u.readTime):yt.min()}(e);return this.listener.Qo(t,r)}jo(e){const t={};t.database=zv(this.M),t.addTarget=function(o,u){let d;const m=u.target;return d=Am(m)?{documents:MS(o,m)}:{query:xS(o,m)},d.targetId=u.targetId,u.resumeToken.approximateByteSize()>0?d.resumeToken=Fm(o,u.resumeToken):u.snapshotVersion.compareTo(yt.min())>0&&(d.readTime=ic(o,u.snapshotVersion.toTimestamp())),d}(this.M,e);const r=function qx(n,e){const t=function(r,o){switch(o){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return et()}}(0,e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);r&&(t.labels=r),this.Fo(t)}Wo(e){const t={};t.database=zv(this.M),t.removeTarget=e,this.Fo(t)}}class eO extends IM{constructor(e,t,r,o,u,d){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,o,d),this.M=u,this.zo=!1}get Ho(){return this.zo}start(){this.zo=!1,this.lastStreamToken=void 0,super.start()}Lo(){this.zo&&this.Jo([])}Go(e,t){return this.bo.lo("Write",e,t)}onMessage(e){if(It(!!e.streamToken),this.lastStreamToken=e.streamToken,this.zo){this.Do.reset();const t=function Gx(n,e){return n&&n.length>0?(It(void 0!==e),n.map(t=>function(r,o){let u=ur(r.updateTime?r.updateTime:o);return u.isEqual(yt.min())&&(u=ur(o)),new RI(u,r.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),r=ur(e.commitTime);return this.listener.Yo(r,t)}return It(!e.writeResults||0===e.writeResults.length),this.zo=!0,this.listener.Xo()}Zo(){const e={};e.database=zv(this.M),this.Fo(e)}Jo(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>Wv(this.M,r))};this.Fo(t)}}class tO extends class{}{constructor(e,t,r,o){super(),this.authCredentials=e,this.appCheckCredentials=t,this.bo=r,this.M=o,this.tu=!1}eu(){if(this.tu)throw new Ae(ae.FAILED_PRECONDITION,"The client has already been terminated.")}oo(e,t,r){return this.eu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,u])=>this.bo.oo(e,t,r,o,u)).catch(o=>{throw"FirebaseError"===o.name?(o.code===ae.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new Ae(ae.UNKNOWN,o.toString())})}ho(e,t,r){return this.eu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,u])=>this.bo.ho(e,t,r,o,u)).catch(o=>{throw"FirebaseError"===o.name?(o.code===ae.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new Ae(ae.UNKNOWN,o.toString())})}terminate(){this.tu=!0}}class nO{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.nu=0,this.su=null,this.iu=!0}ru(){0===this.nu&&(this.ou("Unknown"),this.su=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.su=null,this.uu("Backend didn't respond within 10 seconds."),this.ou("Offline"),Promise.resolve())))}au(e){"Online"===this.state?this.ou("Unknown"):(this.nu++,this.nu>=1&&(this.cu(),this.uu(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ou("Offline")))}set(e){this.cu(),this.nu=0,"Online"===e&&(this.iu=!1),this.ou(e)}ou(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}uu(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.iu?(Kn(t),this.iu=!1):Oe("OnlineStateTracker",t)}cu(){null!==this.su&&(this.su.cancel(),this.su=null)}}class rO{constructor(e,t,r,o,u){var d=this;this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.hu=[],this.lu=new Map,this.fu=new Set,this.du=[],this._u=u,this._u.Lr(m=>{r.enqueueAndForget((0,ye.Z)(function*(){var w;Qd(d)&&(Oe("RemoteStore","Restarting streams for network reachability change."),yield(w=(0,ye.Z)(function*(C){const x=Ge(C);x.fu.add(4),yield zm(x),x.wu.set("Unknown"),x.fu.delete(4),yield r0(x)}),function(C){return w.apply(this,arguments)})(d))}))}),this.wu=new nO(r,o)}}function r0(n){return vT.apply(this,arguments)}function vT(){return vT=(0,ye.Z)(function*(n){if(Qd(n))for(const e of n.du)yield e(!0)}),vT.apply(this,arguments)}function zm(n){return ET.apply(this,arguments)}function ET(){return ET=(0,ye.Z)(function*(n){for(const e of n.du)yield e(!1)}),ET.apply(this,arguments)}function QI(n,e){const t=Ge(n);t.lu.has(e.targetId)||(t.lu.set(e.targetId,e),bT(t)?IT(t):Zm(t).xo()&&wT(t,e))}function s0(n,e){const t=Ge(n),r=Zm(t);t.lu.delete(e),r.xo()&&bM(t,e),0===t.lu.size&&(r.xo()?r.Mo():Qd(t)&&t.wu.set("Unknown"))}function wT(n,e){n.mu.Z(e.targetId),Zm(n).jo(e)}function bM(n,e){n.mu.Z(e),Zm(n).Wo(e)}function IT(n){n.mu=new Gt({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),Et:e=>n.lu.get(e)||null}),Zm(n).start(),n.wu.ru()}function bT(n){return Qd(n)&&!Zm(n).Co()&&n.lu.size>0}function Qd(n){return 0===Ge(n).fu.size}function DM(n){n.mu=void 0}function iO(n){return DT.apply(this,arguments)}function DT(){return DT=(0,ye.Z)(function*(n){n.lu.forEach((e,t)=>{wT(n,e)})}),DT.apply(this,arguments)}function sO(n,e){return CT.apply(this,arguments)}function CT(){return CT=(0,ye.Z)(function*(n,e){DM(n),bT(n)?(n.wu.au(e),IT(n)):n.wu.set("Unknown")}),CT.apply(this,arguments)}function oO(n,e,t){return TT.apply(this,arguments)}function TT(){return TT=(0,ye.Z)(function*(n,e,t){if(n.wu.set("Online"),e instanceof Ie&&2===e.state&&e.cause)try{yield(r=(0,ye.Z)(function*(o,u){const d=u.cause;for(const m of u.targetIds)o.lu.has(m)&&(yield o.remoteSyncer.rejectListen(m,d),o.lu.delete(m),o.mu.removeTarget(m))}),function(o,u){return r.apply(this,arguments)})(n,e)}catch(r){Oe("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield JI(n,r)}else if(e instanceof Le?n.mu.ut(e):e instanceof Qe?n.mu._t(e):n.mu.ht(e),!t.isEqual(yt.min()))try{const r=yield hM(n.localStore);t.compareTo(r)>=0&&(yield function(o,u){const d=o.mu.yt(u);return d.targetChanges.forEach((m,w)=>{if(m.resumeToken.approximateByteSize()>0){const C=o.lu.get(w);C&&o.lu.set(w,C.withResumeToken(m.resumeToken,u))}}),d.targetMismatches.forEach(m=>{const w=o.lu.get(m);if(!w)return;o.lu.set(m,w.withResumeToken(xr.EMPTY_BYTE_STRING,w.snapshotVersion)),bM(o,m);const C=new Wd(w.target,m,1,w.sequenceNumber);wT(o,C)}),o.remoteSyncer.applyRemoteEvent(d)}(n,t))}catch(r){Oe("RemoteStore","Failed to raise snapshot:",r),yield JI(n,r)}var r}),TT.apply(this,arguments)}function JI(n,e,t){return AT.apply(this,arguments)}function AT(){return AT=(0,ye.Z)(function*(n,e,t){if(!up(e))throw e;n.fu.add(1),yield zm(n),n.wu.set("Offline"),t||(t=()=>hM(n.localStore)),n.asyncQueue.enqueueRetryable((0,ye.Z)(function*(){Oe("RemoteStore","Retrying IndexedDB access"),yield t(),n.fu.delete(1),yield r0(n)}))}),AT.apply(this,arguments)}function CM(n,e){return e().catch(t=>JI(n,t,e))}function Wm(n){return ST.apply(this,arguments)}function ST(){return ST=(0,ye.Z)(function*(n){const e=Ge(n),t=Jd(e);let r=e.hu.length>0?e.hu[e.hu.length-1].batchId:-1;for(;aO(e);)try{const o=yield VR(e.localStore,r);if(null===o){0===e.hu.length&&t.Mo();break}r=o.batchId,uO(e,o)}catch(o){yield JI(e,o)}TM(e)&&AM(e)}),ST.apply(this,arguments)}function aO(n){return Qd(n)&&n.hu.length<10}function uO(n,e){n.hu.push(e);const t=Jd(n);t.xo()&&t.Ho&&t.Jo(e.mutations)}function TM(n){return Qd(n)&&!Jd(n).Co()&&n.hu.length>0}function AM(n){Jd(n).start()}function lO(n){return MT.apply(this,arguments)}function MT(){return MT=(0,ye.Z)(function*(n){Jd(n).Zo()}),MT.apply(this,arguments)}function cO(n){return xT.apply(this,arguments)}function xT(){return xT=(0,ye.Z)(function*(n){const e=Jd(n);for(const t of n.hu)e.Jo(t.mutations)}),xT.apply(this,arguments)}function dO(n,e,t){return RT.apply(this,arguments)}function RT(){return RT=(0,ye.Z)(function*(n,e,t){const r=n.hu.shift(),o=YC.from(r,e,t);yield CM(n,()=>n.remoteSyncer.applySuccessfulWrite(o)),yield Wm(n)}),RT.apply(this,arguments)}function hO(n,e){return OT.apply(this,arguments)}function OT(){return OT=(0,ye.Z)(function*(n,e){var t;e&&Jd(n).Ho&&(yield(t=(0,ye.Z)(function*(r,o){if(VI(u=o.code)&&u!==ae.ABORTED){const d=r.hu.shift();Jd(r).ko(),yield CM(r,()=>r.remoteSyncer.rejectFailedWrite(d.batchId,o)),yield Wm(r)}var u}),function(r,o){return t.apply(this,arguments)})(n,e)),TM(n)&&AM(n)}),OT.apply(this,arguments)}function SM(n,e){return NT.apply(this,arguments)}function NT(){return NT=(0,ye.Z)(function*(n,e){const t=Ge(n);t.asyncQueue.verifyOperationInProgress(),Oe("RemoteStore","RemoteStore received new credentials");const r=Qd(t);t.fu.add(3),yield zm(t),r&&t.wu.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.fu.delete(3),yield r0(t)}),NT.apply(this,arguments)}function PT(n,e){return kT.apply(this,arguments)}function kT(){return kT=(0,ye.Z)(function*(n,e){const t=Ge(n);e?(t.fu.delete(2),yield r0(t)):e||(t.fu.add(2),yield zm(t),t.wu.set("Unknown"))}),kT.apply(this,arguments)}function Zm(n){return n.gu||(n.gu=function(e,t,r){const o=Ge(e);return o.eu(),new XR(t,o.bo,o.authCredentials,o.appCheckCredentials,o.M,r)}(n.datastore,n.asyncQueue,{Hr:iO.bind(null,n),Yr:sO.bind(null,n),Qo:oO.bind(null,n)}),n.du.push(function(){var e=(0,ye.Z)(function*(t){t?(n.gu.ko(),bT(n)?IT(n):n.wu.set("Unknown")):(yield n.gu.stop(),DM(n))});return function(t){return e.apply(this,arguments)}}())),n.gu}function Jd(n){return n.yu||(n.yu=function(e,t,r){const o=Ge(e);return o.eu(),new eO(t,o.bo,o.authCredentials,o.appCheckCredentials,o.M,r)}(n.datastore,n.asyncQueue,{Hr:lO.bind(null,n),Yr:hO.bind(null,n),Xo:cO.bind(null,n),Yo:dO.bind(null,n)}),n.du.push(function(){var e=(0,ye.Z)(function*(t){t?(n.yu.ko(),yield Wm(n)):(yield n.yu.stop(),n.hu.length>0&&(Oe("RemoteStore",`Stopping write stream with ${n.hu.length} pending writes`),n.hu=[]))});return function(t){return e.apply(this,arguments)}}())),n.yu}class FT{constructor(e,t,r,o,u){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=o,this.removalCallback=u,this.deferred=new vr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(d=>{})}static createAndSchedule(e,t,r,o,u){const d=Date.now()+r,m=new FT(e,t,d,o,u);return m.start(r),m}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Ae(ae.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Km(n,e){if(Kn("AsyncQueue",`${e}: ${n}`),up(n))return new Ae(ae.UNAVAILABLE,`${e}: ${n}`);throw n}class Ym{constructor(e){this.comparator=e?(t,r)=>e(t,r)||Ue.comparator(t.key,r.key):(t,r)=>Ue.comparator(t.key,r.key),this.keyedMap=E(),this.sortedSet=new ar(this.comparator)}static emptySet(e){return new Ym(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Ym)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const o=t.getNext().key,u=r.getNext().key;if(!o.isEqual(u))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const r=new Ym;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class MM{constructor(){this.pu=new ar(Ue.comparator)}track(e){const t=e.doc.key,r=this.pu.get(t);r?0!==e.type&&3===r.type?this.pu=this.pu.insert(t,e):3===e.type&&1!==r.type?this.pu=this.pu.insert(t,{type:r.type,doc:e.doc}):2===e.type&&2===r.type?this.pu=this.pu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===r.type?this.pu=this.pu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===r.type?this.pu=this.pu.remove(t):1===e.type&&2===r.type?this.pu=this.pu.insert(t,{type:1,doc:r.doc}):0===e.type&&1===r.type?this.pu=this.pu.insert(t,{type:2,doc:e.doc}):et():this.pu=this.pu.insert(t,e)}Iu(){const e=[];return this.pu.inorderTraversal((t,r)=>{e.push(r)}),e}}class Qm{constructor(e,t,r,o,u,d,m,w){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=o,this.mutatedKeys=u,this.fromCache=d,this.syncStateChanged=m,this.excludesMetadataChanges=w}static fromInitialDocuments(e,t,r,o){const u=[];return t.forEach(d=>{u.push({type:0,doc:d})}),new Qm(e,t,Ym.emptySet(t),u,r,o,!0,!1)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&np(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let o=0;o<t.length;o++)if(t[o].type!==r[o].type||!t[o].doc.isEqual(r[o].doc))return!1;return!0}}class fO{constructor(){this.Tu=void 0,this.listeners=[]}}class pO{constructor(){this.queries=new nc(e=>rp(e),np),this.onlineState="Unknown",this.Eu=new Set}}function LT(n,e){return VT.apply(this,arguments)}function VT(){return VT=(0,ye.Z)(function*(n,e){const t=Ge(n),r=e.query;let o=!1,u=t.queries.get(r);if(u||(o=!0,u=new fO),o)try{u.Tu=yield t.onListen(r)}catch(d){const m=Km(d,`Initialization of query '${Lv(e.query)}' failed`);return void e.onError(m)}t.queries.set(r,u),u.listeners.push(e),e.Au(t.onlineState),u.Tu&&e.Ru(u.Tu)&&jT(t)}),VT.apply(this,arguments)}function UT(n,e){return BT.apply(this,arguments)}function BT(){return BT=(0,ye.Z)(function*(n,e){const t=Ge(n),r=e.query;let o=!1;const u=t.queries.get(r);if(u){const d=u.listeners.indexOf(e);d>=0&&(u.listeners.splice(d,1),o=0===u.listeners.length)}if(o)return t.queries.delete(r),t.onUnlisten(r)}),BT.apply(this,arguments)}function gO(n,e){const t=Ge(n);let r=!1;for(const o of e){const d=t.queries.get(o.query);if(d){for(const m of d.listeners)m.Ru(o)&&(r=!0);d.Tu=o}}r&&jT(t)}function mO(n,e,t){const r=Ge(n),o=r.queries.get(e);if(o)for(const u of o.listeners)u.onError(t);r.queries.delete(e)}function jT(n){n.Eu.forEach(e=>{e.next()})}class HT{constructor(e,t,r){this.query=e,this.Pu=t,this.bu=!1,this.Vu=null,this.onlineState="Unknown",this.options=r||{}}Ru(e){if(!this.options.includeMetadataChanges){const r=[];for(const o of e.docChanges)3!==o.type&&r.push(o);e=new Qm(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0)}let t=!1;return this.bu?this.vu(e)&&(this.Pu.next(e),t=!0):this.Su(e,this.onlineState)&&(this.Du(e),t=!0),this.Vu=e,t}onError(e){this.Pu.error(e)}Au(e){this.onlineState=e;let t=!1;return this.Vu&&!this.bu&&this.Su(this.Vu,e)&&(this.Du(this.Vu),t=!0),t}Su(e,t){return!e.fromCache||!(this.options.Cu&&"Offline"!==t||e.docs.isEmpty()&&"Offline"!==t)}vu(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Vu&&this.Vu.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}Du(e){e=Qm.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache),this.bu=!0,this.Pu.next(e)}}class yO{constructor(e,t){this.payload=e,this.byteLength=t}xu(){return"metadata"in this.payload}}class xM{constructor(e){this.M=e}fi(e){return Nu(this.M,e)}di(e){return e.metadata.exists?SS(this.M,e.document,!1):En.newNoDocument(this.fi(e.metadata.name),this._i(e.metadata.readTime))}_i(e){return ur(e)}}class _O{constructor(e,t,r){this.Nu=e,this.localStore=t,this.M=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=RM(e)}ku(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.payload.namedQuery)this.queries.push(e.payload.namedQuery);else if(e.payload.documentMetadata){this.documents.push({metadata:e.payload.documentMetadata}),e.payload.documentMetadata.exists||++t;const r=Jt.fromString(e.payload.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.payload.document&&(this.documents[this.documents.length-1].document=e.payload.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}Mu(e){const t=new Map,r=new xM(this.M);for(const o of e)if(o.metadata.queries){const u=r.fi(o.metadata.name);for(const d of o.metadata.queries){const m=(t.get(d)||N()).add(u);t.set(d,m)}}return t}complete(){var e=this;return(0,ye.Z)(function*(){const t=yield function UR(n,e,t,r){return cT.apply(this,arguments)}(e.localStore,new xM(e.M),e.documents,e.Nu.id),r=e.Mu(e.documents);for(const o of e.queries)yield BR(e.localStore,o,r.get(o.name));return e.progress.taskState="Success",{progress:e.progress,Ou:e.collectionGroups,Fu:t}})()}}function RM(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}class OM{constructor(e){this.key=e}}class NM{constructor(e){this.key=e}}class PM{constructor(e,t){this.query=e,this.$u=t,this.Bu=null,this.current=!1,this.Lu=N(),this.mutatedKeys=N(),this.Uu=Ru(e),this.qu=new Ym(this.Uu)}get Ku(){return this.$u}Gu(e,t){const r=t?t.Qu:new MM,o=t?t.qu:this.qu;let u=t?t.mutatedKeys:this.mutatedKeys,d=o,m=!1;const w=Sm(this.query)&&o.size===this.query.limit?o.last():null,C=Mm(this.query)&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal((x,R)=>{const H=o.get(x),G=Vv(this.query,R)?R:null,X=!!H&&this.mutatedKeys.has(H.key),Ne=!!G&&(G.hasLocalMutations||this.mutatedKeys.has(G.key)&&G.hasCommittedMutations);let tt=!1;H&&G?H.data.isEqual(G.data)?X!==Ne&&(r.track({type:3,doc:G}),tt=!0):this.ju(H,G)||(r.track({type:2,doc:G}),tt=!0,(w&&this.Uu(G,w)>0||C&&this.Uu(G,C)<0)&&(m=!0)):!H&&G?(r.track({type:0,doc:G}),tt=!0):H&&!G&&(r.track({type:1,doc:H}),tt=!0,(w||C)&&(m=!0)),tt&&(G?(d=d.add(G),u=Ne?u.add(x):u.delete(x)):(d=d.delete(x),u=u.delete(x)))}),Sm(this.query)||Mm(this.query))for(;d.size>this.query.limit;){const x=Sm(this.query)?d.last():d.first();d=d.delete(x.key),u=u.delete(x.key),r.track({type:1,doc:x})}return{qu:d,Qu:r,ni:m,mutatedKeys:u}}ju(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r){const o=this.qu;this.qu=e.qu,this.mutatedKeys=e.mutatedKeys;const u=e.Qu.Iu();u.sort((C,x)=>function(R,H){const G=X=>{switch(X){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return et()}};return G(R)-G(H)}(C.type,x.type)||this.Uu(C.doc,x.doc)),this.Wu(r);const d=t?this.zu():[],m=0===this.Lu.size&&this.current?1:0,w=m!==this.Bu;return this.Bu=m,0!==u.length||w?{snapshot:new Qm(this.query,e.qu,o,u,e.mutatedKeys,0===m,w,!1),Hu:d}:{Hu:d}}Au(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({qu:this.qu,Qu:new MM,mutatedKeys:this.mutatedKeys,ni:!1},!1)):{Hu:[]}}Ju(e){return!this.$u.has(e)&&!!this.qu.has(e)&&!this.qu.get(e).hasLocalMutations}Wu(e){e&&(e.addedDocuments.forEach(t=>this.$u=this.$u.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.$u=this.$u.delete(t)),this.current=e.current)}zu(){if(!this.current)return[];const e=this.Lu;this.Lu=N(),this.qu.forEach(r=>{this.Ju(r.key)&&(this.Lu=this.Lu.add(r.key))});const t=[];return e.forEach(r=>{this.Lu.has(r)||t.push(new NM(r))}),this.Lu.forEach(r=>{e.has(r)||t.push(new OM(r))}),t}Yu(e){this.$u=e.li,this.Lu=N();const t=this.Gu(e.documents);return this.applyChanges(t,!0)}Xu(){return Qm.fromInitialDocuments(this.query,this.qu,this.mutatedKeys,0===this.Bu)}}class vO{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class EO{constructor(e){this.key=e,this.Zu=!1}}class wO{constructor(e,t,r,o,u,d){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=o,this.currentUser=u,this.maxConcurrentLimboResolutions=d,this.ta={},this.ea=new nc(m=>rp(m),np),this.na=new Map,this.sa=new Set,this.ia=new ar(Ue.comparator),this.ra=new Map,this.oa=new hT,this.ua={},this.aa=new Map,this.ca=pp.yn(),this.onlineState="Unknown",this.ha=void 0}get isPrimaryClient(){return!0===this.ha}}function IO(n,e){return $T.apply(this,arguments)}function $T(){return $T=(0,ye.Z)(function*(n,e){const t=hA(n);let r,o;const u=t.ea.get(e);if(u)r=u.targetId,t.sharedClientState.addLocalQueryTarget(r),o=u.view.Xu();else{const d=yield Gm(t.localStore,Eo(e));t.isPrimaryClient&&QI(t.remoteStore,d);const m=t.sharedClientState.addLocalQueryTarget(d.targetId);r=d.targetId,o=yield GT(t,e,r,"current"===m)}return o}),$T.apply(this,arguments)}function GT(n,e,t,r){return qT.apply(this,arguments)}function qT(){return qT=(0,ye.Z)(function*(n,e,t,r){n.la=(x,R,H)=>{return(G=(0,ye.Z)(function*(X,Ne,tt,_t){let kt=Ne.view.Gu(tt);kt.ni&&(kt=yield WI(X.localStore,Ne.query,!1).then(({documents:Zt})=>Ne.view.Gu(Zt,kt)));const qt=_t&&_t.targetChanges.get(Ne.targetId),St=Ne.view.applyChanges(kt,X.isPrimaryClient,qt);return tA(X,Ne.targetId,St.Hu),St.snapshot}),function(X,Ne,tt,_t){return G.apply(this,arguments)})(n,x,R,H);var G};const o=yield WI(n.localStore,e,!0),u=new PM(e,o.li),d=u.Gu(o.documents),m=Me.createSynthesizedTargetChangeForCurrentChange(t,r&&"Offline"!==n.onlineState),w=u.applyChanges(d,n.isPrimaryClient,m);tA(n,t,w.Hu);const C=new vO(e,t,u);return n.ea.set(e,C),n.na.has(t)?n.na.get(t).push(e):n.na.set(t,[e]),w.snapshot}),qT.apply(this,arguments)}function bO(n,e){return zT.apply(this,arguments)}function zT(){return zT=(0,ye.Z)(function*(n,e){const t=Ge(n),r=t.ea.get(e),o=t.na.get(r.targetId);if(o.length>1)return t.na.set(r.targetId,o.filter(u=>!np(u,e))),void t.ea.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(r.targetId),t.sharedClientState.isActiveQueryTarget(r.targetId)||(yield qm(t.localStore,r.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(r.targetId),s0(t.remoteStore,r.targetId),Jm(t,r.targetId)}).catch(gp))):(Jm(t,r.targetId),yield qm(t.localStore,r.targetId,!0))}),zT.apply(this,arguments)}function WT(){return WT=(0,ye.Z)(function*(n,e,t){const r=fA(n);try{const o=yield function(u,d){const m=Ge(u),w=Hn.now(),C=d.reduce((R,H)=>R.add(H.key),N());let x;return m.persistence.runTransaction("Locally write mutations","readwrite",R=>m.ci.Ks(R,C).next(H=>{x=H;const G=[];for(const X of d){const Ne=NI(X,x.get(X.key));null!=Ne&&G.push(new zd(X.key,Ne,Cm(Ne.value.mapValue),or.exists(!0)))}return m.Bs.addMutationBatch(R,w,G,d)})).then(R=>(R.applyToLocalDocumentSet(x),{batchId:R.batchId,changes:x}))}(r.localStore,e);r.sharedClientState.addPendingMutation(o.batchId),function(u,d,m){let w=u.ua[u.currentUser.toKey()];w||(w=new ar(Rt)),w=w.insert(d,m),u.ua[u.currentUser.toKey()]=w}(r,o.batchId,t),yield oc(r,o.changes),yield Wm(r.remoteStore)}catch(o){const u=Km(o,"Failed to persist write");t.reject(u)}}),WT.apply(this,arguments)}function kM(n,e){return ZT.apply(this,arguments)}function ZT(){return ZT=(0,ye.Z)(function*(n,e){const t=Ge(n);try{const r=yield LR(t.localStore,e);e.targetChanges.forEach((o,u)=>{const d=t.ra.get(u);d&&(It(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1),o.addedDocuments.size>0?d.Zu=!0:o.modifiedDocuments.size>0?It(d.Zu):o.removedDocuments.size>0&&(It(d.Zu),d.Zu=!1))}),yield oc(t,r,e)}catch(r){yield gp(r)}}),ZT.apply(this,arguments)}function FM(n,e,t){const r=Ge(n);if(r.isPrimaryClient&&0===t||!r.isPrimaryClient&&1===t){const o=[];r.ea.forEach((u,d)=>{const m=d.view.Au(e);m.snapshot&&o.push(m.snapshot)}),function(u,d){const m=Ge(u);m.onlineState=d;let w=!1;m.queries.forEach((C,x)=>{for(const R of x.listeners)R.Au(d)&&(w=!0)}),w&&jT(m)}(r.eventManager,e),o.length&&r.ta.Qo(o),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function CO(n,e,t){return KT.apply(this,arguments)}function KT(){return KT=(0,ye.Z)(function*(n,e,t){const r=Ge(n);r.sharedClientState.updateQueryState(e,"rejected",t);const o=r.ra.get(e),u=o&&o.key;if(u){let d=new ar(Ue.comparator);d=d.insert(u,En.newNoDocument(u,yt.min()));const m=N().add(u),w=new ge(yt.min(),new Map,new s(Rt),d,m);yield kM(r,w),r.ia=r.ia.remove(u),r.ra.delete(e),nA(r)}else yield qm(r.localStore,e,!1).then(()=>Jm(r,e,t)).catch(gp)}),KT.apply(this,arguments)}function TO(n,e){return YT.apply(this,arguments)}function YT(){return YT=(0,ye.Z)(function*(n,e){const t=Ge(n),r=e.batch.batchId;try{const o=yield FR(t.localStore,e);eA(t,r,null),XT(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield oc(t,o)}catch(o){yield gp(o)}}),YT.apply(this,arguments)}function AO(n,e,t){return QT.apply(this,arguments)}function QT(){return QT=(0,ye.Z)(function*(n,e,t){const r=Ge(n);try{const o=yield function(u,d){const m=Ge(u);return m.persistence.runTransaction("Reject batch","readwrite-primary",w=>{let C;return m.Bs.lookupMutationBatch(w,d).next(x=>(It(null!==x),C=x.keys(),m.Bs.removeMutationBatch(w,x))).next(()=>m.Bs.performConsistencyCheck(w)).next(()=>m.ci.Ks(w,C))})}(r.localStore,e);eA(r,e,t),XT(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield oc(r,o)}catch(o){yield gp(o)}}),QT.apply(this,arguments)}function JT(){return JT=(0,ye.Z)(function*(n,e){const t=Ge(n);Qd(t.remoteStore)||Oe("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=yield function(u){const d=Ge(u);return d.persistence.runTransaction("Get highest unacknowledged batch id","readonly",m=>d.Bs.getHighestUnacknowledgedBatchId(m))}(t.localStore);if(-1===r)return void e.resolve();const o=t.aa.get(r)||[];o.push(e),t.aa.set(r,o)}catch(r){const o=Km(r,"Initialization of waitForPendingWrites() operation failed");e.reject(o)}}),JT.apply(this,arguments)}function XT(n,e){(n.aa.get(e)||[]).forEach(t=>{t.resolve()}),n.aa.delete(e)}function eA(n,e,t){const r=Ge(n);let o=r.ua[r.currentUser.toKey()];if(o){const u=o.get(e);u&&(t?u.reject(t):u.resolve(),o=o.remove(e)),r.ua[r.currentUser.toKey()]=o}}function Jm(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.na.get(e))n.ea.delete(r),t&&n.ta.fa(r,t);n.na.delete(e),n.isPrimaryClient&&n.oa.Pi(e).forEach(r=>{n.oa.containsKey(r)||LM(n,r)})}function LM(n,e){n.sa.delete(e.path.canonicalString());const t=n.ia.get(e);null!==t&&(s0(n.remoteStore,t),n.ia=n.ia.remove(e),n.ra.delete(t),nA(n))}function tA(n,e,t){for(const r of t)r instanceof OM?(n.oa.addReference(r.key,e),MO(n,r)):r instanceof NM?(Oe("SyncEngine","Document no longer in limbo: "+r.key),n.oa.removeReference(r.key,e),n.oa.containsKey(r.key)||LM(n,r.key)):et()}function MO(n,e){const t=e.key,r=t.path.canonicalString();n.ia.get(t)||n.sa.has(r)||(Oe("SyncEngine","New document in limbo: "+t),n.sa.add(r),nA(n))}function nA(n){for(;n.sa.size>0&&n.ia.size<n.maxConcurrentLimboResolutions;){const e=n.sa.values().next().value;n.sa.delete(e);const t=new Ue(Jt.fromString(e)),r=n.ca.next();n.ra.set(r,new EO(t)),n.ia=n.ia.insert(t,r),QI(n.remoteStore,new Wd(Eo(tc(t.path)),r,2,ki.A))}}function oc(n,e,t){return rA.apply(this,arguments)}function rA(){return rA=(0,ye.Z)(function*(n,e,t){const r=Ge(n),o=[],u=[],d=[];var m;r.ea.isEmpty()||(r.ea.forEach((m,w)=>{d.push(r.la(w,e,t).then(C=>{if(C){r.isPrimaryClient&&r.sharedClientState.updateQueryState(w.targetId,C.fromCache?"not-current":"current"),o.push(C);const x=aT.Ys(w.targetId,C);u.push(x)}}))}),yield Promise.all(d),r.ta.Qo(o),yield(m=(0,ye.Z)(function*(w,C){const x=Ge(w);try{yield x.persistence.runTransaction("notifyLocalViewChanges","readwrite",R=>he.forEach(C,H=>he.forEach(H.Hs,G=>x.persistence.referenceDelegate.addReference(R,H.targetId,G)).next(()=>he.forEach(H.Js,G=>x.persistence.referenceDelegate.removeReference(R,H.targetId,G)))))}catch(R){if(!up(R))throw R;Oe("LocalStore","Failed to update sequence numbers: "+R)}for(const R of C){const H=R.targetId;if(!R.fromCache){const G=x.ii.get(H),Ne=G.withLastLimboFreeSnapshotVersion(G.snapshotVersion);x.ii=x.ii.insert(H,Ne)}}}),function(w,C){return m.apply(this,arguments)})(r.localStore,u))}),rA.apply(this,arguments)}function xO(n,e){return iA.apply(this,arguments)}function iA(){return iA=(0,ye.Z)(function*(n,e){const t=Ge(n);if(!t.currentUser.isEqual(e)){Oe("SyncEngine","User change. New user:",e.toKey());const r=yield dM(t.localStore,e);t.currentUser=e,(o=t).aa.forEach(d=>{d.forEach(m=>{m.reject(new Ae(ae.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),o.aa.clear(),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield oc(t,r.hi)}var o}),iA.apply(this,arguments)}function RO(n,e){const t=Ge(n),r=t.ra.get(e);if(r&&r.Zu)return N().add(r.key);{let o=N();const u=t.na.get(e);if(!u)return o;for(const d of u){const m=t.ea.get(d);o=o.unionWith(m.view.Ku)}return o}}function OO(n,e){return sA.apply(this,arguments)}function sA(){return sA=(0,ye.Z)(function*(n,e){const t=Ge(n),r=yield WI(t.localStore,e.query,!0),o=e.view.Yu(r);return t.isPrimaryClient&&tA(t,e.targetId,o.Hu),o}),sA.apply(this,arguments)}function NO(n,e){return oA.apply(this,arguments)}function oA(){return oA=(0,ye.Z)(function*(n,e){const t=Ge(n);return gM(t.localStore,e).then(r=>oc(t,r))}),oA.apply(this,arguments)}function PO(n,e,t,r){return aA.apply(this,arguments)}function aA(){return aA=(0,ye.Z)(function*(n,e,t,r){const o=Ge(n),u=yield function(d,m){const w=Ge(d),C=Ge(w.Bs);return w.persistence.runTransaction("Lookup mutation documents","readonly",x=>C.fn(x,m).next(R=>R?w.ci.Ks(x,R):he.resolve(null)))}(o.localStore,e);var m;null!==u?("pending"===t?yield Wm(o.remoteStore):"acknowledged"===t||"rejected"===t?(eA(o,e,r||null),XT(o,e),m=e,Ge(Ge(o.localStore).Bs)._n(m)):et(),yield oc(o,u)):Oe("SyncEngine","Cannot apply mutation batch with id: "+e)}),aA.apply(this,arguments)}function uA(){return uA=(0,ye.Z)(function*(n,e){const t=Ge(n);if(hA(t),fA(t),!0===e&&!0!==t.ha){const r=t.sharedClientState.getAllActiveQueryTargets(),o=yield VM(t,r.toArray());t.ha=!0,yield PT(t.remoteStore,!0);for(const u of o)QI(t.remoteStore,u)}else if(!1===e&&!1!==t.ha){const r=[];let o=Promise.resolve();t.na.forEach((u,d)=>{t.sharedClientState.isLocalQueryTarget(d)?r.push(d):o=o.then(()=>(Jm(t,d),qm(t.localStore,d,!0))),s0(t.remoteStore,d)}),yield o,yield VM(t,r),function(u){const d=Ge(u);d.ra.forEach((m,w)=>{s0(d.remoteStore,w)}),d.oa.bi(),d.ra=new Map,d.ia=new ar(Ue.comparator)}(t),t.ha=!1,yield PT(t.remoteStore,!1)}}),uA.apply(this,arguments)}function VM(n,e,t){return lA.apply(this,arguments)}function lA(){return lA=(0,ye.Z)(function*(n,e,t){const r=Ge(n),o=[],u=[];for(const d of e){let m;const w=r.na.get(d);if(w&&0!==w.length){m=yield Gm(r.localStore,Eo(w[0]));for(const C of w){const x=r.ea.get(C),R=yield OO(r,x);R.snapshot&&u.push(R.snapshot)}}else{const C=yield pM(r.localStore,d);m=yield Gm(r.localStore,C),yield GT(r,UM(C),d,!1)}o.push(m)}return r.ta.Qo(u),o}),lA.apply(this,arguments)}function UM(n){return BC(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function FO(n){const e=Ge(n);return Ge(Ge(e.localStore).persistence).Fs()}function LO(n,e,t,r){return cA.apply(this,arguments)}function cA(){return cA=(0,ye.Z)(function*(n,e,t,r){const o=Ge(n);if(o.ha)return void Oe("SyncEngine","Ignoring unexpected query state notification.");const u=o.na.get(e);if(u&&u.length>0)switch(t){case"current":case"not-current":{const d=yield gM(o.localStore,Uv(u[0])),m=ge.createSynthesizedRemoteEventForCurrentChange(e,"current"===t);yield oc(o,d,m);break}case"rejected":yield qm(o.localStore,e,!0),Jm(o,e,r);break;default:et()}}),cA.apply(this,arguments)}function VO(n,e,t){return dA.apply(this,arguments)}function dA(){return dA=(0,ye.Z)(function*(n,e,t){const r=hA(n);if(r.ha){for(const o of e){if(r.na.has(o)){Oe("SyncEngine","Adding an already active target "+o);continue}const u=yield pM(r.localStore,o),d=yield Gm(r.localStore,u);yield GT(r,UM(u),d.targetId,!1),QI(r.remoteStore,d)}for(const o of t)r.na.has(o)&&(yield qm(r.localStore,o,!1).then(()=>{s0(r.remoteStore,o),Jm(r,o)}).catch(gp))}}),dA.apply(this,arguments)}function hA(n){const e=Ge(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=kM.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=RO.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=CO.bind(null,e),e.ta.Qo=gO.bind(null,e.eventManager),e.ta.fa=mO.bind(null,e.eventManager),e}function fA(n){const e=Ge(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=TO.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=AO.bind(null,e),e}class BM{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,ye.Z)(function*(){t.M=n0(e.databaseInfo.databaseId),t.sharedClientState=t._a(e),t.persistence=t.wa(e),yield t.persistence.start(),t.gcScheduler=t.ma(e),t.localStore=t.ga(e)})()}ma(e){return null}ga(e){return cM(this.persistence,new lM,e.initialUser,this.M)}wa(e){return new WR(fT.zi,this.M)}_a(e){return new vM}terminate(){var e=this;return(0,ye.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class jM extends BM{constructor(e,t,r){super(),this.ya=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,r=this;return(0,ye.Z)(function*(){yield t().call(r,e),yield r.ya.initialize(r,e),yield fA(r.ya.syncEngine),yield Wm(r.ya.remoteStore),yield r.persistence.Ts(()=>(r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(r.localStore),Promise.resolve()))})()}ga(e){return cM(this.persistence,new lM,e.initialUser,this.M)}ma(e){return new SR(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue)}wa(e){const t=oT(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=void 0!==this.cacheSizeBytes?Bs.withCacheSize(this.cacheSizeBytes):Bs.DEFAULT;return new sT(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,wM(),YI(),this.M,this.sharedClientState,!!this.forceOwnership)}_a(e){return new vM}}class BO extends jM{constructor(e,t){super(e,t,!1),this.ya=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,r=this;return(0,ye.Z)(function*(){yield t().call(r,e);const o=r.ya.syncEngine;r.sharedClientState instanceof yT&&(r.sharedClientState.syncEngine={Mr:PO.bind(null,o),Or:LO.bind(null,o),Fr:VO.bind(null,o),Fs:FO.bind(null,o),kr:NO.bind(null,o)},yield r.sharedClientState.start()),yield r.persistence.Ts(function(){var u=(0,ye.Z)(function*(d){yield function kO(n,e){return uA.apply(this,arguments)}(r.ya.syncEngine,d),r.gcScheduler&&(d&&!r.gcScheduler.started?r.gcScheduler.start(r.localStore):d||r.gcScheduler.stop())});return function(d){return u.apply(this,arguments)}}())})()}_a(e){const t=wM();if(!yT.vt(t))throw new Ae(ae.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=oT(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new yT(t,e.asyncQueue,r,e.clientId,e.initialUser)}}class pA{initialize(e,t){var r=this;return(0,ye.Z)(function*(){r.localStore||(r.localStore=e.localStore,r.sharedClientState=e.sharedClientState,r.datastore=r.createDatastore(t),r.remoteStore=r.createRemoteStore(t),r.eventManager=r.createEventManager(t),r.syncEngine=r.createSyncEngine(t,!e.synchronizeTabs),r.sharedClientState.onlineStateHandler=o=>FM(r.syncEngine,o,1),r.remoteStore.remoteSyncer.handleCredentialChange=xO.bind(null,r.syncEngine),yield PT(r.remoteStore,r.syncEngine.isPrimaryClient))})()}createEventManager(e){return new pO}createDatastore(e){const t=n0(e.databaseInfo.databaseId),r=new JR(e.databaseInfo);return new tO(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return t=this.localStore,r=this.datastore,o=e.asyncQueue,u=m=>FM(this.syncEngine,m,0),d=EM.vt()?new EM:new KR,new rO(t,r,o,u,d);var t,r,o,u,d}createSyncEngine(e,t){return function(r,o,u,d,m,w,C){const x=new wO(r,o,u,d,m,w);return C&&(x.ha=!0),x}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,ye.Z)(function*(t){const r=Ge(t);Oe("RemoteStore","RemoteStore shutting down."),r.fu.add(5),yield zm(r),r._u.shutdown(),r.wu.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}function HM(n,e=10240){let t=0;return{read:()=>(0,ye.Z)(function*(){if(t<n.byteLength){const r={value:n.slice(t,t+e),done:!1};return t+=e,r}return{done:!0}})(),cancel:()=>(0,ye.Z)(function*(){})(),releaseLock(){},closed:Promise.reject("unimplemented")}}class XI{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.pa(this.observer.next,e)}error(e){this.observer.error?this.pa(this.observer.error,e):console.error("Uncaught Error in snapshot listener:",e)}Ia(){this.muted=!0}pa(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class jO{constructor(e,t){this.Ta=e,this.M=t,this.metadata=new vr,this.buffer=new Uint8Array,this.Ea=new TextDecoder("utf-8"),this.Aa().then(r=>{r&&r.xu()?this.metadata.resolve(r.payload.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(null==r?void 0:r.payload)}`))},r=>this.metadata.reject(r))}close(){return this.Ta.cancel()}getMetadata(){var e=this;return(0,ye.Z)(function*(){return e.metadata.promise})()}da(){var e=this;return(0,ye.Z)(function*(){return yield e.getMetadata(),e.Aa()})()}Aa(){var e=this;return(0,ye.Z)(function*(){const t=yield e.Ra();if(null===t)return null;const r=e.Ea.decode(t),o=Number(r);isNaN(o)&&e.Pa(`length string (${r}) is not valid number`);const u=yield e.ba(o);return new yO(JSON.parse(u),t.length+o)})()}Va(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}Ra(){var e=this;return(0,ye.Z)(function*(){for(;e.Va()<0&&!(yield e.va()););if(0===e.buffer.length)return null;const t=e.Va();t<0&&e.Pa("Reached the end of bundle when a length string is expected.");const r=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),r})()}ba(e){var t=this;return(0,ye.Z)(function*(){for(;t.buffer.length<e;)(yield t.va())&&t.Pa("Reached the end of bundle when more is expected.");const r=t.Ea.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),r})()}Pa(e){throw this.Ta.cancel(),new Error(`Invalid bundle format: ${e}`)}va(){var e=this;return(0,ye.Z)(function*(){const t=yield e.Ta.read();if(!t.done){const r=new Uint8Array(e.buffer.length+t.value.length);r.set(e.buffer),r.set(t.value,e.buffer.length),e.buffer=r}return t.done})()}}class HO{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,ye.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw new Ae(ae.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const r=yield(o=(0,ye.Z)(function*(u,d){const m=Ge(u),w=zv(m.M)+"/documents",C={documents:d.map(G=>sc(m.M,G))},x=yield m.ho("BatchGetDocuments",w,C),R=new Map;x.forEach(G=>{const X=function Hx(n,e){return"found"in e?function(t,r){It(!!r.found);const o=Nu(t,r.found.name),u=ur(r.found.updateTime),d=new hi({mapValue:{fields:r.found.fields}});return En.newFoundDocument(o,u,d)}(n,e):"missing"in e?function(t,r){It(!!r.missing),It(!!r.readTime);const o=Nu(t,r.missing),u=ur(r.readTime);return En.newNoDocument(o,u)}(n,e):et()}(m.M,G);R.set(X.key.toString(),X)});const H=[];return d.forEach(G=>{const X=R.get(G.toString());It(!!X),H.push(X)}),H}),function(u,d){return o.apply(this,arguments)})(t.datastore,e);var o;return r.forEach(o=>t.recordVersion(o)),r})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastWriteError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new km(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,ye.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const t=e.readVersions;var r;e.mutations.forEach(r=>{t.delete(r.key.toString())}),t.forEach((r,o)=>{const u=Ue.fromPath(o);e.mutations.push(new LI(u,e.precondition(u)))}),yield(r=(0,ye.Z)(function*(o,u){const d=Ge(o),m=zv(d.M)+"/documents",w={writes:u.map(C=>Wv(d.M,C))};yield d.oo("Commit",m,w)}),function(o,u){return r.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw et();t=yt.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new Ae(ae.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?or.updateTime(t):or.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(yt.min()))throw new Ae(ae.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return or.updateTime(t)}return or.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class $O{constructor(e,t,r,o){this.asyncQueue=e,this.datastore=t,this.updateFunction=r,this.deferred=o,this.Sa=5,this.Do=new _T(this.asyncQueue,"transaction_retry")}run(){this.Sa-=1,this.Da()}Da(){var e=this;this.Do.To((0,ye.Z)(function*(){const t=new HO(e.datastore),r=e.Ca(t);r&&r.then(o=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(o)}).catch(u=>{e.xa(u)}))}).catch(o=>{e.xa(o)})}))}Ca(e){try{const t=this.updateFunction(e);return!Au(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}xa(e){this.Sa>0&&this.Na(e)?(this.Sa-=1,this.asyncQueue.enqueueAndForget(()=>(this.Da(),Promise.resolve()))):this.deferred.reject(e)}Na(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||!VI(t)}return!1}}class GO{constructor(e,t,r,o){var u=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=o,this.user=_r.UNAUTHENTICATED,this.clientId=eI.R(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,function(){var d=(0,ye.Z)(function*(m){Oe("FirestoreClient","Received user=",m.uid),yield u.authCredentialListener(m),u.user=m});return function(m){return d.apply(this,arguments)}}()),this.appCheckCredentials.start(r,d=>(Oe("FirestoreClient","Received new app check token=",d),this.appCheckCredentialListener(d,this.user)))}getConfiguration(){var e=this;return(0,ye.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Ae(ae.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new vr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,ye.Z)(function*(){try{e.onlineComponents&&(yield e.onlineComponents.terminate()),e.offlineComponents&&(yield e.offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(r){const o=Km(r,"Failed to shutdown persistence");t.reject(o)}})),t.promise}}function $M(n,e){return gA.apply(this,arguments)}function gA(){return gA=(0,ye.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress(),Oe("FirestoreClient","Initializing OfflineComponentProvider");const t=yield n.getConfiguration();yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(function(){var o=(0,ye.Z)(function*(u){r.isEqual(u)||(yield dM(e.localStore,u),r=u)});return function(u){return o.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n.offlineComponents=e}),gA.apply(this,arguments)}function GM(n,e){return mA.apply(this,arguments)}function mA(){return mA=(0,ye.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress();const t=yield yA(n);Oe("FirestoreClient","Initializing OnlineComponentProvider");const r=yield n.getConfiguration();yield e.initialize(t,r),n.setCredentialChangeListener(o=>SM(e.remoteStore,o)),n.setAppCheckTokenChangeListener((o,u)=>SM(e.remoteStore,u)),n.onlineComponents=e}),mA.apply(this,arguments)}function yA(n){return _A.apply(this,arguments)}function _A(){return _A=(0,ye.Z)(function*(n){return n.offlineComponents||(Oe("FirestoreClient","Using default OfflineComponentProvider"),yield $M(n,new BM)),n.offlineComponents}),_A.apply(this,arguments)}function eb(n){return vA.apply(this,arguments)}function vA(){return vA=(0,ye.Z)(function*(n){return n.onlineComponents||(Oe("FirestoreClient","Using default OnlineComponentProvider"),yield GM(n,new pA)),n.onlineComponents}),vA.apply(this,arguments)}function qM(n){return yA(n).then(e=>e.persistence)}function EA(n){return yA(n).then(e=>e.localStore)}function zM(n){return eb(n).then(e=>e.remoteStore)}function wA(n){return eb(n).then(e=>e.syncEngine)}function Xm(n){return IA.apply(this,arguments)}function IA(){return IA=(0,ye.Z)(function*(n){const e=yield eb(n),t=e.eventManager;return t.onListen=IO.bind(null,e.syncEngine),t.onUnlisten=bO.bind(null,e.syncEngine),t}),IA.apply(this,arguments)}function WM(n,e,t={}){const r=new vr;return n.asyncQueue.enqueueAndForget((0,ye.Z)(function*(){return function(o,u,d,m,w){const C=new XI({next:R=>{u.enqueueAndForget(()=>UT(o,x));const H=R.docs.has(d);!H&&R.fromCache?w.reject(new Ae(ae.UNAVAILABLE,"Failed to get document because the client is offline.")):H&&R.fromCache&&m&&"server"===m.source?w.reject(new Ae(ae.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):w.resolve(R)},error:R=>w.reject(R)}),x=new HT(tc(d.path),C,{includeMetadataChanges:!0,Cu:!0});return LT(o,x)}(yield Xm(n),n.asyncQueue,e,t,r)})),r.promise}function ZM(n,e,t={}){const r=new vr;return n.asyncQueue.enqueueAndForget((0,ye.Z)(function*(){return function(o,u,d,m,w){const C=new XI({next:R=>{u.enqueueAndForget(()=>UT(o,x)),R.fromCache&&"server"===m.source?w.reject(new Ae(ae.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):w.resolve(R)},error:R=>w.reject(R)}),x=new HT(d,C,{includeMetadataChanges:!0,Cu:!0});return LT(o,x)}(yield Xm(n),n.asyncQueue,e,t,r)})),r.promise}const KM=new Map;function bA(n,e,t){if(!t)throw new Ae(ae.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function YM(n,e,t,r){if(!0===e&&!0===r)throw new Ae(ae.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function QM(n){if(!Ue.isDocumentKey(n))throw new Ae(ae.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function JM(n){if(Ue.isDocumentKey(n))throw new Ae(ae.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function tb(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const e=(t=n).constructor?t.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var t;return"function"==typeof n?"a function":et()}function en(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new Ae(ae.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=tb(n);throw new Ae(ae.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function XM(n,e){if(e<=0)throw new Ae(ae.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}class ex{constructor(e){var t;if(void 0===e.host){if(void 0!==e.ssl)throw new Ae(ae.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new Ae(ae.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,YM("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class o0{constructor(e,t,r){this._authCredentials=t,this._appCheckCredentials=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new ex({}),this._settingsFrozen=!1,e instanceof zo?this._databaseId=e:(this._app=e,this._databaseId=function(o){if(!Object.prototype.hasOwnProperty.apply(o.options,["projectId"]))throw new Ae(ae.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new zo(o.options.projectId)}(e))}get app(){if(!this._app)throw new Ae(ae.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new Ae(ae.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new ex(e),void 0!==e.credentials&&(this._authCredentials=function(t){if(!t)return new Dv;switch(t.type){case"gapi":const r=t.client;return It(!("object"!=typeof r||null===r||!r.auth||!r.auth.getAuthHeaderValueForFirstParty)),new PC(r,t.sessionIndex||"0",t.iamToken||null);case"provider":return t.client;default:throw new Ae(ae.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=KM.get(e);t&&(Oe("ComponentProvider","Removing Datastore"),KM.delete(e),t.terminate())}(this),Promise.resolve()}}class kn{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new ku(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new kn(this.firestore,e,this._key)}}class Li{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Li(this.firestore,e,this._query)}}class ku extends Li{constructor(e,t,r){super(e,t,tc(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new kn(this.firestore,null,new Ue(e))}withConverter(e){return new ku(this.firestore,e,this._path)}}function tx(n,e,...t){if(n=(0,Pt.m9)(n),bA("collection","path",e),n instanceof o0){const r=Jt.fromString(e,...t);return JM(r),new ku(n,null,r)}{if(!(n instanceof kn||n instanceof ku))throw new Ae(ae.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Jt.fromString(e,...t));return JM(r),new ku(n.firestore,null,r)}}function nb(n,e,...t){if(n=(0,Pt.m9)(n),1===arguments.length&&(e=eI.R()),bA("doc","path",e),n instanceof o0){const r=Jt.fromString(e,...t);return QM(r),new kn(n,null,new Ue(r))}{if(!(n instanceof kn||n instanceof ku))throw new Ae(ae.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Jt.fromString(e,...t));return QM(r),new kn(n.firestore,n instanceof ku?n.converter:null,new Ue(r))}}function nx(n,e){return n=(0,Pt.m9)(n),e=(0,Pt.m9)(e),(n instanceof kn||n instanceof ku)&&(e instanceof kn||e instanceof ku)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function rx(n,e){return n=(0,Pt.m9)(n),e=(0,Pt.m9)(e),n instanceof Li&&e instanceof Li&&n.firestore===e.firestore&&np(n._query,e._query)&&n.converter===e.converter}class tN{constructor(){this.ka=Promise.resolve(),this.Ma=[],this.Oa=!1,this.Fa=[],this.$a=null,this.Ba=!1,this.La=!1,this.Ua=[],this.Do=new _T(this,"async_queue_retry"),this.qa=()=>{const t=YI();t&&Oe("AsyncQueue","Visibility state changed to "+t.visibilityState),this.Do.Ao()};const e=YI();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.qa)}get isShuttingDown(){return this.Oa}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Ka(),this.Ga(e)}enterRestrictedMode(e){if(!this.Oa){this.Oa=!0,this.La=e||!1;const t=YI();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.qa)}}enqueue(e){if(this.Ka(),this.Oa)return new Promise(()=>{});const t=new vr;return this.Ga(()=>this.Oa&&this.La?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Ma.push(e),this.Qa()))}Qa(){var e=this;return(0,ye.Z)(function*(){if(0!==e.Ma.length){try{yield e.Ma[0](),e.Ma.shift(),e.Do.reset()}catch(t){if(!up(t))throw t;Oe("AsyncQueue","Operation failed with retryable error: "+t)}e.Ma.length>0&&e.Do.To(()=>e.Qa())}})()}Ga(e){const t=this.ka.then(()=>(this.Ba=!0,e().catch(r=>{throw this.$a=r,this.Ba=!1,Kn("INTERNAL UNHANDLED ERROR: ",function(u){let d=u.message||"";return u.stack&&(d=u.stack.includes(u.message)?u.stack:u.message+"\n"+u.stack),d}(r)),r}).then(r=>(this.Ba=!1,r))));return this.ka=t,t}enqueueAfterDelay(e,t,r){this.Ka(),this.Ua.indexOf(e)>-1&&(t=0);const o=FT.createAndSchedule(this,e,t,r,u=>this.ja(u));return this.Fa.push(o),o}Ka(){this.$a&&et()}verifyOperationInProgress(){}Wa(){var e=this;return(0,ye.Z)(function*(){let t;do{t=e.ka,yield t}while(t!==e.ka)})()}za(e){for(const t of this.Fa)if(t.timerId===e)return!0;return!1}Ha(e){return this.Wa().then(()=>{this.Fa.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.Fa)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.Wa()})}Ja(e){this.Ua.push(e)}ja(e){const t=this.Fa.indexOf(e);this.Fa.splice(t,1)}}function DA(n){return function(e,t){if("object"!=typeof e||null===e)return!1;const r=e;for(const o of["next","error","complete"])if(o in r&&"function"==typeof r[o])return!0;return!1}(n)}class nN{constructor(){this._progressObserver={},this._taskCompletionResolver=new vr,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class $n extends o0{constructor(e,t,r){super(e,t,r),this.type="firestore",this._queue=new tN,this._persistenceKey="name"in e?e.name:"[DEFAULT]"}_terminate(){return this._firestoreClient||ix(this),this._firestoreClient.terminate()}}function Rr(n){return n._firestoreClient||ix(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function ix(n){var e;const t=n._freezeSettings(),r=(u=(null===(e=n._app)||void 0===e?void 0:e.options.appId)||"",new Sv(n._databaseId,u,n._persistenceKey,(m=t).host,m.ssl,m.experimentalForceLongPolling,m.experimentalAutoDetectLongPolling,m.useFetchStreams));var u,m;n._firestoreClient=new GO(n._authCredentials,n._appCheckCredentials,n._queue,r)}function sx(n,e,t){const r=new vr;return n.asyncQueue.enqueue((0,ye.Z)(function*(){try{yield $M(n,t),yield GM(n,e),r.resolve()}catch(o){if(!("FirebaseError"===(u=o).name?u.code===ae.FAILED_PRECONDITION||u.code===ae.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&u instanceof DOMException)||22===u.code||20===u.code||11===u.code))throw o;console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+o),r.reject(o)}var u})).then(()=>r.promise)}function ox(n){if(n._initialized||n._terminated)throw new Ae(ae.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class ac{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new Ae(ae.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Yr(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Fu{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Fu(xr.fromBase64String(e))}catch(t){throw new Ae(ae.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Fu(xr.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class yp{constructor(e){this._methodName=e}}class rb{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Ae(ae.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Ae(ae.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Rt(this._lat,e._lat)||Rt(this._long,e._long)}}const hN=/^__.*__$/;class fN{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return null!==this.fieldMask?new zd(e,this.data,this.fieldMask,t,this.fieldTransforms):new op(e,this.data,t,this.fieldTransforms)}}class ax{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new zd(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function ux(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw et()}}class ib{constructor(e,t,r,o,u,d){this.settings=e,this.databaseId=t,this.M=r,this.ignoreUndefinedProperties=o,void 0===u&&this.Ya(),this.fieldTransforms=u||[],this.fieldMask=d||[]}get path(){return this.settings.path}get Xa(){return this.settings.Xa}Za(e){return new ib(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.M,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}tc(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),o=this.Za({path:r,ec:!1});return o.nc(e),o}sc(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),o=this.Za({path:r,ec:!1});return o.Ya(),o}ic(e){return this.Za({path:void 0,ec:!0})}rc(e){return ab(e,this.settings.methodName,this.settings.oc||!1,this.path,this.settings.uc)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}Ya(){if(this.path)for(let e=0;e<this.path.length;e++)this.nc(this.path.get(e))}nc(e){if(0===e.length)throw this.rc("Document fields must not be empty");if(ux(this.Xa)&&hN.test(e))throw this.rc('Document fields cannot begin and end with "__"')}}class pN{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.M=r||n0(e)}ac(e,t,r,o=!1){return new ib({Xa:e,methodName:t,uc:r,path:Yr.emptyPath(),ec:!1,oc:o},this.databaseId,this.M,this.ignoreUndefinedProperties)}}function _p(n){const e=n._freezeSettings(),t=n0(n._databaseId);return new pN(n._databaseId,!!e.ignoreUndefinedProperties,t)}function sb(n,e,t,r,o,u={}){const d=n.ac(u.merge||u.mergeFields?2:0,e,t,o);SA("Data must be an object, but it was:",d,r);const m=dx(r,d);let w,C;if(u.merge)w=new Wf(d.fieldMask),C=d.fieldTransforms;else if(u.mergeFields){const x=[];for(const R of u.mergeFields){const H=MA(e,R,t);if(!d.contains(H))throw new Ae(ae.INVALID_ARGUMENT,`Field '${H}' is specified in your field mask but missing from your input data.`);fx(x,H)||x.push(H)}w=new Wf(x),C=d.fieldTransforms.filter(R=>w.covers(R.field))}else w=null,C=d.fieldTransforms;return new fN(new hi(m),w,C)}class a0 extends yp{_toFieldTransform(e){if(2!==e.Xa)throw e.rc(1===e.Xa?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof a0}}function lx(n,e,t){return new ib({Xa:3,uc:e.settings.uc,methodName:n._methodName,ec:t},e.databaseId,e.M,e.ignoreUndefinedProperties)}class CA extends yp{_toFieldTransform(e){return new qd(e.path,new ip)}isEqual(e){return e instanceof CA}}class gN extends yp{constructor(e,t){super(e),this.cc=t}_toFieldTransform(e){const t=lx(this,e,!0),r=this.cc.map(u=>vp(u,t)),o=new $d(r);return new qd(e.path,o)}isEqual(e){return this===e}}class mN extends yp{constructor(e,t){super(e),this.cc=t}_toFieldTransform(e){const t=lx(this,e,!0),r=this.cc.map(u=>vp(u,t)),o=new Ou(r);return new qd(e.path,o)}isEqual(e){return this===e}}class yN extends yp{constructor(e,t){super(e),this.hc=t}_toFieldTransform(e){const t=new Gd(e.M,TI(e.M,this.hc));return new qd(e.path,t)}isEqual(e){return this===e}}function TA(n,e,t,r){const o=n.ac(1,e,t);SA("Data must be an object, but it was:",o,r);const u=[],d=hi.empty();Tu(r,(w,C)=>{const x=ob(e,w,t);C=(0,Pt.m9)(C);const R=o.sc(x);if(C instanceof a0)u.push(x);else{const H=vp(C,R);null!=H&&(u.push(x),d.set(x,H))}});const m=new Wf(u);return new ax(d,m,o.fieldTransforms)}function AA(n,e,t,r,o,u){const d=n.ac(1,e,t),m=[MA(e,r,t)],w=[o];if(u.length%2!=0)throw new Ae(ae.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let H=0;H<u.length;H+=2)m.push(MA(e,u[H])),w.push(u[H+1]);const C=[],x=hi.empty();for(let H=m.length-1;H>=0;--H)if(!fx(C,m[H])){const G=m[H];let X=w[H];X=(0,Pt.m9)(X);const Ne=d.sc(G);if(X instanceof a0)C.push(G);else{const tt=vp(X,Ne);null!=tt&&(C.push(G),x.set(G,tt))}}const R=new Wf(C);return new ax(x,R,d.fieldTransforms)}function cx(n,e,t,r=!1){return vp(t,n.ac(r?4:3,e))}function vp(n,e){if(hx(n=(0,Pt.m9)(n)))return SA("Unsupported field value:",e,n),dx(n,e);if(n instanceof yp)return function(t,r){if(!ux(r.Xa))throw r.rc(`${t._methodName}() can only be used with update() and set()`);if(!r.path)throw r.rc(`${t._methodName}() is not currently supported inside arrays`);const o=t._toFieldTransform(r);o&&r.fieldTransforms.push(o)}(n,e),null;if(void 0===n&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.ec&&4!==e.Xa)throw e.rc("Nested arrays are not supported");return function(t,r){const o=[];let u=0;for(const d of t){let m=vp(d,r.ic(u));null==m&&(m={nullValue:"NULL_VALUE"}),o.push(m),u++}return{arrayValue:{values:o}}}(n,e)}return function(t,r){if(null===(t=(0,Pt.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return TI(r.M,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const o=Hn.fromDate(t);return{timestampValue:ic(r.M,o)}}if(t instanceof Hn){const o=new Hn(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:ic(r.M,o)}}if(t instanceof rb)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof Fu)return{bytesValue:Fm(r.M,t._byteString)};if(t instanceof kn){const o=r.databaseId,u=t.firestore._databaseId;if(!u.isEqual(o))throw r.rc(`Document reference is for database ${u.projectId}/${u.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:ap(t.firestore._databaseId||r.databaseId,t._key.path)}}throw r.rc(`Unsupported field value: ${tb(t)}`)}(n,e)}function dx(n,e){const t={};return nI(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Tu(n,(r,o)=>{const u=vp(o,e.tc(r));null!=u&&(t[r]=u)}),{mapValue:{fields:t}}}function hx(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof Hn||n instanceof rb||n instanceof Fu||n instanceof kn||n instanceof yp)}function SA(n,e,t){if(!hx(t)||"object"!=typeof(r=t)||null===r||Object.getPrototypeOf(r)!==Object.prototype&&null!==Object.getPrototypeOf(r)){const r=tb(t);throw e.rc("an object"===r?n+" a custom object":n+" "+r)}var r}function MA(n,e,t){if((e=(0,Pt.m9)(e))instanceof ac)return e._internalPath;if("string"==typeof e)return ob(n,e);throw ab("Field path arguments must be of type string or ",n,!1,void 0,t)}const _N=new RegExp("[~\\*/\\[\\]]");function ob(n,e,t){if(e.search(_N)>=0)throw ab(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new ac(...e.split("."))._internalPath}catch(r){throw ab(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function ab(n,e,t,r,o){const u=r&&!r.isEmpty(),d=void 0!==o;let m=`Function ${e}() called with invalid data`;t&&(m+=" (via `toFirestore()`)"),m+=". ";let w="";return(u||d)&&(w+=" (found",u&&(w+=` in field ${r}`),d&&(w+=` in document ${o}`),w+=")"),new Ae(ae.INVALID_ARGUMENT,m+n+w)}function fx(n,e){return n.some(t=>t.isEqual(e))}class u0{constructor(e,t,r,o,u){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=o,this._converter=u}get id(){return this._key.path.lastSegment()}get ref(){return new kn(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new vN(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(ub("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class vN extends u0{data(){return super.data()}}function ub(n,e){return"string"==typeof e?ob(n,e):e instanceof ac?e._internalPath:e._delegate._internalPath}class Ep{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class uc extends u0{constructor(e,t,r,o,u,d){super(e,t,r,o,d),this._firestore=e,this._firestoreImpl=e,this.metadata=u}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new l0(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(ub("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class l0 extends uc{data(e={}){return super.data(e)}}class Xd{constructor(e,t,r,o){this._firestore=e,this._userDataWriter=t,this._snapshot=o,this.metadata=new Ep(o.hasPendingWrites,o.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new l0(this._firestore,this._userDataWriter,r.key,r,new Ep(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Ae(ae.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(r,o){if(r._snapshot.oldDocs.isEmpty()){let u=0;return r._snapshot.docChanges.map(d=>({type:"added",doc:new l0(r._firestore,r._userDataWriter,d.doc.key,d.doc,new Ep(r._snapshot.mutatedKeys.has(d.doc.key),r._snapshot.fromCache),r.query.converter),oldIndex:-1,newIndex:u++}))}{let u=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(d=>o||3!==d.type).map(d=>{const m=new l0(r._firestore,r._userDataWriter,d.doc.key,d.doc,new Ep(r._snapshot.mutatedKeys.has(d.doc.key),r._snapshot.fromCache),r.query.converter);let w=-1,C=-1;return 0!==d.type&&(w=u.indexOf(d.doc.key),u=u.delete(d.doc.key)),1!==d.type&&(u=u.add(d.doc),C=u.indexOf(d.doc.key)),{type:EN(d.type),doc:m,oldIndex:w,newIndex:C}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function EN(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return et()}}function px(n,e){return n instanceof uc&&e instanceof uc?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(null===n._document?null===e._document:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof Xd&&e instanceof Xd&&n._firestore===e._firestore&&rx(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}function gx(n){if(Mm(n)&&0===n.explicitOrderBy.length)throw new Ae(ae.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class c0{}function eh(n,...e){for(const t of e)n=t._apply(n);return n}class wN extends c0{constructor(e,t,r){super(),this.lc=e,this.fc=t,this.dc=r,this.type="where"}_apply(e){const t=_p(e.firestore),r=function(o,u,d,m,w,C,x){let R;if(w.isKeyField()){if("array-contains"===C||"array-contains-any"===C)throw new Ae(ae.INVALID_ARGUMENT,`Invalid Query. You can't perform '${C}' queries on documentId().`);if("in"===C||"not-in"===C){wx(x,C);const G=[];for(const X of x)G.push(Ex(m,o,X));R={arrayValue:{values:G}}}else R=Ex(m,o,x)}else"in"!==C&&"not-in"!==C&&"array-contains-any"!==C||wx(x,C),R=cx(d,"where",x,"in"===C||"not-in"===C);const H=fi.create(w,C,R);return function(G,X){if(X.S()){const tt=bI(G);if(null!==tt&&!tt.isEqual(X.field))throw new Ae(ae.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${tt.toString()}' and '${X.field.toString()}'`);const _t=Fv(G);null!==_t&&Ix(0,X.field,_t)}const Ne=function(tt,_t){for(const kt of tt.filters)if(_t.indexOf(kt.op)>=0)return kt.op;return null}(G,function(tt){switch(tt){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(X.op));if(null!==Ne)throw new Ae(ae.INVALID_ARGUMENT,Ne===X.op?`Invalid query. You cannot use more than one '${X.op.toString()}' filter.`:`Invalid query. You cannot use '${X.op.toString()}' filters with '${Ne.toString()}' filters.`)}(o,H),H}(e._query,0,t,e.firestore._databaseId,this.lc,this.fc,this.dc);return new Li(e.firestore,e.converter,function(o,u){const d=o.filters.concat([u]);return new xu(o.path,o.collectionGroup,o.explicitOrderBy.slice(),d,o.limit,o.limitType,o.startAt,o.endAt)}(e._query,r))}}class bN extends c0{constructor(e,t){super(),this.lc=e,this._c=t,this.type="orderBy"}_apply(e){const t=function(r,o,u){if(null!==r.startAt)throw new Ae(ae.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==r.endAt)throw new Ae(ae.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const d=new ec(o,u);return function(m,w){if(null===Fv(m)){const C=bI(m);null!==C&&Ix(0,C,w.field)}}(r,d),d}(e._query,this.lc,this._c);return new Li(e.firestore,e.converter,function(r,o){const u=r.explicitOrderBy.concat([o]);return new xu(r.path,r.collectionGroup,u,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(e._query,t))}}class mx extends c0{constructor(e,t,r){super(),this.type=e,this.wc=t,this.mc=r}_apply(e){return new Li(e.firestore,e.converter,jC(e._query,this.wc,this.mc))}}class yx extends c0{constructor(e,t,r){super(),this.type=e,this.gc=t,this.yc=r}_apply(e){const t=vx(e,this.type,this.gc,this.yc);return new Li(e.firestore,e.converter,(o=t,new xu((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,o,r.endAt)));var r,o}}class _x extends c0{constructor(e,t,r){super(),this.type=e,this.gc=t,this.yc=r}_apply(e){const t=vx(e,this.type,this.gc,this.yc);return new Li(e.firestore,e.converter,(o=t,new xu((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,r.startAt,o)));var r,o}}function vx(n,e,t,r){if(t[0]=(0,Pt.m9)(t[0]),t[0]instanceof u0)return function(o,u,d,m,w){if(!m)throw new Ae(ae.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${d}().`);const C=[];for(const x of tp(o))if(x.field.isKeyField())C.push(Bd(u,m.key));else{const R=m.data.field(x.field);if(Ld(R))throw new Ae(ae.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+x.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===R){const H=x.field.canonicalString();throw new Ae(ae.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${H}' (used as the orderBy) does not exist.`)}C.push(R)}return new Mu(C,w)}(n._query,n.firestore._databaseId,e,t[0]._document,r);{const o=_p(n.firestore);return function(u,d,m,w,C,x){const R=u.explicitOrderBy;if(C.length>R.length)throw new Ae(ae.INVALID_ARGUMENT,`Too many arguments provided to ${w}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const H=[];for(let G=0;G<C.length;G++){const X=C[G];if(R[G].field.isKeyField()){if("string"!=typeof X)throw new Ae(ae.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${w}(), but got a ${typeof X}`);if(!DI(u)&&-1!==X.indexOf("/"))throw new Ae(ae.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${w}() must be a plain document ID, but '${X}' contains a slash.`);const Ne=u.path.child(Jt.fromString(X));if(!Ue.isDocumentKey(Ne))throw new Ae(ae.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${w}() must result in a valid document path, but '${Ne}' is not because it contains an odd number of segments.`);const tt=new Ue(Ne);H.push(Bd(d,tt))}else{const Ne=cx(m,w,X);H.push(Ne)}}return new Mu(H,x)}(n._query,n.firestore._databaseId,o,e,t,r)}}function Ex(n,e,t){if("string"==typeof(t=(0,Pt.m9)(t))){if(""===t)throw new Ae(ae.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!DI(e)&&-1!==t.indexOf("/"))throw new Ae(ae.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(Jt.fromString(t));if(!Ue.isDocumentKey(r))throw new Ae(ae.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Bd(n,new Ue(r))}if(t instanceof kn)return Bd(n,t._key);throw new Ae(ae.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${tb(t)}.`)}function wx(n,e){if(!Array.isArray(n)||0===n.length)throw new Ae(ae.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`);if(n.length>10)throw new Ae(ae.INVALID_ARGUMENT,`Invalid Query. '${e.toString()}' filters support a maximum of 10 elements in the value array.`)}function Ix(n,e,t){if(!t.isEqual(e))throw new Ae(ae.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${t.toString()}' instead.`)}class xA{convertValue(e,t="none"){switch(Ud(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Yn(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Fd(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw et()}}convertObject(e,t){const r={};return Tu(e.fields,(o,u)=>{r[o]=this.convertValue(u,t)}),r}convertGeoPoint(e){return new rb(Yn(e.latitude),Yn(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=kC(e);return null==r?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(Vd(e));default:return null}}convertTimestamp(e){const t=Jl(e);return new Hn(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=Jt.fromString(e);It(NS(r));const o=new zo(r.get(1),r.get(3)),u=new Ue(r.popFirst(5));return o.isEqual(t)||Kn(`Document ${u} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),u}}function lb(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class RN extends xA{constructor(e){super(),this.firestore=e}convertBytes(e){return new Fu(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new kn(this.firestore,null,t)}}class bx{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=_p(e)}set(e,t,r){this._verifyNotCommitted();const o=th(e,this._firestore),u=lb(o.converter,t,r),d=sb(this._dataReader,"WriteBatch.set",o._key,u,null!==o.converter,r);return this._mutations.push(d.toMutation(o._key,or.none())),this}update(e,t,r,...o){this._verifyNotCommitted();const u=th(e,this._firestore);let d;return d="string"==typeof(t=(0,Pt.m9)(t))||t instanceof ac?AA(this._dataReader,"WriteBatch.update",u._key,t,r,o):TA(this._dataReader,"WriteBatch.update",u._key,t),this._mutations.push(d.toMutation(u._key,or.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=th(e,this._firestore);return this._mutations=this._mutations.concat(new km(t._key,or.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Ae(ae.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function th(n,e){if((n=(0,Pt.m9)(n)).firestore!==e)throw new Ae(ae.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}class wp extends xA{constructor(e){super(),this.firestore=e}convertBytes(e){return new Fu(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new kn(this.firestore,null,t)}}function Dx(n,e,t){n=en(n,kn);const r=en(n.firestore,$n),o=lb(n.converter,e,t);return ey(r,[sb(_p(r),"setDoc",n._key,o,null!==n.converter,t).toMutation(n._key,or.none())])}function Cx(n,e,t,...r){n=en(n,kn);const o=en(n.firestore,$n),u=_p(o);let d;return d="string"==typeof(e=(0,Pt.m9)(e))||e instanceof ac?AA(u,"updateDoc",n._key,e,t,r):TA(u,"updateDoc",n._key,e),ey(o,[d.toMutation(n._key,or.exists(!0))])}function Tx(n,...e){var t,r,o;n=(0,Pt.m9)(n);let u={includeMetadataChanges:!1},d=0;"object"!=typeof e[d]||DA(e[d])||(u=e[d],d++);const m={includeMetadataChanges:u.includeMetadataChanges};if(DA(e[d])){const R=e[d];e[d]=null===(t=R.next)||void 0===t?void 0:t.bind(R),e[d+1]=null===(r=R.error)||void 0===r?void 0:r.bind(R),e[d+2]=null===(o=R.complete)||void 0===o?void 0:o.bind(R)}let w,C,x;if(n instanceof kn)C=en(n.firestore,$n),x=tc(n._key.path),w={next:R=>{e[d]&&e[d](RA(C,n,R))},error:e[d+1],complete:e[d+2]};else{const R=en(n,Li);C=en(R.firestore,$n),x=R._query;const H=new wp(C);w={next:G=>{e[d]&&e[d](new Xd(C,H,R,G))},error:e[d+1],complete:e[d+2]},gx(n._query)}return function(R,H,G,X){const Ne=new XI(X),tt=new HT(H,Ne,G);return R.asyncQueue.enqueueAndForget((0,ye.Z)(function*(){return LT(yield Xm(R),tt)})),()=>{Ne.Ia(),R.asyncQueue.enqueueAndForget((0,ye.Z)(function*(){return UT(yield Xm(R),tt)}))}}(Rr(C),x,m,w)}function ey(n,e){return function(t,r){const o=new vr;return t.asyncQueue.enqueueAndForget((0,ye.Z)(function*(){return function DO(n,e,t){return WT.apply(this,arguments)}(yield wA(t),r,o)})),o.promise}(Rr(n),e)}function RA(n,e,t){const r=t.docs.get(e._key),o=new wp(n);return new uc(n,o,e._key,r,new Ep(t.hasPendingWrites,t.fromCache),e.converter)}class jN extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=_p(e)}get(e){const t=th(e,this._firestore),r=new RN(this._firestore);return this._transaction.lookup([t._key]).then(o=>{if(!o||1!==o.length)return et();const u=o[0];if(u.isFoundDocument())return new u0(this._firestore,r,u.key,u,t.converter);if(u.isNoDocument())return new u0(this._firestore,r,t._key,null,t.converter);throw et()})}set(e,t,r){const o=th(e,this._firestore),u=lb(o.converter,t,r),d=sb(this._dataReader,"Transaction.set",o._key,u,null!==o.converter,r);return this._transaction.set(o._key,d),this}update(e,t,r,...o){const u=th(e,this._firestore);let d;return d="string"==typeof(t=(0,Pt.m9)(t))||t instanceof ac?AA(this._dataReader,"Transaction.update",u._key,t,r,o):TA(this._dataReader,"Transaction.update",u._key,t),this._transaction.update(u._key,d),this}delete(e){const t=th(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=th(e,this._firestore),r=new wp(this._firestore);return super.get(e).then(o=>new uc(this._firestore,r,t._key,o._document,new Ep(!1,!1),t.converter))}}function OA(n,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new Ae("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function Sx(){if("undefined"==typeof Uint8Array)throw new Ae("unimplemented","Uint8Arrays are not available in this environment.")}function Mx(){if(!function IS(){return"undefined"!=typeof atob}())throw new Ae("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(n,e=!0){Nd=gd.SDK_VERSION,(0,gd._registerComponent)(new Ng.wA("firestore",(t,{options:r})=>{const o=t.getProvider("app").getImmediate(),u=new $n(o,new ES(t.getProvider("auth-internal")),new Jw(t.getProvider("app-check-internal")));return r=Object.assign({useFetchStreams:e},r),u._setSettings(r),u},"PUBLIC")),(0,gd.registerVersion)(Kw,"3.4.8",n),(0,gd.registerVersion)(Kw,"3.4.8","esm2017")}();class d0{constructor(e){this._delegate=e}static fromBase64String(e){return Mx(),new d0(Fu.fromBase64String(e))}static fromUint8Array(e){return Sx(),new d0(Fu.fromUint8Array(e))}toBase64(){return Mx(),this._delegate.toBase64()}toUint8Array(){return Sx(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function NA(n){return function YN(n,e){if("object"!=typeof n||null===n)return!1;const t=n;for(const r of e)if(r in t&&"function"==typeof t[r])return!0;return!1}(n,["next","error","complete"])}class QN{enableIndexedDbPersistence(e,t){return function iN(n,e){ox(n=en(n,$n));const t=Rr(n),r=n._freezeSettings(),o=new pA;return sx(t,o,new jM(o,r.cacheSizeBytes,null==e?void 0:e.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function sN(n){ox(n=en(n,$n));const e=Rr(n),t=n._freezeSettings(),r=new pA;return sx(e,r,new BO(r,t.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function oN(n){if(n._initialized&&!n._terminated)throw new Ae(ae.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new vr;return n._queue.enqueueAndForgetEvenWhileRestricted((0,ye.Z)(function*(){try{yield(t=(0,ye.Z)(function*(r){if(!Pa.vt())return Promise.resolve();const o=r+"main";yield Pa.delete(o)}),function(r){return t.apply(this,arguments)})(oT(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class xx{constructor(e,t,r){this._delegate=t,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof zo||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&Pd("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,r={}){!function XO(n,e,t,r={}){var o;const u=(n=en(n,o0))._getSettings();if("firestore.googleapis.com"!==u.host&&u.host!==e&&Pd("Host has been set in both settings() and useEmulator(), emulator host will be used"),n._setSettings(Object.assign(Object.assign({},u),{host:`${e}:${t}`,ssl:!1})),r.mockUserToken){let d,m;if("string"==typeof r.mockUserToken)d=r.mockUserToken,m=_r.MOCK_USER;else{d=(0,Pt.Sg)(r.mockUserToken,null===(o=n._app)||void 0===o?void 0:o.options.projectId);const w=r.mockUserToken.sub||r.mockUserToken.user_id;if(!w)throw new Ae(ae.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");m=new _r(w)}n._authCredentials=new Cv(new Qw(d,m))}}(this._delegate,e,t,r)}enableNetwork(){return function uN(n){return function qO(n){return n.asyncQueue.enqueue((0,ye.Z)(function*(){const e=yield qM(n),t=yield zM(n);return e.setNetworkEnabled(!0),function(r){const o=Ge(r);return o.fu.delete(0),r0(o)}(t)}))}(Rr(n=en(n,$n)))}(this._delegate)}disableNetwork(){return function lN(n){return function zO(n){return n.asyncQueue.enqueue((0,ye.Z)(function*(){const e=yield qM(n),t=yield zM(n);return e.setNetworkEnabled(!1),(r=(0,ye.Z)(function*(o){const u=Ge(o);u.fu.add(0),yield zm(u),u.wu.set("Offline")}),function(o){return r.apply(this,arguments)})(t);var r}))}(Rr(n=en(n,$n)))}(this._delegate)}enablePersistence(e){let t=!1,r=!1;return e&&(t=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,YM("synchronizeTabs",t,"experimentalForceOwningTab",r)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function aN(n){return function(e){const t=new vr;return e.asyncQueue.enqueueAndForget((0,ye.Z)(function*(){return function SO(n,e){return JT.apply(this,arguments)}(yield wA(e),t)})),t.promise}(Rr(n=en(n,$n)))}(this._delegate)}onSnapshotsInSync(e){return function BN(n,e){return function KO(n,e){const t=new XI(e);return n.asyncQueue.enqueueAndForget((0,ye.Z)(function*(){return r=yield Xm(n),o=t,Ge(r).Eu.add(o),void o.next();var r,o})),()=>{t.Ia(),n.asyncQueue.enqueueAndForget((0,ye.Z)(function*(){return r=yield Xm(n),o=t,void Ge(r).Eu.delete(o);var r,o}))}}(Rr(n=en(n,$n)),DA(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new Ae("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new ty(this,tx(this._delegate,e))}catch(t){throw as(t,"collection()","Firestore.collection()")}}doc(e){try{return new Ko(this,nb(this._delegate,e))}catch(t){throw as(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new us(this,function eN(n,e){if(n=en(n,o0),bA("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new Ae(ae.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new Li(n,null,(t=e,new xu(Jt.emptyPath(),t)));var t}(this._delegate,e))}catch(t){throw as(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function HN(n,e){return function YO(n,e){const t=new vr;return n.asyncQueue.enqueueAndForget((0,ye.Z)(function*(){const r=yield(o=n,eb(o).then(u=>u.datastore));var o;new $O(n.asyncQueue,r,e,t).run()})),t.promise}(Rr(n=en(n,$n)),t=>e(new jN(n,t)))}(this._delegate,t=>e(new Rx(this,t)))}batch(){return Rr(this._delegate),new Ox(new bx(this._delegate,e=>ey(this._delegate,e)))}loadBundle(e){return function cN(n,e){const t=Rr(n=en(n,$n)),r=new nN;return function QO(n,e,t,r){const o=function(u,d){let m;return m="string"==typeof u?(new TextEncoder).encode(u):u,w=function(w,C){if(w instanceof Uint8Array)return HM(w,C);if(w instanceof ArrayBuffer)return HM(new Uint8Array(w),C);if(w instanceof ReadableStream)return w.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(m),new jO(w,d);var w}(t,n0(e));n.asyncQueue.enqueueAndForget((0,ye.Z)(function*(){!function UO(n,e,t){const r=Ge(n);var o;(o=(0,ye.Z)(function*(u,d,m){try{const w=yield d.getMetadata();if(yield function(H,G){const X=Ge(H),Ne=ur(G.createTime);return X.persistence.runTransaction("hasNewerBundle","readonly",tt=>X._s.getBundleMetadata(tt,G.id)).then(tt=>!!tt&&tt.createTime.compareTo(Ne)>=0)}(u.localStore,w))return yield d.close(),m._completeWith({taskState:"Success",documentsLoaded:(H=w).totalDocuments,bytesLoaded:H.totalBytes,totalDocuments:H.totalDocuments,totalBytes:H.totalBytes}),Promise.resolve(new Set);m._updateProgress(RM(w));const C=new _O(w,u.localStore,d.M);let x=yield d.da();for(;x;){const H=yield C.ku(x);H&&m._updateProgress(H),x=yield d.da()}const R=yield C.complete();return yield oc(u,R.Fu,void 0),yield function(H,G){const X=Ge(H);return X.persistence.runTransaction("Save bundle","readwrite",Ne=>X._s.saveBundleMetadata(Ne,G))}(u.localStore,w),m._completeWith(R.progress),Promise.resolve(R.Ou)}catch(w){return Pd("SyncEngine",`Loading bundle failed with ${w}`),m._failWith(w),Promise.resolve(new Set)}var H}),function(u,d,m){return o.apply(this,arguments)})(r,e,t).then(o=>{r.sharedClientState.notifyBundleLoaded(o)})}(yield wA(n),o,r)}))}(t,n._databaseId,e,r),r}(this._delegate,e)}namedQuery(e){return function dN(n,e){return function JO(n,e){return n.asyncQueue.enqueue((0,ye.Z)(function*(){return function(t,r){const o=Ge(t);return o.persistence.runTransaction("Get named query","readonly",u=>o._s.getNamedQuery(u,r))}(yield EA(n),e)}))}(Rr(n=en(n,$n)),e).then(t=>t?new Li(n,null,t.query):null)}(this._delegate,e).then(t=>t?new us(this,t):null)}}class cb extends xA{constructor(e){super(),this.firestore=e}convertBytes(e){return new d0(new Fu(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return Ko.forKey(t,this.firestore,null)}}class Rx{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new cb(e)}get(e){const t=bp(e);return this._delegate.get(t).then(r=>new h0(this._firestore,new uc(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,t.converter)))}set(e,t,r){const o=bp(e);return r?(OA("Transaction.set",r),this._delegate.set(o,t,r)):this._delegate.set(o,t),this}update(e,t,r,...o){const u=bp(e);return 2===arguments.length?this._delegate.update(u,t):this._delegate.update(u,t,r,...o),this}delete(e){const t=bp(e);return this._delegate.delete(t),this}}class Ox{constructor(e){this._delegate=e}set(e,t,r){const o=bp(e);return r?(OA("WriteBatch.set",r),this._delegate.set(o,t,r)):this._delegate.set(o,t),this}update(e,t,r,...o){const u=bp(e);return 2===arguments.length?this._delegate.update(u,t):this._delegate.update(u,t,r,...o),this}delete(e){const t=bp(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class Ip{constructor(e,t,r){this._firestore=e,this._userDataWriter=t,this._delegate=r}fromFirestore(e,t){const r=new l0(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new f0(this._firestore,r),null!=t?t:{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const r=Ip.INSTANCES;let o=r.get(e);o||(o=new WeakMap,r.set(e,o));let u=o.get(t);return u||(u=new Ip(e,new cb(e),t),o.set(t,u)),u}}Ip.INSTANCES=new WeakMap;class Ko{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new cb(e)}static forPath(e,t,r){if(e.length%2!=0)throw new Ae("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new Ko(t,new kn(t._delegate,r,new Ue(e)))}static forKey(e,t,r){return new Ko(t,new kn(t._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new ty(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new ty(this.firestore,tx(this._delegate,e))}catch(t){throw as(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,Pt.m9)(e))instanceof kn&&nx(this._delegate,e)}set(e,t){t=OA("DocumentReference.set",t);try{return t?Dx(this._delegate,e,t):Dx(this._delegate,e)}catch(r){throw as(r,"setDoc()","DocumentReference.set()")}}update(e,t,...r){try{return 1===arguments.length?Cx(this._delegate,e):Cx(this._delegate,e,t,...r)}catch(o){throw as(o,"updateDoc()","DocumentReference.update()")}}delete(){return function VN(n){return ey(en(n.firestore,$n),[new km(n._key,or.none())])}(this._delegate)}onSnapshot(...e){const t=Nx(e),r=Px(e,o=>new h0(this.firestore,new uc(this.firestore._delegate,this._userDataWriter,o._key,o._document,o.metadata,this._delegate.converter)));return Tx(this._delegate,t,r)}get(e){let t;return t="cache"===(null==e?void 0:e.source)?function NN(n){n=en(n,kn);const e=en(n.firestore,$n),t=Rr(e),r=new wp(e);return function WO(n,e){const t=new vr;return n.asyncQueue.enqueueAndForget((0,ye.Z)(function*(){return(r=(0,ye.Z)(function*(o,u,d){try{const m=yield function(w,C){const x=Ge(w);return x.persistence.runTransaction("read document","readonly",R=>x.ci.Ls(R,C))}(o,u);m.isFoundDocument()?d.resolve(m):m.isNoDocument()?d.resolve(null):d.reject(new Ae(ae.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(m){const w=Km(m,`Failed to get document '${u} from cache`);d.reject(w)}}),function(o,u,d){return r.apply(this,arguments)})(yield EA(n),e,t);var r})),t.promise}(t,n._key).then(o=>new uc(e,r,n._key,o,new Ep(null!==o&&o.hasLocalMutations,!0),n.converter))}(this._delegate):"server"===(null==e?void 0:e.source)?function PN(n){n=en(n,kn);const e=en(n.firestore,$n);return WM(Rr(e),n._key,{source:"server"}).then(t=>RA(e,n,t))}(this._delegate):function ON(n){n=en(n,kn);const e=en(n.firestore,$n);return WM(Rr(e),n._key).then(t=>RA(e,n,t))}(this._delegate),t.then(r=>new h0(this.firestore,new uc(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new Ko(this.firestore,this._delegate.withConverter(e?Ip.getInstance(this.firestore,e):null))}}function as(n,e,t){return n.message=n.message.replace(e,t),n}function Nx(n){for(const e of n)if("object"==typeof e&&!NA(e))return e;return{}}function Px(n,e){var t,r;let o;return o=NA(n[0])?n[0]:NA(n[1])?n[1]:"function"==typeof n[0]?{next:n[0],error:n[1],complete:n[2]}:{next:n[1],error:n[2],complete:n[3]},{next:u=>{o.next&&o.next(e(u))},error:null===(t=o.error)||void 0===t?void 0:t.bind(o),complete:null===(r=o.complete)||void 0===r?void 0:r.bind(o)}}class h0{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new Ko(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return px(this._delegate,e._delegate)}}class f0 extends h0{data(e){const t=this._delegate.data(e);return function Yw(n,e){n||et()}(void 0!==t),t}}class us{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new cb(e)}where(e,t,r){try{return new us(this.firestore,eh(this._delegate,function IN(n,e,t){const r=e,o=ub("where",n);return new wN(o,r,t)}(e,t,r)))}catch(o){throw as(o,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new us(this.firestore,eh(this._delegate,function DN(n,e="asc"){const t=e,r=ub("orderBy",n);return new bN(r,t)}(e,t)))}catch(r){throw as(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new us(this.firestore,eh(this._delegate,function CN(n){return XM("limit",n),new mx("limit",n,"F")}(e)))}catch(t){throw as(t,"limit()","Query.limit()")}}limitToLast(e){try{return new us(this.firestore,eh(this._delegate,function TN(n){return XM("limitToLast",n),new mx("limitToLast",n,"L")}(e)))}catch(t){throw as(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new us(this.firestore,eh(this._delegate,function AN(...n){return new yx("startAt",n,!0)}(...e)))}catch(t){throw as(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new us(this.firestore,eh(this._delegate,function SN(...n){return new yx("startAfter",n,!1)}(...e)))}catch(t){throw as(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new us(this.firestore,eh(this._delegate,function MN(...n){return new _x("endBefore",n,!1)}(...e)))}catch(t){throw as(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new us(this.firestore,eh(this._delegate,function xN(...n){return new _x("endAt",n,!0)}(...e)))}catch(t){throw as(t,"endAt()","Query.endAt()")}}isEqual(e){return rx(this._delegate,e._delegate)}get(e){let t;return t="cache"===(null==e?void 0:e.source)?function FN(n){n=en(n,Li);const e=en(n.firestore,$n),t=Rr(e),r=new wp(e);return function ZO(n,e){const t=new vr;return n.asyncQueue.enqueueAndForget((0,ye.Z)(function*(){return(r=(0,ye.Z)(function*(o,u,d){try{const m=yield WI(o,u,!0),w=new PM(u,m.li),C=w.Gu(m.documents),x=w.applyChanges(C,!1);d.resolve(x.snapshot)}catch(m){const w=Km(m,`Failed to execute query '${u} against cache`);d.reject(w)}}),function(o,u,d){return r.apply(this,arguments)})(yield EA(n),e,t);var r})),t.promise}(t,n._query).then(o=>new Xd(e,r,n,o))}(this._delegate):"server"===(null==e?void 0:e.source)?function LN(n){n=en(n,Li);const e=en(n.firestore,$n),t=Rr(e),r=new wp(e);return ZM(t,n._query,{source:"server"}).then(o=>new Xd(e,r,n,o))}(this._delegate):function kN(n){n=en(n,Li);const e=en(n.firestore,$n),t=Rr(e),r=new wp(e);return gx(n._query),ZM(t,n._query).then(o=>new Xd(e,r,n,o))}(this._delegate),t.then(r=>new PA(this.firestore,new Xd(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const t=Nx(e),r=Px(e,o=>new PA(this.firestore,new Xd(this.firestore._delegate,this._userDataWriter,this._delegate,o._snapshot)));return Tx(this._delegate,t,r)}withConverter(e){return new us(this.firestore,this._delegate.withConverter(e?Ip.getInstance(this.firestore,e):null))}}class XN{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new f0(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class PA{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new us(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new f0(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new XN(this._firestore,t))}forEach(e,t){this._delegate.forEach(r=>{e.call(t,new f0(this._firestore,r))})}isEqual(e){return px(this._delegate,e._delegate)}}class ty extends us{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new Ko(this.firestore,e):null}doc(e){try{return new Ko(this.firestore,void 0===e?nb(this._delegate):nb(this._delegate,e))}catch(t){throw as(t,"doc()","CollectionReference.doc()")}}add(e){return function UN(n,e){const t=en(n.firestore,$n),r=nb(n),o=lb(n.converter,e);return ey(t,[sb(_p(n.firestore),"addDoc",r._key,o,null!==n.converter,{}).toMutation(r._key,or.exists(!1))]).then(()=>r)}(this._delegate,e).then(t=>new Ko(this.firestore,t))}isEqual(e){return nx(this._delegate,e._delegate)}withConverter(e){return new ty(this.firestore,this._delegate.withConverter(e?Ip.getInstance(this.firestore,e):null))}}function bp(n){return en(n,kn)}class kA{constructor(...e){this._delegate=new ac(...e)}static documentId(){return new kA(Yr.keyField().canonicalString())}isEqual(e){return(e=(0,Pt.m9)(e))instanceof ac&&this._delegate._internalPath.isEqual(e._internalPath)}}class Dp{constructor(e){this._delegate=e}static serverTimestamp(){const e=function GN(){return new CA("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new Dp(e)}static delete(){const e=function $N(){return new a0("deleteField")}();return e._methodName="FieldValue.delete",new Dp(e)}static arrayUnion(...e){const t=function qN(...n){return new gN("arrayUnion",n)}(...e);return t._methodName="FieldValue.arrayUnion",new Dp(t)}static arrayRemove(...e){const t=function zN(...n){return new mN("arrayRemove",n)}(...e);return t._methodName="FieldValue.arrayRemove",new Dp(t)}static increment(e){const t=function WN(n){return new yN("increment",n)}(e);return t._methodName="FieldValue.increment",new Dp(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const eP={Firestore:xx,GeoPoint:rb,Timestamp:Hn,Blob:d0,Transaction:Rx,WriteBatch:Ox,DocumentReference:Ko,DocumentSnapshot:h0,Query:us,QueryDocumentSnapshot:f0,QuerySnapshot:PA,CollectionReference:ty,FieldPath:kA,FieldValue:Dp,setLogLevel:function JN(n){!function OC(n){Na.setLogLevel(n)}(n)},CACHE_SIZE_UNLIMITED:-1};function kx(n,e){return function rP(n,e=jD.z){return new hn.y(t=>{let r;return null!=e?e.schedule(()=>{r=n.onSnapshot({includeMetadataChanges:!0},t)}):r=n.onSnapshot({includeMetadataChanges:!0},t),()=>{null!=r&&r()}})}(n,e)}function FA(n,e){return kx(n,e).pipe((0,vt.U)(t=>({payload:t,type:"query"})))}function db(n,e){return FA(n,e).pipe($h(void 0),O_(),(0,vt.U)(([t,r])=>{const o=r.payload.docChanges(),u=o.map(d=>({type:d.type,payload:d}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(r.payload.metadata)&&r.payload.docs.forEach((d,m)=>{const w=o.find(x=>x.doc.ref.isEqual(d.ref)),C=null==t?void 0:t.payload.docs.find(x=>x.ref.isEqual(d.ref));w&&JSON.stringify(w.doc.metadata)===JSON.stringify(d.metadata)||!w&&C&&JSON.stringify(C.metadata)===JSON.stringify(d.metadata)||u.push({type:"modified",payload:{oldIndex:m,newIndex:m,type:"modified",doc:d}})}),u}))}function Fx(n,e,t){return db(n,t).pipe(Yc((r,o)=>function sP(n,e,t){return e.forEach(r=>{t.indexOf(r.type)>-1&&(n=function oP(n,e){switch(e.type){case"added":if(!n[e.newIndex]||!n[e.newIndex].doc.ref.isEqual(e.doc.ref))return LA(n,e.newIndex,0,e);break;case"modified":if(null==n[e.oldIndex]||n[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return LA(n,e.newIndex,1,e)}break;case"removed":if(n[e.oldIndex]&&n[e.oldIndex].doc.ref.isEqual(e.doc.ref))return LA(n,e.oldIndex,1)}return n}(n,r))}),n}(r,o.map(u=>u.payload),e),[]),function HD(n,e=Bh.y){return n=null!=n?n:$D,(0,qr.e)((t,r)=>{let o,u=!0;t.subscribe((0,mn.x)(r,d=>{const m=e(d);(u||!n(o,m))&&(u=!1,o=m,r.next(d))}))})}(),(0,vt.U)(r=>r.map(o=>({type:o.type,payload:o}))))}function LA(n,e,t,...r){const o=n.slice();return o.splice(e,t,...r),o}function Lx(n){return(!n||0===n.length)&&(n=["added","removed","modified"]),n}!function nP(n){(function tP(n,e){n.INTERNAL.registerComponent(new Ng.wA("firestore-compat",t=>{const r=t.getProvider("app-compat").getImmediate(),o=t.getProvider("firestore").getImmediate();return e(r,o)},"PUBLIC").setServiceProps(Object.assign({},eP)))})(n,(e,t)=>new xx(e,t,new QN)),n.registerVersion("@firebase/firestore-compat","0.1.17")}(GD.Z);class Vx{constructor(e,t,r){this.ref=e,this.query=t,this.afs=r}stateChanges(e){let t=db(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe((0,vt.U)(r=>r.filter(o=>e.indexOf(o.type)>-1)))),t.pipe($h(void 0),O_(),Ns(([r,o])=>o.length>0||!r),(0,vt.U)(([r,o])=>o),zr.iC)}auditTrail(e){return this.stateChanges(e).pipe(Yc((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=Lx(e);return Fx(this.query,t,this.afs.schedulers.outsideAngular).pipe(zr.iC)}valueChanges(e={}){return FA(this.query,this.afs.schedulers.outsideAngular).pipe((0,vt.U)(t=>t.payload.docs.map(r=>e.idField?Object.assign(Object.assign({},r.data()),{[e.idField]:r.id}):r.data())),zr.iC)}get(e){return(0,An.D)(this.query.get(e)).pipe(zr.iC)}add(e){return this.ref.add(e)}doc(e){return new Ux(this.ref.doc(e),this.afs)}}class Ux{constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const r=this.ref.collection(e),{ref:o,query:u}=Bx(r,t);return new Vx(o,u,this.afs)}snapshotChanges(){return function iP(n,e){return kx(n,e).pipe($h(void 0),O_(),(0,vt.U)(([t,r])=>r.exists?(null==t?void 0:t.exists)?{payload:r,type:"modified"}:{payload:r,type:"added"}:{payload:r,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(zr.iC)}valueChanges(e={}){return this.snapshotChanges().pipe((0,vt.U)(({payload:t})=>e.idField?Object.assign(Object.assign({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return(0,An.D)(this.ref.get(e)).pipe(zr.iC)}}class aP{constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?db(this.query,this.afs.schedulers.outsideAngular).pipe((0,vt.U)(t=>t.filter(r=>e.indexOf(r.type)>-1)),Ns(t=>t.length>0),zr.iC):db(this.query,this.afs.schedulers.outsideAngular).pipe(zr.iC)}auditTrail(e){return this.stateChanges(e).pipe(Yc((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=Lx(e);return Fx(this.query,t,this.afs.schedulers.outsideAngular).pipe(zr.iC)}valueChanges(e={}){return FA(this.query,this.afs.schedulers.outsideAngular).pipe((0,vt.U)(r=>r.payload.docs.map(o=>e.idField?Object.assign({[e.idField]:o.id},o.data()):o.data())),zr.iC)}get(e){return(0,An.D)(this.query.get(e)).pipe(zr.iC)}}const uP=new f.OlP("angularfire2.enableFirestorePersistence"),lP=new f.OlP("angularfire2.firestore.persistenceSettings"),cP=new f.OlP("angularfire2.firestore.settings"),dP=new f.OlP("angularfire2.firestore.use-emulator");function Bx(n,e=(t=>t)){return{query:e(n),ref:n}}let hb=(()=>{class n{constructor(t,r,o,u,d,m,w,C,x,R,H,G,X,Ne,tt,_t,kt){this.schedulers=w;const qt=(0,fn.on)(t,m,r),St=x;R&&R_(qt,m,H,X,Ne,tt,G,_t),[this.firestore,this.persistenceEnabled$]=(0,fn.cc)(`${qt.name}.firestore`,"AngularFirestore",qt.name,()=>{const Zt=m.runOutsideAngular(()=>qt.firestore());if(u&&Zt.settings(u),St&&Zt.useEmulator(...St),o&&!tr(d)){const cn=()=>{try{return(0,An.D)(Zt.enablePersistence(C||void 0).then(()=>!0,()=>!1))}catch(Vi){return"undefined"!=typeof console&&console.warn(Vi),ct(!1)}};return[Zt,m.runOutsideAngular(cn)]}return[Zt,ct(!1)]},[u,St,o])}collection(t,r){let o;o="string"==typeof t?this.firestore.collection(t):t;const{ref:u,query:d}=Bx(o,r),m=this.schedulers.ngZone.run(()=>u);return new Vx(m,d,this)}collectionGroup(t,r){const o=r||(d=>d),u=this.firestore.collectionGroup(t);return new aP(o(u),this)}doc(t){let r;r="string"==typeof t?this.firestore.doc(t):t;const o=this.schedulers.ngZone.run(()=>r);return new Ux(o,this)}createId(){return this.firestore.collection("_").doc().id}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(fn.Dh),f.LFG(fn.xv,8),f.LFG(uP,8),f.LFG(cP,8),f.LFG(f.Lbi),f.LFG(f.R0b),f.LFG(zr.HU),f.LFG(lP,8),f.LFG(dP,8),f.LFG(Zg,8),f.LFG(zg,8),f.LFG(mf,8),f.LFG(Wg,8),f.LFG(S_,8),f.LFG(M_,8),f.LFG(x_,8),f.LFG(ss,8))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})();const hP=function(n){return["/details",n]},fP=function(n){return{data:n}};function pP(n,e){if(1&n&&(f.TgZ(0,"div",4),f._uU(1),f._UZ(2,"br")(3,"hr"),f.qZA()),2&n){const t=e.$implicit,r=f.oxw();f.Q6J("routerLink",f.VKq(6,hP,t.id))("state",f.VKq(8,fP,t)),f.xp6(1),f.AsE(" ",t.make," ",t.model," "),f.xp6(2),f.Udp("display",t==r.cloudElements[r.cloudElements.length-1]?"none":"block")}}const gP=function(){return["/admin"]},mP=function(){return["/login"]};let yP=(()=>{class n{constructor(t,r){this.router=t,this.afs=r,this.title="Store",this.cloudElements=[]}refreshDb(){this.cloudElements=[],this.afs.collection(Ul_collections_goods).get().subscribe(t=>{t.docs.forEach(r=>{const o=r.data();this.cloudElements.push(o)})})}ngOnInit(){this.refreshDb()}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(pn),f.Y36(hb))},n.\u0275cmp=f.Xpm({type:n,selectors:[["app-store"]],decls:15,vars:6,consts:[["role","main",1,"content"],[3,"routerLink"],[3,"routerLink","state",4,"ngFor","ngForOf"],[3,"click"],[3,"routerLink","state"]],template:function(t,r){1&t&&(f.TgZ(0,"div",0)(1,"h1"),f._uU(2),f.qZA(),f.TgZ(3,"nav")(4,"a",1),f._uU(5,"Admin panel"),f.qZA(),f._uU(6," | "),f.TgZ(7,"a",1),f._uU(8,"Logout"),f.qZA()(),f.TgZ(9,"main"),f.YNc(10,pP,4,10,"div",2),f.qZA(),f.TgZ(11,"footer"),f._UZ(12,"br"),f.TgZ(13,"button",3),f.NdJ("click",function(){return r.refreshDb()}),f._uU(14,"RELOAD"),f.qZA()()()),2&t&&(f.xp6(2),f.Oqu(r.title),f.xp6(2),f.Q6J("routerLink",f.DdM(4,gP)),f.xp6(3),f.Q6J("routerLink",f.DdM(5,mP)),f.xp6(3),f.Q6J("ngForOf",r.cloudElements))},directives:[nf,Vn,Rl],styles:[""]}),n})();function _P(n,e){if(1&n){const t=f.EpF();f.TgZ(0,"div"),f._uU(1),f._UZ(2,"br"),f._uU(3),f.TgZ(4,"button",3),f.NdJ("click",function(){const u=f.CHM(t).$implicit;return f.oxw().deleteComment(u)}),f._uU(5,"DELETE"),f.qZA(),f._UZ(6,"hr"),f.qZA()}if(2&n){const t=e.$implicit,r=f.oxw();f.xp6(1),f.hij(" From: ",t.author," "),f.xp6(2),f.hij(" ",t.content," "),f.xp6(3),f.Udp("display",t==r.comments[r.comments.length-1]?"none":"block")}}const vP=function(n){return["/buy",n]},EP=function(n){return{data:n}};let wP=(()=>{class n{constructor(t,r){this.route=t,this.afs=r,this.id="",this.displayData={},this.author="",this.commentText="",this.comments=[]}addComment(){this.afs.collection(Ul_collections_comments).add({item:this.id,author:this.author,content:this.commentText}).then(t=>{this.getComments(),this.author="",this.commentText=""}).catch(t=>{console.log("save error",t)})}deleteComment(t){confirm("Are you sure you want to delete this comment?")}getComments(){this.comments=[],this.afs.collection(Ul_collections_comments).get().subscribe(t=>{t.docs.forEach(r=>{const o=r.data();o.item==this.id&&this.comments.push(o)})})}ngOnInit(){this.route.paramMap.subscribe(t=>{this.id=t.get("id"),this.displayData=history.state.data,this.getComments()},t=>{console.log("parammap error",t)})}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(Lo),f.Y36(hb))},n.\u0275cmp=f.Xpm({type:n,selectors:[["app-details"]],decls:23,vars:14,consts:[[3,"routerLink","state"],["type","text","placeholder","Your name",3,"ngModel","ngModelChange"],["type","text","placeholder","Type your comment here",3,"ngModel","ngModelChange"],[3,"click"],[4,"ngFor","ngForOf"]],template:function(t,r){1&t&&(f.TgZ(0,"div")(1,"h1"),f._uU(2,"Details"),f.qZA(),f._uU(3),f._UZ(4,"br"),f._uU(5),f._UZ(6,"br"),f._uU(7),f._UZ(8,"br"),f._uU(9),f._UZ(10,"br"),f._uU(11),f._UZ(12,"br"),f.TgZ(13,"button",0),f._uU(14," BUY "),f.qZA(),f.TgZ(15,"h2"),f._uU(16,"Comments"),f.qZA(),f.TgZ(17,"div")(18,"input",1),f.NdJ("ngModelChange",function(u){return r.author=u}),f.qZA(),f.TgZ(19,"input",2),f.NdJ("ngModelChange",function(u){return r.commentText=u}),f.qZA(),f.TgZ(20,"button",3),f.NdJ("click",function(){return r.addComment()}),f._uU(21,"COMMENT"),f.qZA()(),f.YNc(22,_P,7,4,"div",4),f.qZA()),2&t&&(f.xp6(3),f.hij(" Make: ",r.displayData.make," "),f.xp6(2),f.hij(" Model: ",r.displayData.model," "),f.xp6(2),f.hij(" Doors: ",r.displayData.doors," "),f.xp6(2),f.hij(" Type: ",r.displayData.type," "),f.xp6(2),f.hij(" Price: ",r.displayData.price," "),f.xp6(2),f.Q6J("routerLink",f.VKq(10,vP,r.id))("state",f.VKq(12,EP,r.displayData)),f.xp6(5),f.Q6J("ngModel",r.author),f.xp6(1),f.Q6J("ngModel",r.commentText),f.xp6(3),f.Q6J("ngForOf",r.comments))},directives:[Rl,As,ca,lu,Vn],styles:[""]}),n})(),IP=(()=>{class n{constructor(t,r,o){this.router=t,this.route=r,this.afs=o,this.id="",this.displayData={},this.quantity=1,this.name="",this.address=""}saveOrder(){this.afs.collection(Ul_collections_orders).add({item:this.id,name:this.name,quantity:this.quantity,address:this.address}).then(t=>{alert("Order successful"),this.router.navigate(["/store"])}).catch(t=>{console.log("save error",t)})}ngOnInit(){this.route.paramMap.subscribe(t=>{this.id=t.get("id"),this.displayData=history.state.data},t=>{console.log("parammap error",t)})}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(pn),f.Y36(Lo),f.Y36(hb))},n.\u0275cmp=f.Xpm({type:n,selectors:[["app-fill-order"]],decls:17,vars:5,consts:[["type","number","placeholder","Number of items to buy",3,"ngModel","ngModelChange"],["type","name","placeholder","Your name",3,"ngModel","ngModelChange"],["type","text","placeholder","Your address",3,"ngModel","ngModelChange"],[3,"click"]],template:function(t,r){1&t&&(f.TgZ(0,"h1"),f._uU(1),f.qZA(),f.TgZ(2,"div")(3,"div")(4,"label"),f._uU(5,"Quantity"),f.qZA(),f.TgZ(6,"input",0),f.NdJ("ngModelChange",function(u){return r.quantity=u}),f.qZA()(),f.TgZ(7,"div")(8,"label"),f._uU(9,"Name"),f.qZA(),f.TgZ(10,"input",1),f.NdJ("ngModelChange",function(u){return r.name=u}),f.qZA()(),f.TgZ(11,"div")(12,"label"),f._uU(13,"Address"),f.qZA(),f.TgZ(14,"input",2),f.NdJ("ngModelChange",function(u){return r.address=u}),f.qZA()(),f.TgZ(15,"button",3),f.NdJ("click",function(){return r.saveOrder()}),f._uU(16,"CONFIRM ORDER"),f.qZA()()),2&t&&(f.xp6(1),f.AsE("Buy ",r.displayData.make," ",r.displayData.model,""),f.xp6(5),f.Q6J("ngModel",r.quantity),f.xp6(4),f.Q6J("ngModel",r.name),f.xp6(4),f.Q6J("ngModel",r.address))},directives:[wh,As,ca,lu],styles:[""]}),n})();function bP(n,e){if(1&n&&(f.ynx(0),f.TgZ(1,"tr")(2,"td"),f._uU(3),f.qZA(),f.TgZ(4,"td"),f._uU(5),f.qZA(),f.TgZ(6,"td"),f._uU(7),f.qZA(),f.TgZ(8,"td"),f._uU(9),f.qZA()(),f.BQk()),2&n){const t=e.$implicit;f.xp6(3),f.Oqu(t.item),f.xp6(2),f.Oqu(t.quantity),f.xp6(2),f.Oqu(t.name),f.xp6(2),f.Oqu(t.address)}}const DP=[{path:"login",component:BD},{path:"store",component:yP,canActivate:[Ta]},{path:"admin",component:(()=>{class n{constructor(t,r){this.router=t,this.afs=r,this.title="Store",this.orderItems=[]}refreshDb(){this.orderItems=[],this.afs.collection(Ul_collections_orders).get().subscribe(t=>{t.docs.forEach(r=>{const o=r.data();this.orderItems.push(o)})})}ngOnInit(){this.refreshDb()}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(pn),f.Y36(hb))},n.\u0275cmp=f.Xpm({type:n,selectors:[["app-admin"]],decls:16,vars:1,consts:[["role","main",1,"content"],[4,"ngFor","ngForOf"]],template:function(t,r){1&t&&(f.TgZ(0,"div",0)(1,"h1"),f._uU(2,"Admin panel"),f.qZA(),f.TgZ(3,"h2"),f._uU(4,"Order history"),f.qZA(),f.TgZ(5,"table")(6,"tr")(7,"th"),f._uU(8,"Item id"),f.qZA(),f.TgZ(9,"th"),f._uU(10,"Quantity"),f.qZA(),f.TgZ(11,"th"),f._uU(12,"Name"),f.qZA(),f.TgZ(13,"th"),f._uU(14,"Address"),f.qZA()(),f.YNc(15,bP,10,4,"ng-container",1),f.qZA()()),2&t&&(f.xp6(15),f.Q6J("ngForOf",r.orderItems))},directives:[Vn],styles:[""]}),n})(),canActivate:[Ta]},{path:"details/:id",component:wP,canActivate:[Ta]},{path:"buy/:id",component:IP,canActivate:[Ta]},{path:"",redirectTo:"login",pathMatch:"full"},{path:"**",component:cd}];let CP=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({imports:[[rf.forRoot(DP)],rf]}),n})(),TP=(()=>{class n{constructor(){this.title="kotprog"}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=f.Xpm({type:n,selectors:[["app-root"]],decls:1,vars:0,template:function(t,r){1&t&&f._UZ(0,"router-outlet")},directives:[Eg],styles:['[_nghost-%COMP%]{font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica,Arial,sans-serif,"Apple Color Emoji","Segoe UI Emoji",Segoe UI Symbol;font-size:14px;color:#333;box-sizing:border-box;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}h1[_ngcontent-%COMP%], h2[_ngcontent-%COMP%], h3[_ngcontent-%COMP%], h4[_ngcontent-%COMP%], h5[_ngcontent-%COMP%], h6[_ngcontent-%COMP%]{margin:8px 0}p[_ngcontent-%COMP%]{margin:0}.spacer[_ngcontent-%COMP%]{flex:1}.toolbar[_ngcontent-%COMP%]{position:absolute;top:0;left:0;right:0;height:60px;display:flex;align-items:center;background-color:#1976d2;color:#fff;font-weight:600}.toolbar[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{margin:0 16px}.toolbar[_ngcontent-%COMP%]   #twitter-logo[_ngcontent-%COMP%]{height:40px;margin:0 8px}.toolbar[_ngcontent-%COMP%]   #youtube-logo[_ngcontent-%COMP%]{height:40px;margin:0 16px}.toolbar[_ngcontent-%COMP%]   #twitter-logo[_ngcontent-%COMP%]:hover, .toolbar[_ngcontent-%COMP%]   #youtube-logo[_ngcontent-%COMP%]:hover{opacity:.8}.content[_ngcontent-%COMP%]{display:flex;margin:82px auto 32px;padding:0 16px;max-width:960px;flex-direction:column;align-items:center}svg.material-icons[_ngcontent-%COMP%]{height:24px;width:auto}svg.material-icons[_ngcontent-%COMP%]:not(:last-child){margin-right:8px}.card[_ngcontent-%COMP%]   svg.material-icons[_ngcontent-%COMP%]   path[_ngcontent-%COMP%]{fill:#888}.card-container[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;justify-content:center;margin-top:16px}.card[_ngcontent-%COMP%]{all:unset;border-radius:4px;border:1px solid #eee;background-color:#fafafa;height:40px;width:200px;margin:0 8px 16px;padding:16px;display:flex;flex-direction:row;justify-content:center;align-items:center;transition:all .2s ease-in-out;line-height:24px}.card-container[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]:not(:last-child){margin-right:0}.card.card-small[_ngcontent-%COMP%]{height:16px;width:168px}.card-container[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]:not(.highlight-card){cursor:pointer}.card-container[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]:not(.highlight-card):hover{transform:translateY(-3px);box-shadow:0 4px 17px #00000059}.card-container[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]:not(.highlight-card):hover   .material-icons[_ngcontent-%COMP%]   path[_ngcontent-%COMP%]{fill:#696767}.card.highlight-card[_ngcontent-%COMP%]{background-color:#1976d2;color:#fff;font-weight:600;border:none;width:auto;min-width:30%;position:relative}.card.card.highlight-card[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{margin-left:60px}svg#rocket[_ngcontent-%COMP%]{width:80px;position:absolute;left:-10px;top:-24px}svg#rocket-smoke[_ngcontent-%COMP%]{height:calc(100vh - 95px);position:absolute;top:10px;right:180px;z-index:-10}a[_ngcontent-%COMP%], a[_ngcontent-%COMP%]:visited, a[_ngcontent-%COMP%]:hover{color:#1976d2;text-decoration:none}a[_ngcontent-%COMP%]:hover{color:#125699}.terminal[_ngcontent-%COMP%]{position:relative;width:80%;max-width:600px;border-radius:6px;padding-top:45px;margin-top:8px;overflow:hidden;background-color:#0f0f10}.terminal[_ngcontent-%COMP%]:before{content:"\\2022\\2022\\2022";position:absolute;top:0;left:0;height:4px;background:rgb(58,58,58);color:#c2c3c4;width:100%;font-size:2rem;line-height:0;padding:14px 0;text-indent:4px}.terminal[_ngcontent-%COMP%]   pre[_ngcontent-%COMP%]{font-family:SFMono-Regular,Consolas,Liberation Mono,Menlo,monospace;color:#fff;padding:0 1rem 1rem;margin:0}.circle-link[_ngcontent-%COMP%]{height:40px;width:40px;border-radius:40px;margin:8px;background-color:#fff;border:1px solid #eeeeee;display:flex;justify-content:center;align-items:center;cursor:pointer;box-shadow:0 1px 3px #0000001f,0 1px 2px #0000003d;transition:1s ease-out}.circle-link[_ngcontent-%COMP%]:hover{transform:translateY(-.25rem);box-shadow:0 3px 15px #0003}footer[_ngcontent-%COMP%]{margin-top:8px;display:flex;align-items:center;line-height:20px}footer[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{display:flex;align-items:center}.github-star-badge[_ngcontent-%COMP%]{color:#24292e;display:flex;align-items:center;font-size:12px;padding:3px 10px;border:1px solid rgba(27,31,35,.2);border-radius:3px;background-image:linear-gradient(-180deg,#fafbfc,#eff3f6 90%);margin-left:4px;font-weight:600}.github-star-badge[_ngcontent-%COMP%]:hover{background-image:linear-gradient(-180deg,#f0f3f6,#e6ebf1 90%);border-color:#1b1f2359;background-position:-.5em}.github-star-badge[_ngcontent-%COMP%]   .material-icons[_ngcontent-%COMP%]{height:16px;width:16px;margin-right:4px}svg#clouds[_ngcontent-%COMP%]{position:fixed;bottom:-160px;left:-230px;z-index:-10;width:1920px}@media screen and (max-width: 767px){.card-container[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]:not(.circle-link), .terminal[_ngcontent-%COMP%]{width:100%}.card[_ngcontent-%COMP%]:not(.highlight-card){height:16px;margin:8px 0}.card.highlight-card[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{margin-left:72px}svg#rocket-smoke[_ngcontent-%COMP%]{right:120px;transform:rotate(-5deg)}}@media screen and (max-width: 575px){svg#rocket-smoke[_ngcontent-%COMP%]{display:none;visibility:hidden}}']}),n})(),AP=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n,bootstrap:[TP]}),n.\u0275inj=f.cJS({providers:[],imports:[[sa,CP,vl,Zc,fn.hO.initializeApp(Ul_firebase)]]}),n})();(0,f.G48)(),Wu().bootstrapModule(AP).catch(n=>console.error(n))},5867:(it,Ce,k)=>{k.d(Ce,{C6:()=>f.getApps,Mq:()=>f.getApp});var f=k(9681);(0,f.registerVersion)("firebase","9.7.0","app")},127:(it,Ce,k)=>{k.d(Ce,{Z:()=>f.Z});var f=k(3942);f.Z.registerVersion("firebase","9.7.0","app-compat")},820:(it,Ce,k)=>{k.r(Ce);var f=k(5861),Z=k(3942),P=k(2090),oe=k(9681),J=k(655),fe=k(1877),re=k(4859);const xe=function $e(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."}},ke=function Te(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},de=new P.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),Ye=new fe.Yd("@firebase/auth");function ze(y,...h){Ye.logLevel<=fe.in.ERROR&&Ye.error(`Auth (${oe.SDK_VERSION}): ${y}`,...h)}function be(y,...h){throw Be(y,...h)}function me(y,...h){return Be(y,...h)}function _e(y,h,g){const v=Object.assign(Object.assign({},ke()),{[h]:g});return new P.LL("auth","Firebase",v).create(h,{appName:y.name})}function je(y,h,g){if(!(h instanceof g))throw g.name!==h.constructor.name&&be(y,"argument-error"),_e(y,"argument-error",`Type of ${h.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Be(y,...h){if("string"!=typeof y){const g=h[0],v=[...h.slice(1)];return v[0]&&(v[0].appName=y.name),y._errorFactory.create(g,...v)}return de.create(y,...h)}function ne(y,h,...g){if(!y)throw Be(h,...g)}function qe(y){const h="INTERNAL ASSERTION FAILED: "+y;throw ze(h),new Error(h)}function Q(y,h){y||qe(h)}const se=new Map;function ee(y){Q(y instanceof Function,"Expected a class definition");let h=se.get(y);return h?(Q(h instanceof y,"Instance stored in cache mismatched with class"),h):(h=new y,se.set(y,h),h)}function Pe(){var y;return"undefined"!=typeof self&&(null===(y=self.location)||void 0===y?void 0:y.href)||""}function wt(){return"http:"===$t()||"https:"===$t()}function $t(){var y;return"undefined"!=typeof self&&(null===(y=self.location)||void 0===y?void 0:y.protocol)||null}class Lt{constructor(h,g){this.shortDelay=h,this.longDelay=g,Q(g>h,"Short delay should be less than long delay!"),this.isMobile=(0,P.uI)()||(0,P.b$)()}get(){return function tn(){return!("undefined"!=typeof navigator&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(wt()||(0,P.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function Gn(y,h){Q(y.emulator,"Emulator should always be set here");const{url:g}=y.emulator;return h?`${g}${h.startsWith("/")?h.slice(1):h}`:g}class wn{static initialize(h,g,v){this.fetchImpl=h,g&&(this.headersImpl=g),v&&(this.responseImpl=v)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!=typeof self&&"fetch"in self?self.fetch:void qe("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!=typeof self&&"Headers"in self?self.Headers:void qe("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!=typeof self&&"Response"in self?self.Response:void qe("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const Kt={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},mi=new Lt(3e4,6e4);function zt(y,h){return y.tenantId&&!h.tenantId?Object.assign(Object.assign({},h),{tenantId:y.tenantId}):h}function Vt(y,h,g,v){return Qn.apply(this,arguments)}function Qn(){return(Qn=(0,f.Z)(function*(y,h,g,v,T={}){return Qr(y,T,(0,f.Z)(function*(){let O={},q={};v&&("GET"===h?q=v:O={body:JSON.stringify(v)});const ie=(0,P.xO)(Object.assign({key:y.config.apiKey},q)).slice(1),Ve=yield y._getAdditionalHeaders();return Ve["Content-Type"]="application/json",y.languageCode&&(Ve["X-Firebase-Locale"]=y.languageCode),wn.fetch()(Ir(y,y.config.apiHost,g,ie),Object.assign({method:h,headers:Ve,referrerPolicy:"no-referrer"},O))}))})).apply(this,arguments)}function Qr(y,h,g){return ls.apply(this,arguments)}function ls(){return(ls=(0,f.Z)(function*(y,h,g){y._canInitEmulator=!1;const v=Object.assign(Object.assign({},Kt),h);try{const T=new Ui(y),O=yield Promise.race([g(),T.promise]);T.clearNetworkTimeout();const q=yield O.json();if("needConfirmation"in q)throw Bi(y,"account-exists-with-different-credential",q);if(O.ok&&!("errorMessage"in q))return q;{const ie=O.ok?q.errorMessage:q.error.message,[Ve,Je]=ie.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===Ve)throw Bi(y,"credential-already-in-use",q);if("EMAIL_EXISTS"===Ve)throw Bi(y,"email-already-in-use",q);const gt=v[Ve]||Ve.toLowerCase().replace(/[_\s]+/g,"-");if(Je)throw _e(y,gt,Je);be(y,gt)}}catch(T){if(T instanceof P.ZR)throw T;be(y,"network-request-failed")}})).apply(this,arguments)}function wr(y,h,g,v){return Mi.apply(this,arguments)}function Mi(){return(Mi=(0,f.Z)(function*(y,h,g,v,T={}){const O=yield Vt(y,h,g,v,T);return"mfaPendingCredential"in O&&be(y,"multi-factor-auth-required",{_serverResponse:O}),O})).apply(this,arguments)}function Ir(y,h,g,v){const T=`${h}${g}?${v}`;return y.config.emulator?Gn(y.config,T):`${y.config.apiScheme}://${T}`}class Ui{constructor(h){this.auth=h,this.timer=null,this.promise=new Promise((g,v)=>{this.timer=setTimeout(()=>v(me(this.auth,"network-request-failed")),mi.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Bi(y,h,g){const v={appName:y.name};g.email&&(v.email=g.email),g.phoneNumber&&(v.phoneNumber=g.phoneNumber);const T=me(y,h,v);return T.customData._tokenResponse=g,T}function Or(){return(Or=(0,f.Z)(function*(y,h){return Vt(y,"POST","/v1/accounts:delete",h)})).apply(this,arguments)}function qn(y,h){return Fn.apply(this,arguments)}function Fn(){return(Fn=(0,f.Z)(function*(y,h){return Vt(y,"POST","/v1/accounts:update",h)})).apply(this,arguments)}function Jr(y,h){return js.apply(this,arguments)}function js(){return(js=(0,f.Z)(function*(y,h){return Vt(y,"POST","/v1/accounts:lookup",h)})).apply(this,arguments)}function dn(y){if(y)try{const h=new Date(Number(y));if(!isNaN(h.getTime()))return h.toUTCString()}catch(h){}}function Yo(){return(Yo=(0,f.Z)(function*(y,h=!1){const g=(0,P.m9)(y),v=yield g.getIdToken(h),T=rt(v);ne(T&&T.exp&&T.auth_time&&T.iat,g.auth,"internal-error");const O="object"==typeof T.firebase?T.firebase:void 0,q=null==O?void 0:O.sign_in_provider;return{claims:T,token:v,authTime:dn(Ut(T.auth_time)),issuedAtTime:dn(Ut(T.iat)),expirationTime:dn(Ut(T.exp)),signInProvider:q||null,signInSecondFactor:(null==O?void 0:O.sign_in_second_factor)||null}})).apply(this,arguments)}function Ut(y){return 1e3*Number(y)}function rt(y){const[h,g,v]=y.split(".");if(void 0===h||void 0===g||void 0===v)return ze("JWT malformed, contained fewer than 3 sections"),null;try{const T=(0,P.tV)(g);return T?JSON.parse(T):(ze("Failed to decode base64 JWT payload"),null)}catch(T){return ze("Caught error parsing JWT payload as JSON",T),null}}function Jn(y,h){return xi.apply(this,arguments)}function xi(){return(xi=(0,f.Z)(function*(y,h,g=!1){if(g)return h;try{return yield h}catch(v){throw v instanceof P.ZR&&Ft(v)&&y.auth.currentUser===y&&(yield y.auth.signOut()),v}})).apply(this,arguments)}function Ft({code:y}){return"auth/user-disabled"===y||"auth/user-token-expired"===y}class Hs{constructor(h){this.user=h,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){!this.isRunning||(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(h){var g;if(h){const v=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),v}{this.errorBackoff=3e4;const T=(null!==(g=this.user.stsTokenManager.expirationTime)&&void 0!==g?g:0)-Date.now()-3e5;return Math.max(0,T)}}schedule(h=!1){var g=this;if(!this.isRunning)return;const v=this.getInterval(h);this.timerId=setTimeout((0,f.Z)(function*(){yield g.iteration()}),v)}iteration(){var h=this;return(0,f.Z)(function*(){try{yield h.user.getIdToken(!0)}catch(g){return void("auth/network-request-failed"===g.code&&h.schedule(!0))}h.schedule()})()}}class lr{constructor(h,g){this.createdAt=h,this.lastLoginAt=g,this._initializeTime()}_initializeTime(){this.lastSignInTime=dn(this.lastLoginAt),this.creationTime=dn(this.createdAt)}_copy(h){this.createdAt=h.createdAt,this.lastLoginAt=h.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function Xn(y){return at.apply(this,arguments)}function at(){return(at=(0,f.Z)(function*(y){var h;const g=y.auth,v=yield y.getIdToken(),T=yield Jn(y,Jr(g,{idToken:v}));ne(null==T?void 0:T.users.length,g,"internal-error");const O=T.users[0];y._notifyReloadListener(O);const q=(null===(h=O.providerUserInfo)||void 0===h?void 0:h.length)?De(O.providerUserInfo):[],ie=We(y.providerData,q),gt=!!y.isAnonymous&&!(y.email&&O.passwordHash||(null==ie?void 0:ie.length)),st={uid:O.localId,displayName:O.displayName||null,photoURL:O.photoUrl||null,email:O.email||null,emailVerified:O.emailVerified||!1,phoneNumber:O.phoneNumber||null,tenantId:O.tenantId||null,providerData:ie,metadata:new lr(O.createdAt,O.lastLoginAt),isAnonymous:gt};Object.assign(y,st)})).apply(this,arguments)}function Ot(){return(Ot=(0,f.Z)(function*(y){const h=(0,P.m9)(y);yield Xn(h),yield h.auth._persistUserIfCurrent(h),h.auth._notifyListenersIfCurrent(h)})).apply(this,arguments)}function We(y,h){return[...y.filter(v=>!h.some(T=>T.providerId===v.providerId)),...h]}function De(y){return y.map(h=>{var{providerId:g}=h,v=(0,J._T)(h,["providerId"]);return{providerId:g,uid:v.rawId||"",displayName:v.displayName||null,email:v.email||null,phoneNumber:v.phoneNumber||null,photoURL:v.photoUrl||null}})}function ut(){return(ut=(0,f.Z)(function*(y,h){const g=yield Qr(y,{},(0,f.Z)(function*(){const v=(0,P.xO)({grant_type:"refresh_token",refresh_token:h}).slice(1),{tokenApiHost:T,apiKey:O}=y.config,q=Ir(y,T,"/v1/token",`key=${O}`),ie=yield y._getAdditionalHeaders();return ie["Content-Type"]="application/x-www-form-urlencoded",wn.fetch()(q,{method:"POST",headers:ie,body:v})}));return{accessToken:g.access_token,expiresIn:g.expires_in,refreshToken:g.refresh_token}})).apply(this,arguments)}class Nt{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(h){ne(h.idToken,"internal-error"),ne(void 0!==h.idToken,"internal-error"),ne(void 0!==h.refreshToken,"internal-error");const g="expiresIn"in h&&void 0!==h.expiresIn?Number(h.expiresIn):function mt(y){const h=rt(y);return ne(h,"internal-error"),ne(void 0!==h.exp,"internal-error"),ne(void 0!==h.iat,"internal-error"),Number(h.exp)-Number(h.iat)}(h.idToken);this.updateTokensAndExpiration(h.idToken,h.refreshToken,g)}getToken(h,g=!1){var v=this;return(0,f.Z)(function*(){return ne(!v.accessToken||v.refreshToken,h,"user-token-expired"),g||!v.accessToken||v.isExpired?v.refreshToken?(yield v.refresh(h,v.refreshToken),v.accessToken):null:v.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(h,g){var v=this;return(0,f.Z)(function*(){const{accessToken:T,refreshToken:O,expiresIn:q}=yield function Ke(y,h){return ut.apply(this,arguments)}(h,g);v.updateTokensAndExpiration(T,O,Number(q))})()}updateTokensAndExpiration(h,g,v){this.refreshToken=g||null,this.accessToken=h||null,this.expirationTime=Date.now()+1e3*v}static fromJSON(h,g){const{refreshToken:v,accessToken:T,expirationTime:O}=g,q=new Nt;return v&&(ne("string"==typeof v,"internal-error",{appName:h}),q.refreshToken=v),T&&(ne("string"==typeof T,"internal-error",{appName:h}),q.accessToken=T),O&&(ne("number"==typeof O,"internal-error",{appName:h}),q.expirationTime=O),q}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(h){this.accessToken=h.accessToken,this.refreshToken=h.refreshToken,this.expirationTime=h.expirationTime}_clone(){return Object.assign(new Nt,this.toJSON())}_performRefresh(){return qe("not implemented")}}function Mt(y,h){ne("string"==typeof y||void 0===y,"internal-error",{appName:h})}class U{constructor(h){var{uid:g,auth:v,stsTokenManager:T}=h,O=(0,J._T)(h,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Hs(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=g,this.auth=v,this.stsTokenManager=T,this.accessToken=T.accessToken,this.displayName=O.displayName||null,this.email=O.email||null,this.emailVerified=O.emailVerified||!1,this.phoneNumber=O.phoneNumber||null,this.photoURL=O.photoURL||null,this.isAnonymous=O.isAnonymous||!1,this.tenantId=O.tenantId||null,this.providerData=O.providerData?[...O.providerData]:[],this.metadata=new lr(O.createdAt||void 0,O.lastLoginAt||void 0)}getIdToken(h){var g=this;return(0,f.Z)(function*(){const v=yield Jn(g,g.stsTokenManager.getToken(g.auth,h));return ne(v,g.auth,"internal-error"),g.accessToken!==v&&(g.accessToken=v,yield g.auth._persistUserIfCurrent(g),g.auth._notifyListenersIfCurrent(g)),v})()}getIdTokenResult(h){return function cs(y){return Yo.apply(this,arguments)}(this,h)}reload(){return function cr(y){return Ot.apply(this,arguments)}(this)}_assign(h){this!==h&&(ne(this.uid===h.uid,this.auth,"internal-error"),this.displayName=h.displayName,this.photoURL=h.photoURL,this.email=h.email,this.emailVerified=h.emailVerified,this.phoneNumber=h.phoneNumber,this.isAnonymous=h.isAnonymous,this.tenantId=h.tenantId,this.providerData=h.providerData.map(g=>Object.assign({},g)),this.metadata._copy(h.metadata),this.stsTokenManager._assign(h.stsTokenManager))}_clone(h){return new U(Object.assign(Object.assign({},this),{auth:h,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(h){ne(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=h,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(h){this.reloadListener?this.reloadListener(h):this.reloadUserInfo=h}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(h,g=!1){var v=this;return(0,f.Z)(function*(){let T=!1;h.idToken&&h.idToken!==v.stsTokenManager.accessToken&&(v.stsTokenManager.updateFromServerResponse(h),T=!0),g&&(yield Xn(v)),yield v.auth._persistUserIfCurrent(v),T&&v.auth._notifyListenersIfCurrent(v)})()}delete(){var h=this;return(0,f.Z)(function*(){const g=yield h.getIdToken();return yield Jn(h,function ot(y,h){return Or.apply(this,arguments)}(h.auth,{idToken:g})),h.stsTokenManager.clearRefreshToken(),h.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(h=>Object.assign({},h)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(h,g){var v,T,O,q,ie,Ve,Je,gt;const st=null!==(v=g.displayName)&&void 0!==v?v:void 0,Dn=null!==(T=g.email)&&void 0!==T?T:void 0,Di=null!==(O=g.phoneNumber)&&void 0!==O?O:void 0,wa=null!==(q=g.photoURL)&&void 0!==q?q:void 0,fu=null!==(ie=g.tenantId)&&void 0!==ie?ie:void 0,pu=null!==(Ve=g._redirectEventId)&&void 0!==Ve?Ve:void 0,Fh=null!==(Je=g.createdAt)&&void 0!==Je?Je:void 0,Lh=null!==(gt=g.lastLoginAt)&&void 0!==gt?gt:void 0,{uid:ko,emailVerified:Vh,isAnonymous:ag,providerData:Uh,stsTokenManager:Zc}=g;ne(ko&&Zc,h,"internal-error");const b0=Nt.fromJSON(this.name,Zc);ne("string"==typeof ko,h,"internal-error"),Mt(st,h.name),Mt(Dn,h.name),ne("boolean"==typeof Vh,h,"internal-error"),ne("boolean"==typeof ag,h,"internal-error"),Mt(Di,h.name),Mt(wa,h.name),Mt(fu,h.name),Mt(pu,h.name),Mt(Fh,h.name),Mt(Lh,h.name);const ug=new U({uid:ko,auth:h,email:Dn,emailVerified:Vh,displayName:st,isAnonymous:ag,photoURL:wa,phoneNumber:Di,tenantId:fu,stsTokenManager:b0,createdAt:Fh,lastLoginAt:Lh});return Uh&&Array.isArray(Uh)&&(ug.providerData=Uh.map(Fo=>Object.assign({},Fo))),pu&&(ug._redirectEventId=pu),ug}static _fromIdTokenResponse(h,g,v=!1){return(0,f.Z)(function*(){const T=new Nt;T.updateFromServerResponse(g);const O=new U({uid:g.localId,auth:h,stsTokenManager:T,isAnonymous:v});return yield Xn(O),O})()}}const $=(()=>{class y{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,f.Z)(function*(){return!0})()}_set(g,v){var T=this;return(0,f.Z)(function*(){T.storage[g]=v})()}_get(g){var v=this;return(0,f.Z)(function*(){const T=v.storage[g];return void 0===T?null:T})()}_remove(g){var v=this;return(0,f.Z)(function*(){delete v.storage[g]})()}_addListener(g,v){}_removeListener(g,v){}}return y.type="NONE",y})();function le(y,h,g){return`firebase:${y}:${h}:${g}`}class K{constructor(h,g,v){this.persistence=h,this.auth=g,this.userKey=v;const{config:T,name:O}=this.auth;this.fullUserKey=le(this.userKey,T.apiKey,O),this.fullPersistenceKey=le("persistence",T.apiKey,O),this.boundEventHandler=g._onStorageEvent.bind(g),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(h){return this.persistence._set(this.fullUserKey,h.toJSON())}getCurrentUser(){var h=this;return(0,f.Z)(function*(){const g=yield h.persistence._get(h.fullUserKey);return g?U._fromJSON(h.auth,g):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(h){var g=this;return(0,f.Z)(function*(){if(g.persistence===h)return;const v=yield g.getCurrentUser();return yield g.removeCurrentUser(),g.persistence=h,v?g.setCurrentUser(v):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(h,g,v="authUser"){return(0,f.Z)(function*(){if(!g.length)return new K(ee($),h,v);const T=(yield Promise.all(g.map(function(){var Je=(0,f.Z)(function*(gt){if(yield gt._isAvailable())return gt});return function(gt){return Je.apply(this,arguments)}}()))).filter(Je=>Je);let O=T[0]||ee($);const q=le(v,h.config.apiKey,h.name);let ie=null;for(const Je of g)try{const gt=yield Je._get(q);if(gt){const st=U._fromJSON(h,gt);Je!==O&&(ie=st),O=Je;break}}catch(gt){}const Ve=T.filter(Je=>Je._shouldAllowMigration);return O._shouldAllowMigration&&Ve.length?(O=Ve[0],ie&&(yield O._set(q,ie.toJSON())),yield Promise.all(g.map(function(){var Je=(0,f.Z)(function*(gt){if(gt!==O)try{yield gt._remove(q)}catch(st){}});return function(gt){return Je.apply(this,arguments)}}())),new K(O,h,v)):new K(O,h,v)})()}}function Fe(y){const h=y.toLowerCase();if(h.includes("opera/")||h.includes("opr/")||h.includes("opios/"))return"Opera";if(Bt(h))return"IEMobile";if(h.includes("msie")||h.includes("trident/"))return"IE";if(h.includes("edge/"))return"Edge";if(ft(h))return"Firefox";if(h.includes("silk/"))return"Silk";if(Ct(h))return"Blackberry";if(an(h))return"Webos";if(Wt(h))return"Safari";if((h.includes("chrome/")||dr(h))&&!h.includes("edge/"))return"Chrome";if(In(h))return"Android";{const v=y.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===(null==v?void 0:v.length))return v[1]}return"Other"}function ft(y=(0,P.z$)()){return/firefox\//i.test(y)}function Wt(y=(0,P.z$)()){const h=y.toLowerCase();return h.includes("safari/")&&!h.includes("chrome/")&&!h.includes("crios/")&&!h.includes("android")}function dr(y=(0,P.z$)()){return/crios\//i.test(y)}function Bt(y=(0,P.z$)()){return/iemobile/i.test(y)}function In(y=(0,P.z$)()){return/android/i.test(y)}function Ct(y=(0,P.z$)()){return/blackberry/i.test(y)}function an(y=(0,P.z$)()){return/webos/i.test(y)}function Wn(y=(0,P.z$)()){return/iphone|ipad|ipod/i.test(y)}function ji(y=(0,P.z$)()){return Wn(y)||In(y)||an(y)||Ct(y)||/windows phone/i.test(y)||Bt(y)}function Jo(y,h=[]){let g;switch(y){case"Browser":g=Fe((0,P.z$)());break;case"Worker":g=`${Fe((0,P.z$)())}-${y}`;break;default:g=y}const v=h.length?h.join(","):"FirebaseCore-web";return`${g}/JsCore/${oe.SDK_VERSION}/${v}`}class Xr{constructor(h,g,v){this.app=h,this.heartbeatServiceProvider=g,this.config=v,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new At(this),this.idTokenSubscription=new At(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=de,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=h.name,this.clientVersion=v.sdkClientVersion}_initializeWithPersistence(h,g){var v=this;return g&&(this._popupRedirectResolver=ee(g)),this._initializationPromise=this.queue((0,f.Z)(function*(){var T,O;if(!v._deleted&&(v.persistenceManager=yield K.create(v,h),!v._deleted)){if(null===(T=v._popupRedirectResolver)||void 0===T?void 0:T._shouldInitProactively)try{yield v._popupRedirectResolver._initialize(v)}catch(q){}yield v.initializeCurrentUser(g),v.lastNotifiedUid=(null===(O=v.currentUser)||void 0===O?void 0:O.uid)||null,!v._deleted&&(v._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var h=this;return(0,f.Z)(function*(){if(h._deleted)return;const g=yield h.assertedPersistence.getCurrentUser();if(h.currentUser||g){if(h.currentUser&&g&&h.currentUser.uid===g.uid)return h._currentUser._assign(g),void(yield h.currentUser.getIdToken());yield h._updateCurrentUser(g)}})()}initializeCurrentUser(h){var g=this;return(0,f.Z)(function*(){var v;let T=yield g.assertedPersistence.getCurrentUser();if(h&&g.config.authDomain){yield g.getOrInitRedirectPersistenceManager();const O=null===(v=g.redirectUser)||void 0===v?void 0:v._redirectEventId,q=null==T?void 0:T._redirectEventId,ie=yield g.tryRedirectSignIn(h);(!O||O===q)&&(null==ie?void 0:ie.user)&&(T=ie.user)}return T?T._redirectEventId?(ne(g._popupRedirectResolver,g,"argument-error"),yield g.getOrInitRedirectPersistenceManager(),g.redirectUser&&g.redirectUser._redirectEventId===T._redirectEventId?g.directlySetCurrentUser(T):g.reloadAndSetCurrentUserOrClear(T)):g.reloadAndSetCurrentUserOrClear(T):g.directlySetCurrentUser(null)})()}tryRedirectSignIn(h){var g=this;return(0,f.Z)(function*(){let v=null;try{v=yield g._popupRedirectResolver._completeRedirectFn(g,h,!0)}catch(T){yield g._setRedirectUser(null)}return v})()}reloadAndSetCurrentUserOrClear(h){var g=this;return(0,f.Z)(function*(){try{yield Xn(h)}catch(v){if("auth/network-request-failed"!==v.code)return g.directlySetCurrentUser(null)}return g.directlySetCurrentUser(h)})()}useDeviceLanguage(){this.languageCode=function He(){if("undefined"==typeof navigator)return null;const y=navigator;return y.languages&&y.languages[0]||y.language||null}()}_delete(){var h=this;return(0,f.Z)(function*(){h._deleted=!0})()}updateCurrentUser(h){var g=this;return(0,f.Z)(function*(){const v=h?(0,P.m9)(h):null;return v&&ne(v.auth.config.apiKey===g.config.apiKey,g,"invalid-user-token"),g._updateCurrentUser(v&&v._clone(g))})()}_updateCurrentUser(h){var g=this;return(0,f.Z)(function*(){if(!g._deleted)return h&&ne(g.tenantId===h.tenantId,g,"tenant-id-mismatch"),g.queue((0,f.Z)(function*(){yield g.directlySetCurrentUser(h),g.notifyAuthListeners()}))})()}signOut(){var h=this;return(0,f.Z)(function*(){return(h.redirectPersistenceManager||h._popupRedirectResolver)&&(yield h._setRedirectUser(null)),h._updateCurrentUser(null)})()}setPersistence(h){var g=this;return this.queue((0,f.Z)(function*(){yield g.assertedPersistence.setPersistence(ee(h))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(h){this._errorFactory=new P.LL("auth","Firebase",h())}onAuthStateChanged(h,g,v){return this.registerStateListener(this.authStateSubscription,h,g,v)}onIdTokenChanged(h,g,v){return this.registerStateListener(this.idTokenSubscription,h,g,v)}toJSON(){var h;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(h=this._currentUser)||void 0===h?void 0:h.toJSON()}}_setRedirectUser(h,g){var v=this;return(0,f.Z)(function*(){const T=yield v.getOrInitRedirectPersistenceManager(g);return null===h?T.removeCurrentUser():T.setCurrentUser(h)})()}getOrInitRedirectPersistenceManager(h){var g=this;return(0,f.Z)(function*(){if(!g.redirectPersistenceManager){const v=h&&ee(h)||g._popupRedirectResolver;ne(v,g,"argument-error"),g.redirectPersistenceManager=yield K.create(g,[ee(v._redirectPersistence)],"redirectUser"),g.redirectUser=yield g.redirectPersistenceManager.getCurrentUser()}return g.redirectPersistenceManager})()}_redirectUserForId(h){var g=this;return(0,f.Z)(function*(){var v,T;return g._isInitialized&&(yield g.queue((0,f.Z)(function*(){}))),(null===(v=g._currentUser)||void 0===v?void 0:v._redirectEventId)===h?g._currentUser:(null===(T=g.redirectUser)||void 0===T?void 0:T._redirectEventId)===h?g.redirectUser:null})()}_persistUserIfCurrent(h){var g=this;return(0,f.Z)(function*(){if(h===g.currentUser)return g.queue((0,f.Z)(function*(){return g.directlySetCurrentUser(h)}))})()}_notifyListenersIfCurrent(h){h===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var h,g;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const v=null!==(g=null===(h=this.currentUser)||void 0===h?void 0:h.uid)&&void 0!==g?g:null;this.lastNotifiedUid!==v&&(this.lastNotifiedUid=v,this.authStateSubscription.next(this.currentUser))}registerStateListener(h,g,v,T){if(this._deleted)return()=>{};const O="function"==typeof g?g:g.next.bind(g),q=this._isInitialized?Promise.resolve():this._initializationPromise;return ne(q,this,"internal-error"),q.then(()=>O(this.currentUser)),"function"==typeof g?h.addObserver(g,v,T):h.addObserver(g)}directlySetCurrentUser(h){var g=this;return(0,f.Z)(function*(){g.currentUser&&g.currentUser!==h&&(g._currentUser._stopProactiveRefresh(),h&&g.isProactiveRefreshEnabled&&h._startProactiveRefresh()),g.currentUser=h,h?yield g.assertedPersistence.setCurrentUser(h):yield g.assertedPersistence.removeCurrentUser()})()}queue(h){return this.operations=this.operations.then(h,h),this.operations}get assertedPersistence(){return ne(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(h){!h||this.frameworks.includes(h)||(this.frameworks.push(h),this.frameworks.sort(),this.clientVersion=Jo(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var h=this;return(0,f.Z)(function*(){var g;const v={"X-Client-Version":h.clientVersion};h.app.options.appId&&(v["X-Firebase-gmpid"]=h.app.options.appId);const T=yield null===(g=h.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===g?void 0:g.getHeartbeatsHeader();return T&&(v["X-Firebase-Client"]=T),v})()}}function Re(y){return(0,P.m9)(y)}class At{constructor(h){this.auth=h,this.observer=null,this.addObserver=(0,P.ne)(g=>this.observer=g)}get next(){return ne(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function er(y){const h=y.indexOf(":");return h<0?"":y.substr(0,h+1)}function xn(y){if(!y)return null;const h=Number(y);return isNaN(h)?null:h}class nn{constructor(h,g){this.providerId=h,this.signInMethod=g}toJSON(){return qe("not implemented")}_getIdTokenResponse(h){return qe("not implemented")}_linkToIdToken(h,g){return qe("not implemented")}_getReauthenticationResolver(h){return qe("not implemented")}}function Cn(y,h){return hs.apply(this,arguments)}function hs(){return(hs=(0,f.Z)(function*(y,h){return Vt(y,"POST","/v1/accounts:resetPassword",zt(y,h))})).apply(this,arguments)}function bt(y,h){return Gs.apply(this,arguments)}function Gs(){return(Gs=(0,f.Z)(function*(y,h){return Vt(y,"POST","/v1/accounts:update",h)})).apply(this,arguments)}function qs(y,h){return Xo.apply(this,arguments)}function Xo(){return(Xo=(0,f.Z)(function*(y,h){return Vt(y,"POST","/v1/accounts:update",zt(y,h))})).apply(this,arguments)}function Vn(){return(Vn=(0,f.Z)(function*(y,h){return wr(y,"POST","/v1/accounts:signInWithPassword",zt(y,h))})).apply(this,arguments)}function Hi(y,h){return $i.apply(this,arguments)}function $i(){return($i=(0,f.Z)(function*(y,h){return Vt(y,"POST","/v1/accounts:sendOobCode",zt(y,h))})).apply(this,arguments)}function yi(y,h){return rn.apply(this,arguments)}function rn(){return(rn=(0,f.Z)(function*(y,h){return Hi(y,h)})).apply(this,arguments)}function Fa(y,h){return La.apply(this,arguments)}function La(){return(La=(0,f.Z)(function*(y,h){return Hi(y,h)})).apply(this,arguments)}function _i(y,h){return ei.apply(this,arguments)}function ei(){return(ei=(0,f.Z)(function*(y,h){return Hi(y,h)})).apply(this,arguments)}function lc(y,h){return ps.apply(this,arguments)}function ps(){return(ps=(0,f.Z)(function*(y,h){return Hi(y,h)})).apply(this,arguments)}function Nr(){return(Nr=(0,f.Z)(function*(y,h){return wr(y,"POST","/v1/accounts:signInWithEmailLink",zt(y,h))})).apply(this,arguments)}function cc(){return(cc=(0,f.Z)(function*(y,h){return wr(y,"POST","/v1/accounts:signInWithEmailLink",zt(y,h))})).apply(this,arguments)}class Ua extends nn{constructor(h,g,v,T=null){super("password",v),this._email=h,this._password=g,this._tenantId=T}static _fromEmailAndPassword(h,g){return new Ua(h,g,"password")}static _fromEmailAndCode(h,g,v=null){return new Ua(h,g,"emailLink",v)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(h){const g="string"==typeof h?JSON.parse(h):h;if((null==g?void 0:g.email)&&(null==g?void 0:g.password)){if("password"===g.signInMethod)return this._fromEmailAndPassword(g.email,g.password);if("emailLink"===g.signInMethod)return this._fromEmailAndCode(g.email,g.password,g.tenantId)}return null}_getIdTokenResponse(h){var g=this;return(0,f.Z)(function*(){switch(g.signInMethod){case"password":return function fs(y,h){return Vn.apply(this,arguments)}(h,{returnSecureToken:!0,email:g._email,password:g._password});case"emailLink":return function Va(y,h){return Nr.apply(this,arguments)}(h,{email:g._email,oobCode:g._password});default:be(h,"internal-error")}})()}_linkToIdToken(h,g){var v=this;return(0,f.Z)(function*(){switch(v.signInMethod){case"password":return bt(h,{idToken:g,returnSecureToken:!0,email:v._email,password:v._password});case"emailLink":return function nh(y,h){return cc.apply(this,arguments)}(h,{idToken:g,email:v._email,oobCode:v._password});default:be(h,"internal-error")}})()}_getReauthenticationResolver(h){return this._getIdTokenResponse(h)}}function Rn(y,h){return dc.apply(this,arguments)}function dc(){return(dc=(0,f.Z)(function*(y,h){return wr(y,"POST","/v1/accounts:signInWithIdp",zt(y,h))})).apply(this,arguments)}class Gi extends nn{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(h){const g=new Gi(h.providerId,h.signInMethod);return h.idToken||h.accessToken?(h.idToken&&(g.idToken=h.idToken),h.accessToken&&(g.accessToken=h.accessToken),h.nonce&&!h.pendingToken&&(g.nonce=h.nonce),h.pendingToken&&(g.pendingToken=h.pendingToken)):h.oauthToken&&h.oauthTokenSecret?(g.accessToken=h.oauthToken,g.secret=h.oauthTokenSecret):be("argument-error"),g}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(h){const g="string"==typeof h?JSON.parse(h):h,{providerId:v,signInMethod:T}=g,O=(0,J._T)(g,["providerId","signInMethod"]);if(!v||!T)return null;const q=new Gi(v,T);return q.idToken=O.idToken||void 0,q.accessToken=O.accessToken||void 0,q.secret=O.secret,q.nonce=O.nonce,q.pendingToken=O.pendingToken||null,q}_getIdTokenResponse(h){return Rn(h,this.buildRequest())}_linkToIdToken(h,g){const v=this.buildRequest();return v.idToken=g,Rn(h,v)}_getReauthenticationResolver(h){const g=this.buildRequest();return g.autoCreate=!1,Rn(h,g)}buildRequest(){const h={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)h.pendingToken=this.pendingToken;else{const g={};this.idToken&&(g.id_token=this.idToken),this.accessToken&&(g.access_token=this.accessToken),this.secret&&(g.oauth_token_secret=this.secret),g.providerId=this.providerId,this.nonce&&!this.pendingToken&&(g.nonce=this.nonce),h.postBody=(0,P.xO)(g)}return h}}function Ap(y,h){return hc.apply(this,arguments)}function hc(){return(hc=(0,f.Z)(function*(y,h){return Vt(y,"POST","/v1/accounts:sendVerificationCode",zt(y,h))})).apply(this,arguments)}function gs(){return(gs=(0,f.Z)(function*(y,h){return wr(y,"POST","/v1/accounts:signInWithPhoneNumber",zt(y,h))})).apply(this,arguments)}function fc(){return(fc=(0,f.Z)(function*(y,h){const g=yield wr(y,"POST","/v1/accounts:signInWithPhoneNumber",zt(y,h));if(g.temporaryProof)throw Bi(y,"account-exists-with-different-credential",g);return g})).apply(this,arguments)}const Mp={USER_NOT_FOUND:"user-not-found"};function pc(){return(pc=(0,f.Z)(function*(y,h){return wr(y,"POST","/v1/accounts:signInWithPhoneNumber",zt(y,Object.assign(Object.assign({},h),{operation:"REAUTH"})),Mp)})).apply(this,arguments)}class wo extends nn{constructor(h){super("phone","phone"),this.params=h}static _fromVerification(h,g){return new wo({verificationId:h,verificationCode:g})}static _fromTokenResponse(h,g){return new wo({phoneNumber:h,temporaryProof:g})}_getIdTokenResponse(h){return function Lu(y,h){return gs.apply(this,arguments)}(h,this._makeVerificationRequest())}_linkToIdToken(h,g){return function Sp(y,h){return fc.apply(this,arguments)}(h,Object.assign({idToken:g},this._makeVerificationRequest()))}_getReauthenticationResolver(h){return function xp(y,h){return pc.apply(this,arguments)}(h,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:h,phoneNumber:g,verificationId:v,verificationCode:T}=this.params;return h&&g?{temporaryProof:h,phoneNumber:g}:{sessionInfo:v,code:T}}toJSON(){const h={providerId:this.providerId};return this.params.phoneNumber&&(h.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(h.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(h.verificationCode=this.params.verificationCode),this.params.verificationId&&(h.verificationId=this.params.verificationId),h}static fromJSON(h){"string"==typeof h&&(h=JSON.parse(h));const{verificationId:g,verificationCode:v,phoneNumber:T,temporaryProof:O}=h;return v||g||T||O?new wo({verificationId:g,verificationCode:v,phoneNumber:T,temporaryProof:O}):null}}class zs{constructor(h){var g,v,T,O,q,ie;const Ve=(0,P.zd)((0,P.pd)(h)),Je=null!==(g=Ve.apiKey)&&void 0!==g?g:null,gt=null!==(v=Ve.oobCode)&&void 0!==v?v:null,st=function ny(y){switch(y){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(T=Ve.mode)&&void 0!==T?T:null);ne(Je&&gt&&st,"argument-error"),this.apiKey=Je,this.operation=st,this.code=gt,this.continueUrl=null!==(O=Ve.continueUrl)&&void 0!==O?O:null,this.languageCode=null!==(q=Ve.languageCode)&&void 0!==q?q:null,this.tenantId=null!==(ie=Ve.tenantId)&&void 0!==ie?ie:null}static parseLink(h){const g=function Ba(y){const h=(0,P.zd)((0,P.pd)(y)).link,g=h?(0,P.zd)((0,P.pd)(h)).deep_link_id:null,v=(0,P.zd)((0,P.pd)(y)).deep_link_id;return(v?(0,P.zd)((0,P.pd)(v)).link:null)||v||g||h||y}(h);try{return new zs(g)}catch(v){return null}}}let Vu=(()=>{class y{constructor(){this.providerId=y.PROVIDER_ID}static credential(g,v){return Ua._fromEmailAndPassword(g,v)}static credentialWithLink(g,v){const T=zs.parseLink(v);return ne(T,"argument-error"),Ua._fromEmailAndCode(g,T.code,T.tenantId)}}return y.PROVIDER_ID="password",y.EMAIL_PASSWORD_SIGN_IN_METHOD="password",y.EMAIL_LINK_SIGN_IN_METHOD="emailLink",y})();class ms{constructor(h){this.providerId=h,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(h){this.defaultLanguageCode=h}setCustomParameters(h){return this.customParameters=h,this}getCustomParameters(){return this.customParameters}}class Pr extends ms{constructor(){super(...arguments),this.scopes=[]}addScope(h){return this.scopes.includes(h)||this.scopes.push(h),this}getScopes(){return[...this.scopes]}}class Io extends Pr{static credentialFromJSON(h){const g="string"==typeof h?JSON.parse(h):h;return ne("providerId"in g&&"signInMethod"in g,"argument-error"),Gi._fromParams(g)}credential(h){return this._credential(Object.assign(Object.assign({},h),{nonce:h.rawNonce}))}_credential(h){return ne(h.idToken||h.accessToken,"argument-error"),Gi._fromParams(Object.assign(Object.assign({},h),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(h){return Io.oauthCredentialFromTaggedObject(h)}static credentialFromError(h){return Io.oauthCredentialFromTaggedObject(h.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:h}){if(!h)return null;const{oauthIdToken:g,oauthAccessToken:v,oauthTokenSecret:T,pendingToken:O,nonce:q,providerId:ie}=h;if(!v&&!T&&!g&&!O||!ie)return null;try{return new Io(ie)._credential({idToken:g,accessToken:v,nonce:q,pendingToken:O})}catch(Ve){return null}}}let Ws=(()=>{class y extends Pr{constructor(){super("facebook.com")}static credential(g){return Gi._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.FACEBOOK_SIGN_IN_METHOD,accessToken:g})}static credentialFromResult(g){return y.credentialFromTaggedObject(g)}static credentialFromError(g){return y.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g||!("oauthAccessToken"in g)||!g.oauthAccessToken)return null;try{return y.credential(g.oauthAccessToken)}catch(v){return null}}}return y.FACEBOOK_SIGN_IN_METHOD="facebook.com",y.PROVIDER_ID="facebook.com",y})(),ea=(()=>{class y extends Pr{constructor(){super("google.com"),this.addScope("profile")}static credential(g,v){return Gi._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.GOOGLE_SIGN_IN_METHOD,idToken:g,accessToken:v})}static credentialFromResult(g){return y.credentialFromTaggedObject(g)}static credentialFromError(g){return y.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{oauthIdToken:v,oauthAccessToken:T}=g;if(!v&&!T)return null;try{return y.credential(v,T)}catch(O){return null}}}return y.GOOGLE_SIGN_IN_METHOD="google.com",y.PROVIDER_ID="google.com",y})(),gc=(()=>{class y extends Pr{constructor(){super("github.com")}static credential(g){return Gi._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.GITHUB_SIGN_IN_METHOD,accessToken:g})}static credentialFromResult(g){return y.credentialFromTaggedObject(g)}static credentialFromError(g){return y.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g||!("oauthAccessToken"in g)||!g.oauthAccessToken)return null;try{return y.credential(g.oauthAccessToken)}catch(v){return null}}}return y.GITHUB_SIGN_IN_METHOD="github.com",y.PROVIDER_ID="github.com",y})();class bo extends nn{constructor(h,g){super(h,h),this.pendingToken=g}_getIdTokenResponse(h){return Rn(h,this.buildRequest())}_linkToIdToken(h,g){const v=this.buildRequest();return v.idToken=g,Rn(h,v)}_getReauthenticationResolver(h){const g=this.buildRequest();return g.autoCreate=!1,Rn(h,g)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(h){const g="string"==typeof h?JSON.parse(h):h,{providerId:v,signInMethod:T,pendingToken:O}=g;return v&&T&&O&&v===T?new bo(v,O):null}static _create(h,g){return new bo(h,g)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class ti extends ms{constructor(h){ne(h.startsWith("saml."),"argument-error"),super(h)}static credentialFromResult(h){return ti.samlCredentialFromTaggedObject(h)}static credentialFromError(h){return ti.samlCredentialFromTaggedObject(h.customData||{})}static credentialFromJSON(h){const g=bo.fromJSON(h);return ne(g,"argument-error"),g}static samlCredentialFromTaggedObject({_tokenResponse:h}){if(!h)return null;const{pendingToken:g,providerId:v}=h;if(!g||!v)return null;try{return bo._create(v,g)}catch(T){return null}}}let ja=(()=>{class y extends Pr{constructor(){super("twitter.com")}static credential(g,v){return Gi._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.TWITTER_SIGN_IN_METHOD,oauthToken:g,oauthTokenSecret:v})}static credentialFromResult(g){return y.credentialFromTaggedObject(g)}static credentialFromError(g){return y.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{oauthAccessToken:v,oauthTokenSecret:T}=g;if(!v||!T)return null;try{return y.credential(v,T)}catch(O){return null}}}return y.TWITTER_SIGN_IN_METHOD="twitter.com",y.PROVIDER_ID="twitter.com",y})();function Ha(y,h){return kr.apply(this,arguments)}function kr(){return(kr=(0,f.Z)(function*(y,h){return wr(y,"POST","/v1/accounts:signUp",zt(y,h))})).apply(this,arguments)}class tr{constructor(h){this.user=h.user,this.providerId=h.providerId,this._tokenResponse=h._tokenResponse,this.operationType=h.operationType}static _fromIdTokenResponse(h,g,v,T=!1){return(0,f.Z)(function*(){const O=yield U._fromIdTokenResponse(h,v,T),q=ih(v);return new tr({user:O,providerId:q,_tokenResponse:v,operationType:g})})()}static _forOperation(h,g,v){return(0,f.Z)(function*(){yield h._updateTokensIfNecessary(v,!0);const T=ih(v);return new tr({user:h,providerId:T,_tokenResponse:v,operationType:g})})()}}function ih(y){return y.providerId?y.providerId:"phoneNumber"in y?"phone":null}function mc(){return(mc=(0,f.Z)(function*(y){var h;const g=Re(y);if(yield g._initializationPromise,null===(h=g.currentUser)||void 0===h?void 0:h.isAnonymous)return new tr({user:g.currentUser,providerId:null,operationType:"signIn"});const v=yield Ha(g,{returnSecureToken:!0}),T=yield tr._fromIdTokenResponse(g,"signIn",v,!0);return yield g._updateCurrentUser(T.user),T})).apply(this,arguments)}class Ga extends P.ZR{constructor(h,g,v,T){var O;super(g.code,g.message),this.operationType=v,this.user=T,Object.setPrototypeOf(this,Ga.prototype),this.customData={appName:h.name,tenantId:null!==(O=h.tenantId)&&void 0!==O?O:void 0,_serverResponse:g.customData._serverResponse,operationType:v}}static _fromErrorAndOperation(h,g,v,T){return new Ga(h,g,v,T)}}function qa(y,h,g,v){return("reauthenticate"===h?g._getReauthenticationResolver(y):g._getIdTokenResponse(y)).catch(O=>{throw"auth/multi-factor-auth-required"===O.code?Ga._fromErrorAndOperation(y,O,h,v):O})}function qi(y){return new Set(y.map(({providerId:h})=>h).filter(h=>!!h))}function Uu(){return(Uu=(0,f.Z)(function*(y,h){const g=(0,P.m9)(y);yield _s(!0,g,h);const{providerUserInfo:v}=yield qn(g.auth,{idToken:yield g.getIdToken(),deleteProvider:[h]}),T=qi(v||[]);return g.providerData=g.providerData.filter(O=>T.has(O.providerId)),T.has("phone")||(g.phoneNumber=null),yield g.auth._persistUserIfCurrent(g),g})).apply(this,arguments)}function ln(y,h){return Do.apply(this,arguments)}function Do(){return(Do=(0,f.Z)(function*(y,h,g=!1){const v=yield Jn(y,h._linkToIdToken(y.auth,yield y.getIdToken()),g);return tr._forOperation(y,"link",v)})).apply(this,arguments)}function _s(y,h,g){return sn.apply(this,arguments)}function sn(){return(sn=(0,f.Z)(function*(y,h,g){yield Xn(h);const T=!1===y?"provider-already-linked":"no-such-provider";ne(qi(h.providerData).has(g)===y,h.auth,T)})).apply(this,arguments)}function yc(y,h){return Zs.apply(this,arguments)}function Zs(){return(Zs=(0,f.Z)(function*(y,h,g=!1){const{auth:v}=y,T="reauthenticate";try{const O=yield Jn(y,qa(v,T,h,y),g);ne(O.idToken,v,"internal-error");const q=rt(O.idToken);ne(q,v,"internal-error");const{sub:ie}=q;return ne(y.uid===ie,v,"user-mismatch"),tr._forOperation(y,T,O)}catch(O){throw"auth/user-not-found"===(null==O?void 0:O.code)&&be(v,"user-mismatch"),O}})).apply(this,arguments)}function Ks(y,h){return hr.apply(this,arguments)}function hr(){return(hr=(0,f.Z)(function*(y,h,g=!1){const v="signIn",T=yield qa(y,v,h),O=yield tr._fromIdTokenResponse(y,v,T);return g||(yield y._updateCurrentUser(O.user)),O})).apply(this,arguments)}function Tn(y,h){return na.apply(this,arguments)}function na(){return(na=(0,f.Z)(function*(y,h){return Ks(Re(y),h)})).apply(this,arguments)}function vi(y,h){return fr.apply(this,arguments)}function fr(){return(fr=(0,f.Z)(function*(y,h){const g=(0,P.m9)(y);return yield _s(!1,g,h.providerId),ln(g,h)})).apply(this,arguments)}function vs(y,h){return zi.apply(this,arguments)}function zi(){return(zi=(0,f.Z)(function*(y,h){return yc((0,P.m9)(y),h)})).apply(this,arguments)}function za(y,h){return Fr.apply(this,arguments)}function Fr(){return(Fr=(0,f.Z)(function*(y,h){return wr(y,"POST","/v1/accounts:signInWithCustomToken",zt(y,h))})).apply(this,arguments)}function ws(){return(ws=(0,f.Z)(function*(y,h){const g=Re(y),v=yield za(g,{token:h,returnSecureToken:!0}),T=yield tr._fromIdTokenResponse(g,"signIn",v);return yield g._updateCurrentUser(T.user),T})).apply(this,arguments)}class lt{constructor(h,g){this.factorId=h,this.uid=g.mfaEnrollmentId,this.enrollmentTime=new Date(g.enrolledAt).toUTCString(),this.displayName=g.displayName}static _fromServerResponse(h,g){return"phoneInfo"in g?Wa._fromServerResponse(h,g):be(h,"internal-error")}}class Wa extends lt{constructor(h){super("phone",h),this.phoneNumber=h.phoneInfo}static _fromServerResponse(h,g){return new Wa(g)}}function ra(y,h,g){var v;ne((null===(v=g.url)||void 0===v?void 0:v.length)>0,y,"invalid-continue-uri"),ne(void 0===g.dynamicLinkDomain||g.dynamicLinkDomain.length>0,y,"invalid-dynamic-link-domain"),h.continueUrl=g.url,h.dynamicLinkDomain=g.dynamicLinkDomain,h.canHandleCodeInApp=g.handleCodeInApp,g.iOS&&(ne(g.iOS.bundleId.length>0,y,"missing-ios-bundle-id"),h.iOSBundleId=g.iOS.bundleId),g.android&&(ne(g.android.packageName.length>0,y,"missing-android-pkg-name"),h.androidInstallApp=g.android.installApp,h.androidMinimumVersionCode=g.android.minimumVersion,h.androidPackageName=g.android.packageName)}function Ka(){return(Ka=(0,f.Z)(function*(y,h,g){const v=(0,P.m9)(y),T={requestType:"PASSWORD_RESET",email:h};g&&ra(v,T,g),yield Fa(v,T)})).apply(this,arguments)}function Bu(){return(Bu=(0,f.Z)(function*(y,h,g){yield Cn((0,P.m9)(y),{oobCode:h,newPassword:g})})).apply(this,arguments)}function we(){return(we=(0,f.Z)(function*(y,h){yield qs((0,P.m9)(y),{oobCode:h})})).apply(this,arguments)}function xt(y,h){return Hu.apply(this,arguments)}function Hu(){return(Hu=(0,f.Z)(function*(y,h){const g=(0,P.m9)(y),v=yield Cn(g,{oobCode:h}),T=v.requestType;switch(ne(T,g,"internal-error"),T){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":ne(v.newEmail,g,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":ne(v.mfaInfo,g,"internal-error");default:ne(v.email,g,"internal-error")}let O=null;return v.mfaInfo&&(O=lt._fromServerResponse(Re(g),v.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===v.requestType?v.newEmail:v.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===v.requestType?v.email:v.newEmail)||null,multiFactorInfo:O},operation:T}})).apply(this,arguments)}function Co(){return(Co=(0,f.Z)(function*(y,h){const{data:g}=yield xt((0,P.m9)(y),h);return g.email})).apply(this,arguments)}function Lr(){return(Lr=(0,f.Z)(function*(y,h,g){const v=Re(y),T=yield Ha(v,{returnSecureToken:!0,email:h,password:g}),O=yield tr._fromIdTokenResponse(v,"signIn",T);return yield v._updateCurrentUser(O.user),O})).apply(this,arguments)}function _c(){return(_c=(0,f.Z)(function*(y,h,g){const v=(0,P.m9)(y),T={requestType:"EMAIL_SIGNIN",email:h};ne(g.handleCodeInApp,v,"argument-error"),g&&ra(v,T,g),yield _i(v,T)})).apply(this,arguments)}function Is(){return(Is=(0,f.Z)(function*(y,h,g){const v=(0,P.m9)(y),T=Vu.credentialWithLink(h,g||Pe());return ne(T._tenantId===(v.tenantId||null),v,"tenant-id-mismatch"),Tn(v,T)})).apply(this,arguments)}function nr(y,h){return ni.apply(this,arguments)}function ni(){return(ni=(0,f.Z)(function*(y,h){return Vt(y,"POST","/v1/accounts:createAuthUri",zt(y,h))})).apply(this,arguments)}function bs(){return(bs=(0,f.Z)(function*(y,h){const v={identifier:h,continueUri:wt()?Pe():"http://localhost"},{signinMethods:T}=yield nr((0,P.m9)(y),v);return T||[]})).apply(this,arguments)}function zu(){return(zu=(0,f.Z)(function*(y,h){const g=(0,P.m9)(y),T={requestType:"VERIFY_EMAIL",idToken:yield y.getIdToken()};h&&ra(g.auth,T,h);const{email:O}=yield yi(g.auth,T);O!==y.email&&(yield y.reload())})).apply(this,arguments)}function eu(){return(eu=(0,f.Z)(function*(y,h,g){const v=(0,P.m9)(y),O={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield y.getIdToken(),newEmail:h};g&&ra(v.auth,O,g);const{email:q}=yield lc(v.auth,O);q!==y.email&&(yield y.reload())})).apply(this,arguments)}function Wu(y,h){return ia.apply(this,arguments)}function ia(){return(ia=(0,f.Z)(function*(y,h){return Vt(y,"POST","/v1/accounts:update",h)})).apply(this,arguments)}function Zu(){return(Zu=(0,f.Z)(function*(y,{displayName:h,photoURL:g}){if(void 0===h&&void 0===g)return;const v=(0,P.m9)(y),O={idToken:yield v.getIdToken(),displayName:h,photoUrl:g,returnSecureToken:!0},q=yield Jn(v,Wu(v.auth,O));v.displayName=q.displayName||null,v.photoURL=q.photoUrl||null;const ie=v.providerData.find(({providerId:Ve})=>"password"===Ve);ie&&(ie.displayName=v.displayName,ie.photoURL=v.photoURL),yield v._updateTokensIfNecessary(q)})).apply(this,arguments)}function Yu(y,h,g){return Ys.apply(this,arguments)}function Ys(){return(Ys=(0,f.Z)(function*(y,h,g){const{auth:v}=y,O={idToken:yield y.getIdToken(),returnSecureToken:!0};h&&(O.email=h),g&&(O.password=g);const q=yield Jn(y,bt(v,O));yield y._updateTokensIfNecessary(q,!0)})).apply(this,arguments)}class Qs{constructor(h,g,v={}){this.isNewUser=h,this.providerId=g,this.profile=v}}class wc extends Qs{constructor(h,g,v,T){super(h,g,v),this.username=T}}class Ic extends Qs{constructor(h,g){super(h,"facebook.com",g)}}class Js extends wc{constructor(h,g){super(h,"github.com",g,"string"==typeof(null==g?void 0:g.login)?null==g?void 0:g.login:null)}}class Ds extends Qs{constructor(h,g){super(h,"google.com",g)}}class Qu extends wc{constructor(h,g,v){super(h,"twitter.com",g,v)}}function pr(y){const{user:h,_tokenResponse:g}=y;return h.isAnonymous&&!g?{providerId:null,isNewUser:!1,profile:null}:function Ec(y){var h,g;if(!y)return null;const{providerId:v}=y,T=y.rawUserInfo?JSON.parse(y.rawUserInfo):{},O=y.isNewUser||"identitytoolkit#SignupNewUserResponse"===y.kind;if(!v&&(null==y?void 0:y.idToken)){const q=null===(g=null===(h=rt(y.idToken))||void 0===h?void 0:h.firebase)||void 0===g?void 0:g.sign_in_provider;if(q)return new Qs(O,"anonymous"!==q&&"custom"!==q?q:null)}if(!v)return null;switch(v){case"facebook.com":return new Ic(O,T);case"github.com":return new Js(O,T);case"google.com":return new Ds(O,T);case"twitter.com":return new Qu(O,T,y.screenName||null);case"custom":case"anonymous":return new Qs(O,null);default:return new Qs(O,v,T)}}(g)}class Wi{constructor(h,g){this.type=h,this.credential=g}static _fromIdtoken(h){return new Wi("enroll",h)}static _fromMfaPendingCredential(h){return new Wi("signin",h)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(h){var g,v;if(null==h?void 0:h.multiFactorSession){if(null===(g=h.multiFactorSession)||void 0===g?void 0:g.pendingCredential)return Wi._fromMfaPendingCredential(h.multiFactorSession.pendingCredential);if(null===(v=h.multiFactorSession)||void 0===v?void 0:v.idToken)return Wi._fromIdtoken(h.multiFactorSession.idToken)}return null}}class oa{constructor(h,g,v){this.session=h,this.hints=g,this.signInResolver=v}static _fromError(h,g){const v=Re(h),T=g.customData._serverResponse,O=(T.mfaInfo||[]).map(ie=>lt._fromServerResponse(v,ie));ne(T.mfaPendingCredential,v,"internal-error");const q=Wi._fromMfaPendingCredential(T.mfaPendingCredential);return new oa(q,O,function(){var ie=(0,f.Z)(function*(Ve){const Je=yield Ve._process(v,q);delete T.mfaInfo,delete T.mfaPendingCredential;const gt=Object.assign(Object.assign({},T),{idToken:Je.idToken,refreshToken:Je.refreshToken});switch(g.operationType){case"signIn":const st=yield tr._fromIdTokenResponse(v,g.operationType,gt);return yield v._updateCurrentUser(st.user),st;case"reauthenticate":return ne(g.user,v,"internal-error"),tr._forOperation(g.user,g.operationType,gt);default:be(v,"internal-error")}});return function(Ve){return ie.apply(this,arguments)}}())}resolveSignIn(h){var g=this;return(0,f.Z)(function*(){return g.signInResolver(h)})()}}function On(y,h){return Vt(y,"POST","/v2/accounts/mfaEnrollment:start",zt(y,h))}class Zi{constructor(h){this.user=h,this.enrolledFactors=[],h._onReload(g=>{g.mfaInfo&&(this.enrolledFactors=g.mfaInfo.map(v=>lt._fromServerResponse(h.auth,v)))})}static _fromUser(h){return new Zi(h)}getSession(){var h=this;return(0,f.Z)(function*(){return Wi._fromIdtoken(yield h.user.getIdToken())})()}enroll(h,g){var v=this;return(0,f.Z)(function*(){const T=h,O=yield v.getSession(),q=yield Jn(v.user,T._process(v.user.auth,O,g));return yield v.user._updateTokensIfNecessary(q),v.user.reload()})()}unenroll(h){var g=this;return(0,f.Z)(function*(){const v="string"==typeof h?h:h.uid,T=yield g.user.getIdToken(),O=yield Jn(g.user,function Op(y,h){return Vt(y,"POST","/v2/accounts/mfaEnrollment:withdraw",zt(y,h))}(g.user.auth,{idToken:T,mfaEnrollmentId:v}));g.enrolledFactors=g.enrolledFactors.filter(({uid:q})=>q!==v),yield g.user._updateTokensIfNecessary(O);try{yield g.user.reload()}catch(q){if("auth/user-token-expired"!==q.code)throw q}})()}}const Ao=new WeakMap,el="__sak";class Xs{constructor(h,g){this.storageRetriever=h,this.type=g}_isAvailable(){try{return this.storage?(this.storage.setItem(el,"1"),this.storage.removeItem(el),Promise.resolve(!0)):Promise.resolve(!1)}catch(h){return Promise.resolve(!1)}}_set(h,g){return this.storage.setItem(h,JSON.stringify(g)),Promise.resolve()}_get(h){const g=this.storage.getItem(h);return Promise.resolve(g?JSON.parse(g):null)}_remove(h){return this.storage.removeItem(h),Promise.resolve()}get storage(){return this.storageRetriever()}}const hn=(()=>{class y extends Xs{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(g,v)=>this.onStorageEvent(g,v),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function Cc(){const y=(0,P.z$)();return Wt(y)||Wn(y)}()&&function Ln(){try{return!(!window||window===window.top)}catch(y){return!1}}(),this.fallbackToPolling=ji(),this._shouldAllowMigration=!0}forAllChangedKeys(g){for(const v of Object.keys(this.listeners)){const T=this.storage.getItem(v),O=this.localCache[v];T!==O&&g(v,O,T)}}onStorageEvent(g,v=!1){if(!g.key)return void this.forAllChangedKeys((ie,Ve,Je)=>{this.notifyListeners(ie,Je)});const T=g.key;if(v?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const ie=this.storage.getItem(T);if(g.newValue!==ie)null!==g.newValue?this.storage.setItem(T,g.newValue):this.storage.removeItem(T);else if(this.localCache[T]===g.newValue&&!v)return}const O=()=>{const ie=this.storage.getItem(T);!v&&this.localCache[T]===ie||this.notifyListeners(T,ie)},q=this.storage.getItem(T);!function Qo(){return(0,P.w1)()&&10===document.documentMode}()||q===g.newValue||g.newValue===g.oldValue?O():setTimeout(O,10)}notifyListeners(g,v){this.localCache[g]=v;const T=this.listeners[g];if(T)for(const O of Array.from(T))O(v&&JSON.parse(v))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((g,v,T)=>{this.onStorageEvent(new StorageEvent("storage",{key:g,oldValue:v,newValue:T}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(g,v){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[g]||(this.listeners[g]=new Set,this.localCache[g]=this.storage.getItem(g)),this.listeners[g].add(v)}_removeListener(g,v){this.listeners[g]&&(this.listeners[g].delete(v),0===this.listeners[g].size&&delete this.listeners[g]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(g,v){var T=()=>super._set,O=this;return(0,f.Z)(function*(){yield T().call(O,g,v),O.localCache[g]=JSON.stringify(v)})()}_get(g){var v=()=>super._get,T=this;return(0,f.Z)(function*(){const O=yield v().call(T,g);return T.localCache[g]=JSON.stringify(O),O})()}_remove(g){var v=()=>super._remove,T=this;return(0,f.Z)(function*(){yield v().call(T,g),delete T.localCache[g]})()}}return y.type="LOCAL",y})(),Ki=(()=>{class y extends Xs{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(g,v){}_removeListener(g,v){}}return y.type="SESSION",y})();let aa=(()=>{class y{constructor(g){this.eventTarget=g,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(g){const v=this.receivers.find(O=>O.isListeningto(g));if(v)return v;const T=new y(g);return this.receivers.push(T),T}isListeningto(g){return this.eventTarget===g}handleEvent(g){var v=this;return(0,f.Z)(function*(){const T=g,{eventId:O,eventType:q,data:ie}=T.data,Ve=v.handlersMap[q];if(!(null==Ve?void 0:Ve.size))return;T.ports[0].postMessage({status:"ack",eventId:O,eventType:q});const Je=Array.from(Ve).map(function(){var st=(0,f.Z)(function*(Dn){return Dn(T.origin,ie)});return function(Dn){return st.apply(this,arguments)}}()),gt=yield function nl(y){return Promise.all(y.map(function(){var h=(0,f.Z)(function*(g){try{return{fulfilled:!0,value:yield g}}catch(v){return{fulfilled:!1,reason:v}}});return function(g){return h.apply(this,arguments)}}()))}(Je);T.ports[0].postMessage({status:"done",eventId:O,eventType:q,response:gt})})()}_subscribe(g,v){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[g]||(this.handlersMap[g]=new Set),this.handlersMap[g].add(v)}_unsubscribe(g,v){this.handlersMap[g]&&v&&this.handlersMap[g].delete(v),(!v||0===this.handlersMap[g].size)&&delete this.handlersMap[g],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return y.receivers=[],y})();function eo(y="",h=10){let g="";for(let v=0;v<h;v++)g+=Math.floor(10*Math.random());return y+g}class Tc{constructor(h){this.target=h,this.handlers=new Set}removeMessageHandler(h){h.messageChannel&&(h.messageChannel.port1.removeEventListener("message",h.onMessage),h.messageChannel.port1.close()),this.handlers.delete(h)}_send(h,g,v=50){var T=this;return(0,f.Z)(function*(){const O="undefined"!=typeof MessageChannel?new MessageChannel:null;if(!O)throw new Error("connection_unavailable");let q,ie;return new Promise((Ve,Je)=>{const gt=eo("",20);O.port1.start();const st=setTimeout(()=>{Je(new Error("unsupported_event"))},v);ie={messageChannel:O,onMessage(Dn){const Di=Dn;if(Di.data.eventId===gt)switch(Di.data.status){case"ack":clearTimeout(st),q=setTimeout(()=>{Je(new Error("timeout"))},3e3);break;case"done":clearTimeout(q),Ve(Di.data.response);break;default:clearTimeout(st),clearTimeout(q),Je(new Error("invalid_response"))}}},T.handlers.add(ie),O.port1.addEventListener("message",ie.onMessage),T.target.postMessage({eventType:h,eventId:gt,data:g},[O.port2])}).finally(()=>{ie&&T.removeMessageHandler(ie)})})()}}function Qt(){return window}function mn(){return void 0!==Qt().WorkerGlobalScope&&"function"==typeof Qt().importScripts}function Ts(){return(Ts=(0,f.Z)(function*(){if(!(null==navigator?void 0:navigator.serviceWorker))return null;try{return(yield navigator.serviceWorker.ready).active}catch(y){return null}})).apply(this,arguments)}const nu="firebaseLocalStorageDb",to="firebaseLocalStorage",ri="fbase_key";class Un{constructor(h){this.request=h}toPromise(){return new Promise((h,g)=>{this.request.addEventListener("success",()=>{h(this.request.result)}),this.request.addEventListener("error",()=>{g(this.request.error)})})}}function Mo(y,h){return y.transaction([to],h?"readwrite":"readonly").objectStore(to)}function no(){const y=indexedDB.open(nu,1);return new Promise((h,g)=>{y.addEventListener("error",()=>{g(y.error)}),y.addEventListener("upgradeneeded",()=>{const v=y.result;try{v.createObjectStore(to,{keyPath:ri})}catch(T){g(T)}}),y.addEventListener("success",(0,f.Z)(function*(){const v=y.result;v.objectStoreNames.contains(to)?h(v):(v.close(),yield function Vr(){const y=indexedDB.deleteDatabase(nu);return new Un(y).toPromise()}(),h(yield no()))}))})}function il(y,h,g){return ro.apply(this,arguments)}function ro(){return(ro=(0,f.Z)(function*(y,h,g){const v=Mo(y,!0).put({[ri]:h,value:g});return new Un(v).toPromise()})).apply(this,arguments)}function ii(){return(ii=(0,f.Z)(function*(y,h){const g=Mo(y,!1).get(h),v=yield new Un(g).toPromise();return void 0===v?null:v.value})).apply(this,arguments)}function Ss(y,h){const g=Mo(y,!0).delete(h);return new Un(g).toPromise()}const Yi=(()=>{class y{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var g=this;return(0,f.Z)(function*(){return g.db||(g.db=yield no()),g.db})()}_withRetries(g){var v=this;return(0,f.Z)(function*(){let T=0;for(;;)try{const O=yield v._openDb();return yield g(O)}catch(O){if(T++>3)throw O;v.db&&(v.db.close(),v.db=void 0)}})()}initializeServiceWorkerMessaging(){var g=this;return(0,f.Z)(function*(){return mn()?g.initializeReceiver():g.initializeSender()})()}initializeReceiver(){var g=this;return(0,f.Z)(function*(){g.receiver=aa._getInstance(function rl(){return mn()?self:null}()),g.receiver._subscribe("keyChanged",function(){var v=(0,f.Z)(function*(T,O){return{keyProcessed:(yield g._poll()).includes(O.key)}});return function(T,O){return v.apply(this,arguments)}}()),g.receiver._subscribe("ping",function(){var v=(0,f.Z)(function*(T,O){return["keyChanged"]});return function(T,O){return v.apply(this,arguments)}}())})()}initializeSender(){var g=this;return(0,f.Z)(function*(){var v,T;if(g.activeServiceWorker=yield function vt(){return Ts.apply(this,arguments)}(),!g.activeServiceWorker)return;g.sender=new Tc(g.activeServiceWorker);const O=yield g.sender._send("ping",{},800);!O||(null===(v=O[0])||void 0===v?void 0:v.fulfilled)&&(null===(T=O[0])||void 0===T?void 0:T.value.includes("keyChanged"))&&(g.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(g){var v=this;return(0,f.Z)(function*(){if(v.sender&&v.activeServiceWorker&&function Pp(){var y;return(null===(y=null==navigator?void 0:navigator.serviceWorker)||void 0===y?void 0:y.controller)||null}()===v.activeServiceWorker)try{yield v.sender._send("keyChanged",{key:g},v.serviceWorkerReceiverAvailable?800:50)}catch(T){}})()}_isAvailable(){return(0,f.Z)(function*(){try{if(!indexedDB)return!1;const g=yield no();return yield il(g,el,"1"),yield Ss(g,el),!0}catch(g){}return!1})()}_withPendingWrite(g){var v=this;return(0,f.Z)(function*(){v.pendingWrites++;try{yield g()}finally{v.pendingWrites--}})()}_set(g,v){var T=this;return(0,f.Z)(function*(){return T._withPendingWrite((0,f.Z)(function*(){return yield T._withRetries(O=>il(O,g,v)),T.localCache[g]=v,T.notifyServiceWorker(g)}))})()}_get(g){var v=this;return(0,f.Z)(function*(){const T=yield v._withRetries(O=>function As(y,h){return ii.apply(this,arguments)}(O,g));return v.localCache[g]=T,T})()}_remove(g){var v=this;return(0,f.Z)(function*(){return v._withPendingWrite((0,f.Z)(function*(){return yield v._withRetries(T=>Ss(T,g)),delete v.localCache[g],v.notifyServiceWorker(g)}))})()}_poll(){var g=this;return(0,f.Z)(function*(){const v=yield g._withRetries(q=>{const ie=Mo(q,!1).getAll();return new Un(ie).toPromise()});if(!v)return[];if(0!==g.pendingWrites)return[];const T=[],O=new Set;for(const{fbase_key:q,value:ie}of v)O.add(q),JSON.stringify(g.localCache[q])!==JSON.stringify(ie)&&(g.notifyListeners(q,ie),T.push(q));for(const q of Object.keys(g.localCache))g.localCache[q]&&!O.has(q)&&(g.notifyListeners(q,null),T.push(q));return T})()}notifyListeners(g,v){this.localCache[g]=v;const T=this.listeners[g];if(T)for(const O of Array.from(T))O(v)}startPolling(){var g=this;this.stopPolling(),this.pollTimer=setInterval((0,f.Z)(function*(){return g._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(g,v){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[g]||(this.listeners[g]=new Set,this._get(g)),this.listeners[g].add(v)}_removeListener(g,v){this.listeners[g]&&(this.listeners[g].delete(v),0===this.listeners[g].size&&delete this.listeners[g]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return y.type="LOCAL",y})();function Ac(y,h){return Vt(y,"POST","/v2/accounts/mfaSignIn:start",zt(y,h))}function wi(){return(wi=(0,f.Z)(function*(y){return(yield Vt(y,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function so(y){return new Promise((h,g)=>{const v=document.createElement("script");v.setAttribute("src",y),v.onload=h,v.onerror=T=>{const O=me("internal-error");O.customData=T,g(O)},v.type="text/javascript",v.charset="UTF-8",function al(){var y,h;return null!==(h=null===(y=document.getElementsByTagName("head"))||void 0===y?void 0:y[0])&&void 0!==h?h:document}().appendChild(v)})}function la(y){return`__${y}${Math.floor(1e6*Math.random())}`}const si=1e12;class Sc{constructor(h){this.auth=h,this.counter=si,this._widgets=new Map}render(h,g){const v=this.counter;return this._widgets.set(v,new ru(h,this.auth.name,g||{})),this.counter++,v}reset(h){var g;const v=h||si;null===(g=this._widgets.get(v))||void 0===g||g.delete(),this._widgets.delete(v)}getResponse(h){var g;return(null===(g=this._widgets.get(h||si))||void 0===g?void 0:g.getResponse())||""}execute(h){var g=this;return(0,f.Z)(function*(){var v;return null===(v=g._widgets.get(h||si))||void 0===v||v.execute(),""})()}}class ru{constructor(h,g,v){this.params=v,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const T="string"==typeof h?document.getElementById(h):h;ne(T,"argument-error",{appName:g}),this.container=T,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function oo(y){const h=[],g="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let v=0;v<y;v++)h.push(g.charAt(Math.floor(Math.random()*g.length)));return h.join("")}(50);const{callback:h,"expired-callback":g}=this.params;if(h)try{h(this.responseToken)}catch(v){}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,g)try{g()}catch(v){}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const iu=la("rcb"),uh=new Lt(3e4,6e4);class Mc{constructor(){this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!Qt().grecaptcha}load(h,g=""){return ne(function kp(y){return y.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(y)}(g),h,"argument-error"),this.shouldResolveImmediately(g)?Promise.resolve(Qt().grecaptcha):new Promise((v,T)=>{const O=Qt().setTimeout(()=>{T(me(h,"network-request-failed"))},uh.get());Qt()[iu]=()=>{Qt().clearTimeout(O),delete Qt()[iu];const ie=Qt().grecaptcha;if(!ie)return void T(me(h,"internal-error"));const Ve=ie.render;ie.render=(Je,gt)=>{const st=Ve(Je,gt);return this.counter++,st},this.hostLanguage=g,v(ie)},so(`https://www.google.com/recaptcha/api.js??${(0,P.xO)({onload:iu,render:"explicit",hl:g})}`).catch(()=>{clearTimeout(O),T(me(h,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(h){return!!Qt().grecaptcha&&(h===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class xc{load(h){return(0,f.Z)(function*(){return new Sc(h)})()}clearedOneInstance(){}}const ul="recaptcha",Rc={theme:"light",type:"image"};class lh{constructor(h,g=Object.assign({},Rc),v){this.parameters=g,this.type=ul,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=Re(v),this.isInvisible="invisible"===this.parameters.size,ne("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment");const T="string"==typeof h?document.getElementById(h):h;ne(T,this.auth,"argument-error"),this.container=T,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new xc:new Mc,this.validateStartingState()}verify(){var h=this;return(0,f.Z)(function*(){h.assertNotDestroyed();const g=yield h.render(),v=h.getAssertedRecaptcha();return v.getResponse(g)||new Promise(O=>{const q=ie=>{!ie||(h.tokenChangeListeners.delete(q),O(ie))};h.tokenChangeListeners.add(q),h.isInvisible&&v.execute(g)})})()}render(){try{this.assertNotDestroyed()}catch(h){return Promise.reject(h)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(h=>{throw this.renderPromise=null,h})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(h=>{this.container.removeChild(h)})}validateStartingState(){ne(!this.parameters.sitekey,this.auth,"argument-error"),ne(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),ne("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(h){return g=>{if(this.tokenChangeListeners.forEach(v=>v(g)),"function"==typeof h)h(g);else if("string"==typeof h){const v=Qt()[h];"function"==typeof v&&v(g)}}}assertNotDestroyed(){ne(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var h=this;return(0,f.Z)(function*(){if(yield h.init(),!h.widgetId){let g=h.container;if(!h.isInvisible){const v=document.createElement("div");g.appendChild(v),g=v}h.widgetId=h.getAssertedRecaptcha().render(g,h.parameters)}return h.widgetId})()}init(){var h=this;return(0,f.Z)(function*(){ne(wt()&&!mn(),h.auth,"internal-error"),yield function Oc(){let y=null;return new Promise(h=>{"complete"!==document.readyState?(y=()=>h(),window.addEventListener("load",y)):h()}).catch(h=>{throw y&&window.removeEventListener("load",y),h})}(),h.recaptcha=yield h._recaptchaLoader.load(h.auth,h.auth.languageCode||void 0);const g=yield function ol(y){return wi.apply(this,arguments)}(h.auth);ne(g,h.auth,"internal-error"),h.parameters.sitekey=g})()}getAssertedRecaptcha(){return ne(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class Oi{constructor(h,g){this.verificationId=h,this.onConfirmation=g}confirm(h){const g=wo._fromVerification(this.verificationId,h);return this.onConfirmation(g)}}function _n(){return(_n=(0,f.Z)(function*(y,h,g){const v=Re(y),T=yield Dr(v,h,(0,P.m9)(g));return new Oi(T,O=>Tn(v,O))})).apply(this,arguments)}function Ur(){return(Ur=(0,f.Z)(function*(y,h,g){const v=(0,P.m9)(y);yield _s(!1,v,"phone");const T=yield Dr(v.auth,h,(0,P.m9)(g));return new Oi(T,O=>vi(v,O))})).apply(this,arguments)}function ou(){return(ou=(0,f.Z)(function*(y,h,g){const v=(0,P.m9)(y),T=yield Dr(v.auth,h,(0,P.m9)(g));return new Oi(T,O=>vs(v,O))})).apply(this,arguments)}function Dr(y,h,g){return Ii.apply(this,arguments)}function Ii(){return(Ii=(0,f.Z)(function*(y,h,g){var v;const T=yield g.verify();try{let O;if(ne("string"==typeof T,y,"argument-error"),ne(g.type===ul,y,"argument-error"),O="string"==typeof h?{phoneNumber:h}:h,"session"in O){const q=O.session;if("phoneNumber"in O)return ne("enroll"===q.type,y,"internal-error"),(yield On(y,{idToken:q.credential,phoneEnrollmentInfo:{phoneNumber:O.phoneNumber,recaptchaToken:T}})).phoneSessionInfo.sessionInfo;{ne("signin"===q.type,y,"internal-error");const ie=(null===(v=O.multiFactorHint)||void 0===v?void 0:v.uid)||O.multiFactorUid;return ne(ie,y,"missing-multi-factor-info"),(yield Ac(y,{mfaPendingCredential:q.credential,mfaEnrollmentId:ie,phoneSignInInfo:{recaptchaToken:T}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:q}=yield Ap(y,{phoneNumber:O.phoneNumber,recaptchaToken:T});return q}}finally{g._reset()}})).apply(this,arguments)}function Ms(){return(Ms=(0,f.Z)(function*(y,h){yield ln((0,P.m9)(y),h)})).apply(this,arguments)}let Br=(()=>{class y{constructor(g){this.providerId=y.PROVIDER_ID,this.auth=Re(g)}verifyPhoneNumber(g,v){return Dr(this.auth,g,(0,P.m9)(v))}static credential(g,v){return wo._fromVerification(g,v)}static credentialFromResult(g){return y.credentialFromTaggedObject(g)}static credentialFromError(g){return y.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{phoneNumber:v,temporaryProof:T}=g;return v&&T?wo._fromTokenResponse(v,T):null}}return y.PROVIDER_ID="phone",y.PHONE_SIGN_IN_METHOD="phone",y})();function jr(y,h){return h?ee(h):(ne(y._popupRedirectResolver,y,"argument-error"),y._popupRedirectResolver)}class da extends nn{constructor(h){super("custom","custom"),this.params=h}_getIdTokenResponse(h){return Rn(h,this._buildIdpRequest())}_linkToIdToken(h,g){return Rn(h,this._buildIdpRequest(g))}_getReauthenticationResolver(h){return Rn(h,this._buildIdpRequest())}_buildIdpRequest(h){const g={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return h&&(g.idToken=h),g}}function ha(y){return Ks(y.auth,new da(y),y.bypassAuthState)}function Nc(y){const{auth:h,user:g}=y;return ne(g,h,"internal-error"),yc(g,new da(y),y.bypassAuthState)}function dh(y){return Pc.apply(this,arguments)}function Pc(){return(Pc=(0,f.Z)(function*(y){const{auth:h,user:g}=y;return ne(g,h,"internal-error"),ln(g,new da(y),y.bypassAuthState)})).apply(this,arguments)}class oi{constructor(h,g,v,T,O=!1){this.auth=h,this.resolver=v,this.user=T,this.bypassAuthState=O,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(g)?g:[g]}execute(){var h=this;return new Promise(function(){var g=(0,f.Z)(function*(v,T){h.pendingPromise={resolve:v,reject:T};try{h.eventManager=yield h.resolver._initialize(h.auth),yield h.onExecution(),h.eventManager.registerConsumer(h)}catch(O){h.reject(O)}});return function(v,T){return g.apply(this,arguments)}}())}onAuthEvent(h){var g=this;return(0,f.Z)(function*(){const{urlResponse:v,sessionId:T,postBody:O,tenantId:q,error:ie,type:Ve}=h;if(ie)return void g.reject(ie);const Je={auth:g.auth,requestUri:v,sessionId:T,tenantId:q||void 0,postBody:O||void 0,user:g.user,bypassAuthState:g.bypassAuthState};try{g.resolve(yield g.getIdpTask(Ve)(Je))}catch(gt){g.reject(gt)}})()}onError(h){this.reject(h)}getIdpTask(h){switch(h){case"signInViaPopup":case"signInViaRedirect":return ha;case"linkViaPopup":case"linkViaRedirect":return dh;case"reauthViaPopup":case"reauthViaRedirect":return Nc;default:be(this.auth,"internal-error")}}resolve(h){Q(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(h),this.unregisterAndCleanUp()}reject(h){Q(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(h),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const hh=new Lt(2e3,1e4);function fh(){return(fh=(0,f.Z)(function*(y,h,g){const v=Re(y);je(y,h,ms);const T=jr(v,g);return new Xi(v,"signInViaPopup",h,T).executeNotNull()})).apply(this,arguments)}function pa(){return(pa=(0,f.Z)(function*(y,h,g){const v=(0,P.m9)(y);je(v.auth,h,ms);const T=jr(v.auth,g);return new Xi(v.auth,"reauthViaPopup",h,T,v).executeNotNull()})).apply(this,arguments)}function ll(){return(ll=(0,f.Z)(function*(y,h,g){const v=(0,P.m9)(y);je(v.auth,h,ms);const T=jr(v.auth,g);return new Xi(v.auth,"linkViaPopup",h,T,v).executeNotNull()})).apply(this,arguments)}let Xi=(()=>{class y extends oi{constructor(g,v,T,O,q){super(g,v,O,q),this.provider=T,this.authWindow=null,this.pollId=null,y.currentPopupAction&&y.currentPopupAction.cancel(),y.currentPopupAction=this}executeNotNull(){var g=this;return(0,f.Z)(function*(){const v=yield g.execute();return ne(v,g.auth,"internal-error"),v})()}onExecution(){var g=this;return(0,f.Z)(function*(){Q(1===g.filter.length,"Popup operations only handle one event");const v=eo();g.authWindow=yield g.resolver._openPopup(g.auth,g.provider,g.filter[0],v),g.authWindow.associatedEvent=v,g.resolver._originValidation(g.auth).catch(T=>{g.reject(T)}),g.resolver._isIframeWebStorageSupported(g.auth,T=>{T||g.reject(me(g.auth,"web-storage-unsupported"))}),g.pollUserCancellation()})()}get eventId(){var g;return(null===(g=this.authWindow)||void 0===g?void 0:g.associatedEvent)||null}cancel(){this.reject(me(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,y.currentPopupAction=null}pollUserCancellation(){const g=()=>{var v,T;this.pollId=(null===(T=null===(v=this.authWindow)||void 0===v?void 0:v.window)||void 0===T?void 0:T.closed)?window.setTimeout(()=>{this.pollId=null,this.reject(me(this.auth,"popup-closed-by-user"))},2e3):window.setTimeout(g,hh.get())};g()}}return y.currentPopupAction=null,y})();const gr=new Map;class ga extends oi{constructor(h,g,v=!1){super(h,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],g,void 0,v),this.eventId=null}execute(){var h=()=>super.execute,g=this;return(0,f.Z)(function*(){let v=gr.get(g.auth._key());if(!v){try{const O=(yield function xo(y,h){return cl.apply(this,arguments)}(g.resolver,g.auth))?yield h().call(g):null;v=()=>Promise.resolve(O)}catch(T){v=()=>Promise.reject(T)}gr.set(g.auth._key(),v)}return g.bypassAuthState||gr.set(g.auth._key(),()=>Promise.resolve(null)),v()})()}onAuthEvent(h){var g=()=>super.onAuthEvent,v=this;return(0,f.Z)(function*(){if("signInViaRedirect"===h.type)return g().call(v,h);if("unknown"!==h.type){if(h.eventId){const T=yield v.auth._redirectUserForId(h.eventId);if(T)return v.user=T,g().call(v,h);v.resolve(null)}}else v.resolve(null)})()}onExecution(){return(0,f.Z)(function*(){})()}cleanUp(){}}function cl(){return(cl=(0,f.Z)(function*(y,h){const g=D(h),v=b(y);if(!(yield v._isAvailable()))return!1;const T="true"===(yield v._get(g));return yield v._remove(g),T})).apply(this,arguments)}function es(y,h){return xs.apply(this,arguments)}function xs(){return(xs=(0,f.Z)(function*(y,h){return b(y)._set(D(h),"true")})).apply(this,arguments)}function b(y){return ee(y._redirectPersistence)}function D(y){return le("pendingRedirect",y.config.apiKey,y.name)}function z(){return(z=(0,f.Z)(function*(y,h,g){const v=Re(y);je(y,h,ms);const T=jr(v,g);return yield es(T,v),T._openRedirect(v,h,"signInViaRedirect")})).apply(this,arguments)}function Ze(){return(Ze=(0,f.Z)(function*(y,h,g){const v=(0,P.m9)(y);je(v.auth,h,ms);const T=jr(v.auth,g);yield es(T,v.auth);const O=yield Ro(v);return T._openRedirect(v.auth,h,"reauthViaRedirect",O)})).apply(this,arguments)}function jt(){return(jt=(0,f.Z)(function*(y,h,g){const v=(0,P.m9)(y);je(v.auth,h,ms);const T=jr(v.auth,g);yield _s(!1,v,h.providerId),yield es(T,v.auth);const O=yield Ro(v);return T._openRedirect(v.auth,h,"linkViaRedirect",O)})).apply(this,arguments)}function Sn(){return(Sn=(0,f.Z)(function*(y,h){return yield Re(y)._initializationPromise,vn(y,h,!1)})).apply(this,arguments)}function vn(y,h){return ma.apply(this,arguments)}function ma(){return(ma=(0,f.Z)(function*(y,h,g=!1){const v=Re(y),T=jr(v,h),q=yield new ga(v,T,g).execute();return q&&!g&&(delete q.user._redirectEventId,yield v._persistUserIfCurrent(q.user),yield v._setRedirectUser(null,h)),q})).apply(this,arguments)}function Ro(y){return Cr.apply(this,arguments)}function Cr(){return(Cr=(0,f.Z)(function*(y){const h=eo(`${y.uid}:::`);return y._redirectEventId=h,yield y.auth._setRedirectUser(y),yield y.auth._persistUserIfCurrent(y),h})).apply(this,arguments)}class Hr{constructor(h){this.auth=h,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(h){this.consumers.add(h),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,h)&&(this.sendToConsumer(this.queuedRedirectEvent,h),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(h){this.consumers.delete(h)}onEvent(h){if(this.hasEventBeenHandled(h))return!1;let g=!1;return this.consumers.forEach(v=>{this.isEventForConsumer(h,v)&&(g=!0,this.sendToConsumer(h,v),this.saveEventToCache(h))}),this.hasHandledPotentialRedirect||!function kc(y){switch(y.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Fp(y);default:return!1}}(h)||(this.hasHandledPotentialRedirect=!0,g||(this.queuedRedirectEvent=h,g=!0)),g}sendToConsumer(h,g){var v;if(h.error&&!Fp(h)){const T=(null===(v=h.error.code)||void 0===v?void 0:v.split("auth/")[1])||"internal-error";g.onError(me(this.auth,T))}else g.onAuthEvent(h)}isEventForConsumer(h,g){const v=null===g.eventId||!!h.eventId&&h.eventId===g.eventId;return g.filter.includes(h.type)&&v}hasEventBeenHandled(h){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(bi(h))}saveEventToCache(h){this.cachedEventUids.add(bi(h)),this.lastProcessedEventTime=Date.now()}}function bi(y){return[y.type,y.eventId,y.sessionId,y.tenantId].filter(h=>h).join("-")}function Fp({type:y,error:h}){return"unknown"===y&&"auth/no-auth-event"===(null==h?void 0:h.code)}function hl(y){return Oo.apply(this,arguments)}function Oo(){return(Oo=(0,f.Z)(function*(y,h={}){return Vt(y,"GET","/v1/projects",h)})).apply(this,arguments)}const gh=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Fc=/^https?/;function Rs(){return(Rs=(0,f.Z)(function*(y){if(y.config.emulator)return;const{authorizedDomains:h}=yield hl(y);for(const g of h)try{if(fl(g))return}catch(v){}be(y,"unauthorized-domain")})).apply(this,arguments)}function fl(y){const h=Pe(),{protocol:g,hostname:v}=new URL(h);if(y.startsWith("chrome-extension://")){const q=new URL(y);return""===q.hostname&&""===v?"chrome-extension:"===g&&y.replace("chrome-extension://","")===h.replace("chrome-extension://",""):"chrome-extension:"===g&&q.hostname===v}if(!Fc.test(g))return!1;if(gh.test(y))return v===y;const T=y.replace(/\./g,"\\.");return new RegExp("^(.+\\."+T+"|"+T+")$","i").test(v)}const Vp=new Lt(3e4,6e4);function Up(){const y=Qt().___jsl;if(null==y?void 0:y.H)for(const h of Object.keys(y.H))if(y.H[h].r=y.H[h].r||[],y.H[h].L=y.H[h].L||[],y.H[h].r=[...y.H[h].L],y.CP)for(let g=0;g<y.CP.length;g++)y.CP[g]=null}let uu=null;function iy(y){return uu=uu||function mh(y){return new Promise((h,g)=>{var v,T,O;function q(){Up(),gapi.load("gapi.iframes",{callback:()=>{h(gapi.iframes.getContext())},ontimeout:()=>{Up(),g(me(y,"network-request-failed"))},timeout:Vp.get()})}if(null===(T=null===(v=Qt().gapi)||void 0===v?void 0:v.iframes)||void 0===T?void 0:T.Iframe)h(gapi.iframes.getContext());else{if(!(null===(O=Qt().gapi)||void 0===O?void 0:O.load)){const ie=la("iframefcb");return Qt()[ie]=()=>{gapi.load?q():g(me(y,"network-request-failed"))},so(`https://apis.google.com/js/api.js?onload=${ie}`).catch(Ve=>g(Ve))}q()}}).catch(h=>{throw uu=null,h})}(y),uu}const yh=new Lt(5e3,15e3),No={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},pl=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function ya(y){const h=y.config;ne(h.authDomain,y,"auth-domain-config-required");const g=h.emulator?Gn(h,"emulator/auth/iframe"):`https://${y.config.authDomain}/__/auth/iframe`,v={apiKey:h.apiKey,appName:y.name,v:oe.SDK_VERSION},T=pl.get(y.config.apiHost);T&&(v.eid=T);const O=y._getFrameworks();return O.length&&(v.fw=O.join(",")),`${g}?${(0,P.xO)(v).slice(1)}`}function Bp(){return Bp=(0,f.Z)(function*(y){const h=yield iy(y),g=Qt().gapi;return ne(g,y,"internal-error"),h.open({where:document.body,url:ya(y),messageHandlersFilter:g.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:No,dontclear:!0},v=>new Promise(function(){var T=(0,f.Z)(function*(O,q){yield v.restyle({setHideOnLeave:!1});const ie=me(y,"network-request-failed"),Ve=Qt().setTimeout(()=>{q(ie)},yh.get());function Je(){Qt().clearTimeout(Ve),O(v)}v.ping(Je).then(Je,()=>{q(ie)})});return function(O,q){return T.apply(this,arguments)}}()))}),Bp.apply(this,arguments)}const fb={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class Lc{constructor(h){this.window=h,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(h){}}}function Ih(y,h,g,v,T,O){ne(y.config.authDomain,y,"auth-domain-config-required"),ne(y.config.apiKey,y,"invalid-api-key");const q={apiKey:y.config.apiKey,appName:y.name,authType:g,redirectUrl:v,v:oe.SDK_VERSION,eventId:T};if(h instanceof ms){h.setDefaultLanguage(y.languageCode),q.providerId=h.providerId||"",(0,P.xb)(h.getCustomParameters())||(q.customParameters=JSON.stringify(h.getCustomParameters()));for(const[Ve,Je]of Object.entries(O||{}))q[Ve]=Je}if(h instanceof Pr){const Ve=h.getScopes().filter(Je=>""!==Je);Ve.length>0&&(q.scopes=Ve.join(","))}y.tenantId&&(q.tid=y.tenantId);const ie=q;for(const Ve of Object.keys(ie))void 0===ie[Ve]&&delete ie[Ve];return`${function y0({config:y}){return y.emulator?Gn(y,"emulator/auth/handler"):`https://${y.authDomain}/__/auth/handler`}(y)}?${(0,P.xO)(ie).slice(1)}`}const ts="webStorageSupport";class Dh extends class _0{constructor(h){this.factorId=h}_process(h,g,v){switch(g.type){case"enroll":return this._finalizeEnroll(h,g.credential,v);case"signin":return this._finalizeSignIn(h,g.credential);default:return qe("unexpected MultiFactorSessionType")}}}{constructor(h){super("phone"),this.credential=h}static _fromCredential(h){return new Dh(h)}_finalizeEnroll(h,g,v){return function bc(y,h){return Vt(y,"POST","/v2/accounts/mfaEnrollment:finalize",zt(y,h))}(h,{idToken:g,displayName:v,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(h,g){return function ua(y,h){return Vt(y,"POST","/v2/accounts/mfaSignIn:finalize",zt(y,h))}(h,{mfaPendingCredential:g,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let ly=(()=>{class y{constructor(){}static assertion(g){return Dh._fromCredential(g)}}return y.FACTOR_ID="phone",y})();var cy="@firebase/auth",Hp="0.19.12";class $p{constructor(h){this.auth=h,this.internalListeners=new Map}getUid(){var h;return this.assertAuthConfigured(),(null===(h=this.auth.currentUser)||void 0===h?void 0:h.uid)||null}getToken(h){var g=this;return(0,f.Z)(function*(){return g.assertAuthConfigured(),yield g.auth._initializationPromise,g.auth.currentUser?{accessToken:yield g.auth.currentUser.getIdToken(h)}:null})()}addAuthTokenListener(h){if(this.assertAuthConfigured(),this.internalListeners.has(h))return;const g=this.auth.onIdTokenChanged(v=>{var T;h((null===(T=v)||void 0===T?void 0:T.stsTokenManager.accessToken)||null)});this.internalListeners.set(h,g),this.updateProactiveRefresh()}removeAuthTokenListener(h){this.assertAuthConfigured();const g=this.internalListeners.get(h);!g||(this.internalListeners.delete(h),g(),this.updateProactiveRefresh())}assertAuthConfigured(){ne(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function _a(){return window}function cu(){return(cu=(0,f.Z)(function*(y,h,g){var v;const{BuildInfo:T}=_a();Q(h.sessionId,"AuthEvent did not contain a session ID");const O=yield v0(h.sessionId),q={};return Wn()?q.ibi=T.packageName:In()?q.apn=T.packageName:be(y,"operation-not-supported-in-this-environment"),T.displayName&&(q.appDisplayName=T.displayName),q.sessionId=O,Ih(y,g,h.type,void 0,null!==(v=h.eventId)&&void 0!==v?v:void 0,q)})).apply(this,arguments)}function Ni(){return(Ni=(0,f.Z)(function*(y){const{BuildInfo:h}=_a(),g={};Wn()?g.iosBundleId=h.packageName:In()?g.androidPackageName=h.packageName:be(y,"operation-not-supported-in-this-environment"),yield hl(y,g)})).apply(this,arguments)}function hu(){return(hu=(0,f.Z)(function*(y,h,g){const{cordova:v}=_a();let T=()=>{};try{yield new Promise((O,q)=>{let ie=null;function Ve(){var st;O();const Dn=null===(st=v.plugins.browsertab)||void 0===st?void 0:st.close;"function"==typeof Dn&&Dn(),"function"==typeof(null==g?void 0:g.close)&&g.close()}function Je(){ie||(ie=window.setTimeout(()=>{q(me(y,"redirect-cancelled-by-user"))},2e3))}function gt(){"visible"===(null==document?void 0:document.visibilityState)&&Je()}h.addPassiveListener(Ve),document.addEventListener("resume",Je,!1),In()&&document.addEventListener("visibilitychange",gt,!1),T=()=>{h.removePassiveListener(Ve),document.removeEventListener("resume",Je,!1),document.removeEventListener("visibilitychange",gt,!1),ie&&window.clearTimeout(ie)}})}finally{T()}})).apply(this,arguments)}function v0(y){return Ah.apply(this,arguments)}function Ah(){return(Ah=(0,f.Z)(function*(y){const h=E0(y),g=yield crypto.subtle.digest("SHA-256",h);return Array.from(new Uint8Array(g)).map(T=>T.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}function E0(y){if(Q(/[0-9a-zA-Z]+/.test(y),"Can only convert alpha-numeric strings"),"undefined"!=typeof TextEncoder)return(new TextEncoder).encode(y);const h=new ArrayBuffer(y.length),g=new Uint8Array(h);for(let v=0;v<y.length;v++)g[v]=y.charCodeAt(v);return g}!function dy(y){(0,oe._registerComponent)(new re.wA("auth",(h,{options:g})=>{const v=h.getProvider("app").getImmediate(),T=h.getProvider("heartbeat"),{apiKey:O,authDomain:q}=v.options;return((ie,Ve)=>{ne(O&&!O.includes(":"),"invalid-api-key",{appName:ie.name}),ne(!(null==q?void 0:q.includes(":")),"argument-error",{appName:ie.name});const Je={apiKey:O,authDomain:q,clientPlatform:y,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Jo(y)},gt=new Xr(ie,Ve,Je);return function pe(y,h){const g=(null==h?void 0:h.persistence)||[],v=(Array.isArray(g)?g:[g]).map(ee);(null==h?void 0:h.errorMap)&&y._updateErrorMap(h.errorMap),y._initializeWithPersistence(v,null==h?void 0:h.popupRedirectResolver)}(gt,g),gt})(v,T)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((h,g,v)=>{h.getProvider("auth-internal").initialize()})),(0,oe._registerComponent)(new re.wA("auth-internal",h=>{const g=Re(h.getProvider("auth").getImmediate());return new $p(g)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,oe.registerVersion)(cy,Hp,function Ch(y){switch(y){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(y)),(0,oe.registerVersion)(cy,Hp,"esm2017")}("Browser");class ml extends Hr{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(h=>{this.resolveInialized=h})}addPassiveListener(h){this.passiveListeners.add(h)}removePassiveListener(h){this.passiveListeners.delete(h)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(h){return this.resolveInialized(),this.passiveListeners.forEach(g=>g(h)),super.onEvent(h)}initialized(){var h=this;return(0,f.Z)(function*(){yield h.initPromise})()}}function fy(y){return yl.apply(this,arguments)}function yl(){return(yl=(0,f.Z)(function*(y){const h=yield Vc()._get(Mh(y));return h&&(yield Vc()._remove(Mh(y))),h})).apply(this,arguments)}function py(){const y=[],h="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let g=0;g<20;g++){const v=Math.floor(Math.random()*h.length);y.push(h.charAt(v))}return y.join("")}function Vc(){return ee(hn)}function Mh(y){return le("authEvent",y.config.apiKey,y.name)}function Bc(y){if(!(null==y?void 0:y.includes("?")))return{};const[h,...g]=y.split("?");return(0,P.zd)(g.join("?"))}function Rh(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:me("no-auth-event")}}function Hc(){var y;return(null===(y=null==self?void 0:self.location)||void 0===y?void 0:y.protocol)||null}function my(y=(0,P.z$)()){return!("file:"!==Hc()&&"ionic:"!==Hc()||!y.toLowerCase().match(/iphone|ipad|ipod|android/))}function $r(){try{const y=self.localStorage,h=eo();if(y)return y.setItem(h,"1"),y.removeItem(h),!function vl(y=(0,P.z$)()){return function pb(){return(0,P.w1)()&&11===(null==document?void 0:document.documentMode)}()||function I0(y=(0,P.z$)()){return/Edge\/\d+/.test(y)}(y)}()||(0,P.hl)()}catch(y){return $c()&&(0,P.hl)()}return!1}function $c(){return"undefined"!=typeof global&&"WorkerGlobalScope"in global&&"importScripts"in global}function Oh(){return(function Xp(){return"http:"===Hc()||"https:"===Hc()}()||(0,P.ru)()||my())&&!function w0(){return(0,P.b$)()||(0,P.UG)()}()&&$r()&&!$c()}function eg(){return my()&&"undefined"!=typeof document}function ct(){return(ct=(0,f.Z)(function*(){return!!eg()&&new Promise(y=>{const h=setTimeout(()=>{y(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(h),y(!0)})})})).apply(this,arguments)}const Gr={LOCAL:"local",NONE:"none",SESSION:"session"},Os=ne,qr="persistence";function El(y){return Gc.apply(this,arguments)}function Gc(){return(Gc=(0,f.Z)(function*(y){yield y._initializationPromise;const h=tg(),g=le(qr,y.config.apiKey,y.name);h&&h.setItem(g,y._getPersistence())})).apply(this,arguments)}function tg(){var y;try{return(null===(y=function rr(){return"undefined"!=typeof window?window:null}())||void 0===y?void 0:y.sessionStorage)||null}catch(h){return null}}const yy=ne;class ks{constructor(){this.browserResolver=ee(class gl{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Ki,this._completeRedirectFn=vn}_openPopup(h,g,v,T){var O=this;return(0,f.Z)(function*(){var q;Q(null===(q=O.eventManagers[h._key()])||void 0===q?void 0:q.manager,"_initialize() not called before _openPopup()");const ie=Ih(h,g,v,Pe(),T);return function lu(y,h,g,v=500,T=600){const O=Math.max((window.screen.availHeight-T)/2,0).toString(),q=Math.max((window.screen.availWidth-v)/2,0).toString();let ie="";const Ve=Object.assign(Object.assign({},fb),{width:v.toString(),height:T.toString(),top:O,left:q}),Je=(0,P.z$)().toLowerCase();g&&(ie=dr(Je)?"_blank":g),ft(Je)&&(h=h||"http://localhost",Ve.scrollbars="yes");const gt=Object.entries(Ve).reduce((Dn,[Di,wa])=>`${Dn}${Di}=${wa},`,"");if(function ka(y=(0,P.z$)()){var h;return Wn(y)&&!!(null===(h=window.navigator)||void 0===h?void 0:h.standalone)}(Je)&&"_self"!==ie)return function ay(y,h){const g=document.createElement("a");g.href=y,g.target=h;const v=document.createEvent("MouseEvent");v.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),g.dispatchEvent(v)}(h||"",ie),new Lc(null);const st=window.open(h||"",ie,gt);ne(st,y,"popup-blocked");try{st.focus()}catch(Dn){}return new Lc(st)}(h,ie,eo())})()}_openRedirect(h,g,v,T){var O=this;return(0,f.Z)(function*(){return yield O._originValidation(h),function So(y){Qt().location.href=y}(Ih(h,g,v,Pe(),T)),new Promise(()=>{})})()}_initialize(h){const g=h._key();if(this.eventManagers[g]){const{manager:T,promise:O}=this.eventManagers[g];return T?Promise.resolve(T):(Q(O,"If manager is not set, promise should be"),O)}const v=this.initAndGetManager(h);return this.eventManagers[g]={promise:v},v.catch(()=>{delete this.eventManagers[g]}),v}initAndGetManager(h){var g=this;return(0,f.Z)(function*(){const v=yield function m0(y){return Bp.apply(this,arguments)}(h),T=new Hr(h);return v.register("authEvent",O=>(ne(null==O?void 0:O.authEvent,h,"invalid-auth-event"),{status:T.onEvent(O.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),g.eventManagers[h._key()]={manager:T},g.iframes[h._key()]=v,T})()}_isIframeWebStorageSupported(h,g){this.iframes[h._key()].send(ts,{type:ts},T=>{var O;const q=null===(O=null==T?void 0:T[0])||void 0===O?void 0:O[ts];void 0!==q&&g(!!q),be(h,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(h){const g=h._key();return this.originValidationPromises[g]||(this.originValidationPromises[g]=function Lp(y){return Rs.apply(this,arguments)}(h)),this.originValidationPromises[g]}get _shouldInitProactively(){return ji()||Wt()||Wn()}}),this.cordovaResolver=ee(class Yp{constructor(){this._redirectPersistence=Ki,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=vn}_initialize(h){var g=this;return(0,f.Z)(function*(){const v=h._key();let T=g.eventManagers.get(v);return T||(T=new ml(h),g.eventManagers.set(v,T),g.attachCallbackListeners(h,T)),T})()}_openPopup(h){be(h,"operation-not-supported-in-this-environment")}_openRedirect(h,g,v,T){var O=this;return(0,f.Z)(function*(){!function Zp(y){var h,g,v,T,O,q,ie,Ve,Je,gt;const st=_a();ne("function"==typeof(null===(h=null==st?void 0:st.universalLinks)||void 0===h?void 0:h.subscribe),y,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),ne(void 0!==(null===(g=null==st?void 0:st.BuildInfo)||void 0===g?void 0:g.packageName),y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),ne("function"==typeof(null===(O=null===(T=null===(v=null==st?void 0:st.cordova)||void 0===v?void 0:v.plugins)||void 0===T?void 0:T.browsertab)||void 0===O?void 0:O.openUrl),y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),ne("function"==typeof(null===(Ve=null===(ie=null===(q=null==st?void 0:st.cordova)||void 0===q?void 0:q.plugins)||void 0===ie?void 0:ie.browsertab)||void 0===Ve?void 0:Ve.isAvailable),y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),ne("function"==typeof(null===(gt=null===(Je=null==st?void 0:st.cordova)||void 0===Je?void 0:Je.InAppBrowser)||void 0===gt?void 0:gt.open),y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(h);const q=yield O._initialize(h);yield q.initialized(),q.resetRedirect(),function dl(){gr.clear()}(),yield O._originValidation(h);const ie=function Sh(y,h,g=null){return{type:h,eventId:g,urlResponse:null,sessionId:py(),postBody:null,tenantId:y.tenantId,error:me(y,"no-auth-event")}}(h,v,T);yield function hy(y,h){return Vc()._set(Mh(y),h)}(h,ie);const Ve=yield function zp(y,h,g){return cu.apply(this,arguments)}(h,ie,g),Je=yield function du(y){const{cordova:h}=_a();return new Promise(g=>{h.plugins.browsertab.isAvailable(v=>{let T=null;v?h.plugins.browsertab.openUrl(y):T=h.InAppBrowser.open(y,function $s(y=(0,P.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(y)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(y)}()?"_blank":"_system","location=yes"),g(T)})})}(Ve);return function Wp(y,h,g){return hu.apply(this,arguments)}(h,q,Je)})()}_isIframeWebStorageSupported(h,g){throw new Error("Method not implemented.")}_originValidation(h){const g=h._key();return this.originValidationPromises[g]||(this.originValidationPromises[g]=function Th(y){return Ni.apply(this,arguments)}(h)),this.originValidationPromises[g]}attachCallbackListeners(h,g){const{universalLinks:v,handleOpenURL:T,BuildInfo:O}=_a(),q=setTimeout((0,f.Z)(function*(){yield fy(h),g.onEvent(Rh())}),500),ie=function(){var gt=(0,f.Z)(function*(st){clearTimeout(q);const Dn=yield fy(h);let Di=null;Dn&&(null==st?void 0:st.url)&&(Di=function va(y,h){var g,v;const T=function Uc(y){const h=Bc(y),g=h.link?decodeURIComponent(h.link):void 0,v=Bc(g).link,T=h.deep_link_id?decodeURIComponent(h.deep_link_id):void 0;return Bc(T).link||T||v||g||y}(h);if(T.includes("/__/auth/callback")){const O=Bc(T),q=O.firebaseError?function xh(y){try{return JSON.parse(y)}catch(h){return null}}(decodeURIComponent(O.firebaseError)):null,ie=null===(v=null===(g=null==q?void 0:q.code)||void 0===g?void 0:g.split("auth/"))||void 0===v?void 0:v[1],Ve=ie?me(ie):null;return Ve?{type:y.type,eventId:y.eventId,tenantId:y.tenantId,error:Ve,urlResponse:null,sessionId:null,postBody:null}:{type:y.type,eventId:y.eventId,tenantId:y.tenantId,sessionId:y.sessionId,urlResponse:T,postBody:null}}return null}(Dn,st.url)),g.onEvent(Di||Rh())});return function(Dn){return gt.apply(this,arguments)}}();void 0!==v&&"function"==typeof v.subscribe&&v.subscribe(null,ie);const Ve=T,Je=`${O.packageName.toLowerCase()}://`;_a().handleOpenURL=function(){var gt=(0,f.Z)(function*(st){if(st.toLowerCase().startsWith(Je)&&ie({url:st}),"function"==typeof Ve)try{Ve(st)}catch(Dn){console.error(Dn)}});return function(st){return gt.apply(this,arguments)}}()}}),this.underlyingResolver=null,this._redirectPersistence=Ki,this._completeRedirectFn=vn}_initialize(h){var g=this;return(0,f.Z)(function*(){return yield g.selectUnderlyingResolver(),g.assertedUnderlyingResolver._initialize(h)})()}_openPopup(h,g,v,T){var O=this;return(0,f.Z)(function*(){return yield O.selectUnderlyingResolver(),O.assertedUnderlyingResolver._openPopup(h,g,v,T)})()}_openRedirect(h,g,v,T){var O=this;return(0,f.Z)(function*(){return yield O.selectUnderlyingResolver(),O.assertedUnderlyingResolver._openRedirect(h,g,v,T)})()}_isIframeWebStorageSupported(h,g){this.assertedUnderlyingResolver._isIframeWebStorageSupported(h,g)}_originValidation(h){return this.assertedUnderlyingResolver._originValidation(h)}get _shouldInitProactively(){return eg()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return yy(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var h=this;return(0,f.Z)(function*(){if(h.underlyingResolver)return;const g=yield function fn(){return ct.apply(this,arguments)}();h.underlyingResolver=g?h.cordovaResolver:h.browserResolver})()}}function ng(y){return y.unwrap()}function qc(y){return _y(y)}function _y(y){const{_tokenResponse:h}=y instanceof P.ZR?y.customData:y;if(!h)return null;if(!(y instanceof P.ZR)&&"temporaryProof"in h&&"phoneNumber"in h)return Br.credentialFromResult(y);const g=h.providerId;if(!g||"password"===g)return null;let v;switch(g){case"google.com":v=ea;break;case"facebook.com":v=Ws;break;case"github.com":v=gc;break;case"twitter.com":v=ja;break;default:const{oauthIdToken:T,oauthAccessToken:O,oauthTokenSecret:q,pendingToken:ie,nonce:Ve}=h;return O||q||T||ie?ie?g.startsWith("saml.")?bo._create(g,ie):Gi._fromParams({providerId:g,signInMethod:g,pendingToken:ie,idToken:T,accessToken:O}):new Io(g).credential({idToken:T,accessToken:O,rawNonce:Ve}):null}return y instanceof P.ZR?v.credentialFromError(y):v.credentialFromResult(y)}function mr(y,h){return h.catch(g=>{throw g instanceof P.ZR&&function Po(y,h){var g;const v=null===(g=h.customData)||void 0===g?void 0:g._tokenResponse;if("auth/multi-factor-auth-required"===h.code)h.resolver=new ig(y,function tu(y,h){var g;const v=(0,P.m9)(y),T=h;return ne(h.customData.operationType,v,"argument-error"),ne(null===(g=T.customData._serverResponse)||void 0===g?void 0:g.mfaPendingCredential,v,"argument-error"),oa._fromError(v,T)}(y,h));else if(v){const T=_y(h),O=h;T&&(O.credential=T,O.tenantId=v.tenantId||void 0,O.email=v.email||void 0,O.phoneNumber=v.phoneNumber||void 0)}}(y,g),g}).then(g=>{const T=g.user;return{operationType:g.operationType,credential:qc(g),additionalUserInfo:pr(g),user:Fs.getOrCreate(T)}})}function Nh(y,h){return zc.apply(this,arguments)}function zc(){return(zc=(0,f.Z)(function*(y,h){const g=yield h;return{verificationId:g.verificationId,confirm:v=>mr(y,g.confirm(v))}})).apply(this,arguments)}class ig{constructor(h,g){this.resolver=g,this.auth=function rg(y){return y.wrapped()}(h)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(h){return mr(ng(this.auth),this.resolver.resolveSignIn(h))}}class Fs{constructor(h){this._delegate=h,this.multiFactor=function Dc(y){const h=(0,P.m9)(y);return Ao.has(h)||Ao.set(h,Zi._fromUser(h)),Ao.get(h)}(h)}static getOrCreate(h){return Fs.USER_MAP.has(h)||Fs.USER_MAP.set(h,new Fs(h)),Fs.USER_MAP.get(h)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(h){return this._delegate.getIdTokenResult(h)}getIdToken(h){return this._delegate.getIdToken(h)}linkAndRetrieveDataWithCredential(h){return this.linkWithCredential(h)}linkWithCredential(h){var g=this;return(0,f.Z)(function*(){return mr(g.auth,vi(g._delegate,h))})()}linkWithPhoneNumber(h,g){var v=this;return(0,f.Z)(function*(){return Nh(v.auth,function su(y,h,g){return Ur.apply(this,arguments)}(v._delegate,h,g))})()}linkWithPopup(h){var g=this;return(0,f.Z)(function*(){return mr(g.auth,function ph(y,h,g){return ll.apply(this,arguments)}(g._delegate,h,ks))})()}linkWithRedirect(h){var g=this;return(0,f.Z)(function*(){return yield El(Re(g.auth)),function nt(y,h,g){return function pt(y,h,g){return jt.apply(this,arguments)}(y,h,g)}(g._delegate,h,ks)})()}reauthenticateAndRetrieveDataWithCredential(h){return this.reauthenticateWithCredential(h)}reauthenticateWithCredential(h){var g=this;return(0,f.Z)(function*(){return mr(g.auth,vs(g._delegate,h))})()}reauthenticateWithPhoneNumber(h,g){return Nh(this.auth,function br(y,h,g){return ou.apply(this,arguments)}(this._delegate,h,g))}reauthenticateWithPopup(h){return mr(this.auth,function ao(y,h,g){return pa.apply(this,arguments)}(this._delegate,h,ks))}reauthenticateWithRedirect(h){var g=this;return(0,f.Z)(function*(){return yield El(Re(g.auth)),function te(y,h,g){return function Se(y,h,g){return Ze.apply(this,arguments)}(y,h,g)}(g._delegate,h,ks)})()}sendEmailVerification(h){return function Ei(y,h){return zu.apply(this,arguments)}(this._delegate,h)}unlink(h){var g=this;return(0,f.Z)(function*(){return yield function ta(y,h){return Uu.apply(this,arguments)}(g._delegate,h),g})()}updateEmail(h){return function Ku(y,h){return Yu((0,P.m9)(y),h,null)}(this._delegate,h)}updatePassword(h){return function vc(y,h){return Yu((0,P.m9)(y),null,h)}(this._delegate,h)}updatePhoneNumber(h){return function ca(y,h){return Ms.apply(this,arguments)}(this._delegate,h)}updateProfile(h){return function sa(y,h){return Zu.apply(this,arguments)}(this._delegate,h)}verifyBeforeUpdateEmail(h,g){return function Xa(y,h,g){return eu.apply(this,arguments)}(this._delegate,h,g)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}Fs.USER_MAP=new WeakMap;const wl=ne;let Ea=(()=>{class y{constructor(g,v){if(this.app=g,v.isInitialized())return this._delegate=v.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:T}=g.options;wl(T,"invalid-api-key",{appName:g.name}),wl(T,"invalid-api-key",{appName:g.name});const O="undefined"!=typeof window?ks:void 0;this._delegate=v.initialize({options:{persistence:Ph(T,g.name),popupRedirectResolver:O}}),this._delegate._updateErrorMap(xe),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?Fs.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(g){this._delegate.languageCode=g}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(g){this._delegate.tenantId=g}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(g,v){!function un(y,h,g){const v=Re(y);ne(v._canInitEmulator,v,"emulator-config-failed"),ne(/^https?:\/\//.test(h),v,"invalid-emulator-scheme");const T=!!(null==g?void 0:g.disableWarnings),O=er(h),{host:q,port:ie}=function ds(y){const h=er(y),g=/(\/\/)?([^?#/]+)/.exec(y.substr(h.length));if(!g)return{host:"",port:null};const v=g[2].split("@").pop()||"",T=/^(\[[^\]]+\])(:|$)/.exec(v);if(T){const O=T[1];return{host:O,port:xn(v.substr(O.length+1))}}{const[O,q]=v.split(":");return{host:O,port:xn(q)}}}(h);v.config.emulator={url:`${O}//${q}${null===ie?"":`:${ie}`}/`},v.settings.appVerificationDisabledForTesting=!0,v.emulatorConfig=Object.freeze({host:q,port:ie,protocol:O.replace(":",""),options:Object.freeze({disableWarnings:T})}),T||function Ri(){function y(){const h=document.createElement("p"),g=h.style;h.innerText="Running in emulator mode. Do not use with production credentials.",g.position="fixed",g.width="100%",g.backgroundColor="#ffffff",g.border=".1em solid #000000",g.color="#b50000",g.bottom="0px",g.left="0px",g.margin="0px",g.zIndex="10000",g.textAlign="center",h.classList.add("firebase-emulator-warning"),document.body.appendChild(h)}"undefined"!=typeof console&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),"undefined"!=typeof window&&"undefined"!=typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",y):y())}()}(this._delegate,g,v)}applyActionCode(g){return function ju(y,h){return we.apply(this,arguments)}(this._delegate,g)}checkActionCode(g){return xt(this._delegate,g)}confirmPasswordReset(g,v){return function Ya(y,h,g){return Bu.apply(this,arguments)}(this._delegate,g,v)}createUserWithEmailAndPassword(g,v){var T=this;return(0,f.Z)(function*(){return mr(T._delegate,function To(y,h,g){return Lr.apply(this,arguments)}(T._delegate,g,v))})()}fetchProvidersForEmail(g){return this.fetchSignInMethodsForEmail(g)}fetchSignInMethodsForEmail(g){return function Ja(y,h){return bs.apply(this,arguments)}(this._delegate,g)}isSignInWithEmailLink(g){return function qu(y,h){const g=zs.parseLink(h);return"EMAIL_SIGNIN"===(null==g?void 0:g.operation)}(0,g)}getRedirectResult(){var g=this;return(0,f.Z)(function*(){wl(Oh(),g._delegate,"operation-not-supported-in-this-environment");const v=yield function Et(y,h){return Sn.apply(this,arguments)}(g._delegate,ks);return v?mr(g._delegate,Promise.resolve(v)):{credential:null,user:null}})()}addFrameworkForLogging(g){!function gy(y,h){Re(y)._logFramework(h)}(this._delegate,g)}onAuthStateChanged(g,v,T){const{next:O,error:q,complete:ie}=Nn(g,v,T);return this._delegate.onAuthStateChanged(O,q,ie)}onIdTokenChanged(g,v,T){const{next:O,error:q,complete:ie}=Nn(g,v,T);return this._delegate.onIdTokenChanged(O,q,ie)}sendSignInLinkToEmail(g,v){return function Gu(y,h,g){return _c.apply(this,arguments)}(this._delegate,g,v)}sendPasswordResetEmail(g,v){return function Za(y,h,g){return Ka.apply(this,arguments)}(this._delegate,g,v||void 0)}setPersistence(g){var v=this;return(0,f.Z)(function*(){let T;switch(function Ns(y,h){Os(Object.values(Gr).includes(h),y,"invalid-persistence-type"),(0,P.b$)()?Os(h!==Gr.SESSION,y,"unsupported-persistence-type"):(0,P.UG)()?Os(h===Gr.NONE,y,"unsupported-persistence-type"):$c()?Os(h===Gr.NONE||h===Gr.LOCAL&&(0,P.hl)(),y,"unsupported-persistence-type"):Os(h===Gr.NONE||$r(),y,"unsupported-persistence-type")}(v._delegate,g),g){case Gr.SESSION:T=Ki;break;case Gr.LOCAL:T=(yield ee(Yi)._isAvailable())?Yi:hn;break;case Gr.NONE:T=$;break;default:return be("argument-error",{appName:v._delegate.name})}return v._delegate.setPersistence(T)})()}signInAndRetrieveDataWithCredential(g){return this.signInWithCredential(g)}signInAnonymously(){return mr(this._delegate,function $a(y){return mc.apply(this,arguments)}(this._delegate))}signInWithCredential(g){return mr(this._delegate,Tn(this._delegate,g))}signInWithCustomToken(g){return mr(this._delegate,function Es(y,h){return ws.apply(this,arguments)}(this._delegate,g))}signInWithEmailAndPassword(g,v){return mr(this._delegate,function $u(y,h,g){return Tn((0,P.m9)(y),Vu.credential(h,g))}(this._delegate,g,v))}signInWithEmailLink(g,v){return mr(this._delegate,function Qa(y,h,g){return Is.apply(this,arguments)}(this._delegate,g,v))}signInWithPhoneNumber(g,v){return Nh(this._delegate,function ch(y,h,g){return _n.apply(this,arguments)}(this._delegate,g,v))}signInWithPopup(g){var v=this;return(0,f.Z)(function*(){return wl(Oh(),v._delegate,"operation-not-supported-in-this-environment"),mr(v._delegate,function fa(y,h,g){return fh.apply(this,arguments)}(v._delegate,g,ks))})()}signInWithRedirect(g){var v=this;return(0,f.Z)(function*(){return wl(Oh(),v._delegate,"operation-not-supported-in-this-environment"),yield El(v._delegate),function M(y,h,g){return function F(y,h,g){return z.apply(this,arguments)}(y,h,g)}(v._delegate,g,ks)})()}updateCurrentUser(g){return this._delegate.updateCurrentUser(g)}verifyPasswordResetCode(g){return function gn(y,h){return Co.apply(this,arguments)}(this._delegate,g)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return y.Persistence=Gr,y})();function Nn(y,h,g){let v=y;"function"!=typeof y&&({next:v,error:h,complete:g}=y);const T=v;return{next:q=>T(q&&Fs.getOrCreate(q)),error:h,complete:g}}function Ph(y,h){const g=function Ps(y,h){const g=tg();if(!g)return[];const v=le(qr,y,h);switch(g.getItem(v)){case Gr.NONE:return[$];case Gr.LOCAL:return[Yi,Ki];case Gr.SESSION:return[Ki];default:return[]}}(y,h);if("undefined"!=typeof self&&!g.includes(Yi)&&g.push(Yi),"undefined"!=typeof window)for(const v of[hn,Ki])g.includes(v)||g.push(v);return g.includes($)||g.push($),g}class Il{constructor(){this.providerId="phone",this._delegate=new Br(ng(Z.Z.auth()))}static credential(h,g){return Br.credential(h,g)}verifyPhoneNumber(h,g){return this._delegate.verifyPhoneNumber(h,g)}unwrap(){return this._delegate}}Il.PHONE_SIGN_IN_METHOD=Br.PHONE_SIGN_IN_METHOD,Il.PROVIDER_ID=Br.PROVIDER_ID;const Wc=ne;class sg{constructor(h,g,v=Z.Z.app()){var T;Wc(null===(T=v.options)||void 0===T?void 0:T.apiKey,"invalid-api-key",{appName:v.name}),this._delegate=new lh(h,g,v.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function og(y){y.INTERNAL.registerComponent(new re.wA("auth-compat",h=>{const g=h.getProvider("app-compat").getImmediate(),v=h.getProvider("auth");return new Ea(g,v)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"}},EmailAuthProvider:Vu,FacebookAuthProvider:Ws,GithubAuthProvider:gc,GoogleAuthProvider:ea,OAuthProvider:Io,SAMLAuthProvider:ti,PhoneAuthProvider:Il,PhoneMultiFactorGenerator:ly,RecaptchaVerifier:sg,TwitterAuthProvider:ja,Auth:Ea,AuthCredential:nn,Error:P.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),y.registerVersion("@firebase/auth-compat","0.2.12")}(Z.Z)},8306:(it,Ce,k)=>{k.d(Ce,{y:()=>B});var f=k(2961),Z=k(727),P=k(8822),oe=k(4671);var re=k(2416),ce=k(576),ue=k(2806);let B=(()=>{class Te{constructor(ke){ke&&(this._subscribe=ke)}lift(ke){const de=new Te;return de.source=this,de.operator=ke,de}subscribe(ke,de,ve){const Ye=function $e(Te){return Te&&Te instanceof f.Lv||function Y(Te){return Te&&(0,ce.m)(Te.next)&&(0,ce.m)(Te.error)&&(0,ce.m)(Te.complete)}(Te)&&(0,Z.Nn)(Te)}(ke)?ke:new f.Hp(ke,de,ve);return(0,ue.x)(()=>{const{operator:ze,source:be}=this;Ye.add(ze?ze.call(Ye,be):be?this._subscribe(Ye):this._trySubscribe(Ye))}),Ye}_trySubscribe(ke){try{return this._subscribe(ke)}catch(de){ke.error(de)}}forEach(ke,de){return new(de=j(de))((ve,Ye)=>{const ze=new f.Hp({next:be=>{try{ke(be)}catch(me){Ye(me),ze.unsubscribe()}},error:Ye,complete:ve});this.subscribe(ze)})}_subscribe(ke){var de;return null===(de=this.source)||void 0===de?void 0:de.subscribe(ke)}[P.L](){return this}pipe(...ke){return function fe(Te){return 0===Te.length?oe.y:1===Te.length?Te[0]:function(ke){return Te.reduce((de,ve)=>ve(de),ke)}}(ke)(this)}toPromise(ke){return new(ke=j(ke))((de,ve)=>{let Ye;this.subscribe(ze=>Ye=ze,ze=>ve(ze),()=>de(Ye))})}}return Te.create=xe=>new Te(xe),Te})();function j(Te){var xe;return null!==(xe=null!=Te?Te:re.v.Promise)&&void 0!==xe?xe:Promise}},7579:(it,Ce,k)=>{k.d(Ce,{x:()=>re});var f=k(8306),Z=k(727);const oe=(0,k(3888).d)(ue=>function(){ue(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var J=k(8737),fe=k(2806);let re=(()=>{class ue extends f.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(j){const Y=new ce(this,this);return Y.operator=j,Y}_throwIfClosed(){if(this.closed)throw new oe}next(j){(0,fe.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const Y of this.currentObservers)Y.next(j)}})}error(j){(0,fe.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=j;const{observers:Y}=this;for(;Y.length;)Y.shift().error(j)}})}complete(){(0,fe.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:j}=this;for(;j.length;)j.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var j;return(null===(j=this.observers)||void 0===j?void 0:j.length)>0}_trySubscribe(j){return this._throwIfClosed(),super._trySubscribe(j)}_subscribe(j){return this._throwIfClosed(),this._checkFinalizedStatuses(j),this._innerSubscribe(j)}_innerSubscribe(j){const{hasError:Y,isStopped:$e,observers:Te}=this;return Y||$e?Z.Lc:(this.currentObservers=null,Te.push(j),new Z.w0(()=>{this.currentObservers=null,(0,J.P)(Te,j)}))}_checkFinalizedStatuses(j){const{hasError:Y,thrownError:$e,isStopped:Te}=this;Y?j.error($e):Te&&j.complete()}asObservable(){const j=new f.y;return j.source=this,j}}return ue.create=(B,j)=>new ce(B,j),ue})();class ce extends re{constructor(B,j){super(),this.destination=B,this.source=j}next(B){var j,Y;null===(Y=null===(j=this.destination)||void 0===j?void 0:j.next)||void 0===Y||Y.call(j,B)}error(B){var j,Y;null===(Y=null===(j=this.destination)||void 0===j?void 0:j.error)||void 0===Y||Y.call(j,B)}complete(){var B,j;null===(j=null===(B=this.destination)||void 0===B?void 0:B.complete)||void 0===j||j.call(B)}_subscribe(B){var j,Y;return null!==(Y=null===(j=this.source)||void 0===j?void 0:j.subscribe(B))&&void 0!==Y?Y:Z.Lc}}},2961:(it,Ce,k)=>{k.d(Ce,{Hp:()=>ke,Lv:()=>Y});var f=k(576),Z=k(727),P=k(2416),oe=k(7849);function J(){}const fe=ue("C",void 0,void 0);function ue(be,me,_e){return{kind:be,value:me,error:_e}}var B=k(3410),j=k(2806);class Y extends Z.w0{constructor(me){super(),this.isStopped=!1,me?(this.destination=me,(0,Z.Nn)(me)&&me.add(this)):this.destination=ze}static create(me,_e,je){return new ke(me,_e,je)}next(me){this.isStopped?Ye(function ce(be){return ue("N",be,void 0)}(me),this):this._next(me)}error(me){this.isStopped?Ye(function re(be){return ue("E",void 0,be)}(me),this):(this.isStopped=!0,this._error(me))}complete(){this.isStopped?Ye(fe,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(me){this.destination.next(me)}_error(me){try{this.destination.error(me)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const $e=Function.prototype.bind;function Te(be,me){return $e.call(be,me)}class xe{constructor(me){this.partialObserver=me}next(me){const{partialObserver:_e}=this;if(_e.next)try{_e.next(me)}catch(je){de(je)}}error(me){const{partialObserver:_e}=this;if(_e.error)try{_e.error(me)}catch(je){de(je)}else de(me)}complete(){const{partialObserver:me}=this;if(me.complete)try{me.complete()}catch(_e){de(_e)}}}class ke extends Y{constructor(me,_e,je){let Be;if(super(),(0,f.m)(me)||!me)Be={next:null!=me?me:void 0,error:null!=_e?_e:void 0,complete:null!=je?je:void 0};else{let ne;this&&P.v.useDeprecatedNextContext?(ne=Object.create(me),ne.unsubscribe=()=>this.unsubscribe(),Be={next:me.next&&Te(me.next,ne),error:me.error&&Te(me.error,ne),complete:me.complete&&Te(me.complete,ne)}):Be=me}this.destination=new xe(Be)}}function de(be){P.v.useDeprecatedSynchronousErrorHandling?(0,j.O)(be):(0,oe.h)(be)}function Ye(be,me){const{onStoppedNotification:_e}=P.v;_e&&B.z.setTimeout(()=>_e(be,me))}const ze={closed:!0,next:J,error:function ve(be){throw be},complete:J}},727:(it,Ce,k)=>{k.d(Ce,{Lc:()=>fe,w0:()=>J,Nn:()=>re});var f=k(576);const P=(0,k(3888).d)(ue=>function(j){ue(this),this.message=j?`${j.length} errors occurred during unsubscription:\n${j.map((Y,$e)=>`${$e+1}) ${Y.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=j});var oe=k(8737);class J{constructor(B){this.initialTeardown=B,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let B;if(!this.closed){this.closed=!0;const{_parentage:j}=this;if(j)if(this._parentage=null,Array.isArray(j))for(const Te of j)Te.remove(this);else j.remove(this);const{initialTeardown:Y}=this;if((0,f.m)(Y))try{Y()}catch(Te){B=Te instanceof P?Te.errors:[Te]}const{_finalizers:$e}=this;if($e){this._finalizers=null;for(const Te of $e)try{ce(Te)}catch(xe){B=null!=B?B:[],xe instanceof P?B=[...B,...xe.errors]:B.push(xe)}}if(B)throw new P(B)}}add(B){var j;if(B&&B!==this)if(this.closed)ce(B);else{if(B instanceof J){if(B.closed||B._hasParent(this))return;B._addParent(this)}(this._finalizers=null!==(j=this._finalizers)&&void 0!==j?j:[]).push(B)}}_hasParent(B){const{_parentage:j}=this;return j===B||Array.isArray(j)&&j.includes(B)}_addParent(B){const{_parentage:j}=this;this._parentage=Array.isArray(j)?(j.push(B),j):j?[j,B]:B}_removeParent(B){const{_parentage:j}=this;j===B?this._parentage=null:Array.isArray(j)&&(0,oe.P)(j,B)}remove(B){const{_finalizers:j}=this;j&&(0,oe.P)(j,B),B instanceof J&&B._removeParent(this)}}J.EMPTY=(()=>{const ue=new J;return ue.closed=!0,ue})();const fe=J.EMPTY;function re(ue){return ue instanceof J||ue&&"closed"in ue&&(0,f.m)(ue.remove)&&(0,f.m)(ue.add)&&(0,f.m)(ue.unsubscribe)}function ce(ue){(0,f.m)(ue)?ue():ue.unsubscribe()}},2416:(it,Ce,k)=>{k.d(Ce,{v:()=>f});const f={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},515:(it,Ce,k)=>{k.d(Ce,{E:()=>Z});const Z=new(k(8306).y)(J=>J.complete())},8996:(it,Ce,k)=>{k.d(Ce,{D:()=>me});var f=k(8421),Z=k(5363),P=k(9468),fe=k(8306),ce=k(2202),ue=k(576),B=k(9672);function Y(_e,je){if(!_e)throw new Error("Iterable cannot be null");return new fe.y(Be=>{(0,B.f)(Be,je,()=>{const ne=_e[Symbol.asyncIterator]();(0,B.f)(Be,je,()=>{ne.next().then(qe=>{qe.done?Be.complete():Be.next(qe.value)})},0,!0)})})}var $e=k(3670),Te=k(8239),xe=k(1144),ke=k(6495),de=k(2206),ve=k(4532),Ye=k(3260);function me(_e,je){return je?function be(_e,je){if(null!=_e){if((0,$e.c)(_e))return function oe(_e,je){return(0,f.Xf)(_e).pipe((0,P.R)(je),(0,Z.Q)(je))}(_e,je);if((0,xe.z)(_e))return function re(_e,je){return new fe.y(Be=>{let ne=0;return je.schedule(function(){ne===_e.length?Be.complete():(Be.next(_e[ne++]),Be.closed||this.schedule())})})}(_e,je);if((0,Te.t)(_e))return function J(_e,je){return(0,f.Xf)(_e).pipe((0,P.R)(je),(0,Z.Q)(je))}(_e,je);if((0,de.D)(_e))return Y(_e,je);if((0,ke.T)(_e))return function j(_e,je){return new fe.y(Be=>{let ne;return(0,B.f)(Be,je,()=>{ne=_e[ce.h](),(0,B.f)(Be,je,()=>{let qe,Q;try{({value:qe,done:Q}=ne.next())}catch(se){return void Be.error(se)}Q?Be.complete():Be.next(qe)},0,!0)}),()=>(0,ue.m)(null==ne?void 0:ne.return)&&ne.return()})}(_e,je);if((0,Ye.L)(_e))return function ze(_e,je){return Y((0,Ye.Q)(_e),je)}(_e,je)}throw(0,ve.z)(_e)}(_e,je):(0,f.Xf)(_e)}},8421:(it,Ce,k)=>{k.d(Ce,{Xf:()=>$e});var f=k(655),Z=k(1144),P=k(8239),oe=k(8306),J=k(3670),fe=k(2206),re=k(4532),ce=k(6495),ue=k(3260),B=k(576),j=k(7849),Y=k(8822);function $e(be){if(be instanceof oe.y)return be;if(null!=be){if((0,J.c)(be))return function Te(be){return new oe.y(me=>{const _e=be[Y.L]();if((0,B.m)(_e.subscribe))return _e.subscribe(me);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(be);if((0,Z.z)(be))return function xe(be){return new oe.y(me=>{for(let _e=0;_e<be.length&&!me.closed;_e++)me.next(be[_e]);me.complete()})}(be);if((0,P.t)(be))return function ke(be){return new oe.y(me=>{be.then(_e=>{me.closed||(me.next(_e),me.complete())},_e=>me.error(_e)).then(null,j.h)})}(be);if((0,fe.D)(be))return ve(be);if((0,ce.T)(be))return function de(be){return new oe.y(me=>{for(const _e of be)if(me.next(_e),me.closed)return;me.complete()})}(be);if((0,ue.L)(be))return function Ye(be){return ve((0,ue.Q)(be))}(be)}throw(0,re.z)(be)}function ve(be){return new oe.y(me=>{(function ze(be,me){var _e,je,Be,ne;return(0,f.mG)(this,void 0,void 0,function*(){try{for(_e=(0,f.KL)(be);!(je=yield _e.next()).done;)if(me.next(je.value),me.closed)return}catch(qe){Be={error:qe}}finally{try{je&&!je.done&&(ne=_e.return)&&(yield ne.call(_e))}finally{if(Be)throw Be.error}}me.complete()})})(be,me).catch(_e=>me.error(_e))})}},6451:(it,Ce,k)=>{k.d(Ce,{T:()=>fe});var f=k(8189),Z=k(8421),P=k(515),oe=k(7669),J=k(8996);function fe(...re){const ce=(0,oe.yG)(re),ue=(0,oe._6)(re,1/0),B=re;return B.length?1===B.length?(0,Z.Xf)(B[0]):(0,f.J)(ue)((0,J.D)(B,ce)):P.E}},5403:(it,Ce,k)=>{k.d(Ce,{x:()=>Z});var f=k(2961);function Z(oe,J,fe,re,ce){return new P(oe,J,fe,re,ce)}class P extends f.Lv{constructor(J,fe,re,ce,ue,B){super(J),this.onFinalize=ue,this.shouldUnsubscribe=B,this._next=fe?function(j){try{fe(j)}catch(Y){J.error(Y)}}:super._next,this._error=ce?function(j){try{ce(j)}catch(Y){J.error(Y)}finally{this.unsubscribe()}}:super._error,this._complete=re?function(){try{re()}catch(j){J.error(j)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var J;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:fe}=this;super.unsubscribe(),!fe&&(null===(J=this.onFinalize)||void 0===J||J.call(this))}}}},4004:(it,Ce,k)=>{k.d(Ce,{U:()=>P});var f=k(4482),Z=k(5403);function P(oe,J){return(0,f.e)((fe,re)=>{let ce=0;fe.subscribe((0,Z.x)(re,ue=>{re.next(oe.call(J,ue,ce++))}))})}},8189:(it,Ce,k)=>{k.d(Ce,{J:()=>P});var f=k(5577),Z=k(4671);function P(oe=1/0){return(0,f.z)(Z.y,oe)}},5577:(it,Ce,k)=>{k.d(Ce,{z:()=>ce});var f=k(4004),Z=k(8421),P=k(4482),oe=k(9672),J=k(5403),re=k(576);function ce(ue,B,j=1/0){return(0,re.m)(B)?ce((Y,$e)=>(0,f.U)((Te,xe)=>B(Y,Te,$e,xe))((0,Z.Xf)(ue(Y,$e))),j):("number"==typeof B&&(j=B),(0,P.e)((Y,$e)=>function fe(ue,B,j,Y,$e,Te,xe,ke){const de=[];let ve=0,Ye=0,ze=!1;const be=()=>{ze&&!de.length&&!ve&&B.complete()},me=je=>ve<Y?_e(je):de.push(je),_e=je=>{Te&&B.next(je),ve++;let Be=!1;(0,Z.Xf)(j(je,Ye++)).subscribe((0,J.x)(B,ne=>{null==$e||$e(ne),Te?me(ne):B.next(ne)},()=>{Be=!0},void 0,()=>{if(Be)try{for(ve--;de.length&&ve<Y;){const ne=de.shift();xe?(0,oe.f)(B,xe,()=>_e(ne)):_e(ne)}be()}catch(ne){B.error(ne)}}))};return ue.subscribe((0,J.x)(B,me,()=>{ze=!0,be()})),()=>{null==ke||ke()}}(Y,$e,ue,j)))}},5363:(it,Ce,k)=>{k.d(Ce,{Q:()=>oe});var f=k(9672),Z=k(4482),P=k(5403);function oe(J,fe=0){return(0,Z.e)((re,ce)=>{re.subscribe((0,P.x)(ce,ue=>(0,f.f)(ce,J,()=>ce.next(ue),fe),()=>(0,f.f)(ce,J,()=>ce.complete(),fe),ue=>(0,f.f)(ce,J,()=>ce.error(ue),fe)))})}},3099:(it,Ce,k)=>{k.d(Ce,{B:()=>fe});var f=k(8996),Z=k(5698),P=k(7579),oe=k(2961),J=k(4482);function fe(ce={}){const{connector:ue=(()=>new P.x),resetOnError:B=!0,resetOnComplete:j=!0,resetOnRefCountZero:Y=!0}=ce;return $e=>{let Te=null,xe=null,ke=null,de=0,ve=!1,Ye=!1;const ze=()=>{null==xe||xe.unsubscribe(),xe=null},be=()=>{ze(),Te=ke=null,ve=Ye=!1},me=()=>{const _e=Te;be(),null==_e||_e.unsubscribe()};return(0,J.e)((_e,je)=>{de++,!Ye&&!ve&&ze();const Be=ke=null!=ke?ke:ue();je.add(()=>{de--,0===de&&!Ye&&!ve&&(xe=re(me,Y))}),Be.subscribe(je),Te||(Te=new oe.Hp({next:ne=>Be.next(ne),error:ne=>{Ye=!0,ze(),xe=re(be,B,ne),Be.error(ne)},complete:()=>{ve=!0,ze(),xe=re(be,j),Be.complete()}}),(0,f.D)(_e).subscribe(Te))})($e)}}function re(ce,ue,...B){return!0===ue?(ce(),null):!1===ue?null:ue(...B).pipe((0,Z.q)(1)).subscribe(()=>ce())}},9468:(it,Ce,k)=>{k.d(Ce,{R:()=>Z});var f=k(4482);function Z(P,oe=0){return(0,f.e)((J,fe)=>{fe.add(P.schedule(()=>J.subscribe(fe),oe))})}},5698:(it,Ce,k)=>{k.d(Ce,{q:()=>oe});var f=k(515),Z=k(4482),P=k(5403);function oe(J){return J<=0?()=>f.E:(0,Z.e)((fe,re)=>{let ce=0;fe.subscribe((0,P.x)(re,ue=>{++ce<=J&&(re.next(ue),J<=ce&&re.complete())}))})}},8505:(it,Ce,k)=>{k.d(Ce,{b:()=>J});var f=k(576),Z=k(4482),P=k(5403),oe=k(4671);function J(fe,re,ce){const ue=(0,f.m)(fe)||re||ce?{next:fe,error:re,complete:ce}:fe;return ue?(0,Z.e)((B,j)=>{var Y;null===(Y=ue.subscribe)||void 0===Y||Y.call(ue);let $e=!0;B.subscribe((0,P.x)(j,Te=>{var xe;null===(xe=ue.next)||void 0===xe||xe.call(ue,Te),j.next(Te)},()=>{var Te;$e=!1,null===(Te=ue.complete)||void 0===Te||Te.call(ue),j.complete()},Te=>{var xe;$e=!1,null===(xe=ue.error)||void 0===xe||xe.call(ue,Te),j.error(Te)},()=>{var Te,xe;$e&&(null===(Te=ue.unsubscribe)||void 0===Te||Te.call(ue)),null===(xe=ue.finalize)||void 0===xe||xe.call(ue)}))}):oe.y}},4408:(it,Ce,k)=>{k.d(Ce,{o:()=>J});var f=k(727);class Z extends f.w0{constructor(re,ce){super()}schedule(re,ce=0){return this}}const P={setInterval(fe,re,...ce){const{delegate:ue}=P;return(null==ue?void 0:ue.setInterval)?ue.setInterval(fe,re,...ce):setInterval(fe,re,...ce)},clearInterval(fe){const{delegate:re}=P;return((null==re?void 0:re.clearInterval)||clearInterval)(fe)},delegate:void 0};var oe=k(8737);class J extends Z{constructor(re,ce){super(re,ce),this.scheduler=re,this.work=ce,this.pending=!1}schedule(re,ce=0){if(this.closed)return this;this.state=re;const ue=this.id,B=this.scheduler;return null!=ue&&(this.id=this.recycleAsyncId(B,ue,ce)),this.pending=!0,this.delay=ce,this.id=this.id||this.requestAsyncId(B,this.id,ce),this}requestAsyncId(re,ce,ue=0){return P.setInterval(re.flush.bind(re,this),ue)}recycleAsyncId(re,ce,ue=0){if(null!=ue&&this.delay===ue&&!1===this.pending)return ce;P.clearInterval(ce)}execute(re,ce){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const ue=this._execute(re,ce);if(ue)return ue;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(re,ce){let B,ue=!1;try{this.work(re)}catch(j){ue=!0,B=j||new Error("Scheduled action threw falsy error")}if(ue)return this.unsubscribe(),B}unsubscribe(){if(!this.closed){const{id:re,scheduler:ce}=this,{actions:ue}=ce;this.work=this.state=this.scheduler=null,this.pending=!1,(0,oe.P)(ue,this),null!=re&&(this.id=this.recycleAsyncId(ce,re,null)),this.delay=null,super.unsubscribe()}}}},7565:(it,Ce,k)=>{k.d(Ce,{v:()=>P});var f=k(6063);class Z{constructor(J,fe=Z.now){this.schedulerActionCtor=J,this.now=fe}schedule(J,fe=0,re){return new this.schedulerActionCtor(this,J).schedule(re,fe)}}Z.now=f.l.now;class P extends Z{constructor(J,fe=Z.now){super(J,fe),this.actions=[],this._active=!1,this._scheduled=void 0}flush(J){const{actions:fe}=this;if(this._active)return void fe.push(J);let re;this._active=!0;do{if(re=J.execute(J.state,J.delay))break}while(J=fe.shift());if(this._active=!1,re){for(;J=fe.shift();)J.unsubscribe();throw re}}}},4986:(it,Ce,k)=>{k.d(Ce,{z:()=>P});var f=k(4408);const P=new(k(7565).v)(f.o)},6063:(it,Ce,k)=>{k.d(Ce,{l:()=>f});const f={now:()=>(f.delegate||Date).now(),delegate:void 0}},3410:(it,Ce,k)=>{k.d(Ce,{z:()=>f});const f={setTimeout(Z,P,...oe){const{delegate:J}=f;return(null==J?void 0:J.setTimeout)?J.setTimeout(Z,P,...oe):setTimeout(Z,P,...oe)},clearTimeout(Z){const{delegate:P}=f;return((null==P?void 0:P.clearTimeout)||clearTimeout)(Z)},delegate:void 0}},2202:(it,Ce,k)=>{k.d(Ce,{h:()=>Z});const Z=function f(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},8822:(it,Ce,k)=>{k.d(Ce,{L:()=>f});const f="function"==typeof Symbol&&Symbol.observable||"@@observable"},7669:(it,Ce,k)=>{k.d(Ce,{_6:()=>fe,jO:()=>oe,yG:()=>J});var f=k(576);function P(re){return re[re.length-1]}function oe(re){return(0,f.m)(P(re))?re.pop():void 0}function J(re){return function Z(re){return re&&(0,f.m)(re.schedule)}(P(re))?re.pop():void 0}function fe(re,ce){return"number"==typeof P(re)?re.pop():ce}},8737:(it,Ce,k)=>{function f(Z,P){if(Z){const oe=Z.indexOf(P);0<=oe&&Z.splice(oe,1)}}k.d(Ce,{P:()=>f})},3888:(it,Ce,k)=>{function f(Z){const oe=Z(J=>{Error.call(J),J.stack=(new Error).stack});return oe.prototype=Object.create(Error.prototype),oe.prototype.constructor=oe,oe}k.d(Ce,{d:()=>f})},2806:(it,Ce,k)=>{k.d(Ce,{O:()=>oe,x:()=>P});var f=k(2416);let Z=null;function P(J){if(f.v.useDeprecatedSynchronousErrorHandling){const fe=!Z;if(fe&&(Z={errorThrown:!1,error:null}),J(),fe){const{errorThrown:re,error:ce}=Z;if(Z=null,re)throw ce}}else J()}function oe(J){f.v.useDeprecatedSynchronousErrorHandling&&Z&&(Z.errorThrown=!0,Z.error=J)}},9672:(it,Ce,k)=>{function f(Z,P,oe,J=0,fe=!1){const re=P.schedule(function(){oe(),fe?Z.add(this.schedule(null,J)):this.unsubscribe()},J);if(Z.add(re),!fe)return re}k.d(Ce,{f:()=>f})},4671:(it,Ce,k)=>{function f(Z){return Z}k.d(Ce,{y:()=>f})},1144:(it,Ce,k)=>{k.d(Ce,{z:()=>f});const f=Z=>Z&&"number"==typeof Z.length&&"function"!=typeof Z},2206:(it,Ce,k)=>{k.d(Ce,{D:()=>Z});var f=k(576);function Z(P){return Symbol.asyncIterator&&(0,f.m)(null==P?void 0:P[Symbol.asyncIterator])}},576:(it,Ce,k)=>{function f(Z){return"function"==typeof Z}k.d(Ce,{m:()=>f})},3670:(it,Ce,k)=>{k.d(Ce,{c:()=>P});var f=k(8822),Z=k(576);function P(oe){return(0,Z.m)(oe[f.L])}},6495:(it,Ce,k)=>{k.d(Ce,{T:()=>P});var f=k(2202),Z=k(576);function P(oe){return(0,Z.m)(null==oe?void 0:oe[f.h])}},8239:(it,Ce,k)=>{k.d(Ce,{t:()=>Z});var f=k(576);function Z(P){return(0,f.m)(null==P?void 0:P.then)}},3260:(it,Ce,k)=>{k.d(Ce,{L:()=>oe,Q:()=>P});var f=k(655),Z=k(576);function P(J){return(0,f.FC)(this,arguments,function*(){const re=J.getReader();try{for(;;){const{value:ce,done:ue}=yield(0,f.qq)(re.read());if(ue)return yield(0,f.qq)(void 0);yield yield(0,f.qq)(ce)}}finally{re.releaseLock()}})}function oe(J){return(0,Z.m)(null==J?void 0:J.getReader)}},4482:(it,Ce,k)=>{k.d(Ce,{A:()=>Z,e:()=>P});var f=k(576);function Z(oe){return(0,f.m)(null==oe?void 0:oe.lift)}function P(oe){return J=>{if(Z(J))return J.lift(function(fe){try{return oe(fe,this)}catch(re){this.error(re)}});throw new TypeError("Unable to lift unknown Observable type")}}},7849:(it,Ce,k)=>{k.d(Ce,{h:()=>P});var f=k(2416),Z=k(3410);function P(oe){Z.z.setTimeout(()=>{const{onUnhandledError:J}=f.v;if(!J)throw oe;J(oe)})}},4532:(it,Ce,k)=>{function f(Z){return new TypeError(`You provided ${null!==Z&&"object"==typeof Z?"an invalid object":`'${Z}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}k.d(Ce,{z:()=>f})},655:(it,Ce,k)=>{function oe(Q,se){var ee={};for(var Ee in Q)Object.prototype.hasOwnProperty.call(Q,Ee)&&se.indexOf(Ee)<0&&(ee[Ee]=Q[Ee]);if(null!=Q&&"function"==typeof Object.getOwnPropertySymbols){var pe=0;for(Ee=Object.getOwnPropertySymbols(Q);pe<Ee.length;pe++)se.indexOf(Ee[pe])<0&&Object.prototype.propertyIsEnumerable.call(Q,Ee[pe])&&(ee[Ee[pe]]=Q[Ee[pe]])}return ee}function ce(Q,se,ee,Ee){return new(ee||(ee=Promise))(function(Pe,wt){function $t(Lt){try{He(Ee.next(Lt))}catch(Gn){wt(Gn)}}function tn(Lt){try{He(Ee.throw(Lt))}catch(Gn){wt(Gn)}}function He(Lt){Lt.done?Pe(Lt.value):function pe(Pe){return Pe instanceof ee?Pe:new ee(function(wt){wt(Pe)})}(Lt.value).then($t,tn)}He((Ee=Ee.apply(Q,se||[])).next())})}function de(Q){return this instanceof de?(this.v=Q,this):new de(Q)}function ve(Q,se,ee){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var pe,Ee=ee.apply(Q,se||[]),Pe=[];return pe={},wt("next"),wt("throw"),wt("return"),pe[Symbol.asyncIterator]=function(){return this},pe;function wt(wn){Ee[wn]&&(pe[wn]=function(Kt){return new Promise(function(mi,zt){Pe.push([wn,Kt,mi,zt])>1||$t(wn,Kt)})})}function $t(wn,Kt){try{!function tn(wn){wn.value instanceof de?Promise.resolve(wn.value.v).then(He,Lt):Gn(Pe[0][2],wn)}(Ee[wn](Kt))}catch(mi){Gn(Pe[0][3],mi)}}function He(wn){$t("next",wn)}function Lt(wn){$t("throw",wn)}function Gn(wn,Kt){wn(Kt),Pe.shift(),Pe.length&&$t(Pe[0][0],Pe[0][1])}}function ze(Q){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var ee,se=Q[Symbol.asyncIterator];return se?se.call(Q):(Q=function Y(Q){var se="function"==typeof Symbol&&Symbol.iterator,ee=se&&Q[se],Ee=0;if(ee)return ee.call(Q);if(Q&&"number"==typeof Q.length)return{next:function(){return Q&&Ee>=Q.length&&(Q=void 0),{value:Q&&Q[Ee++],done:!Q}}};throw new TypeError(se?"Object is not iterable.":"Symbol.iterator is not defined.")}(Q),ee={},Ee("next"),Ee("throw"),Ee("return"),ee[Symbol.asyncIterator]=function(){return this},ee);function Ee(Pe){ee[Pe]=Q[Pe]&&function(wt){return new Promise(function($t,tn){!function pe(Pe,wt,$t,tn){Promise.resolve(tn).then(function(He){Pe({value:He,done:$t})},wt)}($t,tn,(wt=Q[Pe](wt)).done,wt.value)})}}}k.d(Ce,{FC:()=>ve,KL:()=>ze,_T:()=>oe,mG:()=>ce,qq:()=>de})},5e3:(it,Ce,k)=>{k.d(Ce,{$8M:()=>la,$Z:()=>l_,AFp:()=>zo,AaK:()=>ce,AsE:()=>Wg,BQk:()=>_u,CHM:()=>Hu,CRH:()=>Pi,CZH:()=>Sv,CqO:()=>jg,DdM:()=>Pw,EJc:()=>sI,EpF:()=>Ug,F4k:()=>VE,FYo:()=>cm,FiY:()=>Tr,G48:()=>II,GfV:()=>Go,Gpc:()=>j,JOm:()=>ie,LFG:()=>nt,LSH:()=>jc,Lbi:()=>iI,NdJ:()=>Hg,OlP:()=>yn,Oqu:()=>zg,PXZ:()=>Xf,Q6J:()=>c_,QGY:()=>Bg,Qsj:()=>$l,R0b:()=>vo,RDi:()=>qi,Rgc:()=>xd,SBq:()=>Mf,Sil:()=>Yf,Suo:()=>Gf,TTD:()=>Ws,TgZ:()=>Vg,Udp:()=>gf,VKq:()=>dv,VLi:()=>cI,X6Q:()=>wI,XFs:()=>ot,Xpm:()=>Mt,Y36:()=>yu,YKP:()=>Rw,YNc:()=>xE,Yjl:()=>dr,Yz7:()=>Kt,ZZ4:()=>jv,_Bn:()=>av,_UZ:()=>df,_Vd:()=>bu,_c5:()=>kI,_uU:()=>ew,aQg:()=>Pm,c2e:()=>Wo,cJS:()=>zt,cg1:()=>Zr,dDg:()=>Su,deG:()=>Mc,dqk:()=>Ft,eFA:()=>ep,ekj:()=>QE,g9A:()=>Ue,h0i:()=>Ad,hGG:()=>FI,hij:()=>mf,iGM:()=>vv,ifc:()=>Ut,ip1:()=>Vd,kL8:()=>ci,lG2:()=>Wt,n5z:()=>al,oAB:()=>K,oxw:()=>ff,q4F:()=>Rf,qLn:()=>mr,qOj:()=>e_,qZA:()=>cf,sBO:()=>Sm,sIi:()=>sf,s_b:()=>Cu,soG:()=>Zo,tBr:()=>Cr,tb:()=>Mv,tp0:()=>bi,uIk:()=>AE,vHH:()=>xe,vpe:()=>_o,wAp:()=>ht,xp6:()=>F0,ynx:()=>hf,z2F:()=>Pv,zSh:()=>qy,zs3:()=>go});var f=k(7579),Z=k(727),P=k(8306),oe=k(6451),J=k(3099);function fe(i){for(let s in i)if(i[s]===fe)return s;throw Error("Could not find renamed property on target object.")}function re(i,s){for(const a in s)s.hasOwnProperty(a)&&!i.hasOwnProperty(a)&&(i[a]=s[a])}function ce(i){if("string"==typeof i)return i;if(Array.isArray(i))return"["+i.map(ce).join(", ")+"]";if(null==i)return""+i;if(i.overriddenName)return`${i.overriddenName}`;if(i.name)return`${i.name}`;const s=i.toString();if(null==s)return""+s;const a=s.indexOf("\n");return-1===a?s:s.substring(0,a)}function ue(i,s){return null==i||""===i?null===s?"":s:null==s||""===s?i:i+" "+s}const B=fe({__forward_ref__:fe});function j(i){return i.__forward_ref__=j,i.toString=function(){return ce(this())},i}function Y(i){return $e(i)?i():i}function $e(i){return"function"==typeof i&&i.hasOwnProperty(B)&&i.__forward_ref__===j}class xe extends Error{constructor(s,a){super(function ke(i,s){return`NG0${Math.abs(i)}${s?": "+s:""}`}(s,a)),this.code=s}}function de(i){return"string"==typeof i?i:null==i?"":String(i)}function ve(i){return"function"==typeof i?i.name||i.toString():"object"==typeof i&&null!=i&&"function"==typeof i.type?i.type.name||i.type.toString():de(i)}function me(i,s){const a=s?` in ${s}`:"";throw new xe(-201,`No provider for ${ve(i)} found${a}`)}function tn(i,s){null==i&&function He(i,s,a,l){throw new Error(`ASSERTION ERROR: ${i}`+(null==l?"":` [Expected=> ${a} ${l} ${s} <=Actual]`))}(s,i,null,"!=")}function Kt(i){return{token:i.token,providedIn:i.providedIn||null,factory:i.factory,value:void 0}}function zt(i){return{providers:i.providers||[],imports:i.imports||[]}}function Vt(i){return Qn(i,Mi)||Qn(i,Ui)}function Qn(i,s){return i.hasOwnProperty(s)?i[s]:null}function wr(i){return i&&(i.hasOwnProperty(Ir)||i.hasOwnProperty(Bi))?i[Ir]:null}const Mi=fe({\u0275prov:fe}),Ir=fe({\u0275inj:fe}),Ui=fe({ngInjectableDef:fe}),Bi=fe({ngInjectorDef:fe});var ot=(()=>((ot=ot||{})[ot.Default=0]="Default",ot[ot.Host=1]="Host",ot[ot.Self=2]="Self",ot[ot.SkipSelf=4]="SkipSelf",ot[ot.Optional=8]="Optional",ot))();let Or;function Fn(i){const s=Or;return Or=i,s}function Jr(i,s,a){const l=Vt(i);return l&&"root"==l.providedIn?void 0===l.value?l.value=l.factory():l.value:a&ot.Optional?null:void 0!==s?s:void me(ce(i),"Injector")}function dn(i){return{toString:i}.toString()}var zn=(()=>((zn=zn||{})[zn.OnPush=0]="OnPush",zn[zn.Default=1]="Default",zn))(),Ut=(()=>{return(i=Ut||(Ut={}))[i.Emulated=0]="Emulated",i[i.None=2]="None",i[i.ShadowDom=3]="ShadowDom",Ut;var i})();const rt="undefined"!=typeof globalThis&&globalThis,mt="undefined"!=typeof window&&window,Jn="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,Ft=rt||"undefined"!=typeof global&&global||mt||Jn,Xn={},at=[],cr=fe({\u0275cmp:fe}),Ot=fe({\u0275dir:fe}),We=fe({\u0275pipe:fe}),De=fe({\u0275mod:fe}),Ke=fe({\u0275fac:fe}),ut=fe({__NG_ELEMENT_ID__:fe});let Nt=0;function Mt(i){return dn(()=>{const a={},l={type:i.type,providersResolver:null,decls:i.decls,vars:i.vars,factory:null,template:i.template||null,consts:i.consts||null,ngContentSelectors:i.ngContentSelectors,hostBindings:i.hostBindings||null,hostVars:i.hostVars||0,hostAttrs:i.hostAttrs||null,contentQueries:i.contentQueries||null,declaredInputs:a,inputs:null,outputs:null,exportAs:i.exportAs||null,onPush:i.changeDetection===zn.OnPush,directiveDefs:null,pipeDefs:null,selectors:i.selectors||at,viewQuery:i.viewQuery||null,features:i.features||null,data:i.data||{},encapsulation:i.encapsulation||Ut.Emulated,id:"c",styles:i.styles||at,_:null,setInput:null,schemas:i.schemas||null,tView:null},c=i.directives,p=i.features,_=i.pipes;return l.id+=Nt++,l.inputs=ft(i.inputs,a),l.outputs=ft(i.outputs),p&&p.forEach(E=>E(l)),l.directiveDefs=c?()=>("function"==typeof c?c():c).map(L):null,l.pipeDefs=_?()=>("function"==typeof _?_():_).map($):null,l})}function L(i){return Bt(i)||function In(i){return i[Ot]||null}(i)}function $(i){return function Ct(i){return i[We]||null}(i)}const le={};function K(i){return dn(()=>{const s={type:i.type,bootstrap:i.bootstrap||at,declarations:i.declarations||at,imports:i.imports||at,exports:i.exports||at,transitiveCompileScopes:null,schemas:i.schemas||null,id:i.id||null};return null!=i.id&&(le[i.id]=i.type),s})}function ft(i,s){if(null==i)return Xn;const a={};for(const l in i)if(i.hasOwnProperty(l)){let c=i[l],p=c;Array.isArray(c)&&(p=c[1],c=c[0]),a[c]=l,s&&(s[c]=p)}return a}const Wt=Mt;function dr(i){return{type:i.type,name:i.name,factory:null,pure:!1!==i.pure,onDestroy:i.type.prototype.ngOnDestroy||null}}function Bt(i){return i[cr]||null}function an(i,s){const a=i[De]||null;if(!a&&!0===s)throw new Error(`Type ${ce(i)} does not have '\u0275mod' property.`);return a}function _i(i){return Array.isArray(i)&&"object"==typeof i[1]}function ei(i){return Array.isArray(i)&&!0===i[1]}function lc(i){return 0!=(8&i.flags)}function ps(i){return 2==(2&i.flags)}function Va(i){return 1==(1&i.flags)}function Nr(i){return null!==i.template}function nh(i){return 0!=(512&i[2])}function Pr(i,s){return i.hasOwnProperty(Ke)?i[Ke]:null}class Io{constructor(s,a,l){this.previousValue=s,this.currentValue=a,this.firstChange=l}isFirstChange(){return this.firstChange}}function Ws(){return ea}function ea(i){return i.type.prototype.ngOnChanges&&(i.setInput=Rp),gc}function gc(){const i=ys(this),s=null==i?void 0:i.current;if(s){const a=i.previous;if(a===Xn)i.previous=s;else for(let l in s)a[l]=s[l];i.current=null,this.ngOnChanges(s)}}function Rp(i,s,a,l){const c=ys(i)||function ti(i,s){return i[bo]=s}(i,{previous:Xn,current:null}),p=c.current||(c.current={}),_=c.previous,E=this.declaredInputs[a],I=_[E];p[E]=new Io(I&&I.currentValue,s,_===Xn),i[l]=s}Ws.ngInherit=!0;const bo="__ngSimpleChanges__";function ys(i){return i[bo]||null}let qa;function qi(i){qa=i}function ln(i){return!!i.listen}const Do={createRenderer:(i,s)=>function ta(){return void 0!==qa?qa:"undefined"!=typeof document?document:void 0}()};function sn(i){for(;Array.isArray(i);)i=i[0];return i}function Ks(i,s){return sn(s[i])}function hr(i,s){return sn(s[i.index])}function na(i,s){return i.data[s]}function fr(i,s){const a=s[i];return _i(a)?a:a[0]}function vs(i){return 4==(4&i[2])}function zi(i){return 128==(128&i[2])}function Fr(i,s){return null==s?null:i[s]}function Es(i){i[18]=0}function ws(i,s){i[5]+=s;let a=i,l=i[3];for(;null!==l&&(1===s&&1===a[5]||-1===s&&0===a[5]);)l[5]+=s,a=l,l=l[3]}const lt={lFrame:Qs(null),bindingsEnabled:!0,isInCheckNoChangesMode:!1};function Ya(){return lt.bindingsEnabled}function we(){return lt.lFrame.lView}function xt(){return lt.lFrame.tView}function Hu(i){return lt.lFrame.contextLView=i,i[8]}function gn(){let i=Co();for(;null!==i&&64===i.type;)i=i.parent;return i}function Co(){return lt.lFrame.currentTNode}function Lr(i,s){const a=lt.lFrame;a.currentTNode=i,a.isParent=s}function $u(){return lt.lFrame.isParent}function Gu(){lt.lFrame.isParent=!1}function Qa(){return lt.isInCheckNoChangesMode}function Is(i){lt.isInCheckNoChangesMode=i}function nr(){const i=lt.lFrame;let s=i.bindingRootIndex;return-1===s&&(s=i.bindingRootIndex=i.tView.bindingStartIndex),s}function bs(){return lt.lFrame.bindingIndex++}function Ei(i){const s=lt.lFrame,a=s.bindingIndex;return s.bindingIndex=s.bindingIndex+i,a}function eu(i,s){const a=lt.lFrame;a.bindingIndex=a.bindingRootIndex=i,ia(s)}function ia(i){lt.lFrame.currentDirectiveIndex=i}function Zu(){return lt.lFrame.currentQueryIndex}function Ku(i){lt.lFrame.currentQueryIndex=i}function vc(i){const s=i[1];return 2===s.type?s.declTNode:1===s.type?i[6]:null}function Yu(i,s,a){if(a&ot.SkipSelf){let c=s,p=i;for(;!(c=c.parent,null!==c||a&ot.Host||(c=vc(p),null===c||(p=p[15],10&c.type))););if(null===c)return!1;s=c,i=p}const l=lt.lFrame=Ec();return l.currentTNode=s,l.lView=i,!0}function Ys(i){const s=Ec(),a=i[1];lt.lFrame=s,s.currentTNode=a.firstChild,s.lView=i,s.tView=a,s.contextLView=i,s.bindingIndex=a.bindingStartIndex,s.inI18n=!1}function Ec(){const i=lt.lFrame,s=null===i?null:i.child;return null===s?Qs(i):s}function Qs(i){const s={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:i,child:null,inI18n:!1};return null!==i&&(i.child=s),s}function wc(){const i=lt.lFrame;return lt.lFrame=i.parent,i.currentTNode=null,i.lView=null,i}const Ic=wc;function Js(){const i=wc();i.isParent=!0,i.tView=null,i.selectedIndex=-1,i.contextLView=null,i.elementDepthCount=0,i.currentDirectiveIndex=-1,i.currentNamespace=null,i.bindingRootIndex=-1,i.bindingIndex=-1,i.currentQueryIndex=0}function pr(){return lt.lFrame.selectedIndex}function Cs(i){lt.lFrame.selectedIndex=i}function bn(){const i=lt.lFrame;return na(i.tView,i.selectedIndex)}function Wi(i,s){for(let a=s.directiveStart,l=s.directiveEnd;a<l;a++){const p=i.data[a].type.prototype,{ngAfterContentInit:_,ngAfterContentChecked:E,ngAfterViewInit:I,ngAfterViewChecked:A,ngOnDestroy:S}=p;_&&(i.contentHooks||(i.contentHooks=[])).push(-a,_),E&&((i.contentHooks||(i.contentHooks=[])).push(a,E),(i.contentCheckHooks||(i.contentCheckHooks=[])).push(a,E)),I&&(i.viewHooks||(i.viewHooks=[])).push(-a,I),A&&((i.viewHooks||(i.viewHooks=[])).push(a,A),(i.viewCheckHooks||(i.viewCheckHooks=[])).push(a,A)),null!=S&&(i.destroyHooks||(i.destroyHooks=[])).push(a,S)}}function oa(i,s,a){bc(i,s,3,a)}function tu(i,s,a,l){(3&i[2])===a&&bc(i,s,a,l)}function On(i,s){let a=i[2];(3&a)===s&&(a&=2047,a+=1,i[2]=a)}function bc(i,s,a,l){const p=null!=l?l:-1,_=s.length-1;let E=0;for(let I=void 0!==l?65535&i[18]:0;I<_;I++)if("number"==typeof s[I+1]){if(E=s[I],null!=l&&E>=l)break}else s[I]<0&&(i[18]+=65536),(E<p||-1==p)&&(Op(i,a,s,I),i[18]=(4294901760&i[18])+I+2),I++}function Op(i,s,a,l){const c=a[l]<0,p=a[l+1],E=i[c?-a[l]:a[l]];if(c){if(i[2]>>11<i[18]>>16&&(3&i[2])===s){i[2]+=2048;try{p.call(E)}finally{}}}else try{p.call(E)}finally{}}class Ao{constructor(s,a,l){this.factory=s,this.resolving=!1,this.canSeeViewProviders=a,this.injectImpl=l}}function tl(i,s,a){const l=ln(i);let c=0;for(;c<a.length;){const p=a[c];if("number"==typeof p){if(0!==p)break;c++;const _=a[c++],E=a[c++],I=a[c++];l?i.setAttribute(s,E,I,_):s.setAttributeNS(_,E,I)}else{const _=p,E=a[++c];nl(_)?l&&i.setProperty(s,_,E):l?i.setAttribute(s,_,E):s.setAttribute(_,E),c++}}return c}function Ki(i){return 3===i||4===i||6===i}function nl(i){return 64===i.charCodeAt(0)}function aa(i,s){if(null!==s&&0!==s.length)if(null===i||0===i.length)i=s.slice();else{let a=-1;for(let l=0;l<s.length;l++){const c=s[l];"number"==typeof c?a=c:0===a||eo(i,a,c,null,-1===a||2===a?s[++l]:null)}}return i}function eo(i,s,a,l,c){let p=0,_=i.length;if(-1===s)_=-1;else for(;p<i.length;){const E=i[p++];if("number"==typeof E){if(E===s){_=-1;break}if(E>s){_=p-1;break}}}for(;p<i.length;){const E=i[p];if("number"==typeof E)break;if(E===a){if(null===l)return void(null!==c&&(i[p+1]=c));if(l===i[p+1])return void(i[p+2]=c)}p++,null!==l&&p++,null!==c&&p++}-1!==_&&(i.splice(_,0,s),p=_+1),i.splice(p++,0,a),null!==l&&i.splice(p++,0,l),null!==c&&i.splice(p++,0,c)}function Tc(i){return-1!==i}function Qt(i){return 32767&i}function mn(i,s){let a=function So(i){return i>>16}(i),l=s;for(;a>0;)l=l[15],a--;return l}let vt=!0;function Ts(i){const s=vt;return vt=i,s}let ah=0;function ri(i,s){const a=Mo(i,s);if(-1!==a)return a;const l=s[1];l.firstCreatePass&&(i.injectorIndex=s.length,Un(l.data,i),Un(s,null),Un(l.blueprint,null));const c=Vr(i,s),p=i.injectorIndex;if(Tc(c)){const _=Qt(c),E=mn(c,s),I=E[1].data;for(let A=0;A<8;A++)s[p+A]=E[_+A]|I[_+A]}return s[p+8]=c,p}function Un(i,s){i.push(0,0,0,0,0,0,0,0,s)}function Mo(i,s){return-1===i.injectorIndex||i.parent&&i.parent.injectorIndex===i.injectorIndex||null===s[i.injectorIndex+8]?-1:i.injectorIndex}function Vr(i,s){if(i.parent&&-1!==i.parent.injectorIndex)return i.parent.injectorIndex;let a=0,l=null,c=s;for(;null!==c;){const p=c[1],_=p.type;if(l=2===_?p.declTNode:1===_?c[6]:null,null===l)return-1;if(a++,c=c[15],-1!==l.injectorIndex)return l.injectorIndex|a<<16}return-1}function no(i,s,a){!function to(i,s,a){let l;"string"==typeof a?l=a.charCodeAt(0)||0:a.hasOwnProperty(ut)&&(l=a[ut]),null==l&&(l=a[ut]=ah++);const c=255&l;s.data[i+(c>>5)]|=1<<c}(i,s,a)}function ro(i,s,a){if(a&ot.Optional)return i;me(s,"NodeInjector")}function As(i,s,a,l){if(a&ot.Optional&&void 0===l&&(l=null),0==(a&(ot.Self|ot.Host))){const c=i[9],p=Fn(void 0);try{return c?c.get(s,l,a&ot.Optional):Jr(s,l,a&ot.Optional)}finally{Fn(p)}}return ro(l,s,a)}function ii(i,s,a,l=ot.Default,c){if(null!==i){const p=function Ac(i){if("string"==typeof i)return i.charCodeAt(0)||0;const s=i.hasOwnProperty(ut)?i[ut]:void 0;return"number"==typeof s?s>=0?255&s:Bn:s}(a);if("function"==typeof p){if(!Yu(s,i,l))return l&ot.Host?ro(c,a,l):As(s,a,l,c);try{const _=p(l);if(null!=_||l&ot.Optional)return _;me(a)}finally{Ic()}}else if("number"==typeof p){let _=null,E=Mo(i,s),I=-1,A=l&ot.Host?s[16][6]:null;for((-1===E||l&ot.SkipSelf)&&(I=-1===E?Vr(i,s):s[E+8],-1!==I&&ol(l,!1)?(_=s[1],E=Qt(I),s=mn(I,s)):E=-1);-1!==E;){const S=s[1];if(ua(p,E,S.data)){const N=io(E,s,a,_,l,A);if(N!==Ss)return N}I=s[E+8],-1!==I&&ol(l,s[1].data[E+8]===A)&&ua(p,E,s)?(_=S,E=Qt(I),s=mn(I,s)):E=-1}}}return As(s,a,l,c)}const Ss={};function Bn(){return new wi(gn(),we())}function io(i,s,a,l,c,p){const _=s[1],E=_.data[i+8],S=sl(E,_,a,null==l?ps(E)&&vt:l!=_&&0!=(3&E.type),c&ot.Host&&p===E);return null!==S?Yi(s,_,S,E):Ss}function sl(i,s,a,l,c){const p=i.providerIndexes,_=s.data,E=1048575&p,I=i.directiveStart,S=p>>20,V=c?E+S:i.directiveEnd;for(let W=l?E:E+S;W<V;W++){const ge=_[W];if(W<I&&a===ge||W>=I&&ge.type===a)return W}if(c){const W=_[I];if(W&&Nr(W)&&W.type===a)return I}return null}function Yi(i,s,a,l){let c=i[a];const p=s.data;if(function Dc(i){return i instanceof Ao}(c)){const _=c;_.resolving&&function Ye(i,s){const a=s?`. Dependency path: ${s.join(" > ")} > ${i}`:"";throw new xe(-200,`Circular dependency in DI detected for ${i}${a}`)}(ve(p[a]));const E=Ts(_.canSeeViewProviders);_.resolving=!0;const I=_.injectImpl?Fn(_.injectImpl):null;Yu(i,l,ot.Default);try{c=i[a]=_.factory(void 0,p,i,l),s.firstCreatePass&&a>=l.directiveStart&&function Xu(i,s,a){const{ngOnChanges:l,ngOnInit:c,ngDoCheck:p}=s.type.prototype;if(l){const _=ea(s);(a.preOrderHooks||(a.preOrderHooks=[])).push(i,_),(a.preOrderCheckHooks||(a.preOrderCheckHooks=[])).push(i,_)}c&&(a.preOrderHooks||(a.preOrderHooks=[])).push(0-i,c),p&&((a.preOrderHooks||(a.preOrderHooks=[])).push(i,p),(a.preOrderCheckHooks||(a.preOrderCheckHooks=[])).push(i,p))}(a,p[a],s)}finally{null!==I&&Fn(I),Ts(E),_.resolving=!1,Ic()}}return c}function ua(i,s,a){return!!(a[s+(i>>5)]&1<<i)}function ol(i,s){return!(i&ot.Self||i&ot.Host&&s)}class wi{constructor(s,a){this._tNode=s,this._lView=a}get(s,a,l){return ii(this._tNode,this._lView,s,l,a)}}function al(i){return dn(()=>{const s=i.prototype.constructor,a=s[Ke]||so(s),l=Object.prototype;let c=Object.getPrototypeOf(i.prototype).constructor;for(;c&&c!==l;){const p=c[Ke]||so(c);if(p&&p!==a)return p;c=Object.getPrototypeOf(c)}return p=>new p})}function so(i){return $e(i)?()=>{const s=so(Y(i));return s&&s()}:Pr(i)}function la(i){return function il(i,s){if("class"===s)return i.classes;if("style"===s)return i.styles;const a=i.attrs;if(a){const l=a.length;let c=0;for(;c<l;){const p=a[c];if(Ki(p))break;if(0===p)c+=2;else if("number"==typeof p)for(c++;c<l&&"string"==typeof a[c];)c++;else{if(p===s)return a[c+1];c+=2}}}return null}(gn(),i)}const Ji="__parameters__";function oo(i,s,a){return dn(()=>{const l=function ru(i){return function(...a){if(i){const l=i(...a);for(const c in l)this[c]=l[c]}}}(s);function c(...p){if(this instanceof c)return l.apply(this,p),this;const _=new c(...p);return E.annotation=_,E;function E(I,A,S){const N=I.hasOwnProperty(Ji)?I[Ji]:Object.defineProperty(I,Ji,{value:[]})[Ji];for(;N.length<=S;)N.push(null);return(N[S]=N[S]||[]).push(_),I}}return a&&(c.prototype=Object.create(a.prototype)),c.prototype.ngMetadataName=i,c.annotationCls=c,c})}class yn{constructor(s,a){this._desc=s,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof a?this.__NG_ELEMENT_ID__=a:void 0!==a&&(this.\u0275prov=Kt({token:this,providedIn:a.providedIn||"root",factory:a.factory}))}toString(){return`InjectionToken ${this._desc}`}}const Mc=new yn("AnalyzeForEntryComponents");function Dr(i,s){void 0===s&&(s=i);for(let a=0;a<i.length;a++){let l=i[a];Array.isArray(l)?(s===i&&(s=i.slice(0,a)),Dr(l,s)):s!==i&&s.push(l)}return s}function Ii(i,s){i.forEach(a=>Array.isArray(a)?Ii(a,s):s(a))}function ca(i,s,a){s>=i.length?i.push(a):i.splice(s,0,a)}function Ms(i,s){return s>=i.length-1?i.pop():i.splice(s,1)[0]}function oi(i,s,a){let l=fa(i,s);return l>=0?i[1|l]=a:(l=~l,function ha(i,s,a,l){let c=i.length;if(c==s)i.push(a,l);else if(1===c)i.push(l,i[0]),i[0]=a;else{for(c--,i.push(i[c-1],i[c]);c>s;)i[c]=i[c-2],c--;i[s]=a,i[s+1]=l}}(i,l,s,a)),l}function hh(i,s){const a=fa(i,s);if(a>=0)return i[1|a]}function fa(i,s){return function ao(i,s,a){let l=0,c=i.length>>a;for(;c!==l;){const p=l+(c-l>>1),_=i[p<<a];if(s===_)return p<<a;_>s?c=p:l=p+1}return~(c<<a)}(i,s,1)}const es={},xs="__NG_DI_FLAG__",dl="ngTempTokenPath",D=/\n/gm,F="__source",z=fe({provide:String,useValue:fe});let te;function Se(i){const s=te;return te=i,s}function Ze(i,s=ot.Default){if(void 0===te)throw new xe(203,"");return null===te?Jr(i,void 0,s):te.get(i,s&ot.Optional?null:void 0,s)}function nt(i,s=ot.Default){return(function qn(){return Or}()||Ze)(Y(i),s)}const jt=nt;function Et(i){const s=[];for(let a=0;a<i.length;a++){const l=Y(i[a]);if(Array.isArray(l)){if(0===l.length)throw new xe(900,"");let c,p=ot.Default;for(let _=0;_<l.length;_++){const E=l[_],I=vn(E);"number"==typeof I?-1===I?c=E.token:p|=I:c=E}s.push(nt(c,p))}else s.push(nt(l))}return s}function Sn(i,s){return i[xs]=s,i.prototype[xs]=s,i}function vn(i){return i[xs]}const Cr=Sn(oo("Inject",i=>({token:i})),-1),Tr=Sn(oo("Optional"),8),bi=Sn(oo("SkipSelf"),4);class lu{constructor(s){this.changingThisBreaksApplicationSecurity=s}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}function ts(i){return i instanceof lu?i.changingThisBreaksApplicationSecurity:i}const _a=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,zp=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;var jn=(()=>((jn=jn||{})[jn.NONE=0]="NONE",jn[jn.HTML=1]="HTML",jn[jn.STYLE=2]="STYLE",jn[jn.SCRIPT=3]="SCRIPT",jn[jn.URL=4]="URL",jn[jn.RESOURCE_URL=5]="RESOURCE_URL",jn))();function jc(i){const s=function vl(){const i=we();return i&&i[12]}();return s?s.sanitize(jn.URL,i)||"":function gl(i,s){const a=function bh(i){return i instanceof lu&&i.getTypeName()||null}(i);if(null!=a&&a!==s){if("ResourceURL"===a&&"URL"===s)return!0;throw new Error(`Required a safe ${s}, got a ${a} (see https://g.co/ng/security#xss)`)}return a===s}(i,"URL")?ts(i):function cu(i){return(i=String(i)).match(_a)||i.match(zp)?i:"unsafe:"+i}(de(i))}const eg="__ngContext__";function fn(i,s){i[eg]=s}function rr(i){const s=function ct(i){return i[eg]||null}(i);return s?Array.isArray(s)?s:s.lView:null}function qc(i){return i.ngOriginalError}function _y(i,...s){i.error(...s)}class mr{constructor(){this._console=console}handleError(s){const a=this._findOriginalError(s),l=function Po(i){return i&&i.ngErrorLogger||_y}(s);l(this._console,"ERROR",s),a&&l(this._console,"ORIGINAL ERROR",a)}_findOriginalError(s){let a=s&&qc(s);for(;a&&qc(a);)a=qc(a);return a||null}}const sg=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(Ft))();function g(i){return i instanceof Function?i():i}var ie=(()=>((ie=ie||{})[ie.Important=1]="Important",ie[ie.DashCase=2]="DashCase",ie))();function Je(i,s){return undefined(i,s)}function Dn(i){const s=i[3];return ei(s)?s[3]:s}function fu(i){return Fh(i[13])}function pu(i){return Fh(i[4])}function Fh(i){for(;null!==i&&!ei(i);)i=i[4];return i}function ko(i,s,a,l,c){if(null!=l){let p,_=!1;ei(l)?p=l:_i(l)&&(_=!0,l=l[0]);const E=sn(l);0===i&&null!==a?null==c?wy(s,a,E):Ia(s,a,E,c||null,!0):1===i&&null!==a?Ia(s,a,E,c||null,!0):2===i?function Cy(i,s,a){const l=Hh(i,s);l&&function T0(i,s,a,l){ln(i)?i.removeChild(s,a,l):s.removeChild(a)}(i,l,s,a)}(s,E,_):3===i&&s.destroyNode(E),null!=p&&function ba(i,s,a,l,c){const p=a[7];p!==sn(a)&&ko(s,i,l,p,c);for(let E=10;E<a.length;E++){const I=a[E];co(I[1],I,i,s,l,p)}}(s,i,p,a,c)}}function Zc(i,s,a){if(ln(i))return i.createElement(s,a);{const l=null!==a?function Ga(i){const s=i.toLowerCase();return"svg"===s?"http://www.w3.org/2000/svg":"math"===s?"http://www.w3.org/1998/MathML/":null}(a):null;return null===l?i.createElement(s):i.createElementNS(l,s)}}function D0(i,s){const a=i[9],l=a.indexOf(s),c=s[3];1024&s[2]&&(s[2]&=-1025,ws(c,-1)),a.splice(l,1)}function vy(i,s){if(i.length<=10)return;const a=10+s,l=i[a];if(l){const c=l[17];null!==c&&c!==i&&D0(c,l),s>0&&(i[a-1][4]=l[4]);const p=Ms(i,10+s);!function b0(i,s){co(i,s,s[11],2,null,null),s[0]=null,s[6]=null}(l[1],l);const _=p[19];null!==_&&_.detachView(p[1]),l[3]=null,l[4]=null,l[2]&=-129}return l}function Ey(i,s){if(!(256&s[2])){const a=s[11];ln(a)&&a.destroyNode&&co(i,s,a,3,null,null),function uo(i){let s=i[13];if(!s)return Kc(i[1],i);for(;s;){let a=null;if(_i(s))a=s[13];else{const l=s[10];l&&(a=l)}if(!a){for(;s&&!s[4]&&s!==i;)_i(s)&&Kc(s[1],s),s=s[3];null===s&&(s=i),_i(s)&&Kc(s[1],s),a=s&&s[4]}s=a}}(s)}}function Kc(i,s){if(!(256&s[2])){s[2]&=-129,s[2]|=256,function lg(i,s){let a;if(null!=i&&null!=(a=i.destroyHooks))for(let l=0;l<a.length;l+=2){const c=s[a[l]];if(!(c instanceof Ao)){const p=a[l+1];if(Array.isArray(p))for(let _=0;_<p.length;_+=2){const E=c[p[_]],I=p[_+1];try{I.call(E)}finally{}}else try{p.call(c)}finally{}}}}(i,s),function mb(i,s){const a=i.cleanup,l=s[7];let c=-1;if(null!==a)for(let p=0;p<a.length-1;p+=2)if("string"==typeof a[p]){const _=a[p+1],E="function"==typeof _?_(s):sn(s[_]),I=l[c=a[p+2]],A=a[p+3];"boolean"==typeof A?E.removeEventListener(a[p],I,A):A>=0?l[c=A]():l[c=-A].unsubscribe(),p+=2}else{const _=l[c=a[p+1]];a[p].call(_)}if(null!==l){for(let p=c+1;p<l.length;p++)l[p]();s[7]=null}}(i,s),1===s[1].type&&ln(s[11])&&s[11].destroy();const a=s[17];if(null!==a&&ei(s[3])){a!==s[3]&&D0(a,s);const l=s[19];null!==l&&l.detachView(i)}}}function jh(i,s,a){return function C0(i,s,a){let l=s;for(;null!==l&&40&l.type;)l=(s=l).parent;if(null===l)return a[0];if(2&l.flags){const c=i.data[l.directiveStart].encapsulation;if(c===Ut.None||c===Ut.Emulated)return null}return hr(l,a)}(i,s.parent,a)}function Ia(i,s,a,l,c){ln(i)?i.insertBefore(s,a,l,c):s.insertBefore(a,l,c)}function wy(i,s,a){ln(i)?i.appendChild(s,a):s.appendChild(a)}function bl(i,s,a,l,c){null!==l?Ia(i,s,a,l,c):wy(i,s,a)}function Hh(i,s){return ln(i)?i.parentNode(s):s.parentNode}let $h=function cg(i,s,a){return 40&i.type?hr(i,a):null};function lo(i,s,a,l){const c=jh(i,l,s),p=s[11],E=function ai(i,s,a){return $h(i,s,a)}(l.parent||s[6],l,s);if(null!=c)if(Array.isArray(a))for(let I=0;I<a.length;I++)bl(p,c,a[I],E,!1);else bl(p,c,a,E,!1)}function Qc(i,s){if(null!==s){const a=s.type;if(3&a)return hr(s,i);if(4&a)return Dy(-1,i[s.index]);if(8&a){const l=s.child;if(null!==l)return Qc(i,l);{const c=i[s.index];return ei(c)?Dy(-1,c):sn(c)}}if(32&a)return Je(s,i)()||sn(i[s.index]);{const l=by(i,s);return null!==l?Array.isArray(l)?l[0]:Qc(Dn(i[16]),l):Qc(i,s.next)}}return null}function by(i,s){return null!==s?i[16][6].projection[s.projection]:null}function Dy(i,s){const a=10+i+1;if(a<s.length){const l=s[a],c=l[1].firstChild;if(null!==c)return Qc(l,c)}return s[7]}function Ty(i,s,a,l,c,p,_){for(;null!=a;){const E=l[a.index],I=a.type;if(_&&0===s&&(E&&fn(sn(E),l),a.flags|=4),64!=(64&a.flags))if(8&I)Ty(i,s,a.child,l,c,p,!1),ko(s,i,c,E,p);else if(32&I){const A=Je(a,l);let S;for(;S=A();)ko(s,i,c,S,p);ko(s,i,c,E,p)}else 16&I?A0(i,s,l,a,c,p):ko(s,i,c,E,p);a=_?a.projectionNext:a.next}}function co(i,s,a,l,c,p){Ty(a,l,i.firstChild,s,c,p,!1)}function A0(i,s,a,l,c,p){const _=a[16],I=_[6].projection[l.projection];if(Array.isArray(I))for(let A=0;A<I.length;A++)ko(s,i,c,I[A],p);else Ty(i,s,I,_[3],c,p,!0)}function Jc(i,s,a){ln(i)?i.setAttribute(s,"style",a):s.style.cssText=a}function dg(i,s,a){ln(i)?""===a?i.removeAttribute(s,"class"):i.setAttribute(s,"class",a):s.className=a}function S0(i,s,a){let l=i.length;for(;;){const c=i.indexOf(s,a);if(-1===c)return c;if(0===c||i.charCodeAt(c-1)<=32){const p=s.length;if(c+p===l||i.charCodeAt(c+p)<=32)return c}a=c+1}}const M0="ng-template";function _b(i,s,a){let l=0;for(;l<i.length;){let c=i[l++];if(a&&"class"===c){if(c=i[l],-1!==S0(c.toLowerCase(),s,0))return!0}else if(1===c){for(;l<i.length&&"string"==typeof(c=i[l++]);)if(c.toLowerCase()===s)return!0;return!1}}return!1}function x0(i){return 4===i.type&&i.value!==M0}function vb(i,s,a){return s===(4!==i.type||a?i.value:M0)}function R0(i,s,a){let l=4;const c=i.attrs||[],p=function Ib(i){for(let s=0;s<i.length;s++)if(Ki(i[s]))return s;return i.length}(c);let _=!1;for(let E=0;E<s.length;E++){const I=s[E];if("number"!=typeof I){if(!_)if(4&l){if(l=2|1&l,""!==I&&!vb(i,I,a)||""===I&&1===s.length){if(Ls(l))return!1;_=!0}}else{const A=8&l?I:s[++E];if(8&l&&null!==i.attrs){if(!_b(i.attrs,A,a)){if(Ls(l))return!1;_=!0}continue}const N=Eb(8&l?"class":I,c,x0(i),a);if(-1===N){if(Ls(l))return!1;_=!0;continue}if(""!==A){let V;V=N>p?"":c[N+1].toLowerCase();const W=8&l?V:null;if(W&&-1!==S0(W,A,0)||2&l&&A!==V){if(Ls(l))return!1;_=!0}}}}else{if(!_&&!Ls(l)&&!Ls(I))return!1;if(_&&Ls(I))continue;_=!1,l=I|1&l}}return Ls(l)||_}function Ls(i){return 0==(1&i)}function Eb(i,s,a,l){if(null===s)return-1;let c=0;if(l||!a){let p=!1;for(;c<s.length;){const _=s[c];if(_===i)return c;if(3===_||6===_)p=!0;else{if(1===_||2===_){let E=s[++c];for(;"string"==typeof E;)E=s[++c];continue}if(4===_)break;if(0===_){c+=4;continue}}c+=p?1:2}return-1}return function N0(i,s){let a=i.indexOf(4);if(a>-1)for(a++;a<i.length;){const l=i[a];if("number"==typeof l)return-1;if(l===s)return a;a++}return-1}(s,i)}function O0(i,s,a=!1){for(let l=0;l<s.length;l++)if(R0(i,s[l],a))return!0;return!1}function P0(i,s){return i?":not("+s.trim()+")":s}function Xc(i){let s=i[0],a=1,l=2,c="",p=!1;for(;a<i.length;){let _=i[a];if("string"==typeof _)if(2&l){const E=i[++a];c+="["+_+(E.length>0?'="'+E+'"':"")+"]"}else 8&l?c+="."+_:4&l&&(c+=" "+_);else""!==c&&!Ls(_)&&(s+=P0(p,c),c=""),l=_,p=p||!Ls(l);a++}return""!==c&&(s+=P0(p,c)),s}const Tt={};function F0(i){L0(xt(),we(),pr()+i,Qa())}function L0(i,s,a,l){if(!l)if(3==(3&s[2])){const p=i.preOrderCheckHooks;null!==p&&oa(s,p,a)}else{const p=i.preOrderHooks;null!==p&&tu(s,p,0,a)}Cs(a)}function Gh(i,s){return i<<17|s<<2}function Vs(i){return i>>17&32767}function yr(i){return 2|i}function Ar(i){return(131068&i)>>2}function xy(i,s){return-131069&i|s<<2}function hg(i){return 1|i}function H0(i,s){const a=i.contentQueries;if(null!==a)for(let l=0;l<a.length;l+=2){const c=a[l],p=a[l+1];if(-1!==p){const _=i.data[p];Ku(c),_.contentQueries(2,s[p],p)}}}function Cl(i,s,a,l,c,p,_,E,I,A){const S=s.blueprint.slice();return S[0]=c,S[2]=140|l,Es(S),S[3]=S[15]=i,S[8]=a,S[10]=_||i&&i[10],S[11]=E||i&&i[11],S[12]=I||i&&i[12]||null,S[9]=A||i&&i[9]||null,S[6]=p,S[16]=2==s.type?i[16]:S,S}function Tl(i,s,a,l,c){let p=i.data[s];if(null===p)p=function Zh(i,s,a,l,c){const p=Co(),_=$u(),I=i.data[s]=function Pb(i,s,a,l,c,p){return{type:a,index:l,insertBeforeIndex:null,injectorIndex:s?s.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:c,attrs:p,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:s,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,_?p:p&&p.parent,a,s,l,c);return null===i.firstChild&&(i.firstChild=I),null!==p&&(_?null==p.child&&null!==I.parent&&(p.child=I):null===p.next&&(p.next=I)),I}(i,s,a,l,c),function zu(){return lt.lFrame.inI18n}()&&(p.flags|=64);else if(64&p.type){p.type=a,p.value=l,p.attrs=c;const _=function To(){const i=lt.lFrame,s=i.currentTNode;return i.isParent?s:s.parent}();p.injectorIndex=null===_?-1:_.injectorIndex}return Lr(p,!0),p}function mu(i,s,a,l){if(0===a)return-1;const c=s.length;for(let p=0;p<a;p++)s.push(l),i.blueprint.push(l),i.data.push(null);return c}function Kh(i,s,a){Ys(s);try{const l=i.viewQuery;null!==l&&Ag(1,l,a);const c=i.template;null!==c&&G0(i,s,c,1,a),i.firstCreatePass&&(i.firstCreatePass=!1),i.staticContentQueries&&H0(i,s),i.staticViewQueries&&Ag(2,i.viewQuery,a);const p=i.components;null!==p&&function $0(i,s){for(let a=0;a<s.length;a++)qb(i,s[a])}(s,p)}catch(l){throw i.firstCreatePass&&(i.incompleteFirstPass=!0,i.firstCreatePass=!1),l}finally{s[2]&=-5,Js()}}function Vo(i,s,a,l){const c=s[2];if(256==(256&c))return;Ys(s);const p=Qa();try{Es(s),function Ja(i){return lt.lFrame.bindingIndex=i}(i.bindingStartIndex),null!==a&&G0(i,s,a,2,l);const _=3==(3&c);if(!p)if(_){const A=i.preOrderCheckHooks;null!==A&&oa(s,A,null)}else{const A=i.preOrderHooks;null!==A&&tu(s,A,0,null),On(s,0)}if(function rE(i){for(let s=fu(i);null!==s;s=pu(s)){if(!s[2])continue;const a=s[9];for(let l=0;l<a.length;l++){const c=a[l],p=c[3];0==(1024&c[2])&&ws(p,1),c[2]|=1024}}}(s),function nE(i){for(let s=fu(i);null!==s;s=pu(s))for(let a=10;a<s.length;a++){const l=s[a],c=l[1];zi(l)&&Vo(c,l,c.template,l[8])}}(s),null!==i.contentQueries&&H0(i,s),!p)if(_){const A=i.contentCheckHooks;null!==A&&oa(s,A)}else{const A=i.contentHooks;null!==A&&tu(s,A,1),On(s,1)}!function j0(i,s){const a=i.hostBindingOpCodes;if(null!==a)try{for(let l=0;l<a.length;l++){const c=a[l];if(c<0)Cs(~c);else{const p=c,_=a[++l],E=a[++l];eu(_,p),E(2,s[p])}}}finally{Cs(-1)}}(i,s);const E=i.components;null!==E&&function yg(i,s){for(let a=0;a<s.length;a++)Ig(i,s[a])}(s,E);const I=i.viewQuery;if(null!==I&&Ag(2,I,l),!p)if(_){const A=i.viewCheckHooks;null!==A&&oa(s,A)}else{const A=i.viewHooks;null!==A&&tu(s,A,2),On(s,2)}!0===i.firstUpdatePass&&(i.firstUpdatePass=!1),p||(s[2]&=-73),1024&s[2]&&(s[2]&=-1025,ws(s[3],-1))}finally{Js()}}function Nb(i,s,a,l){const c=s[10],p=!Qa(),_=vs(s);try{p&&!_&&c.begin&&c.begin(),_&&Kh(i,s,l),Vo(i,s,a,l)}finally{p&&!_&&c.end&&c.end()}}function G0(i,s,a,l,c){const p=pr(),_=2&l;try{Cs(-1),_&&s.length>20&&L0(i,s,20,Qa()),a(l,c)}finally{Cs(p)}}function q0(i,s,a){if(lc(s)){const c=s.directiveEnd;for(let p=s.directiveStart;p<c;p++){const _=i.data[p];_.contentQueries&&_.contentQueries(1,a[p],p)}}}function rd(i,s,a){!Ya()||(function Vb(i,s,a,l){const c=a.directiveStart,p=a.directiveEnd;i.firstCreatePass||ri(a,s),fn(l,s);const _=a.initialInputs;for(let E=c;E<p;E++){const I=i.data[E],A=Nr(I);A&&Hb(s,a,I);const S=Yi(s,i,E,a);fn(S,s),null!==_&&$b(0,E-c,S,I,0,_),A&&(fr(a.index,s)[8]=S)}}(i,s,a,hr(a,s)),128==(128&a.flags)&&function Ub(i,s,a){const l=a.directiveStart,c=a.directiveEnd,_=a.index,E=function Wu(){return lt.lFrame.currentDirectiveIndex}();try{Cs(_);for(let I=l;I<c;I++){const A=i.data[I],S=s[I];ia(I),(null!==A.hostBindings||0!==A.hostVars||null!==A.hostAttrs)&&eE(A,S)}}finally{Cs(-1),ia(E)}}(i,s,a))}function Al(i,s,a=hr){const l=s.localNames;if(null!==l){let c=s.index+1;for(let p=0;p<l.length;p+=2){const _=l[p+1],E=-1===_?a(s,i):i[_];i[c++]=E}}}function _g(i){const s=i.tView;return null===s||s.incompleteFirstPass?i.tView=Yh(1,null,i.template,i.decls,i.vars,i.directiveDefs,i.pipeDefs,i.viewQuery,i.schemas,i.consts):s}function Yh(i,s,a,l,c,p,_,E,I,A){const S=20+l,N=S+c,V=function z0(i,s){const a=[];for(let l=0;l<s;l++)a.push(l<i?null:Tt);return a}(S,N),W="function"==typeof A?A():A;return V[1]={type:i,blueprint:V,template:a,queries:null,viewQuery:E,declTNode:s,data:V.slice().fill(null,S),bindingStartIndex:S,expandoStartIndex:N,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof p?p():p,pipeRegistry:"function"==typeof _?_():_,firstChild:null,schemas:I,consts:W,incompleteFirstPass:!1}}function Y0(i,s,a,l){const c=sE(s);null===a?c.push(l):(c.push(a),i.firstCreatePass&&oE(i).push(l,c.length-1))}function By(i,s,a){for(let l in i)if(i.hasOwnProperty(l)){const c=i[l];(a=null===a?{}:a).hasOwnProperty(l)?a[l].push(s,c):a[l]=[s,c]}return a}function Uo(i,s,a,l){let c=!1;if(Ya()){const p=function Bb(i,s,a){const l=i.directiveRegistry;let c=null;if(l)for(let p=0;p<l.length;p++){const _=l[p];O0(a,_.selectors,!1)&&(c||(c=[]),no(ri(a,s),i,_.type),Nr(_)?(id(i,a),c.unshift(_)):c.push(_))}return c}(i,s,a),_=null===l?null:{"":-1};if(null!==p){c=!0,sd(a,i.data.length,p.length);for(let S=0;S<p.length;S++){const N=p[S];N.providersResolver&&N.providersResolver(N)}let E=!1,I=!1,A=mu(i,s,p.length,null);for(let S=0;S<p.length;S++){const N=p[S];a.mergedAttrs=aa(a.mergedAttrs,N.hostAttrs),Eg(i,a,s,A,N),jb(A,N,_),null!==N.contentQueries&&(a.flags|=8),(null!==N.hostBindings||null!==N.hostAttrs||0!==N.hostVars)&&(a.flags|=128);const V=N.type.prototype;!E&&(V.ngOnChanges||V.ngOnInit||V.ngDoCheck)&&((i.preOrderHooks||(i.preOrderHooks=[])).push(a.index),E=!0),!I&&(V.ngOnChanges||V.ngDoCheck)&&((i.preOrderCheckHooks||(i.preOrderCheckHooks=[])).push(a.index),I=!0),A++}!function vg(i,s){const l=s.directiveEnd,c=i.data,p=s.attrs,_=[];let E=null,I=null;for(let A=s.directiveStart;A<l;A++){const S=c[A],N=S.inputs,V=null===p||x0(s)?null:Gb(N,p);_.push(V),E=By(N,A,E),I=By(S.outputs,A,I)}null!==E&&(E.hasOwnProperty("class")&&(s.flags|=16),E.hasOwnProperty("style")&&(s.flags|=32)),s.initialInputs=_,s.inputs=E,s.outputs=I}(i,a)}_&&function Qh(i,s,a){if(s){const l=i.localNames=[];for(let c=0;c<s.length;c+=2){const p=a[s[c+1]];if(null==p)throw new xe(-301,!1);l.push(s[c],p)}}}(a,l,_)}return a.mergedAttrs=aa(a.mergedAttrs,a.attrs),c}function X0(i,s,a,l,c,p){const _=p.hostBindings;if(_){let E=i.hostBindingOpCodes;null===E&&(E=i.hostBindingOpCodes=[]);const I=~s.index;(function Sl(i){let s=i.length;for(;s>0;){const a=i[--s];if("number"==typeof a&&a<0)return a}return 0})(E)!=I&&E.push(I),E.push(l,c,_)}}function eE(i,s){null!==i.hostBindings&&i.hostBindings(1,s)}function id(i,s){s.flags|=2,(i.components||(i.components=[])).push(s.index)}function jb(i,s,a){if(a){if(s.exportAs)for(let l=0;l<s.exportAs.length;l++)a[s.exportAs[l]]=i;Nr(s)&&(a[""]=i)}}function sd(i,s,a){i.flags|=1,i.directiveStart=s,i.directiveEnd=s+a,i.providerIndexes=s}function Eg(i,s,a,l,c){i.data[l]=c;const p=c.factory||(c.factory=Pr(c.type)),_=new Ao(p,Nr(c),null);i.blueprint[l]=_,a[l]=_,X0(i,s,0,l,mu(i,a,c.hostVars,Tt),c)}function Hb(i,s,a){const l=hr(s,i),c=_g(a),p=i[10],_=bg(i,Cl(i,c,null,a.onPush?64:16,l,s,p,p.createRenderer(l,a),null,null));i[s.index]=_}function po(i,s,a,l,c,p){const _=hr(i,s);!function wg(i,s,a,l,c,p,_){if(null==p)ln(i)?i.removeAttribute(s,c,a):s.removeAttribute(c);else{const E=null==_?de(p):_(p,l||"",c);ln(i)?i.setAttribute(s,c,E,a):a?s.setAttributeNS(a,c,E):s.setAttribute(c,E)}}(s[11],_,p,i.value,a,l,c)}function $b(i,s,a,l,c,p){const _=p[s];if(null!==_){const E=l.setInput;for(let I=0;I<_.length;){const A=_[I++],S=_[I++],N=_[I++];null!==E?l.setInput(a,N,A,S):a[S]=N}}}function Gb(i,s){let a=null,l=0;for(;l<s.length;){const c=s[l];if(0!==c)if(5!==c){if("number"==typeof c)break;i.hasOwnProperty(c)&&(null===a&&(a=[]),a.push(c,i[c],s[l+1])),l+=2}else l+=2;else l+=4}return a}function rs(i,s,a,l){return new Array(i,!0,!1,s,null,0,l,a,null,null)}function Ig(i,s){const a=fr(s,i);if(zi(a)){const l=a[1];80&a[2]?Vo(l,a,l.template,a[8]):a[5]>0&&od(a)}}function od(i){for(let l=fu(i);null!==l;l=pu(l))for(let c=10;c<l.length;c++){const p=l[c];if(1024&p[2]){const _=p[1];Vo(_,p,_.template,p[8])}else p[5]>0&&od(p)}const a=i[1].components;if(null!==a)for(let l=0;l<a.length;l++){const c=fr(a[l],i);zi(c)&&c[5]>0&&od(c)}}function qb(i,s){const a=fr(s,i),l=a[1];(function zb(i,s){for(let a=s.length;a<i.blueprint.length;a++)s.push(i.blueprint[a])})(l,a),Kh(l,a,a[8])}function bg(i,s){return i[13]?i[14][4]=s:i[13]=s,i[14]=s,s}function Hy(i){for(;i;){i[2]|=64;const s=Dn(i);if(nh(i)&&!s)return i;i=s}return null}function Tg(i,s,a){const l=s[10];l.begin&&l.begin();try{Vo(i,s,i.template,a)}catch(c){throw Sg(s,c),c}finally{l.end&&l.end()}}function Jh(i){!function Cg(i){for(let s=0;s<i.components.length;s++){const a=i.components[s],l=rr(a),c=l[1];Nb(c,l,c.template,a)}}(i[8])}function Ag(i,s,a){Ku(0),s(i,a)}const Wb=(()=>Promise.resolve(null))();function sE(i){return i[7]||(i[7]=[])}function oE(i){return i.cleanup||(i.cleanup=[])}function Sg(i,s){const a=i[9],l=a?a.get(mr,null):null;l&&l.handleError(s)}function uE(i,s,a,l,c){for(let p=0;p<a.length;){const _=a[p++],E=a[p++],I=s[_],A=i.data[_];null!==A.setInput?A.setInput(I,c,l,E):I[E]=c}}function Bo(i,s,a){const l=Ks(s,i);!function ag(i,s,a){ln(i)?i.setValue(s,a):s.textContent=a}(i[11],l,a)}function Ml(i,s,a){let l=a?i.styles:null,c=a?i.classes:null,p=0;if(null!==s)for(let _=0;_<s.length;_++){const E=s[_];"number"==typeof E?p=E:1==p?c=ue(c,E):2==p&&(l=ue(l,E+": "+s[++_]+";"))}a?i.styles=l:i.stylesWithoutHost=l,a?i.classes=c:i.classesWithoutHost=c}const Gy=new yn("INJECTOR",-1);class ad{get(s,a=es){if(a===es){const l=new Error(`NullInjectorError: No provider for ${ce(s)}!`);throw l.name="NullInjectorError",l}return a}}const qy=new yn("Set Injector scope."),ef={},tf={};let zy;function lE(){return void 0===zy&&(zy=new ad),zy}function cE(i,s=null,a=null,l){const c=dE(i,s,a,l);return c._resolveInjectorDefTypes(),c}function dE(i,s=null,a=null,l){return new Yb(i,a,s||lE(),l)}class Yb{constructor(s,a,l,c=null){this.parent=l,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const p=[];a&&Ii(a,E=>this.processProvider(E,s,a)),Ii([s],E=>this.processInjectorType(E,[],p)),this.records.set(Gy,xl(void 0,this));const _=this.records.get(qy);this.scope=null!=_?_.value:null,this.source=c||("object"==typeof s?null:ce(s))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(s=>s.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(s,a=es,l=ot.Default){this.assertNotDestroyed();const c=Se(this),p=Fn(void 0);try{if(!(l&ot.SkipSelf)){let E=this.records.get(s);if(void 0===E){const I=function gE(i){return"function"==typeof i||"object"==typeof i&&i instanceof yn}(s)&&Vt(s);E=I&&this.injectableDefInScope(I)?xl(Wy(s),ef):null,this.records.set(s,E)}if(null!=E)return this.hydrate(s,E)}return(l&ot.Self?lE():this.parent).get(s,a=l&ot.Optional&&a===es?null:a)}catch(_){if("NullInjectorError"===_.name){if((_[dl]=_[dl]||[]).unshift(ce(s)),c)throw _;return function ma(i,s,a,l){const c=i[dl];throw s[F]&&c.unshift(s[F]),i.message=function Ro(i,s,a,l=null){i=i&&"\n"===i.charAt(0)&&"\u0275"==i.charAt(1)?i.substr(2):i;let c=ce(s);if(Array.isArray(s))c=s.map(ce).join(" -> ");else if("object"==typeof s){let p=[];for(let _ in s)if(s.hasOwnProperty(_)){let E=s[_];p.push(_+":"+("string"==typeof E?JSON.stringify(E):ce(E)))}c=`{${p.join(", ")}}`}return`${a}${l?"("+l+")":""}[${c}]: ${i.replace(D,"\n  ")}`}("\n"+i.message,c,a,l),i.ngTokenPath=c,i[dl]=null,i}(_,s,"R3InjectorError",this.source)}throw _}finally{Fn(p),Se(c)}}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(s=>this.get(s))}toString(){const s=[];return this.records.forEach((l,c)=>s.push(ce(c))),`R3Injector[${s.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new xe(205,!1)}processInjectorType(s,a,l){if(!(s=Y(s)))return!1;let c=wr(s);const p=null==c&&s.ngModule||void 0,_=void 0===p?s:p,E=-1!==l.indexOf(_);if(void 0!==p&&(c=wr(p)),null==c)return!1;if(null!=c.imports&&!E){let S;l.push(_);try{Ii(c.imports,N=>{this.processInjectorType(N,a,l)&&(void 0===S&&(S=[]),S.push(N))})}finally{}if(void 0!==S)for(let N=0;N<S.length;N++){const{ngModule:V,providers:W}=S[N];Ii(W,ge=>this.processProvider(ge,V,W||at))}}this.injectorDefTypes.add(_);const I=Pr(_)||(()=>new _);this.records.set(_,xl(I,ef));const A=c.providers;if(null!=A&&!E){const S=s;Ii(A,N=>this.processProvider(N,S,A))}return void 0!==p&&void 0!==s.providers}processProvider(s,a,l){let c=ud(s=Y(s))?s:Y(s&&s.provide);const p=function Jb(i,s,a){return fE(i)?xl(void 0,i.useValue):xl(hE(i),ef)}(s);if(ud(s)||!0!==s.multi)this.records.get(c);else{let _=this.records.get(c);_||(_=xl(void 0,ef,!0),_.factory=()=>Et(_.multi),this.records.set(c,_)),c=s,_.multi.push(s)}this.records.set(c,p)}hydrate(s,a){return a.value===ef&&(a.value=tf,a.value=a.factory()),"object"==typeof a.value&&a.value&&function ZA(i){return null!==i&&"object"==typeof i&&"function"==typeof i.ngOnDestroy}(a.value)&&this.onDestroy.add(a.value),a.value}injectableDefInScope(s){if(!s.providedIn)return!1;const a=Y(s.providedIn);return"string"==typeof a?"any"===a||a===this.scope:this.injectorDefTypes.has(a)}}function Wy(i){const s=Vt(i),a=null!==s?s.factory:Pr(i);if(null!==a)return a;if(i instanceof yn)throw new xe(204,!1);if(i instanceof Function)return function Qb(i){const s=i.length;if(s>0)throw function Br(i,s){const a=[];for(let l=0;l<i;l++)a.push(s);return a}(s,"?"),new xe(204,!1);const a=function Qr(i){const s=i&&(i[Mi]||i[Ui]);if(s){const a=function ls(i){if(i.hasOwnProperty("name"))return i.name;const s=(""+i).match(/^function\s*([^\s(]+)/);return null===s?"":s[1]}(i);return console.warn(`DEPRECATED: DI is instantiating a token "${a}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${a}" class.`),s}return null}(i);return null!==a?()=>a.factory(i):()=>new i}(i);throw new xe(204,!1)}function hE(i,s,a){let l;if(ud(i)){const c=Y(i);return Pr(c)||Wy(c)}if(fE(i))l=()=>Y(i.useValue);else if(function eD(i){return!(!i||!i.useFactory)}(i))l=()=>i.useFactory(...Et(i.deps||[]));else if(function Xb(i){return!(!i||!i.useExisting)}(i))l=()=>nt(Y(i.useExisting));else{const c=Y(i&&(i.useClass||i.provide));if(!function pE(i){return!!i.deps}(i))return Pr(c)||Wy(c);l=()=>new c(...Et(i.deps))}return l}function xl(i,s,a=!1){return{factory:i,value:s,multi:a?[]:void 0}}function fE(i){return null!==i&&"object"==typeof i&&z in i}function ud(i){return"function"==typeof i}let go=(()=>{class i{static create(a,l){var c;if(Array.isArray(a))return cE({name:""},l,a,"");{const p=null!==(c=a.name)&&void 0!==c?c:"";return cE({name:p},a.parent,a.providers,p)}}}return i.THROW_IF_NOT_FOUND=es,i.NULL=new ad,i.\u0275prov=Kt({token:i,providedIn:"any",factory:()=>nt(Gy)}),i.__NG_ELEMENT_ID__=-1,i})();function oD(i,s){Wi(rr(i)[1],gn())}function e_(i){let s=function Xy(i){return Object.getPrototypeOf(i.prototype).constructor}(i.type),a=!0;const l=[i];for(;s;){let c;if(Nr(i))c=s.\u0275cmp||s.\u0275dir;else{if(s.\u0275cmp)throw new xe(903,"");c=s.\u0275dir}if(c){if(a){l.push(c);const _=i;_.inputs=xg(i.inputs),_.declaredInputs=xg(i.declaredInputs),_.outputs=xg(i.outputs);const E=c.hostBindings;E&&Nl(i,E);const I=c.viewQuery,A=c.contentQueries;if(I&&t_(i,I),A&&tS(i,A),re(i.inputs,c.inputs),re(i.declaredInputs,c.declaredInputs),re(i.outputs,c.outputs),Nr(c)&&c.data.animation){const S=i.data;S.animation=(S.animation||[]).concat(c.data.animation)}}const p=c.features;if(p)for(let _=0;_<p.length;_++){const E=p[_];E&&E.ngInherit&&E(i),E===e_&&(a=!1)}}s=Object.getPrototypeOf(s)}!function DE(i){let s=0,a=null;for(let l=i.length-1;l>=0;l--){const c=i[l];c.hostVars=s+=c.hostVars,c.hostAttrs=aa(c.hostAttrs,a=aa(a,c.hostAttrs))}}(l)}function xg(i){return i===Xn?{}:i===at?[]:i}function t_(i,s){const a=i.viewQuery;i.viewQuery=a?(l,c)=>{s(l,c),a(l,c)}:s}function tS(i,s){const a=i.contentQueries;i.contentQueries=a?(l,c,p)=>{s(l,c,p),a(l,c,p)}:s}function Nl(i,s){const a=i.hostBindings;i.hostBindings=a?(l,c)=>{s(l,c),a(l,c)}:s}let rf=null;function ld(){if(!rf){const i=Ft.Symbol;if(i&&i.iterator)rf=i.iterator;else{const s=Object.getOwnPropertyNames(Map.prototype);for(let a=0;a<s.length;++a){const l=s[a];"entries"!==l&&"size"!==l&&Map.prototype[l]===Map.prototype.entries&&(rf=l)}}}return rf}function sf(i){return!!n_(i)&&(Array.isArray(i)||!(i instanceof Map)&&ld()in i)}function n_(i){return null!==i&&("function"==typeof i||"object"==typeof i)}function jo(i,s,a){return i[s]=a}function ui(i,s,a){return!Object.is(i[s],a)&&(i[s]=a,!0)}function AE(i,s,a,l){const c=we();return ui(c,bs(),s)&&(xt(),po(bn(),c,i,s,a,l)),AE}function dd(i,s,a,l,c,p){const E=function kl(i,s,a,l){const c=ui(i,s,a);return ui(i,s+1,l)||c}(i,function ni(){return lt.lFrame.bindingIndex}(),a,c);return Ei(2),E?s+de(a)+l+de(c)+p:Tt}function xE(i,s,a,l,c,p,_,E){const I=we(),A=xt(),S=i+20,N=A.firstCreatePass?function nS(i,s,a,l,c,p,_,E,I){const A=s.consts,S=Tl(s,i,4,_||null,Fr(A,E));Uo(s,a,S,Fr(A,I)),Wi(s,S);const N=S.tViews=Yh(2,S,l,c,p,s.directiveRegistry,s.pipeRegistry,null,s.schemas,A);return null!==s.queries&&(s.queries.template(s,S),N.queries=s.queries.embeddedTView(S)),S}(S,A,I,s,a,l,c,p,_):A.data[S];Lr(N,!1);const V=I[11].createComment("");lo(A,I,V,N),fn(V,I),bg(I,I[S]=rs(V,I,V,N)),Va(N)&&rd(A,I,N),null!=_&&Al(I,N,E)}function yu(i,s=ot.Default){const a=we();return null===a?nt(i,s):ii(gn(),a,Y(i),s)}function l_(){throw new Error("invalid")}function c_(i,s,a){const l=we();return ui(l,bs(),s)&&function Ci(i,s,a,l,c,p,_,E){const I=hr(s,a);let S,A=s.inputs;!E&&null!=A&&(S=A[l])?(uE(i,a,S,l,c),ps(s)&&function Fb(i,s){const a=fr(s,i);16&a[2]||(a[2]|=64)}(a,s.index)):3&s.type&&(l=function kb(i){return"class"===i?"className":"for"===i?"htmlFor":"formaction"===i?"formAction":"innerHtml"===i?"innerHTML":"readonly"===i?"readOnly":"tabindex"===i?"tabIndex":i}(l),c=null!=_?_(c,s.value||"",l):c,ln(p)?p.setProperty(I,l,c):nl(l)||(I.setProperty?I.setProperty(l,c):I[l]=c))}(xt(),bn(),l,i,s,l[11],a,!1),c_}function d_(i,s,a,l,c){const _=c?"class":"style";uE(i,a,s.inputs[_],_,l)}function Vg(i,s,a,l){const c=we(),p=xt(),_=20+i,E=c[11],I=c[_]=Zc(E,s,function ry(){return lt.lFrame.currentNamespace}()),A=p.firstCreatePass?function bD(i,s,a,l,c,p,_){const E=s.consts,A=Tl(s,i,2,c,Fr(E,p));return Uo(s,a,A,Fr(E,_)),null!==A.attrs&&Ml(A,A.attrs,!1),null!==A.mergedAttrs&&Ml(A,A.mergedAttrs,!0),null!==s.queries&&s.queries.elementStart(s,A),A}(_,p,c,0,s,a,l):p.data[_];Lr(A,!0);const S=A.mergedAttrs;null!==S&&tl(E,I,S);const N=A.classes;null!==N&&dg(E,I,N);const V=A.styles;return null!==V&&Jc(E,I,V),64!=(64&A.flags)&&lo(p,c,I,A),0===function ra(){return lt.lFrame.elementDepthCount}()&&fn(I,c),function Za(){lt.lFrame.elementDepthCount++}(),Va(A)&&(rd(p,c,A),q0(p,A,c)),null!==l&&Al(c,A),Vg}function cf(){let i=gn();$u()?Gu():(i=i.parent,Lr(i,!1));const s=i;!function Ka(){lt.lFrame.elementDepthCount--}();const a=xt();return a.firstCreatePass&&(Wi(a,i),lc(i)&&a.queries.elementEnd(i)),null!=s.classesWithoutHost&&function oh(i){return 0!=(16&i.flags)}(s)&&d_(a,s,we(),s.classesWithoutHost,!0),null!=s.stylesWithoutHost&&function Np(i){return 0!=(32&i.flags)}(s)&&d_(a,s,we(),s.stylesWithoutHost,!1),cf}function df(i,s,a,l){return Vg(i,s,a,l),cf(),df}function hf(i,s,a){const l=we(),c=xt(),p=i+20,_=c.firstCreatePass?function h_(i,s,a,l,c){const p=s.consts,_=Fr(p,l),E=Tl(s,i,8,"ng-container",_);return null!==_&&Ml(E,_,!0),Uo(s,a,E,Fr(p,c)),null!==s.queries&&s.queries.elementStart(s,E),E}(p,c,l,s,a):c.data[p];Lr(_,!0);const E=l[p]=l[11].createComment("");return lo(c,l,E,_),fn(E,l),Va(_)&&(rd(c,l,_),q0(c,_,l)),null!=a&&Al(l,_),hf}function _u(){let i=gn();const s=xt();return $u()?Gu():(i=i.parent,Lr(i,!1)),s.firstCreatePass&&(Wi(s,i),lc(i)&&s.queries.elementEnd(i)),_u}function Ug(){return we()}function Bg(i){return!!i&&"function"==typeof i.then}function VE(i){return!!i&&"function"==typeof i.subscribe}const jg=VE;function Hg(i,s,a,l){const c=we(),p=xt(),_=gn();return function UE(i,s,a,l,c,p,_,E){const I=Va(l),S=i.firstCreatePass&&oE(i),N=s[8],V=sE(s);let W=!0;if(3&l.type||E){const Le=hr(l,s),Qe=E?E(Le):Le,Ie=V.length,dt=E?Gt=>E(sn(Gt[l.index])):l.index;if(ln(a)){let Gt=null;if(!E&&I&&(Gt=function p_(i,s,a,l){const c=i.cleanup;if(null!=c)for(let p=0;p<c.length-1;p+=2){const _=c[p];if(_===a&&c[p+1]===l){const E=s[7],I=c[p+2];return E.length>I?E[I]:null}"string"==typeof _&&(p+=2)}return null}(i,s,c,l.index)),null!==Gt)(Gt.__ngLastListenerFn__||Gt).__ngNextListenerFn__=p,Gt.__ngLastListenerFn__=p,W=!1;else{p=g_(l,s,N,p,!1);const on=a.listen(Qe,c,p);V.push(p,on),S&&S.push(c,dt,Ie,Ie+1)}}else p=g_(l,s,N,p,!0),Qe.addEventListener(c,p,_),V.push(p),S&&S.push(c,dt,Ie,_)}else p=g_(l,s,N,p,!1);const ge=l.outputs;let Me;if(W&&null!==ge&&(Me=ge[c])){const Le=Me.length;if(Le)for(let Qe=0;Qe<Le;Qe+=2){const Fi=s[Me[Qe]][Me[Qe+1]].subscribe(p),rc=V.length;V.push(p,Fi),S&&S.push(c,l.index,rc,-(rc+1))}}}(p,c,c[11],_,i,s,!!a,l),Hg}function BE(i,s,a,l){try{return!1!==a(l)}catch(c){return Sg(i,c),!1}}function g_(i,s,a,l,c){return function p(_){if(_===Function)return l;const E=2&i.flags?fr(i.index,s):s;0==(32&s[2])&&Hy(E);let I=BE(s,0,l,_),A=p.__ngNextListenerFn__;for(;A;)I=BE(s,0,A,_)&&I,A=A.__ngNextListenerFn__;return c&&!1===I&&(_.preventDefault(),_.returnValue=!1),I}}function ff(i=1){return function Ds(i){return(lt.lFrame.contextLView=function Qu(i,s){for(;i>0;)s=s[15],i--;return s}(i,lt.lFrame.contextLView))[8]}(i)}function WE(i,s,a,l,c){const p=i[a+1],_=null===s;let E=l?Vs(p):Ar(p),I=!1;for(;0!==E&&(!1===I||_);){const S=i[E+1];$g(i[E],s)&&(I=!0,i[E+1]=l?hg(S):yr(S)),E=l?Vs(S):Ar(S)}I&&(i[a+1]=l?yr(p):hg(p))}function $g(i,s){return null===i||null==s||(Array.isArray(i)?i[1]:i)===s||!(!Array.isArray(i)||"string"!=typeof s)&&fa(i,s)>=0}function gf(i,s,a){return is(i,s,a,!1),gf}function QE(i,s){return is(i,s,null,!0),QE}function is(i,s,a,l){const c=we(),p=xt(),_=Ei(2);p.firstUpdatePass&&function Gg(i,s,a,l){const c=i.data;if(null===c[a+1]){const p=c[pr()],_=function ND(i,s){return s>=i.expandoStartIndex}(i,a);(function VD(i,s){return 0!=(i.flags&(s?16:32))})(p,l)&&null===s&&!_&&(s=!1),s=function hS(i,s,a,l){const c=function sa(i){const s=lt.lFrame.currentDirectiveIndex;return-1===s?null:i[s]}(i);let p=l?s.residualClasses:s.residualStyles;if(null===c)0===(l?s.classBindings:s.styleBindings)&&(a=qg(a=T_(null,i,s,a,l),s.attrs,l),p=null);else{const _=s.directiveStylingLast;if(-1===_||i[_]!==c)if(a=T_(c,i,s,a,l),null===p){let I=function PD(i,s,a){const l=a?s.classBindings:s.styleBindings;if(0!==Ar(l))return i[Vs(l)]}(i,s,l);void 0!==I&&Array.isArray(I)&&(I=T_(null,i,s,I[1],l),I=qg(I,s.attrs,l),function fS(i,s,a,l){i[Vs(a?s.classBindings:s.styleBindings)]=l}(i,s,l,I))}else p=function kD(i,s,a){let l;const c=s.directiveEnd;for(let p=1+s.directiveStylingLast;p<c;p++)l=qg(l,i[p].hostAttrs,a);return qg(l,s.attrs,a)}(i,s,l)}return void 0!==p&&(l?s.residualClasses=p:s.residualStyles=p),a}(c,p,s,l),function CD(i,s,a,l,c,p){let _=p?s.classBindings:s.styleBindings,E=Vs(_),I=Ar(_);i[l]=a;let S,A=!1;if(Array.isArray(a)){const N=a;S=N[1],(null===S||fa(N,S)>0)&&(A=!0)}else S=a;if(c)if(0!==I){const V=Vs(i[E+1]);i[l+1]=Gh(V,E),0!==V&&(i[V+1]=xy(i[V+1],l)),i[E+1]=function UA(i,s){return 131071&i|s<<17}(i[E+1],l)}else i[l+1]=Gh(E,0),0!==E&&(i[E+1]=xy(i[E+1],l)),E=l;else i[l+1]=Gh(I,0),0===E?E=l:i[I+1]=xy(i[I+1],l),I=l;A&&(i[l+1]=yr(i[l+1])),WE(i,S,l,!0),WE(i,S,l,!1),function TD(i,s,a,l,c){const p=c?i.residualClasses:i.residualStyles;null!=p&&"string"==typeof s&&fa(p,s)>=0&&(a[l+1]=hg(a[l+1]))}(s,S,i,l,p),_=Gh(E,I),p?s.classBindings=_:s.styleBindings=_}(c,p,s,a,_,l)}}(p,i,_,l),s!==Tt&&ui(c,_,s)&&function FD(i,s,a,l,c,p,_,E){if(!(3&s.type))return;const I=i.data,A=I[E+1];A_(function V0(i){return 1==(1&i)}(A)?LD(I,s,a,c,Ar(A),_):void 0)||(A_(p)||function My(i){return 2==(2&i)}(A)&&(p=LD(I,null,a,c,E,_)),function Ay(i,s,a,l,c){const p=ln(i);if(s)c?p?i.addClass(a,l):a.classList.add(l):p?i.removeClass(a,l):a.classList.remove(l);else{let _=-1===l.indexOf("-")?void 0:ie.DashCase;if(null==c)p?i.removeStyle(a,l,_):a.style.removeProperty(l);else{const E="string"==typeof c&&c.endsWith("!important");E&&(c=c.slice(0,-10),_|=ie.Important),p?i.setStyle(a,l,c,_):a.style.setProperty(l,c,E?"important":"")}}}(l,_,Ks(pr(),a),c,p))}(p,p.data[pr()],c,c[11],i,c[_+1]=function mS(i,s){return null==i||("string"==typeof s?i+=s:"object"==typeof i&&(i=ce(ts(i)))),i}(s,a),l,_)}function T_(i,s,a,l,c){let p=null;const _=a.directiveEnd;let E=a.directiveStylingLast;for(-1===E?E=a.directiveStart:E++;E<_&&(p=s[E],l=qg(l,p.hostAttrs,c),p!==i);)E++;return null!==i&&(a.directiveStylingLast=E),l}function qg(i,s,a){const l=a?1:2;let c=-1;if(null!==s)for(let p=0;p<s.length;p++){const _=s[p];"number"==typeof _?c=_:c===l&&(Array.isArray(i)||(i=void 0===i?[]:["",i]),oi(i,_,!!a||s[++p]))}return void 0===i?null:i}function LD(i,s,a,l,c,p){const _=null===s;let E;for(;c>0;){const I=i[c],A=Array.isArray(I),S=A?I[1]:I,N=null===S;let V=a[c+1];V===Tt&&(V=N?at:void 0);let W=N?hh(V,l):S===l?V:void 0;if(A&&!A_(W)&&(W=hh(I,l)),A_(W)&&(E=W,_))return E;const ge=i[c+1];c=_?Vs(ge):Ar(ge)}if(null!==s){let I=p?s.residualClasses:s.residualStyles;null!=I&&(E=hh(I,l))}return E}function A_(i){return void 0!==i}function ew(i,s=""){const a=we(),l=xt(),c=i+20,p=l.firstCreatePass?Tl(l,c,1,s,null):l.data[c],_=a[c]=function Vh(i,s){return ln(i)?i.createText(s):i.createTextNode(s)}(a[11],s);lo(l,a,_,p),Lr(p,!1)}function zg(i){return mf("",i,""),zg}function mf(i,s,a){const l=we(),c=function cd(i,s,a,l){return ui(i,bs(),a)?s+de(a)+l:Tt}(l,i,s,a);return c!==Tt&&Bo(l,pr(),c),mf}function Wg(i,s,a,l,c){const p=we(),_=dd(p,i,s,a,l,c);return _!==Tt&&Bo(p,pr(),_),Wg}const Bl=void 0;var V_=["en",[["a","p"],["AM","PM"],Bl],[["AM","PM"],Bl,Bl],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Bl,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Bl,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Bl,"{1} 'at' {0}",Bl],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function aw(i){const a=Math.floor(Math.abs(i)),l=i.toString().replace(/^[^.]*\.?/,"").length;return 1===a&&0===l?1:5}];let xa={};function Zr(i){const s=function lw(i){return i.toLowerCase().replace(/_/g,"-")}(i);let a=U_(s);if(a)return a;const l=s.split("-")[0];if(a=U_(l),a)return a;if("en"===l)return V_;throw new Error(`Missing locale data for the locale "${i}".`)}function ci(i){return Zr(i)[ht.PluralCase]}function U_(i){return i in xa||(xa[i]=Ft.ng&&Ft.ng.common&&Ft.ng.common.locales&&Ft.ng.common.locales[i]),xa[i]}var ht=(()=>((ht=ht||{})[ht.LocaleId=0]="LocaleId",ht[ht.DayPeriodsFormat=1]="DayPeriodsFormat",ht[ht.DayPeriodsStandalone=2]="DayPeriodsStandalone",ht[ht.DaysFormat=3]="DaysFormat",ht[ht.DaysStandalone=4]="DaysStandalone",ht[ht.MonthsFormat=5]="MonthsFormat",ht[ht.MonthsStandalone=6]="MonthsStandalone",ht[ht.Eras=7]="Eras",ht[ht.FirstDayOfWeek=8]="FirstDayOfWeek",ht[ht.WeekendRange=9]="WeekendRange",ht[ht.DateFormat=10]="DateFormat",ht[ht.TimeFormat=11]="TimeFormat",ht[ht.DateTimeFormat=12]="DateTimeFormat",ht[ht.NumberSymbols=13]="NumberSymbols",ht[ht.NumberFormats=14]="NumberFormats",ht[ht.CurrencyCode=15]="CurrencyCode",ht[ht.CurrencySymbol=16]="CurrencySymbol",ht[ht.CurrencyName=17]="CurrencyName",ht[ht.Currencies=18]="Currencies",ht[ht.Directionality=19]="Directionality",ht[ht.PluralCase=20]="PluralCase",ht[ht.ExtraData=21]="ExtraData",ht))();const yd="en-US";let B_=yd;function Sf(i,s,a,l,c){if(i=Y(i),Array.isArray(i))for(let p=0;p<i.length;p++)Sf(i[p],s,a,l,c);else{const p=xt(),_=we();let E=ud(i)?i:Y(i.provide),I=hE(i);const A=gn(),S=1048575&A.providerIndexes,N=A.directiveStart,V=A.providerIndexes>>20;if(ud(i)||!i.multi){const W=new Ao(I,c,yu),ge=um(E,s,c?S:S+V,N);-1===ge?(no(ri(A,_),p,E),wd(p,i,s.length),s.push(E),A.directiveStart++,A.directiveEnd++,c&&(A.providerIndexes+=1048576),a.push(W),_.push(W)):(a[ge]=W,_[ge]=W)}else{const W=um(E,s,S+V,N),ge=um(E,s,S,S+V),Me=W>=0&&a[W],Le=ge>=0&&a[ge];if(c&&!Le||!c&&!Me){no(ri(A,_),p,E);const Qe=function ov(i,s,a,l,c){const p=new Ao(i,a,yu);return p.multi=[],p.index=s,p.componentProviders=0,Id(p,c,l&&!a),p}(c?sv:hC,a.length,c,l,I);!c&&Le&&(a[ge].providerFactory=Qe),wd(p,i,s.length,0),s.push(E),A.directiveStart++,A.directiveEnd++,c&&(A.providerIndexes+=1048576),a.push(Qe),_.push(Qe)}else wd(p,i,W>-1?W:ge,Id(a[c?ge:W],I,!c&&l));!c&&l&&Le&&a[ge].componentProviders++}}}function wd(i,s,a,l){const c=ud(s),p=function tD(i){return!!i.useClass}(s);if(c||p){const I=(p?Y(s.useClass):s).prototype.ngOnDestroy;if(I){const A=i.destroyHooks||(i.destroyHooks=[]);if(!c&&s.multi){const S=A.indexOf(a);-1===S?A.push(a,[l,I]):A[S+1].push(l,I)}else A.push(a,I)}}}function Id(i,s,a){return a&&i.componentProviders++,i.multi.push(s)-1}function um(i,s,a,l){for(let c=a;c<l;c++)if(s[c]===i)return c;return-1}function hC(i,s,a,l){return bd(this.multi,[])}function sv(i,s,a,l){const c=this.multi;let p;if(this.providerFactory){const _=this.providerFactory.componentProviders,E=Yi(a,a[1],this.providerFactory.index,l);p=E.slice(0,_),bd(c,p);for(let I=_;I<E.length;I++)p.push(E[I])}else p=[],bd(c,p);return p}function bd(i,s){for(let a=0;a<i.length;a++)s.push((0,i[a])());return s}function av(i,s=[]){return a=>{a.providersResolver=(l,c)=>function iv(i,s,a){const l=xt();if(l.firstCreatePass){const c=Nr(i);Sf(a,l.data,l.blueprint,c,!0),Sf(s,l.data,l.blueprint,c,!1)}}(l,c?c(i):i,s)}}class uv{}class lm{resolveComponentFactory(s){throw function fC(i){const s=Error(`No component factory found for ${ce(i)}. Did you add it to @NgModule.entryComponents?`);return s.ngComponent=i,s}(s)}}let bu=(()=>{class i{}return i.NULL=new lm,i})();function Hl(){return Du(gn(),we())}function Du(i,s){return new Mf(hr(i,s))}let Mf=(()=>{class i{constructor(a){this.nativeElement=a}}return i.__NG_ELEMENT_ID__=Hl,i})();function lv(i){return i instanceof Mf?i.nativeElement:i}class cm{}let $l=(()=>{class i{}return i.__NG_ELEMENT_ID__=()=>function gC(){const i=we(),a=fr(gn().index,i);return function Mw(i){return i[11]}(_i(a)?a:i)}(),i})(),Gl=(()=>{class i{}return i.\u0275prov=Kt({token:i,providedIn:"root",factory:()=>null}),i})();class Go{constructor(s){this.full=s,this.major=s.split(".")[0],this.minor=s.split(".")[1],this.patch=s.split(".").slice(2).join(".")}}const Rf=new Go("13.3.6"),Cd={};function ql(i,s,a,l,c=!1){for(;null!==a;){const p=s[a.index];if(null!==p&&l.push(sn(p)),ei(p))for(let E=10;E<p.length;E++){const I=p[E],A=I[1].firstChild;null!==A&&ql(I[1],I,A,l)}const _=a.type;if(8&_)ql(i,s,a.child,l);else if(32&_){const E=Je(a,s);let I;for(;I=E();)l.push(I)}else if(16&_){const E=by(s,a);if(Array.isArray(E))l.push(...E);else{const I=Dn(s[16]);ql(I[1],I,E,l,!0)}}a=c?a.projectionNext:a.next}return l}class Td{constructor(s,a){this._lView=s,this._cdRefInjectingView=a,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const s=this._lView,a=s[1];return ql(a,s,a.firstChild,[])}get context(){return this._lView[8]}set context(s){this._lView[8]=s}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const s=this._lView[3];if(ei(s)){const a=s[8],l=a?a.indexOf(this):-1;l>-1&&(vy(s,l),Ms(a,l))}this._attachedToViewContainer=!1}Ey(this._lView[1],this._lView)}onDestroy(s){Y0(this._lView[1],this._lView,null,s)}markForCheck(){Hy(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){Tg(this._lView[1],this._lView,this.context)}checkNoChanges(){!function iE(i,s,a){Is(!0);try{Tg(i,s,a)}finally{Is(!1)}}(this._lView[1],this._lView,this.context)}attachToViewContainerRef(){if(this._appRef)throw new xe(902,"");this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function Fo(i,s){co(i,s,s[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(s){if(this._attachedToViewContainer)throw new xe(902,"");this._appRef=s}}class Mn extends Td{constructor(s){super(s),this._view=s}detectChanges(){Jh(this._view)}checkNoChanges(){!function Xh(i){Is(!0);try{Jh(i)}finally{Is(!1)}}(this._view)}get context(){return null}}class Of extends bu{constructor(s){super(),this.ngModule=s}resolveComponentFactory(s){const a=Bt(s);return new zl(a,this.ngModule)}}function xw(i){const s=[];for(let a in i)i.hasOwnProperty(a)&&s.push({propName:i[a],templateName:a});return s}class zl extends uv{constructor(s,a){super(),this.componentDef=s,this.ngModule=a,this.componentType=s.type,this.selector=function k0(i){return i.map(Xc).join(",")}(s.selectors),this.ngContentSelectors=s.ngContentSelectors?s.ngContentSelectors:[],this.isBoundToModule=!!a}get inputs(){return xw(this.componentDef.inputs)}get outputs(){return xw(this.componentDef.outputs)}create(s,a,l,c){const p=(c=c||this.ngModule)?function Nf(i,s){return{get:(a,l,c)=>{const p=i.get(a,Cd,c);return p!==Cd||l===Cd?p:s.get(a,l,c)}}}(s,c.injector):s,_=p.get(cm,Do),E=p.get(Gl,null),I=_.createRenderer(null,this.componentDef),A=this.componentDef.selectors[0][0]||"div",S=l?function K0(i,s,a){if(ln(i))return i.selectRootElement(s,a===Ut.ShadowDom);let l="string"==typeof s?i.querySelector(s):s;return l.textContent="",l}(I,l,this.componentDef.encapsulation):Zc(_.createRenderer(null,this.componentDef),A,function mC(i){const s=i.toLowerCase();return"svg"===s?"svg":"math"===s?"math":null}(A)),N=this.componentDef.onPush?576:528,V=function Ol(i,s){return{components:[],scheduler:i||sg,clean:Wb,playerHandler:s||null,flags:0}}(),W=Yh(0,null,null,1,0,null,null,null,null,null),ge=Cl(null,W,V,N,null,null,_,I,E,p);let Me,Le;Ys(ge);try{const Qe=function Rl(i,s,a,l,c,p){const _=a[1];a[20]=i;const I=Tl(_,20,2,"#host",null),A=I.mergedAttrs=s.hostAttrs;null!==A&&(Ml(I,A,!0),null!==i&&(tl(c,i,A),null!==I.classes&&dg(c,i,I.classes),null!==I.styles&&Jc(c,i,I.styles)));const S=l.createRenderer(i,s),N=Cl(a,_g(s),null,s.onPush?64:16,a[20],I,l,S,p||null,null);return _.firstCreatePass&&(no(ri(I,a),_,s.type),id(_,I),sd(I,a.length,1)),bg(a,N),a[20]=N}(S,this.componentDef,ge,_,I);if(S)if(l)tl(I,S,["ng-version",Rf.full]);else{const{attrs:Ie,classes:dt}=function Sy(i){const s=[],a=[];let l=1,c=2;for(;l<i.length;){let p=i[l];if("string"==typeof p)2===c?""!==p&&s.push(p,i[++l]):8===c&&a.push(p);else{if(!Ls(c))break;c=p}l++}return{attrs:s,classes:a}}(this.componentDef.selectors[0]);Ie&&tl(I,S,Ie),dt&&dt.length>0&&dg(I,S,dt.join(" "))}if(Le=na(W,20),void 0!==a){const Ie=Le.projection=[];for(let dt=0;dt<this.ngContentSelectors.length;dt++){const Gt=a[dt];Ie.push(null!=Gt?Array.from(Gt):null)}}Me=function nf(i,s,a,l,c){const p=a[1],_=function jy(i,s,a){const l=gn();i.firstCreatePass&&(a.providersResolver&&a.providersResolver(a),Eg(i,l,s,mu(i,s,1,null),a));const c=Yi(s,i,l.directiveStart,l);fn(c,s);const p=hr(l,s);return p&&fn(p,s),c}(p,a,s);if(l.components.push(_),i[8]=_,c&&c.forEach(I=>I(_,s)),s.contentQueries){const I=gn();s.contentQueries(1,_,I.directiveStart)}const E=gn();return!p.firstCreatePass||null===s.hostBindings&&null===s.hostAttrs||(Cs(E.index),X0(a[1],E,0,E.directiveStart,E.directiveEnd,s),eE(s,_)),_}(Qe,this.componentDef,ge,V,[oD]),Kh(W,ge,null)}finally{Js()}return new vC(this.componentType,Me,Du(Le,ge),ge,Le)}}class vC extends class Sw{}{constructor(s,a,l,c,p){super(),this.location=l,this._rootLView=c,this._tNode=p,this.instance=a,this.hostView=this.changeDetectorRef=new Mn(c),this.componentType=s}get injector(){return new wi(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(s){this.hostView.onDestroy(s)}}class Ad{}class Rw{}const qo=new Map;class Nw extends Ad{constructor(s,a){super(),this._parent=a,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new Of(this);const l=an(s);this._bootstrapComponents=g(l.bootstrap),this._r3Injector=dE(s,a,[{provide:Ad,useValue:this},{provide:bu,useValue:this.componentFactoryResolver}],ce(s)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(s)}get(s,a=go.THROW_IF_NOT_FOUND,l=ot.Default){return s===go||s===Ad||s===Gy?this:this._r3Injector.get(s,a,l)}destroy(){const s=this._r3Injector;!s.destroyed&&s.destroy(),this.destroyCbs.forEach(a=>a()),this.destroyCbs=null}onDestroy(s){this.destroyCbs.push(s)}}class dm extends Rw{constructor(s){super(),this.moduleType=s,null!==an(s)&&function Ow(i){const s=new Set;!function a(l){const c=an(l,!0),p=c.id;null!==p&&(function cv(i,s,a){if(s&&s!==a)throw new Error(`Duplicate module registered for ${i} - ${ce(s)} vs ${ce(s.name)}`)}(p,qo.get(p),l),qo.set(p,l));const _=g(c.imports);for(const E of _)s.has(E)||(s.add(E),a(E))}(i)}(s)}create(s){return new Nw(this.moduleType,s)}}function Pw(i,s,a){const l=nr()+i,c=we();return c[l]===Tt?jo(c,l,a?s.call(a):s()):function Pl(i,s){return i[s]}(c,l)}function dv(i,s,a,l){return function kf(i,s,a,l,c,p){const _=s+a;return ui(i,_,c)?jo(i,_+1,p?l.call(p,c):l(c)):function Pf(i,s){const a=i[s];return a===Tt?void 0:a}(i,_+1)}(we(),nr(),i,s,a,l)}function fm(i){return s=>{setTimeout(i,void 0,s)}}const _o=class AC extends f.x{constructor(s=!1){super(),this.__isAsync=s}emit(s){super.next(s)}subscribe(s,a,l){var c,p,_;let E=s,I=a||(()=>null),A=l;if(s&&"object"==typeof s){const N=s;E=null===(c=N.next)||void 0===c?void 0:c.bind(N),I=null===(p=N.error)||void 0===p?void 0:p.bind(N),A=null===(_=N.complete)||void 0===_?void 0:_.bind(N)}this.__isAsync&&(I=fm(I),E&&(E=fm(E)),A&&(A=fm(A)));const S=super.subscribe({next:E,error:I,complete:A});return s instanceof Z.w0&&s.add(S),S}};function Uw(){return this._results[ld()]()}class Md{constructor(s=!1){this._emitDistinctChangesOnly=s,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const a=ld(),l=Md.prototype;l[a]||(l[a]=Uw)}get changes(){return this._changes||(this._changes=new _o)}get(s){return this._results[s]}map(s){return this._results.map(s)}filter(s){return this._results.filter(s)}find(s){return this._results.find(s)}reduce(s,a){return this._results.reduce(s,a)}forEach(s){this._results.forEach(s)}some(s){return this._results.some(s)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(s,a){const l=this;l.dirty=!1;const c=Dr(s);(this._changesDetected=!function ou(i,s,a){if(i.length!==s.length)return!1;for(let l=0;l<i.length;l++){let c=i[l],p=s[l];if(a&&(c=a(c),p=a(p)),p!==c)return!1}return!0}(l._results,c,a))&&(l._results=c,l.length=c.length,l.last=c[this.length-1],l.first=c[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}Symbol;let xd=(()=>{class i{}return i.__NG_ELEMENT_ID__=SC,i})();const Oa=xd,Bw=class extends Oa{constructor(s,a,l){super(),this._declarationLView=s,this._declarationTContainer=a,this.elementRef=l}createEmbeddedView(s){const a=this._declarationTContainer.tViews,l=Cl(this._declarationLView,a,s,16,null,a.declTNode,null,null,null,null);l[17]=this._declarationLView[this._declarationTContainer.index];const p=this._declarationLView[19];return null!==p&&(l[19]=p.createEmbeddedView(a)),Kh(a,l,s),new Td(l)}};function SC(){return Rd(gn(),we())}function Rd(i,s){return 4&i.type?new Bw(s,i,Du(i,s)):null}let Cu=(()=>{class i{}return i.__NG_ELEMENT_ID__=jw,i})();function jw(){return Hf(gn(),we())}const mv=Cu,Bf=class extends mv{constructor(s,a,l){super(),this._lContainer=s,this._hostTNode=a,this._hostLView=l}get element(){return Du(this._hostTNode,this._hostLView)}get injector(){return new wi(this._hostTNode,this._hostLView)}get parentInjector(){const s=Vr(this._hostTNode,this._hostLView);if(Tc(s)){const a=mn(s,this._hostLView),l=Qt(s);return new wi(a[1].data[l+8],a)}return new wi(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(s){const a=yv(this._lContainer);return null!==a&&a[s]||null}get length(){return this._lContainer.length-10}createEmbeddedView(s,a,l){const c=s.createEmbeddedView(a||{});return this.insert(c,l),c}createComponent(s,a,l,c,p){const _=s&&!function Ur(i){return"function"==typeof i}(s);let E;if(_)E=a;else{const N=a||{};E=N.index,l=N.injector,c=N.projectableNodes,p=N.ngModuleRef}const I=_?s:new zl(Bt(s)),A=l||this.parentInjector;if(!p&&null==I.ngModule){const V=(_?A:this.parentInjector).get(Ad,null);V&&(p=V)}const S=I.create(A,c,void 0,p);return this.insert(S.hostView,E),S}insert(s,a){const l=s._lView,c=l[1];if(function za(i){return ei(i[3])}(l)){const S=this.indexOf(s);if(-1!==S)this.detach(S);else{const N=l[3],V=new Bf(N,N[6],N[3]);V.detach(V.indexOf(s))}}const p=this._adjustIndex(a),_=this._lContainer;!function Bh(i,s,a,l){const c=10+l,p=a.length;l>0&&(a[c-1][4]=s),l<p-10?(s[4]=a[c],ca(a,10+l,s)):(a.push(s),s[4]=null),s[3]=a;const _=s[17];null!==_&&a!==_&&function gb(i,s){const a=i[9];s[16]!==s[3][3][16]&&(i[2]=!0),null===a?i[9]=[s]:a.push(s)}(_,s);const E=s[19];null!==E&&E.insertView(i),s[2]|=128}(c,l,_,p);const E=Dy(p,_),I=l[11],A=Hh(I,_[7]);return null!==A&&function ug(i,s,a,l,c,p){l[0]=c,l[6]=s,co(i,l,a,1,c,p)}(c,_[6],I,l,A,E),s.attachToViewContainerRef(),ca(jf(_),p,s),s}move(s,a){return this.insert(s,a)}indexOf(s){const a=yv(this._lContainer);return null!==a?a.indexOf(s):-1}remove(s){const a=this._adjustIndex(s,-1),l=vy(this._lContainer,a);l&&(Ms(jf(this._lContainer),a),Ey(l[1],l))}detach(s){const a=this._adjustIndex(s,-1),l=vy(this._lContainer,a);return l&&null!=Ms(jf(this._lContainer),a)?new Td(l):null}_adjustIndex(s,a=0){return null==s?this.length+a:s}};function yv(i){return i[8]}function jf(i){return i[8]||(i[8]=[])}function Hf(i,s){let a;const l=s[i.index];if(ei(l))a=l;else{let c;if(8&i.type)c=sn(l);else{const p=s[11];c=p.createComment("");const _=hr(i,s);Ia(p,Hh(p,_),c,function yb(i,s){return ln(i)?i.nextSibling(s):s.nextSibling}(p,_),!1)}s[i.index]=a=rs(l,s,c,i),bg(s,a)}return new Bf(a,i,s)}class gm{constructor(s){this.queryList=s,this.matches=null}clone(){return new gm(this.queryList)}setDirty(){this.queryList.setDirty()}}class mm{constructor(s=[]){this.queries=s}createEmbeddedView(s){const a=s.queries;if(null!==a){const l=null!==s.contentQueries?s.contentQueries[0]:a.length,c=[];for(let p=0;p<l;p++){const _=a.getByIndex(p);c.push(this.queries[_.indexInDeclarationView].clone())}return new mm(c)}return null}insertView(s){this.dirtyQueriesWithMatches(s)}detachView(s){this.dirtyQueriesWithMatches(s)}dirtyQueriesWithMatches(s){for(let a=0;a<this.queries.length;a++)null!==Ww(s,a).matches&&this.queries[a].setDirty()}}class ym{constructor(s,a,l=null){this.predicate=s,this.flags=a,this.read=l}}class $f{constructor(s=[]){this.queries=s}elementStart(s,a){for(let l=0;l<this.queries.length;l++)this.queries[l].elementStart(s,a)}elementEnd(s){for(let a=0;a<this.queries.length;a++)this.queries[a].elementEnd(s)}embeddedTView(s){let a=null;for(let l=0;l<this.length;l++){const c=null!==a?a.length:0,p=this.getByIndex(l).embeddedTView(s,c);p&&(p.indexInDeclarationView=l,null!==a?a.push(p):a=[p])}return null!==a?new $f(a):null}template(s,a){for(let l=0;l<this.queries.length;l++)this.queries[l].template(s,a)}getByIndex(s){return this.queries[s]}get length(){return this.queries.length}track(s){this.queries.push(s)}}class _m{constructor(s,a=-1){this.metadata=s,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=a}elementStart(s,a){this.isApplyingToNode(a)&&this.matchTNode(s,a)}elementEnd(s){this._declarationNodeIndex===s.index&&(this._appliesToNextNode=!1)}template(s,a){this.elementStart(s,a)}embeddedTView(s,a){return this.isApplyingToNode(s)?(this.crossesNgTemplate=!0,this.addMatch(-s.index,a),new _m(this.metadata)):null}isApplyingToNode(s){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const a=this._declarationNodeIndex;let l=s.parent;for(;null!==l&&8&l.type&&l.index!==a;)l=l.parent;return a===(null!==l?l.index:-1)}return this._appliesToNextNode}matchTNode(s,a){const l=this.metadata.predicate;if(Array.isArray(l))for(let c=0;c<l.length;c++){const p=l[c];this.matchTNodeWithReadOption(s,a,vm(a,p)),this.matchTNodeWithReadOption(s,a,sl(a,s,p,!1,!1))}else l===xd?4&a.type&&this.matchTNodeWithReadOption(s,a,-1):this.matchTNodeWithReadOption(s,a,sl(a,s,l,!1,!1))}matchTNodeWithReadOption(s,a,l){if(null!==l){const c=this.metadata.read;if(null!==c)if(c===Mf||c===Cu||c===xd&&4&a.type)this.addMatch(a.index,-2);else{const p=sl(a,s,c,!1,!1);null!==p&&this.addMatch(a.index,p)}else this.addMatch(a.index,l)}}addMatch(s,a){null===this.matches?this.matches=[s,a]:this.matches.push(s,a)}}function vm(i,s){const a=i.localNames;if(null!==a)for(let l=0;l<a.length;l+=2)if(a[l]===s)return a[l+1];return null}function Gw(i,s,a,l){return-1===a?function $w(i,s){return 11&i.type?Du(i,s):4&i.type?Rd(i,s):null}(s,i):-2===a?function Kl(i,s,a){return a===Mf?Du(s,i):a===xd?Rd(s,i):a===Cu?Hf(s,i):void 0}(i,s,l):Yi(i,i[1],a,s)}function _v(i,s,a,l){const c=s[19].queries[l];if(null===c.matches){const p=i.data,_=a.matches,E=[];for(let I=0;I<_.length;I+=2){const A=_[I];E.push(A<0?null:Gw(s,p[A],_[I+1],a.metadata.read))}c.matches=E}return c.matches}function Em(i,s,a,l){const c=i.queries.getByIndex(a),p=c.matches;if(null!==p){const _=_v(i,s,c,a);for(let E=0;E<p.length;E+=2){const I=p[E];if(I>0)l.push(_[E/2]);else{const A=p[E+1],S=s[-I];for(let N=10;N<S.length;N++){const V=S[N];V[17]===V[3]&&Em(V[1],V,A,l)}if(null!==S[9]){const N=S[9];for(let V=0;V<N.length;V++){const W=N[V];Em(W[1],W,A,l)}}}}}return l}function vv(i){const s=we(),a=xt(),l=Zu();Ku(l+1);const c=Ww(a,l);if(i.dirty&&vs(s)===(2==(2&c.metadata.flags))){if(null===c.matches)i.reset([]);else{const p=c.crossesNgTemplate?Em(a,s,l,[]):_v(a,s,c,l);i.reset(p,lv),i.notifyOnChanges()}return!0}return!1}function Gf(i,s,a,l){const c=xt();if(c.firstCreatePass){const p=gn();(function Yl(i,s,a){null===i.queries&&(i.queries=new $f),i.queries.track(new _m(s,a))})(c,new ym(s,a,l),p.index),function xC(i,s){const a=i.contentQueries||(i.contentQueries=[]);s!==(a.length?a[a.length-1]:-1)&&a.push(i.queries.length-1,s)}(c,i),2==(2&a)&&(c.staticContentQueries=!0)}!function Ev(i,s,a){const l=new Md(4==(4&a));Y0(i,s,l,l.destroy),null===s[19]&&(s[19]=new mm),s[19].queries.push(new gm(l))}(c,we(),a)}function Pi(){return function zw(i,s){return i[19].queries[s].queryList}(we(),Zu())}function Ww(i,s){return i.queries.getByIndex(s)}function Ld(...i){}const Vd=new yn("Application Initializer");let Sv=(()=>{class i{constructor(a){this.appInits=a,this.resolve=Ld,this.reject=Ld,this.initialized=!1,this.done=!1,this.donePromise=new Promise((l,c)=>{this.resolve=l,this.reject=c})}runInitializers(){if(this.initialized)return;const a=[],l=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let c=0;c<this.appInits.length;c++){const p=this.appInits[c]();if(Bg(p))a.push(p);else if(jg(p)){const _=new Promise((E,I)=>{p.subscribe({complete:E,error:I})});a.push(_)}}Promise.all(a).then(()=>{l()}).catch(c=>{this.reject(c)}),0===a.length&&l(),this.initialized=!0}}return i.\u0275fac=function(a){return new(a||i)(nt(Vd,8))},i.\u0275prov=Kt({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();const zo=new yn("AppId",{providedIn:"root",factory:function Au(){return`${Im()}${Im()}${Im()}`}});function Im(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const Ue=new yn("Platform Initializer"),iI=new yn("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),Mv=new yn("appBootstrapListener");let Wo=(()=>{class i{log(a){console.log(a)}warn(a){console.warn(a)}}return i.\u0275fac=function(a){return new(a||i)},i.\u0275prov=Kt({token:i,factory:i.\u0275fac,providedIn:"platform"}),i})();const Zo=new yn("LocaleId",{providedIn:"root",factory:()=>jt(Zo,ot.Optional|ot.SkipSelf)||function Zf(){return"undefined"!=typeof $localize&&$localize.locale||yd}()}),sI=new yn("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});class xv{constructor(s,a){this.ngModuleFactory=s,this.componentFactories=a}}let Yf=(()=>{class i{compileModuleSync(a){return new dm(a)}compileModuleAsync(a){return Promise.resolve(this.compileModuleSync(a))}compileModuleAndAllComponentsSync(a){const l=this.compileModuleSync(a),p=g(an(a).declarations).reduce((_,E)=>{const I=Bt(E);return I&&_.push(new zl(I)),_},[]);return new xv(l,p)}compileModuleAndAllComponentsAsync(a){return Promise.resolve(this.compileModuleAndAllComponentsSync(a))}clearCache(){}clearCacheFor(a){}getModuleId(a){}}return i.\u0275fac=function(a){return new(a||i)},i.\u0275prov=Kt({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();const bm=(()=>Promise.resolve(0))();function Xl(i){"undefined"==typeof Zone?bm.then(()=>{i&&i.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",i)}class vo{constructor({enableLongStackTrace:s=!1,shouldCoalesceEventChangeDetection:a=!1,shouldCoalesceRunChangeDetection:l=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new _o(!1),this.onMicrotaskEmpty=new _o(!1),this.onStable=new _o(!1),this.onError=new _o(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();const c=this;c._nesting=0,c._outer=c._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(c._inner=c._inner.fork(new Zone.TaskTrackingZoneSpec)),s&&Zone.longStackTraceZoneSpec&&(c._inner=c._inner.fork(Zone.longStackTraceZoneSpec)),c.shouldCoalesceEventChangeDetection=!l&&a,c.shouldCoalesceRunChangeDetection=l,c.lastRequestAnimationFrameId=-1,c.nativeRequestAnimationFrame=function uI(){let i=Ft.requestAnimationFrame,s=Ft.cancelAnimationFrame;if("undefined"!=typeof Zone&&i&&s){const a=i[Zone.__symbol__("OriginalDelegate")];a&&(i=a);const l=s[Zone.__symbol__("OriginalDelegate")];l&&(s=l)}return{nativeRequestAnimationFrame:i,nativeCancelAnimationFrame:s}}().nativeRequestAnimationFrame,function hi(i){const s=()=>{!function lI(i){i.isCheckStableRunning||-1!==i.lastRequestAnimationFrameId||(i.lastRequestAnimationFrameId=i.nativeRequestAnimationFrame.call(Ft,()=>{i.fakeTopEventTask||(i.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{i.lastRequestAnimationFrameId=-1,Cm(i),i.isCheckStableRunning=!0,Dm(i),i.isCheckStableRunning=!1},void 0,()=>{},()=>{})),i.fakeTopEventTask.invoke()}),Cm(i))}(i)};i._inner=i._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(a,l,c,p,_,E)=>{try{return En(i),a.invokeTask(c,p,_,E)}finally{(i.shouldCoalesceEventChangeDetection&&"eventTask"===p.type||i.shouldCoalesceRunChangeDetection)&&s(),Qf(i)}},onInvoke:(a,l,c,p,_,E,I)=>{try{return En(i),a.invoke(c,p,_,E,I)}finally{i.shouldCoalesceRunChangeDetection&&s(),Qf(i)}},onHasTask:(a,l,c,p)=>{a.hasTask(c,p),l===c&&("microTask"==p.change?(i._hasPendingMicrotasks=p.microTask,Cm(i),Dm(i)):"macroTask"==p.change&&(i.hasPendingMacrotasks=p.macroTask))},onHandleError:(a,l,c,p)=>(a.handleError(c,p),i.runOutsideAngular(()=>i.onError.emit(p)),!1)})}(c)}static isInAngularZone(){return"undefined"!=typeof Zone&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!vo.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(vo.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(s,a,l){return this._inner.run(s,a,l)}runTask(s,a,l,c){const p=this._inner,_=p.scheduleEventTask("NgZoneEvent: "+c,s,LC,Ld,Ld);try{return p.runTask(_,a,l)}finally{p.cancelTask(_)}}runGuarded(s,a,l){return this._inner.runGuarded(s,a,l)}runOutsideAngular(s){return this._outer.run(s)}}const LC={};function Dm(i){if(0==i._nesting&&!i.hasPendingMicrotasks&&!i.isStable)try{i._nesting++,i.onMicrotaskEmpty.emit(null)}finally{if(i._nesting--,!i.hasPendingMicrotasks)try{i.runOutsideAngular(()=>i.onStable.emit(null))}finally{i.isStable=!0}}}function Cm(i){i.hasPendingMicrotasks=!!(i._hasPendingMicrotasks||(i.shouldCoalesceEventChangeDetection||i.shouldCoalesceRunChangeDetection)&&-1!==i.lastRequestAnimationFrameId)}function En(i){i._nesting++,i.isStable&&(i.isStable=!1,i.onUnstable.emit(null))}function Qf(i){i._nesting--,Dm(i)}class Rv{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new _o,this.onMicrotaskEmpty=new _o,this.onStable=new _o,this.onError=new _o}run(s,a,l){return s.apply(a,l)}runGuarded(s,a,l){return s.apply(a,l)}runOutsideAngular(s){return s()}runTask(s,a,l,c){return s.apply(a,l)}}let Su=(()=>{class i{constructor(a){this._ngZone=a,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),a.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{vo.assertNotInAngularZone(),Xl(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())Xl(()=>{for(;0!==this._callbacks.length;){let a=this._callbacks.pop();clearTimeout(a.timeoutId),a.doneCb(this._didWork)}this._didWork=!1});else{let a=this.getPendingTasks();this._callbacks=this._callbacks.filter(l=>!l.updateCb||!l.updateCb(a)||(clearTimeout(l.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(a=>({source:a.source,creationLocation:a.creationLocation,data:a.data})):[]}addCallback(a,l,c){let p=-1;l&&l>0&&(p=setTimeout(()=>{this._callbacks=this._callbacks.filter(_=>_.timeoutId!==p),a(this._didWork,this.getPendingTasks())},l)),this._callbacks.push({doneCb:a,timeoutId:p,updateCb:c})}whenStable(a,l,c){if(c&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(a,l,c),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(a,l,c){return[]}}return i.\u0275fac=function(a){return new(a||i)(nt(vo))},i.\u0275prov=Kt({token:i,factory:i.\u0275fac}),i})(),Tm=(()=>{class i{constructor(){this._applications=new Map,Ov.addToWindow(this)}registerApplication(a,l){this._applications.set(a,l)}unregisterApplication(a){this._applications.delete(a)}unregisterAllApplications(){this._applications.clear()}getTestability(a){return this._applications.get(a)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(a,l=!0){return Ov.findTestabilityInTree(this,a,l)}}return i.\u0275fac=function(a){return new(a||i)},i.\u0275prov=Kt({token:i,factory:i.\u0275fac,providedIn:"platform"}),i})();class Jf{addToWindow(s){}findTestabilityInTree(s,a,l){return null}}function cI(i){Ov=i}let Ov=new Jf,Si=null;const dI=new yn("AllowMultipleToken"),hI=new yn("PlatformOnDestroy");class Xf{constructor(s,a){this.name=s,this.token=a}}function ep(i,s,a=[]){const l=`Platform: ${s}`,c=new yn(l);return(p=[])=>{let _=Nv();if(!_||_.injector.get(dI,!1)){const E=[...a,...p,{provide:c,useValue:!0}];i?i(E):function Am(i){if(Si&&!Si.get(dI,!1))throw new xe(400,"");Si=i;const s=i.get(mI),a=i.get(Ue,null);a&&a.forEach(l=>l())}(function gI(i=[],s){return go.create({name:s,providers:[{provide:qy,useValue:"platform"},{provide:hI,useValue:()=>Si=null},...i]})}(E,l))}return function pI(i){const s=Nv();if(!s)throw new xe(401,"");return s}()}}function Nv(){var i;return null!==(i=null==Si?void 0:Si.get(mI))&&void 0!==i?i:null}let mI=(()=>{class i{constructor(a){this._injector=a,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(a,l){const E=function UC(i,s){let a;return a="noop"===i?new Rv:("zone.js"===i?void 0:i)||new vo({enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!!(null==s?void 0:s.ngZoneEventCoalescing),shouldCoalesceRunChangeDetection:!!(null==s?void 0:s.ngZoneRunCoalescing)}),a}(l?l.ngZone:void 0,{ngZoneEventCoalescing:l&&l.ngZoneEventCoalescing||!1,ngZoneRunCoalescing:l&&l.ngZoneRunCoalescing||!1}),I=[{provide:vo,useValue:E}];return E.run(()=>{const A=go.create({providers:I,parent:this.injector,name:a.moduleType.name}),S=a.create(A),N=S.injector.get(mr,null);if(!N)throw new xe(402,"");return E.runOutsideAngular(()=>{const V=E.onError.subscribe({next:W=>{N.handleError(W)}});S.onDestroy(()=>{kv(this._modules,S),V.unsubscribe()})}),function yI(i,s,a){try{const l=a();return Bg(l)?l.catch(c=>{throw s.runOutsideAngular(()=>i.handleError(c)),c}):l}catch(l){throw s.runOutsideAngular(()=>i.handleError(l)),l}}(N,E,()=>{const V=S.injector.get(Sv);return V.runInitializers(),V.donePromise.then(()=>(function YD(i){tn(i,"Expected localeId to be defined"),"string"==typeof i&&(B_=i.toLowerCase().replace(/_/g,"-"))}(S.injector.get(Zo,yd)||yd),this._moduleDoBootstrap(S),S))})})}bootstrapModule(a,l=[]){const c=_I({},l);return function fI(i,s,a){const l=new dm(a);return Promise.resolve(l)}(0,0,a).then(p=>this.bootstrapModuleFactory(p,c))}_moduleDoBootstrap(a){const l=a.injector.get(Pv);if(a._bootstrapComponents.length>0)a._bootstrapComponents.forEach(c=>l.bootstrap(c));else{if(!a.instance.ngDoBootstrap)throw new xe(403,"");a.instance.ngDoBootstrap(l)}this._modules.push(a)}onDestroy(a){this._destroyListeners.push(a)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new xe(404,"");this._modules.slice().forEach(l=>l.destroy()),this._destroyListeners.forEach(l=>l());const a=this._injector.get(hI,null);null==a||a(),this._destroyed=!0}get destroyed(){return this._destroyed}}return i.\u0275fac=function(a){return new(a||i)(nt(go))},i.\u0275prov=Kt({token:i,factory:i.\u0275fac,providedIn:"platform"}),i})();function _I(i,s){return Array.isArray(s)?s.reduce(_I,i):Object.assign(Object.assign({},i),s)}let Pv=(()=>{class i{constructor(a,l,c,p){this._zone=a,this._injector=l,this._exceptionHandler=c,this._initStatus=p,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const _=new P.y(I=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{I.next(this._stable),I.complete()})}),E=new P.y(I=>{let A;this._zone.runOutsideAngular(()=>{A=this._zone.onStable.subscribe(()=>{vo.assertNotInAngularZone(),Xl(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,I.next(!0))})})});const S=this._zone.onUnstable.subscribe(()=>{vo.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{I.next(!1)}))});return()=>{A.unsubscribe(),S.unsubscribe()}});this.isStable=(0,oe.T)(_,E.pipe((0,J.B)()))}bootstrap(a,l){if(!this._initStatus.done)throw new xe(405,"");let c;c=a instanceof uv?a:this._injector.get(bu).resolveComponentFactory(a),this.componentTypes.push(c.componentType);const p=function VC(i){return i.isBoundToModule}(c)?void 0:this._injector.get(Ad),E=c.create(go.NULL,[],l||c.selector,p),I=E.location.nativeElement,A=E.injector.get(Su,null),S=A&&E.injector.get(Tm);return A&&S&&S.registerApplication(I,A),E.onDestroy(()=>{this.detachView(E.hostView),kv(this.components,E),S&&S.unregisterApplication(I)}),this._loadComponent(E),E}tick(){if(this._runningTick)throw new xe(101,"");try{this._runningTick=!0;for(let a of this._views)a.detectChanges()}catch(a){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(a))}finally{this._runningTick=!1}}attachView(a){const l=a;this._views.push(l),l.attachToAppRef(this)}detachView(a){const l=a;kv(this._views,l),l.detachFromAppRef()}_loadComponent(a){this.attachView(a.hostView),this.tick(),this.components.push(a),this._injector.get(Mv,[]).concat(this._bootstrapListeners).forEach(c=>c(a))}ngOnDestroy(){this._views.slice().forEach(a=>a.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}get viewCount(){return this._views.length}}return i.\u0275fac=function(a){return new(a||i)(nt(vo),nt(go),nt(mr),nt(Sv))},i.\u0275prov=Kt({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();function kv(i,s){const a=i.indexOf(s);a>-1&&i.splice(a,1)}let ec=!0,EI=!1;function wI(){return EI=!0,ec}function II(){if(EI)throw new Error("Cannot enable prod mode after platform setup.");ec=!1}let Sm=(()=>{class i{}return i.__NG_ELEMENT_ID__=Mm,i})();function Mm(i){return function Fv(i,s,a){if(ps(i)&&!a){const l=fr(i.index,s);return new Td(l,l)}return 47&i.type?new Td(s[16],s):null}(gn(),we(),16==(16&i))}class Ou{constructor(){}supports(s){return sf(s)}create(s){return new Gd(s)}}const AI=(i,s)=>s;class Gd{constructor(s){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=s||AI}forEachItem(s){let a;for(a=this._itHead;null!==a;a=a._next)s(a)}forEachOperation(s){let a=this._itHead,l=this._removalsHead,c=0,p=null;for(;a||l;){const _=!l||a&&a.currentIndex<xI(l,c,p)?a:l,E=xI(_,c,p),I=_.currentIndex;if(_===l)c--,l=l._nextRemoved;else if(a=a._next,null==_.previousIndex)c++;else{p||(p=[]);const A=E-c,S=I-c;if(A!=S){for(let V=0;V<A;V++){const W=V<p.length?p[V]:p[V]=0,ge=W+V;S<=ge&&ge<A&&(p[V]=W+1)}p[_.previousIndex]=S-A}}E!==I&&s(_,E,I)}}forEachPreviousItem(s){let a;for(a=this._previousItHead;null!==a;a=a._nextPrevious)s(a)}forEachAddedItem(s){let a;for(a=this._additionsHead;null!==a;a=a._nextAdded)s(a)}forEachMovedItem(s){let a;for(a=this._movesHead;null!==a;a=a._nextMoved)s(a)}forEachRemovedItem(s){let a;for(a=this._removalsHead;null!==a;a=a._nextRemoved)s(a)}forEachIdentityChange(s){let a;for(a=this._identityChangesHead;null!==a;a=a._nextIdentityChange)s(a)}diff(s){if(null==s&&(s=[]),!sf(s))throw new xe(900,"");return this.check(s)?this:null}onDestroy(){}check(s){this._reset();let c,p,_,a=this._itHead,l=!1;if(Array.isArray(s)){this.length=s.length;for(let E=0;E<this.length;E++)p=s[E],_=this._trackByFn(E,p),null!==a&&Object.is(a.trackById,_)?(l&&(a=this._verifyReinsertion(a,p,_,E)),Object.is(a.item,p)||this._addIdentityChange(a,p)):(a=this._mismatch(a,p,_,E),l=!0),a=a._next}else c=0,function cD(i,s){if(Array.isArray(i))for(let a=0;a<i.length;a++)s(i[a]);else{const a=i[ld()]();let l;for(;!(l=a.next()).done;)s(l.value)}}(s,E=>{_=this._trackByFn(c,E),null!==a&&Object.is(a.trackById,_)?(l&&(a=this._verifyReinsertion(a,E,_,c)),Object.is(a.item,E)||this._addIdentityChange(a,E)):(a=this._mismatch(a,E,_,c),l=!0),a=a._next,c++}),this.length=c;return this._truncate(a),this.collection=s,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let s;for(s=this._previousItHead=this._itHead;null!==s;s=s._next)s._nextPrevious=s._next;for(s=this._additionsHead;null!==s;s=s._nextAdded)s.previousIndex=s.currentIndex;for(this._additionsHead=this._additionsTail=null,s=this._movesHead;null!==s;s=s._nextMoved)s.previousIndex=s.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(s,a,l,c){let p;return null===s?p=this._itTail:(p=s._prev,this._remove(s)),null!==(s=null===this._unlinkedRecords?null:this._unlinkedRecords.get(l,null))?(Object.is(s.item,a)||this._addIdentityChange(s,a),this._reinsertAfter(s,p,c)):null!==(s=null===this._linkedRecords?null:this._linkedRecords.get(l,c))?(Object.is(s.item,a)||this._addIdentityChange(s,a),this._moveAfter(s,p,c)):s=this._addAfter(new SI(a,l),p,c),s}_verifyReinsertion(s,a,l,c){let p=null===this._unlinkedRecords?null:this._unlinkedRecords.get(l,null);return null!==p?s=this._reinsertAfter(p,s._prev,c):s.currentIndex!=c&&(s.currentIndex=c,this._addToMoves(s,c)),s}_truncate(s){for(;null!==s;){const a=s._next;this._addToRemovals(this._unlink(s)),s=a}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(s,a,l){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(s);const c=s._prevRemoved,p=s._nextRemoved;return null===c?this._removalsHead=p:c._nextRemoved=p,null===p?this._removalsTail=c:p._prevRemoved=c,this._insertAfter(s,a,l),this._addToMoves(s,l),s}_moveAfter(s,a,l){return this._unlink(s),this._insertAfter(s,a,l),this._addToMoves(s,l),s}_addAfter(s,a,l){return this._insertAfter(s,a,l),this._additionsTail=null===this._additionsTail?this._additionsHead=s:this._additionsTail._nextAdded=s,s}_insertAfter(s,a,l){const c=null===a?this._itHead:a._next;return s._next=c,s._prev=a,null===c?this._itTail=s:c._prev=s,null===a?this._itHead=s:a._next=s,null===this._linkedRecords&&(this._linkedRecords=new qd),this._linkedRecords.put(s),s.currentIndex=l,s}_remove(s){return this._addToRemovals(this._unlink(s))}_unlink(s){null!==this._linkedRecords&&this._linkedRecords.remove(s);const a=s._prev,l=s._next;return null===a?this._itHead=l:a._next=l,null===l?this._itTail=a:l._prev=a,s}_addToMoves(s,a){return s.previousIndex===a||(this._movesTail=null===this._movesTail?this._movesHead=s:this._movesTail._nextMoved=s),s}_addToRemovals(s){return null===this._unlinkedRecords&&(this._unlinkedRecords=new qd),this._unlinkedRecords.put(s),s.currentIndex=null,s._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=s,s._prevRemoved=null):(s._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=s),s}_addIdentityChange(s,a){return s.item=a,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=s:this._identityChangesTail._nextIdentityChange=s,s}}class SI{constructor(s,a){this.item=s,this.trackById=a,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class MI{constructor(){this._head=null,this._tail=null}add(s){null===this._head?(this._head=this._tail=s,s._nextDup=null,s._prevDup=null):(this._tail._nextDup=s,s._prevDup=this._tail,s._nextDup=null,this._tail=s)}get(s,a){let l;for(l=this._head;null!==l;l=l._nextDup)if((null===a||a<=l.currentIndex)&&Object.is(l.trackById,s))return l;return null}remove(s){const a=s._prevDup,l=s._nextDup;return null===a?this._head=l:a._nextDup=l,null===l?this._tail=a:l._prevDup=a,null===this._head}}class qd{constructor(){this.map=new Map}put(s){const a=s.trackById;let l=this.map.get(a);l||(l=new MI,this.map.set(a,l)),l.add(s)}get(s,a){const c=this.map.get(s);return c?c.get(s,a):null}remove(s){const a=s.trackById;return this.map.get(a).remove(s)&&this.map.delete(a),s}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function xI(i,s,a){const l=i.previousIndex;if(null===l)return l;let c=0;return a&&l<a.length&&(c=a[l]),l+s+c}class RI{constructor(){}supports(s){return s instanceof Map||n_(s)}create(){return new or}}class or{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(s){let a;for(a=this._mapHead;null!==a;a=a._next)s(a)}forEachPreviousItem(s){let a;for(a=this._previousMapHead;null!==a;a=a._nextPrevious)s(a)}forEachChangedItem(s){let a;for(a=this._changesHead;null!==a;a=a._nextChanged)s(a)}forEachAddedItem(s){let a;for(a=this._additionsHead;null!==a;a=a._nextAdded)s(a)}forEachRemovedItem(s){let a;for(a=this._removalsHead;null!==a;a=a._nextRemoved)s(a)}diff(s){if(s){if(!(s instanceof Map||n_(s)))throw new xe(900,"")}else s=new Map;return this.check(s)?this:null}onDestroy(){}check(s){this._reset();let a=this._mapHead;if(this._appendAfter=null,this._forEach(s,(l,c)=>{if(a&&a.key===c)this._maybeAddToChanges(a,l),this._appendAfter=a,a=a._next;else{const p=this._getOrCreateRecordForKey(c,l);a=this._insertBeforeOrAppend(a,p)}}),a){a._prev&&(a._prev._next=null),this._removalsHead=a;for(let l=a;null!==l;l=l._nextRemoved)l===this._mapHead&&(this._mapHead=null),this._records.delete(l.key),l._nextRemoved=l._next,l.previousValue=l.currentValue,l.currentValue=null,l._prev=null,l._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(s,a){if(s){const l=s._prev;return a._next=s,a._prev=l,s._prev=a,l&&(l._next=a),s===this._mapHead&&(this._mapHead=a),this._appendAfter=s,s}return this._appendAfter?(this._appendAfter._next=a,a._prev=this._appendAfter):this._mapHead=a,this._appendAfter=a,null}_getOrCreateRecordForKey(s,a){if(this._records.has(s)){const c=this._records.get(s);this._maybeAddToChanges(c,a);const p=c._prev,_=c._next;return p&&(p._next=_),_&&(_._prev=p),c._next=null,c._prev=null,c}const l=new Nm(s);return this._records.set(s,l),l.currentValue=a,this._addToAdditions(l),l}_reset(){if(this.isDirty){let s;for(this._previousMapHead=this._mapHead,s=this._previousMapHead;null!==s;s=s._next)s._nextPrevious=s._next;for(s=this._changesHead;null!==s;s=s._nextChanged)s.previousValue=s.currentValue;for(s=this._additionsHead;null!=s;s=s._nextAdded)s.previousValue=s.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(s,a){Object.is(a,s.currentValue)||(s.previousValue=s.currentValue,s.currentValue=a,this._addToChanges(s))}_addToAdditions(s){null===this._additionsHead?this._additionsHead=this._additionsTail=s:(this._additionsTail._nextAdded=s,this._additionsTail=s)}_addToChanges(s){null===this._changesHead?this._changesHead=this._changesTail=s:(this._changesTail._nextChanged=s,this._changesTail=s)}_forEach(s,a){s instanceof Map?s.forEach(a):Object.keys(s).forEach(l=>a(s[l],l))}}class Nm{constructor(s){this.key=s,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function sp(){return new jv([new Ou])}let jv=(()=>{class i{constructor(a){this.factories=a}static create(a,l){if(null!=l){const c=l.factories.slice();a=a.concat(c)}return new i(a)}static extend(a){return{provide:i,useFactory:l=>i.create(a,l||sp()),deps:[[i,new bi,new Tr]]}}find(a){const l=this.factories.find(c=>c.supports(a));if(null!=l)return l;throw new xe(901,"")}}return i.\u0275prov=Kt({token:i,providedIn:"root",factory:sp}),i})();function NI(){return new Pm([new RI])}let Pm=(()=>{class i{constructor(a){this.factories=a}static create(a,l){if(l){const c=l.factories.slice();a=a.concat(c)}return new i(a)}static extend(a){return{provide:i,useFactory:l=>i.create(a,l||NI()),deps:[[i,new bi,new Tr]]}}find(a){const l=this.factories.find(p=>p.supports(a));if(l)return l;throw new xe(901,"")}}return i.\u0275prov=Kt({token:i,providedIn:"root",factory:NI}),i})();const kI=ep(null,"core",[]);let FI=(()=>{class i{constructor(a){}}return i.\u0275fac=function(a){return new(a||i)(nt(Pv))},i.\u0275mod=K({type:i}),i.\u0275inj=zt({}),i})()},3942:(it,Ce,k)=>{k.d(Ce,{Z:()=>xe});var f=k(2090),Z=k(4859),P=k(9681),oe=k(1877);class J{constructor(de,ve){this._delegate=de,this.firebase=ve,(0,P._addComponent)(de,new Z.wA("app-compat",()=>this,"PUBLIC")),this.container=de.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(de){this._delegate.automaticDataCollectionEnabled=de}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(de=>{this._delegate.checkDestroyed(),de()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,P.deleteApp)(this._delegate)))}_getService(de,ve=P._DEFAULT_ENTRY_NAME){var Ye;this._delegate.checkDestroyed();const ze=this._delegate.container.getProvider(de);return!ze.isInitialized()&&"EXPLICIT"===(null===(Ye=ze.getComponent())||void 0===Ye?void 0:Ye.instantiationMode)&&ze.initialize(),ze.getImmediate({identifier:ve})}_removeServiceInstance(de,ve=P._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(de).clearInstance(ve)}_addComponent(de){(0,P._addComponent)(this._delegate,de)}_addOrOverwriteComponent(de){(0,P._addOrOverwriteComponent)(this._delegate,de)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const re=new f.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),B=function ue(){const ke=function ce(ke){const de={},ve={__esModule:!0,initializeApp:function be(Be,ne={}){const qe=P.initializeApp(Be,ne);if((0,f.r3)(de,qe.name))return de[qe.name];const Q=new ke(qe,ve);return de[qe.name]=Q,Q},app:ze,registerVersion:P.registerVersion,setLogLevel:P.setLogLevel,onLog:P.onLog,apps:null,SDK_VERSION:P.SDK_VERSION,INTERNAL:{registerComponent:function _e(Be){const ne=Be.name,qe=ne.replace("-compat","");if(P._registerComponent(Be)&&"PUBLIC"===Be.type){const Q=(se=ze())=>{if("function"!=typeof se[qe])throw re.create("invalid-app-argument",{appName:ne});return se[qe]()};void 0!==Be.serviceProps&&(0,f.ZB)(Q,Be.serviceProps),ve[qe]=Q,ke.prototype[qe]=function(...se){return this._getService.bind(this,ne).apply(this,Be.multipleInstances?se:[])}}return"PUBLIC"===Be.type?ve[qe]:null},removeApp:function Ye(Be){delete de[Be]},useAsService:function je(Be,ne){return"serverAuth"===ne?null:ne},modularAPIs:P}};function ze(Be){if(!(0,f.r3)(de,Be=Be||P._DEFAULT_ENTRY_NAME))throw re.create("no-app",{appName:Be});return de[Be]}return ve.default=ve,Object.defineProperty(ve,"apps",{get:function me(){return Object.keys(de).map(Be=>de[Be])}}),ze.App=ke,ve}(J);return ke.INTERNAL=Object.assign(Object.assign({},ke.INTERNAL),{createFirebaseNamespace:ue,extendNamespace:function de(ve){(0,f.ZB)(ke,ve)},createSubscribe:f.ne,ErrorFactory:f.LL,deepExtend:f.ZB}),ke}(),j=new oe.Yd("@firebase/app-compat");if((0,f.jU)()&&void 0!==self.firebase){j.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const ke=self.firebase.SDK_VERSION;ke&&ke.indexOf("LITE")>=0&&j.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const xe=B;!function Te(ke){(0,P.registerVersion)("@firebase/app-compat","0.1.23",ke)}()},9681:(it,Ce,k)=>{k.r(Ce),k.d(Ce,{FirebaseError:()=>oe.ZR,SDK_VERSION:()=>wr,_DEFAULT_ENTRY_NAME:()=>$t,_addComponent:()=>Gn,_addOrOverwriteComponent:()=>wn,_apps:()=>He,_clearComponents:()=>Vt,_components:()=>Lt,_getProvider:()=>mi,_registerComponent:()=>Kt,_removeServiceInstance:()=>zt,deleteApp:()=>Bi,getApp:()=>Ir,getApps:()=>Ui,initializeApp:()=>Mi,onLog:()=>qn,registerVersion:()=>Or,setLogLevel:()=>Fn});var f=k(5861),Z=k(4859),P=k(1877),oe=k(2090);class J{constructor(De){this.container=De}getPlatformInfoString(){return this.container.getProviders().map(Ke=>{if(function fe(We){const De=We.getComponent();return"VERSION"===(null==De?void 0:De.type)}(Ke)){const ut=Ke.getImmediate();return`${ut.library}/${ut.version}`}return null}).filter(Ke=>Ke).join(" ")}}const re="@firebase/app",ue=new P.Yd("@firebase/app"),$t="[DEFAULT]",tn={[re]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},He=new Map,Lt=new Map;function Gn(We,De){try{We.container.addComponent(De)}catch(Ke){ue.debug(`Component ${De.name} failed to register with FirebaseApp ${We.name}`,Ke)}}function wn(We,De){We.container.addOrOverwriteComponent(De)}function Kt(We){const De=We.name;if(Lt.has(De))return ue.debug(`There were multiple attempts to register component ${De}.`),!1;Lt.set(De,We);for(const Ke of He.values())Gn(Ke,We);return!0}function mi(We,De){const Ke=We.container.getProvider("heartbeat").getImmediate({optional:!0});return Ke&&Ke.triggerHeartbeat(),We.container.getProvider(De)}function zt(We,De,Ke=$t){mi(We,De).clearInstance(Ke)}function Vt(){Lt.clear()}const Qr=new oe.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}."});class ls{constructor(De,Ke,ut){this._isDeleted=!1,this._options=Object.assign({},De),this._config=Object.assign({},Ke),this._name=Ke.name,this._automaticDataCollectionEnabled=Ke.automaticDataCollectionEnabled,this._container=ut,this.container.addComponent(new Z.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(De){this.checkDestroyed(),this._automaticDataCollectionEnabled=De}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(De){this._isDeleted=De}checkDestroyed(){if(this.isDeleted)throw Qr.create("app-deleted",{appName:this._name})}}const wr="9.7.0";function Mi(We,De={}){"object"!=typeof De&&(De={name:De});const Ke=Object.assign({name:$t,automaticDataCollectionEnabled:!1},De),ut=Ke.name;if("string"!=typeof ut||!ut)throw Qr.create("bad-app-name",{appName:String(ut)});const Nt=He.get(ut);if(Nt){if((0,oe.vZ)(We,Nt.options)&&(0,oe.vZ)(Ke,Nt.config))return Nt;throw Qr.create("duplicate-app",{appName:ut})}const Mt=new Z.H0(ut);for(const L of Lt.values())Mt.addComponent(L);const U=new ls(We,Ke,Mt);return He.set(ut,U),U}function Ir(We=$t){const De=He.get(We);if(!De)throw Qr.create("no-app",{appName:We});return De}function Ui(){return Array.from(He.values())}function Bi(We){return ot.apply(this,arguments)}function ot(){return(ot=(0,f.Z)(function*(We){const De=We.name;He.has(De)&&(He.delete(De),yield Promise.all(We.container.getProviders().map(Ke=>Ke.delete())),We.isDeleted=!0)})).apply(this,arguments)}function Or(We,De,Ke){var ut;let Nt=null!==(ut=tn[We])&&void 0!==ut?ut:We;Ke&&(Nt+=`-${Ke}`);const Mt=Nt.match(/\s|\//),U=De.match(/\s|\//);if(Mt||U){const L=[`Unable to register library "${Nt}" with version "${De}":`];return Mt&&L.push(`library name "${Nt}" contains illegal characters (whitespace or "/")`),Mt&&U&&L.push("and"),U&&L.push(`version name "${De}" contains illegal characters (whitespace or "/")`),void ue.warn(L.join(" "))}Kt(new Z.wA(`${Nt}-version`,()=>({library:Nt,version:De}),"VERSION"))}function qn(We,De){if(null!==We&&"function"!=typeof We)throw Qr.create("invalid-log-argument");(0,P.Am)(We,De)}function Fn(We){(0,P.Ub)(We)}const dn="firebase-heartbeat-store";let zn=null;function cs(){return zn||(zn=(0,oe.X3)("firebase-heartbeat-database",1,(We,De)=>{0===De&&We.createObjectStore(dn)}).catch(We=>{throw Qr.create("storage-open",{originalErrorMessage:We.message})})),zn}function Ut(){return(Ut=(0,f.Z)(function*(We){try{return(yield cs()).transaction(dn).objectStore(dn).get(Jn(We))}catch(De){throw Qr.create("storage-get",{originalErrorMessage:De.message})}})).apply(this,arguments)}function rt(We,De){return mt.apply(this,arguments)}function mt(){return(mt=(0,f.Z)(function*(We,De){try{const ut=(yield cs()).transaction(dn,"readwrite");return yield ut.objectStore(dn).put(De,Jn(We)),ut.complete}catch(Ke){throw Qr.create("storage-set",{originalErrorMessage:Ke.message})}})).apply(this,arguments)}function Jn(We){return`${We.name}!${We.options.appId}`}class Hs{constructor(De){this.container=De,this._heartbeatsCache=null;const Ke=this.container.getProvider("app").getImmediate();this._storage=new at(Ke),this._heartbeatsCachePromise=this._storage.read().then(ut=>(this._heartbeatsCache=ut,ut))}triggerHeartbeat(){var De=this;return(0,f.Z)(function*(){const ut=De.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),Nt=lr();if(null===De._heartbeatsCache&&(De._heartbeatsCache=yield De._heartbeatsCachePromise),De._heartbeatsCache.lastSentHeartbeatDate!==Nt&&!De._heartbeatsCache.heartbeats.some(Mt=>Mt.date===Nt))return De._heartbeatsCache.heartbeats.push({date:Nt,agent:ut}),De._heartbeatsCache.heartbeats=De._heartbeatsCache.heartbeats.filter(Mt=>{const U=new Date(Mt.date).valueOf();return Date.now()-U<=2592e6}),De._storage.overwrite(De._heartbeatsCache)})()}getHeartbeatsHeader(){var De=this;return(0,f.Z)(function*(){if(null===De._heartbeatsCache&&(yield De._heartbeatsCachePromise),null===De._heartbeatsCache||0===De._heartbeatsCache.heartbeats.length)return"";const Ke=lr(),{heartbeatsToSend:ut,unsentEntries:Nt}=function Xn(We,De=1024){const Ke=[];let ut=We.slice();for(const Nt of We){const Mt=Ke.find(U=>U.agent===Nt.agent);if(Mt){if(Mt.dates.push(Nt.date),cr(Ke)>De){Mt.dates.pop();break}}else if(Ke.push({agent:Nt.agent,dates:[Nt.date]}),cr(Ke)>De){Ke.pop();break}ut=ut.slice(1)}return{heartbeatsToSend:Ke,unsentEntries:ut}}(De._heartbeatsCache.heartbeats),Mt=(0,oe.L)(JSON.stringify({version:2,heartbeats:ut}));return De._heartbeatsCache.lastSentHeartbeatDate=Ke,Nt.length>0?(De._heartbeatsCache.heartbeats=Nt,yield De._storage.overwrite(De._heartbeatsCache)):(De._heartbeatsCache.heartbeats=[],De._storage.overwrite(De._heartbeatsCache)),Mt})()}}function lr(){return(new Date).toISOString().substring(0,10)}class at{constructor(De){this.app=De,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,f.Z)(function*(){return!!(0,oe.hl)()&&(0,oe.eu)().then(()=>!0).catch(()=>!1)})()}read(){var De=this;return(0,f.Z)(function*(){return(yield De._canUseIndexedDBPromise)&&(yield function Yo(We){return Ut.apply(this,arguments)}(De.app))||{heartbeats:[]}})()}overwrite(De){var Ke=this;return(0,f.Z)(function*(){var ut;if(yield Ke._canUseIndexedDBPromise){const Mt=yield Ke.read();return rt(Ke.app,{lastSentHeartbeatDate:null!==(ut=De.lastSentHeartbeatDate)&&void 0!==ut?ut:Mt.lastSentHeartbeatDate,heartbeats:De.heartbeats})}})()}add(De){var Ke=this;return(0,f.Z)(function*(){var ut;if(yield Ke._canUseIndexedDBPromise){const Mt=yield Ke.read();return rt(Ke.app,{lastSentHeartbeatDate:null!==(ut=De.lastSentHeartbeatDate)&&void 0!==ut?ut:Mt.lastSentHeartbeatDate,heartbeats:[...Mt.heartbeats,...De.heartbeats]})}})()}}function cr(We){return(0,oe.L)(JSON.stringify({version:2,heartbeats:We})).length}!function Ot(We){Kt(new Z.wA("platform-logger",De=>new J(De),"PRIVATE")),Kt(new Z.wA("heartbeat",De=>new Hs(De),"PRIVATE")),Or(re,"0.7.22",We),Or(re,"0.7.22","esm2017"),Or("fire-js","")}("")},4859:(it,Ce,k)=>{k.d(Ce,{H0:()=>ce,wA:()=>P});var f=k(5861),Z=k(2090);class P{constructor(B,j,Y){this.name=B,this.instanceFactory=j,this.type=Y,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(B){return this.instantiationMode=B,this}setMultipleInstances(B){return this.multipleInstances=B,this}setServiceProps(B){return this.serviceProps=B,this}setInstanceCreatedCallback(B){return this.onInstanceCreated=B,this}}const oe="[DEFAULT]";class J{constructor(B,j){this.name=B,this.container=j,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(B){const j=this.normalizeInstanceIdentifier(B);if(!this.instancesDeferred.has(j)){const Y=new Z.BH;if(this.instancesDeferred.set(j,Y),this.isInitialized(j)||this.shouldAutoInitialize())try{const $e=this.getOrInitializeService({instanceIdentifier:j});$e&&Y.resolve($e)}catch($e){}}return this.instancesDeferred.get(j).promise}getImmediate(B){var j;const Y=this.normalizeInstanceIdentifier(null==B?void 0:B.identifier),$e=null!==(j=null==B?void 0:B.optional)&&void 0!==j&&j;if(!this.isInitialized(Y)&&!this.shouldAutoInitialize()){if($e)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:Y})}catch(Te){if($e)return null;throw Te}}getComponent(){return this.component}setComponent(B){if(B.name!==this.name)throw Error(`Mismatching Component ${B.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=B,this.shouldAutoInitialize()){if(function re(ue){return"EAGER"===ue.instantiationMode}(B))try{this.getOrInitializeService({instanceIdentifier:oe})}catch(j){}for(const[j,Y]of this.instancesDeferred.entries()){const $e=this.normalizeInstanceIdentifier(j);try{const Te=this.getOrInitializeService({instanceIdentifier:$e});Y.resolve(Te)}catch(Te){}}}}clearInstance(B=oe){this.instancesDeferred.delete(B),this.instancesOptions.delete(B),this.instances.delete(B)}delete(){var B=this;return(0,f.Z)(function*(){const j=Array.from(B.instances.values());yield Promise.all([...j.filter(Y=>"INTERNAL"in Y).map(Y=>Y.INTERNAL.delete()),...j.filter(Y=>"_delete"in Y).map(Y=>Y._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(B=oe){return this.instances.has(B)}getOptions(B=oe){return this.instancesOptions.get(B)||{}}initialize(B={}){const{options:j={}}=B,Y=this.normalizeInstanceIdentifier(B.instanceIdentifier);if(this.isInitialized(Y))throw Error(`${this.name}(${Y}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const $e=this.getOrInitializeService({instanceIdentifier:Y,options:j});for(const[Te,xe]of this.instancesDeferred.entries())Y===this.normalizeInstanceIdentifier(Te)&&xe.resolve($e);return $e}onInit(B,j){var Y;const $e=this.normalizeInstanceIdentifier(j),Te=null!==(Y=this.onInitCallbacks.get($e))&&void 0!==Y?Y:new Set;Te.add(B),this.onInitCallbacks.set($e,Te);const xe=this.instances.get($e);return xe&&B(xe,$e),()=>{Te.delete(B)}}invokeOnInitCallbacks(B,j){const Y=this.onInitCallbacks.get(j);if(Y)for(const $e of Y)try{$e(B,j)}catch(Te){}}getOrInitializeService({instanceIdentifier:B,options:j={}}){let Y=this.instances.get(B);if(!Y&&this.component&&(Y=this.component.instanceFactory(this.container,{instanceIdentifier:(ue=B,ue===oe?void 0:ue),options:j}),this.instances.set(B,Y),this.instancesOptions.set(B,j),this.invokeOnInitCallbacks(Y,B),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,B,Y)}catch($e){}var ue;return Y||null}normalizeInstanceIdentifier(B=oe){return this.component?this.component.multipleInstances?B:oe:B}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class ce{constructor(B){this.name=B,this.providers=new Map}addComponent(B){const j=this.getProvider(B.name);if(j.isComponentSet())throw new Error(`Component ${B.name} has already been registered with ${this.name}`);j.setComponent(B)}addOrOverwriteComponent(B){this.getProvider(B.name).isComponentSet()&&this.providers.delete(B.name),this.addComponent(B)}getProvider(B){if(this.providers.has(B))return this.providers.get(B);const j=new J(B,this);return this.providers.set(B,j),j}getProviders(){return Array.from(this.providers.values())}}},1877:(it,Ce,k)=>{k.d(Ce,{Am:()=>ue,Ub:()=>ce,Yd:()=>re,in:()=>Z});const f=[];var Z=(()=>{return(B=Z||(Z={}))[B.DEBUG=0]="DEBUG",B[B.VERBOSE=1]="VERBOSE",B[B.INFO=2]="INFO",B[B.WARN=3]="WARN",B[B.ERROR=4]="ERROR",B[B.SILENT=5]="SILENT",Z;var B})();const P={debug:Z.DEBUG,verbose:Z.VERBOSE,info:Z.INFO,warn:Z.WARN,error:Z.ERROR,silent:Z.SILENT},oe=Z.INFO,J={[Z.DEBUG]:"log",[Z.VERBOSE]:"log",[Z.INFO]:"info",[Z.WARN]:"warn",[Z.ERROR]:"error"},fe=(B,j,...Y)=>{if(j<B.logLevel)return;const $e=(new Date).toISOString(),Te=J[j];if(!Te)throw new Error(`Attempted to log a message with an invalid logType (value: ${j})`);console[Te](`[${$e}]  ${B.name}:`,...Y)};class re{constructor(j){this.name=j,this._logLevel=oe,this._logHandler=fe,this._userLogHandler=null,f.push(this)}get logLevel(){return this._logLevel}set logLevel(j){if(!(j in Z))throw new TypeError(`Invalid value "${j}" assigned to \`logLevel\``);this._logLevel=j}setLogLevel(j){this._logLevel="string"==typeof j?P[j]:j}get logHandler(){return this._logHandler}set logHandler(j){if("function"!=typeof j)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=j}get userLogHandler(){return this._userLogHandler}set userLogHandler(j){this._userLogHandler=j}debug(...j){this._userLogHandler&&this._userLogHandler(this,Z.DEBUG,...j),this._logHandler(this,Z.DEBUG,...j)}log(...j){this._userLogHandler&&this._userLogHandler(this,Z.VERBOSE,...j),this._logHandler(this,Z.VERBOSE,...j)}info(...j){this._userLogHandler&&this._userLogHandler(this,Z.INFO,...j),this._logHandler(this,Z.INFO,...j)}warn(...j){this._userLogHandler&&this._userLogHandler(this,Z.WARN,...j),this._logHandler(this,Z.WARN,...j)}error(...j){this._userLogHandler&&this._userLogHandler(this,Z.ERROR,...j),this._logHandler(this,Z.ERROR,...j)}}function ce(B){f.forEach(j=>{j.setLogLevel(B)})}function ue(B,j){for(const Y of f){let $e=null;j&&j.level&&($e=P[j.level]),Y.userLogHandler=null===B?null:(Te,xe,...ke)=>{const de=ke.map(ve=>{if(null==ve)return null;if("string"==typeof ve)return ve;if("number"==typeof ve||"boolean"==typeof ve)return ve.toString();if(ve instanceof Error)return ve.message;try{return JSON.stringify(ve)}catch(Ye){return null}}).filter(ve=>ve).join(" ");xe>=(null!=$e?$e:Te.logLevel)&&B({level:Z[xe].toLowerCase(),message:de,args:ke,type:Te.name})}}}},5861:(it,Ce,k)=>{function f(P,oe,J,fe,re,ce,ue){try{var B=P[ce](ue),j=B.value}catch(Y){return void J(Y)}B.done?oe(j):Promise.resolve(j).then(fe,re)}function Z(P){return function(){var oe=this,J=arguments;return new Promise(function(fe,re){var ce=P.apply(oe,J);function ue(j){f(ce,fe,re,ue,B,"next",j)}function B(j){f(ce,fe,re,ue,B,"throw",j)}ue(void 0)})}}k.d(Ce,{Z:()=>Z})}},it=>{it(it.s=6989)}]);